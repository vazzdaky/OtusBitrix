this.BX=this.BX||{},function(e,t,s,i,a,r,n,l,o,c,d,p,b,u,v,h,g){"use strict";class m extends u.EventEmitter{constructor(e){super(),this.cache=new g.Cache.MemoryCache,this.setOptions(e),this.setEventNamespace("BX.Intranet.AvatarWidget.Content")}setOptions(e){return this.cache.set("options",e),this}getOptions(){return this.cache.get("options",{})}getLayout(){throw new Error("Must be implemented in a child class")}getConfig(){return{html:this.getLayout(),minHeight:"58px"}}}class P{static send(e){a.sendData({tool:P.TOOLS,category:P.CATEGORY,event:e})}static sendOpenProfile(){a.sendData({tool:P.TOOLS,category:P.CATEGORY_PROFILE,event:P.EVENT_PROFILE_VIEW,c_section:P.CATEGORY})}static sendOpenCommonSecurity(){a.sendData({tool:"settings",category:"common_security",event:"start_page",c_section:P.CATEGORY})}}P.TOOLS="intranet",P.CATEGORY="ava_menu",P.CATEGORY_PROFILE="user_profile",P.EVENT_OPEN_WIDGET="menu_open",P.EVENT_PROFILE_VIEW="profile_view",P.EVENT_CLICK_SALARY="click_salary",P.EVENT_CLICK_INSTALL_DESKTOP_APP="click_install_desktop_app",P.EVENT_CLICK_2FA_SETUP="click_2fa_setup",P.EVENT_CLICK_EXTENSION="click_extension",P.EVENT_CLICK_LOGOUT="click_logout",P.EVENT_CLICK_CHANGE_PORTAL_THEME="click_change_portal_theme",P.EVENT_CLICK_LOGIN_HISTORY="click_login_history",P.EVENT_CLICK_NETWORK="click_network",P.EVENT_CLICK_ACTIVITY_PORTAL_LIST="click_activity_portal_list";let L,_,O,w,H,B=e=>e;var f=babelHelpers.classPrivateFieldLooseKey("activeOnclick"),y=babelHelpers.classPrivateFieldLooseKey("getFullName"),F=babelHelpers.classPrivateFieldLooseKey("getStatus"),E=babelHelpers.classPrivateFieldLooseKey("getAvatar"),C=babelHelpers.classPrivateFieldLooseKey("getMoreMenuElement"),T=babelHelpers.classPrivateFieldLooseKey("getMoreMenu"),I=babelHelpers.classPrivateFieldLooseKey("getMoreMenuActionByItem"),A=babelHelpers.classPrivateFieldLooseKey("getWorkTime"),S=babelHelpers.classPrivateFieldLooseKey("getWorkTimeButton"),K=babelHelpers.classPrivateFieldLooseKey("setEventHandlers");class k extends m{constructor(...e){super(...e),Object.defineProperty(this,K,{value:V}),Object.defineProperty(this,S,{value:D}),Object.defineProperty(this,A,{value:R}),Object.defineProperty(this,I,{value:M}),Object.defineProperty(this,T,{value:X}),Object.defineProperty(this,C,{value:$}),Object.defineProperty(this,E,{value:j}),Object.defineProperty(this,F,{value:N}),Object.defineProperty(this,y,{value:x}),Object.defineProperty(this,f,{writable:!0,value:!0})}getOptions(){return super.getOptions()}getLayout(){return this.cache.remember("layout",(()=>{babelHelpers.classPrivateFieldLooseBase(this,K)[K]();return g.Tag.render(L||(L=B`
				<div onclick="${0}" class="intranet-avatar-widget-item__wrapper --column-format" data-id="bx-avatar-widget-content-main">
					<div class="intranet-avatar-widget-item-main__wrapper-head">
						<div class="intranet-avatar-widget-item__avatar">
							${0}
						</div>
						<div class="intranet-avatar-widget-item__info-wrapper">
							${0}
							${0}
						</div>
						<i class="ui-icon-set --chevron-right-m intranet-avatar-widget-item__chevron"/>
						${0}
					</div>
					${0}
				</div>
			`),(()=>{babelHelpers.classPrivateFieldLooseBase(this,f)[f]&&(BX.SidePanel.Instance.open(this.getOptions().url),P.sendOpenProfile())}),babelHelpers.classPrivateFieldLooseBase(this,E)[E]().getContainer(),babelHelpers.classPrivateFieldLooseBase(this,y)[y](),babelHelpers.classPrivateFieldLooseBase(this,F)[F](),babelHelpers.classPrivateFieldLooseBase(this,C)[C](),babelHelpers.classPrivateFieldLooseBase(this,A)[A]())}))}}function x(){return this.cache.remember("title",(()=>g.Tag.render(_||(_=B`
				<span class="intranet-avatar-widget-item__title">${0}</span>
			`),this.getOptions().fullName)))}function N(){return this.cache.remember("status",(()=>g.Tag.render(O||(O=B`
				<span class="intranet-avatar-widget-item__description">${0}</span>
			`),this.getOptions().status)))}function j(){return this.cache.remember("avatar",(()=>{const e={size:36,userpicPath:encodeURI(this.getOptions().userPhotoSrc)};let t=null;return t="extranet"===this.getOptions().role?new s.AvatarRoundExtranet(e):"collaber"===this.getOptions().role?new s.AvatarRoundGuest(e):new s.AvatarRound(e),t}))}function $(){return this.cache.remember("moreMenuElement",(()=>{const e=g.Tag.render(w||(w=B`
				<i class="ui-icon-set --more-l intranet-avatar-widget-item__more"/>
			`));return g.Event.bind(e,"click",(e=>{e.preventDefault(),e.stopPropagation(),babelHelpers.classPrivateFieldLooseBase(this,f)[f]&&babelHelpers.classPrivateFieldLooseBase(this,T)[T](e.target).toggle()})),e}))}function X(e){return this.cache.remember("moreMenu",(()=>{const t=[];return this.getOptions().menuItems.forEach((s=>{t.push({html:`\n\t\t\t\t\t\t<div class="intranet-avatar-widget-item-more-menu__wrapper" data-id="bx-avatar-widget-more-menu-item-${s.type}">\n\t\t\t\t\t\t\t<span class="intranet-avatar-widget-item-more-menu__title">${s.title}</span>\n\t\t\t\t\t\t\t<i class="intranet-avatar-widget-item-more-menu__icon ui-icon-set ${s.icon}"></i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`,onclick:()=>{babelHelpers.classPrivateFieldLooseBase(this,I)[I](s,e),babelHelpers.classPrivateFieldLooseBase(this,T)[T](e).close(),u.EventEmitter.emit("BX.Intranet.AvatarWidget.Popup:openChild")}})})),new v.Menu({bindElement:e,items:t})}))}function M(e){switch(e.type){case"settings":P.sendOpenCommonSecurity(),BX.SidePanel.Instance.open(e.url,{width:1100});break;case"admin":case"network":P.send(P.EVENT_CLICK_NETWORK),window.open(e.url,"_blank");break;case"desktop":P.send(P.EVENT_CLICK_ACTIVITY_PORTAL_LIST),new r.DesktopAccountList({bindElement:document.querySelector('[data-id="bx-avatar-widget"]')}).show();break;case"login-history":P.send(P.EVENT_CLICK_LOGIN_HISTORY),e.isAvailable?e.isConfigured?BX.SidePanel.Instance.open(e.url,{allowedChangeHistory:!1}):BX.Helper.show("redirect=detail&code=16615982"):d.FeaturePromotersRegistry.getPromoter({code:"limit_office_login_history"}).show()}}function R(){return this.cache.remember("worktime",(()=>this.getOptions().isTimemanAvailable&&babelHelpers.classPrivateFieldLooseBase(this,S)[S]()?g.Tag.render(H||(H=B`
				<div class="intranet-avatar-widget-item__worktime">
					${0}
				</div>
			`),babelHelpers.classPrivateFieldLooseBase(this,S)[S]()):null))}function D(){return this.cache.remember("button",(()=>{try{return(new i.WorkTimeButton).render()}catch(e){return console.error(e),null}}))}function V(){u.EventEmitter.subscribe("BX.Intranet.UserProfile:Avatar:changed",(({data:[{url:e,userId:t}]})=>{if(this.getOptions().id>0&&t&&this.getOptions().id.toString()===t.toString()){const t=encodeURI(e);this.getOptions().userPhotoSrc=t,babelHelpers.classPrivateFieldLooseBase(this,E)[E]().setUserPic(t)}})),u.EventEmitter.subscribe("BX.Intranet.UserProfile:Name:changed",(({data:[{fullName:e}]})=>{this.getOptions().fullName=e,babelHelpers.classPrivateFieldLooseBase(this,y)[y]().innerHTML=e})),u.EventEmitter.subscribe("BX.Intranet.AvatarWidget.Popup:enabledAutoHide",(()=>{babelHelpers.classPrivateFieldLooseBase(this,f)[f]=!0})),u.EventEmitter.subscribe("BX.Intranet.AvatarWidget.Popup:disabledAutoHide",(()=>{babelHelpers.classPrivateFieldLooseBase(this,f)[f]=!1}))}let W,U,G=e=>e;var q=babelHelpers.classPrivateFieldLooseKey("getFullState"),Y=babelHelpers.classPrivateFieldLooseKey("getSmallState"),z=babelHelpers.classPrivateFieldLooseKey("getButton");class Q extends m{constructor(...e){super(...e),Object.defineProperty(this,z,{value:ee}),Object.defineProperty(this,Y,{value:Z}),Object.defineProperty(this,q,{value:J})}getOptions(){return super.getOptions()}getConfig(){return this.getOptions().isSmall?{html:this.getLayout()}:{html:this.getLayout(),minHeight:"190px",flex:.5}}getLayout(){return this.cache.remember("layout",(()=>this.getOptions().isSmall?babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]():babelHelpers.classPrivateFieldLooseBase(this,q)[q]()))}}function J(){return this.cache.remember("fullState",(()=>g.Tag.render(W||(W=G`
				<div class="intranet-avatar-widget-item__wrapper --column-format" data-id="bx-avatar-widget-content-qr-auth">
					<span class="intranet-avatar-widget-item__title --qr-auth-full">${0}</span>
					<div class="intranet-avatar-widget-item-qr-auth__wrapper">
						<i class="intranet-avatar-widget-item-qr-auth__icon ui-icon-set --o-qr-code"></i>
					</div>
					${0}
				</div>
			`),this.getOptions().title,babelHelpers.classPrivateFieldLooseBase(this,z)[z]())))}function Z(){return this.cache.remember("smallState",(()=>g.Tag.render(U||(U=G`
				<div class="intranet-avatar-widget-item__wrapper --column-format" data-id="bx-avatar-widget-content-qr-auth">
					<div class="intranet-avatar-widget-item__wrapper-title">
						<i class="ui-icon-set --o-qr-code intranet-avatar-widget-item__icon"/>
						<span class="intranet-avatar-widget-item__title --qr-auth-small">${0}</span>
					</div>
					${0}
				</div>
			`),this.getOptions().title,babelHelpers.classPrivateFieldLooseBase(this,z)[z]())))}function ee(){return this.cache.remember("button",(()=>new l.Button({size:l.Button.Size.EXTRA_EXTRA_SMALL,text:this.getOptions().buttonTitle,useAirDesign:!0,style:l.AirButtonStyle.OUTLINE,noCaps:!0,wide:!0,onclick:()=>{var e,t;u.EventEmitter.emit("BX.Intranet.AvatarWidget.Popup:openChild"),new n.QrAuthorization({title:null==(e=this.getOptions().popup)?void 0:e.title,content:null==(t=this.getOptions().popup)?void 0:t.description,intent:"profile"}).show()}}).render()))}let te,se,ie,ae,re=e=>e;var ne=babelHelpers.classPrivateFieldLooseKey("isLinux"),le=babelHelpers.classPrivateFieldLooseKey("isMac"),oe=babelHelpers.classPrivateFieldLooseKey("isWindows"),ce=babelHelpers.classPrivateFieldLooseKey("getInstalledState"),de=babelHelpers.classPrivateFieldLooseKey("getDefaultState"),pe=babelHelpers.classPrivateFieldLooseKey("isInstalledState"),be=babelHelpers.classPrivateFieldLooseKey("getTitle"),ue=babelHelpers.classPrivateFieldLooseKey("getLink"),ve=babelHelpers.classPrivateFieldLooseKey("getButton"),he=babelHelpers.classPrivateFieldLooseKey("onClick"),ge=babelHelpers.classPrivateFieldLooseKey("getLinuxMenu");class me extends m{constructor(e){super(e),Object.defineProperty(this,ge,{value:fe}),Object.defineProperty(this,he,{value:Be}),Object.defineProperty(this,ve,{value:He}),Object.defineProperty(this,ue,{value:we}),Object.defineProperty(this,be,{value:Oe}),Object.defineProperty(this,pe,{value:_e}),Object.defineProperty(this,de,{value:Le}),Object.defineProperty(this,ce,{value:Pe}),Object.defineProperty(this,ne,{writable:!0,value:void 0}),Object.defineProperty(this,le,{writable:!0,value:void 0}),Object.defineProperty(this,oe,{writable:!0,value:void 0}),babelHelpers.classPrivateFieldLooseBase(this,ne)[ne]=g.Browser.isLinux(),babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]=g.Browser.isWin(),babelHelpers.classPrivateFieldLooseBase(this,le)[le]=g.Browser.isMac()}getConfig(){return{html:this.getLayout(),displayBlock:!this.getOptions().isSmall}}getLayout(){return this.cache.remember("layout",(()=>babelHelpers.classPrivateFieldLooseBase(this,pe)[pe]()?babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]():babelHelpers.classPrivateFieldLooseBase(this,de)[de]()))}}function Pe(){return this.cache.remember("installedState",(()=>g.Tag.render(te||(te=re`
				<div class="intranet-avatar-widget-item__wrapper --column-format" data-id="bx-avatar-widget-content-desktop">
					<div class="intranet-avatar-widget-item__wrapper-title">
						<i class="ui-icon-set --o-screen intranet-avatar-widget-item__icon"/>
						<div class="intranet-avatar-widget-item__info-wrapper">
							${0}
							${0}
						</div>
					</div>
					<div class="intranet-avatar-widget-item__status">
						<i class="ui-icon-set --check-s"></i>
						${0}
					</div>
				</div>
			`),babelHelpers.classPrivateFieldLooseBase(this,be)[be](),babelHelpers.classPrivateFieldLooseBase(this,ue)[ue](),this.getOptions().statusName)))}function Le(){return this.cache.remember("defaultState",(()=>g.Tag.render(se||(se=re`
				<div class="intranet-avatar-widget-item__wrapper --column-format" data-id="bx-avatar-widget-content-desktop">
					<div class="intranet-avatar-widget-item__wrapper-title">
						<i class="ui-icon-set --o-screen intranet-avatar-widget-item__icon --active"/>
						${0}
					</div>
					${0}
				</div>
			`),babelHelpers.classPrivateFieldLooseBase(this,be)[be](),babelHelpers.classPrivateFieldLooseBase(this,ve)[ve]())))}function _e(){var e,t,s;return!(!babelHelpers.classPrivateFieldLooseBase(this,ne)[ne]||null==(e=this.getOptions().installInfo)||!e.linux)||(!(!babelHelpers.classPrivateFieldLooseBase(this,le)[le]||null==(t=this.getOptions().installInfo)||!t.mac)||babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]&&(null==(s=this.getOptions().installInfo)?void 0:s.windows))}function Oe(){return this.cache.remember("title",(()=>{let e="";return babelHelpers.classPrivateFieldLooseBase(this,ne)[ne]?e=this.getOptions().title.linux:babelHelpers.classPrivateFieldLooseBase(this,le)[le]?e=this.getOptions().title.mac:babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]&&(e=this.getOptions().title.windows),g.Tag.render(ie||(ie=re`
				<div class="intranet-avatar-widget-item__title">
					<span class="intranet-avatar-widget-item__title-text">${0}</span>
				</div>
			`),e)}))}function we(){return this.cache.remember("link",(()=>g.Tag.render(ae||(ae=re`
				<span onclick="${0}" class="intranet-avatar-widget-item__link">
					${0}
				</span>
			`),(e=>babelHelpers.classPrivateFieldLooseBase(this,he)[he](e)),this.getOptions().linkName)))}function He(){return this.cache.remember("button",(()=>new l.Button({size:l.Button.Size.SMALL,text:this.getOptions().buttonName,useAirDesign:!0,style:l.AirButtonStyle.OUTLINE_ACCENT_2,noCaps:!0,wide:!0,onclick:e=>{babelHelpers.classPrivateFieldLooseBase(this,he)[he](e)}}).render()))}function Be(e){var t,s;P.send(P.EVENT_CLICK_INSTALL_DESKTOP_APP),babelHelpers.classPrivateFieldLooseBase(this,ne)[ne]?babelHelpers.classPrivateFieldLooseBase(this,ge)[ge](e).toggle():babelHelpers.classPrivateFieldLooseBase(this,le)[le]&&null!=(t=this.getOptions().downloadLinks)&&t.macos?document.location.href=this.getOptions().downloadLinks.macos:babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]&&null!=(s=this.getOptions().downloadLinks)&&s.windows&&(document.location.href=this.getOptions().downloadLinks.windows)}function fe(e){return this.cache.remember("linuxMenu",(()=>{let t=null,s=0,i=0;return e instanceof l.Button?(t=e.getContainer(),s=83):(t=e,s=5,i=10),new v.Menu({bindElement:t,items:[{text:this.getOptions().linuxMenuTitles.deb,href:this.getOptions().downloadLinks.linuxDeb,onclick:()=>{babelHelpers.classPrivateFieldLooseBase(this,ge)[ge]().close()}},{text:this.getOptions().linuxMenuTitles.rpm,href:this.getOptions().downloadLinks.linuxRpm,onclick:()=>{babelHelpers.classPrivateFieldLooseBase(this,ge)[ge]().close()}}],angle:!0,offsetLeft:s,offsetTop:i})}))}let ye,Fe,Ee=e=>e;var Ce=babelHelpers.classPrivateFieldLooseKey("getCanConnectState"),Te=babelHelpers.classPrivateFieldLooseKey("getConnectedState"),Ie=babelHelpers.classPrivateFieldLooseKey("getButton"),Ae=babelHelpers.classPrivateFieldLooseKey("openSettingsSlider");class Se extends m{constructor(...e){super(...e),Object.defineProperty(this,Ae,{value:Ne}),Object.defineProperty(this,Ie,{value:xe}),Object.defineProperty(this,Te,{value:ke}),Object.defineProperty(this,Ce,{value:Ke})}getOptions(){return super.getOptions()}getLayout(){return this.cache.remember("layout",(()=>this.getOptions().isActive?babelHelpers.classPrivateFieldLooseBase(this,Te)[Te]():babelHelpers.classPrivateFieldLooseBase(this,Ce)[Ce]()))}}function Ke(){return this.cache.remember("canConnectState",(()=>g.Tag.render(ye||(ye=Ee`
				<div class="intranet-avatar-widget-item__wrapper --column-format" data-id="bx-avatar-widget-content-otp">
					<div class="intranet-avatar-widget-item__wrapper-title">
						<i class="ui-icon-set --o-shield intranet-avatar-widget-item__icon --active"/>
						<span class="intranet-avatar-widget-item__title">${0}</span>
					</div>
					${0}
				</div>
			`),this.getOptions().title,babelHelpers.classPrivateFieldLooseBase(this,Ie)[Ie]())))}function ke(){return this.cache.remember("canConnectState",(()=>g.Tag.render(Fe||(Fe=Ee`
				<div class="intranet-avatar-widget-item__wrapper --column-format" data-id="bx-avatar-widget-content-otp">
					<div class="intranet-avatar-widget-item__wrapper-title">
						<i class="ui-icon-set --o-shield intranet-avatar-widget-item__icon"/>
						<div class="intranet-avatar-widget-item__info-wrapper">
							<span class="intranet-avatar-widget-item__title">${0}</span>
							<span onclick="${0}" class="intranet-avatar-widget-item__link">${0}</span>
						</div>
					</div>
					<div class="intranet-avatar-widget-item__status">
						<i class="ui-icon-set --check-s"></i>
						${0}
					</div>
				</div>
			`),this.getOptions().title,(()=>{babelHelpers.classPrivateFieldLooseBase(this,Ae)[Ae]()}),this.getOptions().settingsButtonTitle,this.getOptions().connectStatus)))}function xe(){return this.cache.remember("button",(()=>new l.Button({size:l.Button.Size.SMALL,text:this.getOptions().connectButtonTitle,useAirDesign:!0,style:l.AirButtonStyle.OUTLINE_ACCENT_2,noCaps:!0,wide:!0,onclick:()=>{babelHelpers.classPrivateFieldLooseBase(this,Ae)[Ae]()}}).render()))}function Ne(){P.send(P.EVENT_CLICK_2FA_SETUP),BX.SidePanel.Instance.open(this.getOptions().settingsPath,{width:1100})}let je,$e,Xe=e=>e;var Me=babelHelpers.classPrivateFieldLooseKey("getCounter"),Re=babelHelpers.classPrivateFieldLooseKey("getCounterWrapper"),De=babelHelpers.classPrivateFieldLooseKey("onClick");class Ve extends m{constructor(...e){super(...e),Object.defineProperty(this,De,{value:Ge}),Object.defineProperty(this,Re,{value:Ue}),Object.defineProperty(this,Me,{value:We})}getOptions(){return super.getOptions()}getLayout(){return this.cache.remember("layout",(()=>g.Tag.render(je||(je=Xe`
				<div onclick="${0}" class="intranet-avatar-widget-item__wrapper" data-id="bx-avatar-widget-content-sign-documents">
					<i class="ui-icon-set ${0} --o-file intranet-avatar-widget-item__icon"/>
					<div class="intranet-avatar-widget-item__info-wrapper">
						<span class="intranet-avatar-widget-item__title">
							${0}
						</span>
						<span class="intranet-avatar-widget-item__description">
							${0}
						</span>
					</div>
					${0}
					<i class="ui-icon-set --chevron-right-m intranet-avatar-widget-item__chevron"/>
				</div>
			`),(()=>{babelHelpers.classPrivateFieldLooseBase(this,De)[De]()}),babelHelpers.classPrivateFieldLooseBase(this,Me)[Me]()?"--active":"",this.getOptions().title,this.getOptions().description,babelHelpers.classPrivateFieldLooseBase(this,Re)[Re]())))}}function We(){return this.cache.remember("counter",(()=>Number(this.getOptions().counter)<1?null:(o.PULL.subscribe({moduleId:"sign",command:this.getOptions().counterEventName,callback:e=>{if(g.Type.isNumber(null==e?void 0:e.needActionCount))if(this.getOptions().counter=e.needActionCount,(null==e?void 0:e.needActionCount)>0)babelHelpers.classPrivateFieldLooseBase(this,Me)[Me]().update(e.needActionCount);else{babelHelpers.classPrivateFieldLooseBase(this,Me)[Me]().destroy();const e=this.getLayout().querySelector(".intranet-avatar-widget-item__icon");g.Dom.removeClass(e,"--active"),this.cache.delete("counter")}}}),new c.Counter({color:c.Counter.Color.DANGER,size:c.Counter.Size.MEDIUM,value:this.getOptions().counter}))))}function Ue(){return this.cache.remember("counterWrapper",(()=>{const e=babelHelpers.classPrivateFieldLooseBase(this,Me)[Me]();return g.Tag.render($e||($e=Xe`
				<div class="intranet-avatar-widget-item__counter">
					${0}
				</div>
			`),null==e?void 0:e.render())}))}function Ge(){if(this.getOptions().isLocked)return void d.FeaturePromotersRegistry.getPromoter({code:"limit_office_e_signature"}).show();const e=Number(g.Loc.getMessage("USER_ID"));e>0&&p.Router.openSlider(`${g.Loc.getMessage("SITE_DIR")}company/personal/user/${e}/sign?noRedirect=Y`,{width:1e3,cacheable:!1})}let qe,Ye,ze,Qe=e=>e;var Je=babelHelpers.classPrivateFieldLooseKey("salaryVacationMenu"),Ze=babelHelpers.classPrivateFieldLooseKey("getDisabledState"),et=babelHelpers.classPrivateFieldLooseKey("getActiveState"),tt=babelHelpers.classPrivateFieldLooseKey("getChevron");class st extends m{constructor(e){super(e),Object.defineProperty(this,tt,{value:rt}),Object.defineProperty(this,et,{value:at}),Object.defineProperty(this,Ze,{value:it}),Object.defineProperty(this,Je,{writable:!0,value:void 0}),babelHelpers.classPrivateFieldLooseBase(this,Je)[Je]=new b.SalaryVacationMenu}getOptions(){return super.getOptions()}getLayout(){return this.cache.remember("layout",(()=>babelHelpers.classPrivateFieldLooseBase(this,Je)[Je].isHidden()?null:babelHelpers.classPrivateFieldLooseBase(this,Je)[Je].isDisabled()?babelHelpers.classPrivateFieldLooseBase(this,Ze)[Ze]():babelHelpers.classPrivateFieldLooseBase(this,et)[et]()))}}function it(){return this.cache.remember("disabledState",(()=>(u.EventEmitter.emit("BX.Intranet.AvatarWidget.Popup:makeWithHint"),g.Tag.render(qe||(qe=Qe`
				<div
					class="intranet-avatar-widget-item__wrapper"
					${0}
					data-hint-no-icon
					data-hint-html
					data-hint-interactivity
					data-id="bx-avatar-widget-content-salary-vacation"
				 >
					<i class="ui-icon-set --o-favorite intranet-avatar-widget-item__icon"/>
					<span class="intranet-avatar-widget-item__title">${0}</span>
					${0}
				</div>
			`),babelHelpers.classPrivateFieldLooseBase(this,Je)[Je].isDisabled()?`data-hint="${this.getOptions().disabledHint}"`:"",this.getOptions().title,babelHelpers.classPrivateFieldLooseBase(this,tt)[tt]()))))}function at(){return this.cache.remember("activeState",(()=>g.Tag.render(Ye||(Ye=Qe`
				<div onclick="${0}" class="intranet-avatar-widget-item__wrapper" data-id="bx-avatar-widget-content-salary-vacation">
					<i class="ui-icon-set --active --o-favorite intranet-avatar-widget-item__icon"/>
					<span class="intranet-avatar-widget-item__title">${0}</span>
					${0}
				</div>
			`),(()=>{babelHelpers.classPrivateFieldLooseBase(this,Je)[Je].show(babelHelpers.classPrivateFieldLooseBase(this,tt)[tt]()),P.send(P.EVENT_CLICK_SALARY)}),this.getOptions().title,babelHelpers.classPrivateFieldLooseBase(this,tt)[tt]())))}function rt(){return this.cache.remember("chevron",(()=>g.Tag.render(ze||(ze=Qe`<i class="ui-icon-set --chevron-right-m intranet-avatar-widget-item__chevron"/>`))))}let nt,lt=e=>e;var ot=babelHelpers.classPrivateFieldLooseKey("bindElementDataId"),ct=babelHelpers.classPrivateFieldLooseKey("getMenu");class dt extends m{constructor(...e){super(...e),Object.defineProperty(this,ct,{value:pt}),Object.defineProperty(this,ot,{writable:!0,value:"intranet-avatar-widget-extensions"})}getOptions(){return super.getOptions()}getLayout(){return this.cache.remember("layout",(()=>g.Tag.render(nt||(nt=lt`
				<div onclick="${0}" class="intranet-avatar-widget-item__wrapper" data-id="bx-avatar-widget-content-extension">
					<i class="ui-icon-set --o-box intranet-avatar-widget-item__icon"/>
					<span class="intranet-avatar-widget-item__title">${0}</span>
					<i data-id="${0}" class="ui-icon-set --chevron-right-m intranet-avatar-widget-item__chevron"/>
				</div>
			`),(()=>{P.send(P.EVENT_CLICK_EXTENSION),babelHelpers.classPrivateFieldLooseBase(this,ct)[ct]().toggle()}),g.Text.encode(this.getOptions().text),babelHelpers.classPrivateFieldLooseBase(this,ot)[ot])))}}function pt(){return this.cache.remember("menu",(()=>{const e=new v.Menu({bindElement:document.querySelector(`[data-id="${babelHelpers.classPrivateFieldLooseBase(this,ot)[ot]}"]`),items:this.getOptions().items,angle:!0,cachable:!1,offsetLeft:10});return u.EventEmitter.subscribe("SidePanel.Slider:onOpenStart",(()=>{e.close()})),e}))}let bt,ut=e=>e;class vt extends m{getOptions(){return super.getOptions()}getLayout(){return this.cache.remember("layout",(()=>g.Tag.render(bt||(bt=ut`
				<div onclick="${0}" class="intranet-avatar-widget-item__wrapper --pointer" data-id="bx-avatar-widget-content-logout">
					<i class="ui-icon-set --o-log-out intranet-avatar-widget-item__icon"/>
					<span class="intranet-avatar-widget-item__title">${0}</span>
				</div>
			`),(()=>{if(P.send(P.EVENT_CLICK_LOGOUT),h.DesktopApi.isDesktop())h.DesktopApi.logout();else{const e=new g.Uri(window.location.pathname);e.removeQueryParam(this.getOptions().removeQueryParam);const t=new g.Uri(this.getOptions().path);t.setQueryParam("sessid",BX.bitrix_sessid()),t.setQueryParam("backurl",encodeURIComponent(e.toString())),document.location.href=t}}),this.getOptions().title)))}}let ht,gt=e=>e;class mt extends m{getOptions(){return super.getOptions()}getLayout(){return this.cache.remember("layout",(()=>g.Tag.render(ht||(ht=gt`
				<div onclick="${0}" class="intranet-avatar-widget-item__wrapper --pointer" data-id="bx-avatar-widget-content-settings">
					<i class="ui-icon-set --o-image intranet-avatar-widget-item__icon"/>
					<span class="intranet-avatar-widget-item__title">${0}</span>
				</div>
			`),(()=>{P.send(P.EVENT_CLICK_CHANGE_PORTAL_THEME),BX.Intranet.Bitrix24.ThemePicker.Singleton.showDialog(!1)}),this.getOptions().title)))}}var Pt=babelHelpers.classPrivateFieldLooseKey("cache"),Lt=babelHelpers.classPrivateFieldLooseKey("popupsShowAfterBasePopup"),_t=babelHelpers.classPrivateFieldLooseKey("getContent"),Ot=babelHelpers.classPrivateFieldLooseKey("getMainContent"),wt=babelHelpers.classPrivateFieldLooseKey("getSignDocumentsContent"),Ht=babelHelpers.classPrivateFieldLooseKey("getSalaryVacationContent"),Bt=babelHelpers.classPrivateFieldLooseKey("getQrAuthContent"),ft=babelHelpers.classPrivateFieldLooseKey("getDesktopContent"),yt=babelHelpers.classPrivateFieldLooseKey("getOtpContent"),Ft=babelHelpers.classPrivateFieldLooseKey("getExtensionContent"),Et=babelHelpers.classPrivateFieldLooseKey("getThemeContent"),Ct=babelHelpers.classPrivateFieldLooseKey("getLogoutContent"),Tt=babelHelpers.classPrivateFieldLooseKey("setAutoHideEventHandlers");class It extends u.EventEmitter{constructor(e){super(),Object.defineProperty(this,Tt,{value:Rt}),Object.defineProperty(this,Ct,{value:Mt}),Object.defineProperty(this,Et,{value:Xt}),Object.defineProperty(this,Ft,{value:$t}),Object.defineProperty(this,yt,{value:jt}),Object.defineProperty(this,ft,{value:Nt}),Object.defineProperty(this,Bt,{value:xt}),Object.defineProperty(this,Ht,{value:kt}),Object.defineProperty(this,wt,{value:Kt}),Object.defineProperty(this,Ot,{value:St}),Object.defineProperty(this,_t,{value:At}),Object.defineProperty(this,Pt,{writable:!0,value:new g.Cache.MemoryCache}),Object.defineProperty(this,Lt,{writable:!0,value:[]}),this.setOptions(e),this.setEventNamespace("BX.Intranet.AvatarWidget.Popup"),this.setEventHandlers()}setOptions(e){babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt].set("options",e)}getOptions(){return babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt].get("options",{})}show(){this.getBasePopup().show(),this.emit("show"),P.send(P.EVENT_OPEN_WIDGET)}close(){this.getBasePopup().close()}getBasePopup(){return babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt].remember("popup",(()=>{this.emit("beforeInit");const e=new t.PopupComponentsMaker({target:this.getOptions().target,width:450,content:babelHelpers.classPrivateFieldLooseBase(this,_t)[_t](),popupLoader:this.getOptions().loader});return babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt].set("popup",e),this.emit("afterInit"),e}))}setEventHandlers(){this.subscribe("beforeInit",(()=>{u.EventEmitter.subscribe("BX.Intranet.AvatarWidget.Popup:makeWithHint",(()=>{this.subscribe("afterInit",(()=>{BX.UI.Hint.init(this.getBasePopup().getPopup().getPopupContainer())}))})),this.subscribe("afterInit",(()=>{babelHelpers.classPrivateFieldLooseBase(this,Tt)[Tt]();const e=()=>{this.close()};u.EventEmitter.subscribe("SidePanel.Slider:onOpenStart",e),u.EventEmitter.subscribe("BX.Intranet.AvatarWidget.Popup:openChild",e)}))}))}}function At(){return babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt].remember("content",(()=>{var e,t,s,i,a,r;const n=[babelHelpers.classPrivateFieldLooseBase(this,Ot)[Ot]().getConfig()];return null!=(e=this.getOptions().content)&&null!=(t=e.signDocuments)&&t.isAvailable&&n.push(babelHelpers.classPrivateFieldLooseBase(this,wt)[wt]().getConfig(),babelHelpers.classPrivateFieldLooseBase(this,Ht)[Ht]().getConfig()),null!=(s=this.getOptions().content)&&null!=(i=s.otp)&&i.isAvailable?n.push({html:[babelHelpers.classPrivateFieldLooseBase(this,Bt)[Bt]().getConfig(),{html:[babelHelpers.classPrivateFieldLooseBase(this,ft)[ft]().getConfig(),babelHelpers.classPrivateFieldLooseBase(this,yt)[yt]().getConfig()]}]}):n.push({html:[babelHelpers.classPrivateFieldLooseBase(this,Bt)[Bt]().getConfig(),babelHelpers.classPrivateFieldLooseBase(this,ft)[ft]().getConfig()]}),null!=(a=this.getOptions().content)&&null!=(r=a.extension)&&r.isAvailable&&n.push(babelHelpers.classPrivateFieldLooseBase(this,Ft)[Ft]().getConfig()),n.push({html:[babelHelpers.classPrivateFieldLooseBase(this,Et)[Et]().getConfig(),babelHelpers.classPrivateFieldLooseBase(this,Ct)[Ct]().getConfig()]}),n}))}function St(){return babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt].remember("mainContent",(()=>new k({...this.getOptions().content.main})))}function Kt(){return babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt].remember("myDocumentsContent",(()=>new Ve({...this.getOptions().content.signDocuments})))}function kt(){return babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt].remember("salaryVacationContent",(()=>new st({...this.getOptions().content.salaryVacation})))}function xt(){return babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt].remember("qrAuthContent",(()=>{var e;return new Q({isSmall:!(null!=(e=this.getOptions().content.otp)&&e.isAvailable),...this.getOptions().content.qrAuth})}))}function Nt(){return babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt].remember("desktopContent",(()=>{var e;return new me({isSmall:!(null!=(e=this.getOptions().content.otp)&&e.isAvailable),...this.getOptions().content.desktop})}))}function jt(){return babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt].remember("otpContent",(()=>new Se({...this.getOptions().content.otp})))}function $t(){return babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt].remember("extensionContent",(()=>new dt({...this.getOptions().content.extension})))}function Xt(){return babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt].remember("settingsContent",(()=>new mt({...this.getOptions().content.theme})))}function Mt(){return babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt].remember("logoutContent",(()=>new vt({...this.getOptions().content.logout})))}function Rt(){u.EventEmitter.subscribe("BX.Main.Popup:onShow",(e=>{if(!this.getBasePopup().getPopup().isShown())return;const t=e.getTarget();if(t&&t.getId()===this.getBasePopup().getPopup().getId())this.getBasePopup().getPopup().setAutoHide(!0),u.EventEmitter.emit("BX.Intranet.AvatarWidget.Popup:enabledAutoHide");else{this.getBasePopup().getPopup().setAutoHide(!1),u.EventEmitter.emit("BX.Intranet.AvatarWidget.Popup:disabledAutoHide"),babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt].includes(t)||babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt].push(t);const e=()=>{babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt]=babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt].filter((e=>e!==t)),0===babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt].length&&(this.getBasePopup().getPopup().setAutoHide(!0),u.EventEmitter.emit("BX.Intranet.AvatarWidget.Popup:enabledAutoHide"))};t.subscribeOnce("onClose",e),t.subscribeOnce("onDestroy",e)}}))}var Dt=babelHelpers.classPrivateFieldLooseKey("cache"),Vt=babelHelpers.classPrivateFieldLooseKey("instance"),Wt=babelHelpers.classPrivateFieldLooseKey("getPopup");class Ut{constructor(){Object.defineProperty(this,Wt,{value:Gt}),Object.defineProperty(this,Dt,{writable:!0,value:new g.Cache.MemoryCache})}static getInstance(){return babelHelpers.classPrivateFieldLooseBase(this,Vt)[Vt]||(babelHelpers.classPrivateFieldLooseBase(this,Vt)[Vt]=new this),babelHelpers.classPrivateFieldLooseBase(this,Vt)[Vt]}show(){babelHelpers.classPrivateFieldLooseBase(this,Wt)[Wt]().getBasePopup().isShown()||babelHelpers.classPrivateFieldLooseBase(this,Wt)[Wt]().show()}setOptions(e){return babelHelpers.classPrivateFieldLooseBase(this,Dt)[Dt].set("options",e),this}getOptions(){return babelHelpers.classPrivateFieldLooseBase(this,Dt)[Dt].get("options",{})}}function Gt(){return babelHelpers.classPrivateFieldLooseBase(this,Dt)[Dt].remember("popup",(()=>new It({target:this.getOptions().buttonWrapper,loader:this.getOptions().loader,content:{...this.getOptions().data}})))}Object.defineProperty(Ut,Vt,{writable:!0,value:void 0}),e.AvatarWidget=Ut}(this.BX.Intranet=this.BX.Intranet||{},BX.UI,BX.UI,BX.Timeman,BX.UI.Analytics,BX.Intranet,BX.UI,BX.UI,BX,BX.UI,BX.UI,BX.Crm,BX.HumanResources.HcmLink,BX.Event,BX.Main,BX.Messenger.v2.Lib,BX);
//# sourceMappingURL=avatar-widget.bundle.map.js