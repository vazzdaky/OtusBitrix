{"version":3,"file":"avatar-widget.bundle.js","sources":["../src/content/content.js","../src/analytics.js","../src/content/main-content.js","../src/content/qr-auth-content.js","../src/content/desktop-content.js","../src/content/otp-content.js","../src/content/sign-documents-content.js","../src/content/salary-vacation-content.js","../src/content/extension-content.js","../src/content/logout-content.js","../src/content/theme-content.js","../src/popup.js","../src/avatar-widget.js"],"sourcesContent":["import { EventEmitter } from 'main.core.events';\nimport { Cache } from 'main.core';\nimport type { ConfigOptions, BaseContentOptions } from '../types';\n\nexport class Content extends EventEmitter\n{\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(options: BaseContentOptions)\n\t{\n\t\tsuper();\n\t\tthis.setOptions(options);\n\t\tthis.setEventNamespace('BX.Intranet.AvatarWidget.Content');\n\t}\n\n\tsetOptions(options: BaseContentOptions): Content\n\t{\n\t\tthis.cache.set('options', options);\n\n\t\treturn this;\n\t}\n\n\tgetOptions(): BaseContentOptions\n\t{\n\t\treturn this.cache.get('options', {});\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\tthrow new Error('Must be implemented in a child class');\n\t}\n\n\tgetConfig(): ConfigOptions\n\t{\n\t\treturn {\n\t\t\thtml: this.getLayout(),\n\t\t\tminHeight: '58px',\n\t\t};\n\t}\n}\n","import { sendData } from 'ui.analytics';\n\nexport class Analytics\n{\n\tstatic TOOLS = 'intranet';\n\tstatic CATEGORY = 'ava_menu';\n\tstatic CATEGORY_PROFILE = 'user_profile';\n\tstatic EVENT_OPEN_WIDGET = 'menu_open';\n\tstatic EVENT_PROFILE_VIEW = 'profile_view';\n\tstatic EVENT_CLICK_SALARY = 'click_salary';\n\tstatic EVENT_CLICK_INSTALL_DESKTOP_APP = 'click_install_desktop_app';\n\tstatic EVENT_CLICK_2FA_SETUP = 'click_2fa_setup';\n\tstatic EVENT_CLICK_EXTENSION = 'click_extension';\n\tstatic EVENT_CLICK_LOGOUT = 'click_logout';\n\tstatic EVENT_CLICK_CHANGE_PORTAL_THEME = 'click_change_portal_theme';\n\tstatic EVENT_CLICK_LOGIN_HISTORY = 'click_login_history';\n\tstatic EVENT_CLICK_NETWORK = 'click_network';\n\tstatic EVENT_CLICK_ACTIVITY_PORTAL_LIST = 'click_activity_portal_list';\n\n\tstatic send(event: string): void\n\t{\n\t\tsendData({\n\t\t\ttool: Analytics.TOOLS,\n\t\t\tcategory: Analytics.CATEGORY,\n\t\t\tevent,\n\t\t});\n\t}\n\n\tstatic sendOpenProfile(): void\n\t{\n\t\tsendData({\n\t\t\ttool: Analytics.TOOLS,\n\t\t\tcategory: Analytics.CATEGORY_PROFILE,\n\t\t\tevent: Analytics.EVENT_PROFILE_VIEW,\n\t\t\tc_section: Analytics.CATEGORY,\n\t\t});\n\t}\n\n\tstatic sendOpenCommonSecurity(): void\n\t{\n\t\tsendData({\n\t\t\ttool: 'settings',\n\t\t\tcategory: 'common_security',\n\t\t\tevent: 'start_page',\n\t\t\tc_section: Analytics.CATEGORY,\n\t\t});\n\t}\n}\n","import { Tag, Event } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Menu } from 'main.popup';\nimport { AvatarRound, AvatarRoundExtranet, AvatarRoundGuest, AvatarBase } from 'ui.avatar';\nimport { FeaturePromotersRegistry } from 'ui.info-helper';\nimport { WorkTimeButton } from 'timeman.work-time-button';\nimport { Content } from './content';\nimport { Analytics } from '../analytics';\nimport type { MainContentOptions } from '../types';\nimport { DesktopAccountList } from 'intranet.desktop-account-list';\n\nexport class MainContent extends Content\n{\n\t#activeOnclick: boolean = true;\n\n\tgetOptions(): MainContentOptions\n\t{\n\t\treturn super.getOptions();\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tthis.#setEventHandlers();\n\t\t\tconst onclick = () => {\n\t\t\t\tif (this.#activeOnclick)\n\t\t\t\t{\n\t\t\t\t\tBX.SidePanel.Instance.open(this.getOptions().url);\n\t\t\t\t\tAnalytics.sendOpenProfile();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div onclick=\"${onclick}\" class=\"intranet-avatar-widget-item__wrapper --column-format\" data-id=\"bx-avatar-widget-content-main\">\n\t\t\t\t\t<div class=\"intranet-avatar-widget-item-main__wrapper-head\">\n\t\t\t\t\t\t<div class=\"intranet-avatar-widget-item__avatar\">\n\t\t\t\t\t\t\t${this.#getAvatar().getContainer()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"intranet-avatar-widget-item__info-wrapper\">\n\t\t\t\t\t\t\t${this.#getFullName()}\n\t\t\t\t\t\t\t${this.#getStatus()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<i class=\"ui-icon-set --chevron-right-m intranet-avatar-widget-item__chevron\"/>\n\t\t\t\t\t\t${this.#getMoreMenuElement()}\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.#getWorkTime()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getFullName(): HTMLElement\n\t{\n\t\treturn this.cache.remember('title', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span class=\"intranet-avatar-widget-item__title\">${this.getOptions().fullName}</span>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getStatus(): HTMLElement\n\t{\n\t\treturn this.cache.remember('status', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span class=\"intranet-avatar-widget-item__description\">${this.getOptions().status}</span>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getAvatar(): AvatarBase\n\t{\n\t\treturn this.cache.remember('avatar', () => {\n\t\t\tconst options = {\n\t\t\t\tsize: 36,\n\t\t\t\tuserpicPath: encodeURI(this.getOptions().userPhotoSrc),\n\t\t\t};\n\t\t\tlet avatar = null;\n\n\t\t\tif (this.getOptions().role === 'extranet')\n\t\t\t{\n\t\t\t\tavatar = new AvatarRoundExtranet(options);\n\t\t\t}\n\t\t\telse if (this.getOptions().role === 'collaber')\n\t\t\t{\n\t\t\t\tavatar = new AvatarRoundGuest(options);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tavatar = new AvatarRound(options);\n\t\t\t}\n\n\t\t\treturn avatar;\n\t\t});\n\t}\n\n\t#getMoreMenuElement(): HTMLElement\n\t{\n\t\treturn this.cache.remember('moreMenuElement', () => {\n\t\t\tconst element = Tag.render`\n\t\t\t\t<i class=\"ui-icon-set --more-l intranet-avatar-widget-item__more\"/>\n\t\t\t`;\n\t\t\tEvent.bind(element, 'click', (event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tif (this.#activeOnclick)\n\t\t\t\t{\n\t\t\t\t\tthis.#getMoreMenu(event.target).toggle();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn element;\n\t\t});\n\t}\n\n\t#getMoreMenu(target: HTMLElement): Menu\n\t{\n\t\treturn this.cache.remember('moreMenu', () => {\n\t\t\tconst items = [];\n\n\t\t\tthis.getOptions().menuItems.forEach((item) => {\n\t\t\t\titems.push({\n\t\t\t\t\thtml: `\n\t\t\t\t\t\t<div class=\"intranet-avatar-widget-item-more-menu__wrapper\" data-id=\"bx-avatar-widget-more-menu-item-${item.type}\">\n\t\t\t\t\t\t\t<span class=\"intranet-avatar-widget-item-more-menu__title\">${item.title}</span>\n\t\t\t\t\t\t\t<i class=\"intranet-avatar-widget-item-more-menu__icon ui-icon-set ${item.icon}\"></i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`,\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.#getMoreMenuActionByItem(item, target);\n\t\t\t\t\t\tthis.#getMoreMenu(target).close();\n\t\t\t\t\t\tEventEmitter.emit('BX.Intranet.AvatarWidget.Popup:openChild');\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn new Menu({\n\t\t\t\tbindElement: target,\n\t\t\t\titems,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getMoreMenuActionByItem(item: Object): void\n\t{\n\t\t// eslint-disable-next-line default-case\n\t\tswitch (item.type)\n\t\t{\n\t\t\tcase 'settings': {\n\t\t\t\tAnalytics.sendOpenCommonSecurity();\n\t\t\t\tBX.SidePanel.Instance.open(item.url, { width: 1100 });\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'admin':\n\t\t\tcase 'network': {\n\t\t\t\tAnalytics.send(Analytics.EVENT_CLICK_NETWORK);\n\t\t\t\twindow.open(item.url, '_blank');\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'desktop': {\n\t\t\t\tAnalytics.send(Analytics.EVENT_CLICK_ACTIVITY_PORTAL_LIST);\n\t\t\t\t(new DesktopAccountList({ bindElement: document.querySelector('[data-id=\"bx-avatar-widget\"]') })).show();\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'login-history': {\n\t\t\t\tAnalytics.send(Analytics.EVENT_CLICK_LOGIN_HISTORY);\n\n\t\t\t\tif (!item.isAvailable)\n\t\t\t\t{\n\t\t\t\t\tFeaturePromotersRegistry.getPromoter({ code: 'limit_office_login_history' }).show();\n\t\t\t\t}\n\t\t\t\telse if (item.isConfigured)\n\t\t\t\t{\n\t\t\t\t\tBX.SidePanel.Instance.open(item.url, { allowedChangeHistory: false });\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tBX.Helper.show('redirect=detail&code=16615982');\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t#getWorkTime(): ?HTMLElement\n\t{\n\t\treturn this.cache.remember('worktime', () => {\n\t\t\tif (!this.getOptions().isTimemanAvailable)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif (!this.#getWorkTimeButton())\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"intranet-avatar-widget-item__worktime\">\n\t\t\t\t\t${this.#getWorkTimeButton()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getWorkTimeButton(): ?HTMLElement\n\t{\n\t\treturn this.cache.remember('button', () => {\n\t\t\ttry\n\t\t\t{\n\t\t\t\treturn (new WorkTimeButton()).render();\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tconsole.error(error);\n\n\t\t\t\treturn null;\n\t\t\t}\n\t\t});\n\t}\n\n\t#setEventHandlers(): void\n\t{\n\t\tEventEmitter.subscribe(\n\t\t\t'BX.Intranet.UserProfile:Avatar:changed',\n\t\t\t({ data: [{ url, userId }] }) => {\n\t\t\t\tif (this.getOptions().id > 0 && userId && this.getOptions().id.toString() === userId.toString())\n\t\t\t\t{\n\t\t\t\t\tconst preparedUrl = encodeURI(url);\n\t\t\t\t\tthis.getOptions().userPhotoSrc = preparedUrl;\n\t\t\t\t\tthis.#getAvatar().setUserPic(preparedUrl);\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\t\tEventEmitter.subscribe(\n\t\t\t'BX.Intranet.UserProfile:Name:changed',\n\t\t\t({ data: [{ fullName }] }) => {\n\t\t\t\tthis.getOptions().fullName = fullName;\n\t\t\t\tthis.#getFullName().innerHTML = fullName;\n\t\t\t},\n\t\t);\n\t\tEventEmitter.subscribe('BX.Intranet.AvatarWidget.Popup:enabledAutoHide', () => {\n\t\t\tthis.#activeOnclick = true;\n\t\t});\n\t\tEventEmitter.subscribe('BX.Intranet.AvatarWidget.Popup:disabledAutoHide', () => {\n\t\t\tthis.#activeOnclick = false;\n\t\t});\n\t}\n}\n","import { Tag } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { QrAuthorization } from 'ui.qrauthorization';\nimport { Content } from './content';\nimport { AirButtonStyle, Button } from 'ui.buttons';\nimport type { QrAuthContentOptions } from '../types';\n\nexport class QrAuthContent extends Content\n{\n\tgetOptions(): QrAuthContentOptions\n\t{\n\t\treturn super.getOptions();\n\t}\n\n\tgetConfig(): Object\n\t{\n\t\tif (this.getOptions().isSmall)\n\t\t{\n\t\t\treturn {\n\t\t\t\thtml: this.getLayout(),\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\thtml: this.getLayout(),\n\t\t\tminHeight: '190px',\n\t\t\tflex: 0.5,\n\t\t};\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tif (this.getOptions().isSmall)\n\t\t\t{\n\t\t\t\treturn this.#getSmallState();\n\t\t\t}\n\n\t\t\treturn this.#getFullState();\n\t\t});\n\t}\n\n\t#getFullState(): HTMLElement\n\t{\n\t\treturn this.cache.remember('fullState', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"intranet-avatar-widget-item__wrapper --column-format\" data-id=\"bx-avatar-widget-content-qr-auth\">\n\t\t\t\t\t<span class=\"intranet-avatar-widget-item__title --qr-auth-full\">${this.getOptions().title}</span>\n\t\t\t\t\t<div class=\"intranet-avatar-widget-item-qr-auth__wrapper\">\n\t\t\t\t\t\t<i class=\"intranet-avatar-widget-item-qr-auth__icon ui-icon-set --o-qr-code\"></i>\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.#getButton()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getSmallState(): HTMLElement\n\t{\n\t\treturn this.cache.remember('smallState', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"intranet-avatar-widget-item__wrapper --column-format\" data-id=\"bx-avatar-widget-content-qr-auth\">\n\t\t\t\t\t<div class=\"intranet-avatar-widget-item__wrapper-title\">\n\t\t\t\t\t\t<i class=\"ui-icon-set --o-qr-code intranet-avatar-widget-item__icon\"/>\n\t\t\t\t\t\t<span class=\"intranet-avatar-widget-item__title --qr-auth-small\">${this.getOptions().title}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.#getButton()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getButton(): HTMLElement\n\t{\n\t\treturn this.cache.remember('button', () => {\n\t\t\tconst onclick = () => {\n\t\t\t\tEventEmitter.emit('BX.Intranet.AvatarWidget.Popup:openChild');\n\t\t\t\t(new QrAuthorization({\n\t\t\t\t\ttitle: this.getOptions().popup?.title,\n\t\t\t\t\tcontent: this.getOptions().popup?.description,\n\t\t\t\t\tintent: 'profile',\n\t\t\t\t})).show();\n\t\t\t};\n\t\t\tconst button = new Button({\n\t\t\t\tsize: Button.Size.EXTRA_EXTRA_SMALL,\n\t\t\t\ttext: this.getOptions().buttonTitle,\n\t\t\t\tuseAirDesign: true,\n\t\t\t\tstyle: AirButtonStyle.OUTLINE,\n\t\t\t\tnoCaps: true,\n\t\t\t\twide: true,\n\t\t\t\tonclick,\n\t\t\t});\n\n\t\t\treturn button.render();\n\t\t});\n\t}\n}\n","import { Browser, Tag } from 'main.core';\nimport { Menu } from 'main.popup';\nimport { AirButtonStyle, Button } from 'ui.buttons';\nimport { Content } from './content';\nimport { Analytics } from '../analytics';\nimport type { DesktopContentOptions, ConfigOptions } from '../types';\n\nexport class DesktopContent extends Content\n{\n\t#isLinux: boolean;\n\t#isMac: boolean;\n\t#isWindows: boolean;\n\n\tconstructor(options: DesktopContentOptions)\n\t{\n\t\tsuper(options);\n\t\tthis.#isLinux = Browser.isLinux();\n\t\tthis.#isWindows = Browser.isWin();\n\t\tthis.#isMac = Browser.isMac();\n\t}\n\n\tgetConfig(): ConfigOptions\n\t{\n\t\treturn {\n\t\t\thtml: this.getLayout(),\n\t\t\tdisplayBlock: !this.getOptions().isSmall,\n\t\t};\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tif (this.#isInstalledState())\n\t\t\t{\n\t\t\t\treturn this.#getInstalledState();\n\t\t\t}\n\n\t\t\treturn this.#getDefaultState();\n\t\t});\n\t}\n\n\t#getInstalledState(): HTMLElement\n\t{\n\t\treturn this.cache.remember('installedState', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"intranet-avatar-widget-item__wrapper --column-format\" data-id=\"bx-avatar-widget-content-desktop\">\n\t\t\t\t\t<div class=\"intranet-avatar-widget-item__wrapper-title\">\n\t\t\t\t\t\t<i class=\"ui-icon-set --o-screen intranet-avatar-widget-item__icon\"/>\n\t\t\t\t\t\t<div class=\"intranet-avatar-widget-item__info-wrapper\">\n\t\t\t\t\t\t\t${this.#getTitle()}\n\t\t\t\t\t\t\t${this.#getLink()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"intranet-avatar-widget-item__status\">\n\t\t\t\t\t\t<i class=\"ui-icon-set --check-s\"></i>\n\t\t\t\t\t\t${this.getOptions().statusName}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getDefaultState(): HTMLElement\n\t{\n\t\treturn this.cache.remember('defaultState', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"intranet-avatar-widget-item__wrapper --column-format\" data-id=\"bx-avatar-widget-content-desktop\">\n\t\t\t\t\t<div class=\"intranet-avatar-widget-item__wrapper-title\">\n\t\t\t\t\t\t<i class=\"ui-icon-set --o-screen intranet-avatar-widget-item__icon --active\"/>\n\t\t\t\t\t\t${this.#getTitle()}\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.#getButton()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#isInstalledState(): boolean\n\t{\n\t\tif (this.#isLinux && this.getOptions().installInfo?.linux)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this.#isMac && this.getOptions().installInfo?.mac)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\treturn this.#isWindows && this.getOptions().installInfo?.windows;\n\t}\n\n\t#getTitle(): HTMLElement\n\t{\n\t\treturn this.cache.remember('title', () => {\n\t\t\tlet title = '';\n\n\t\t\tif (this.#isLinux)\n\t\t\t{\n\t\t\t\ttitle = this.getOptions().title.linux;\n\t\t\t}\n\t\t\telse if (this.#isMac)\n\t\t\t{\n\t\t\t\ttitle = this.getOptions().title.mac;\n\t\t\t}\n\t\t\telse if (this.#isWindows)\n\t\t\t{\n\t\t\t\ttitle = this.getOptions().title.windows;\n\t\t\t}\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"intranet-avatar-widget-item__title\">\n\t\t\t\t\t<span class=\"intranet-avatar-widget-item__title-text\">${title}</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getLink(): HTMLElement\n\t{\n\t\treturn this.cache.remember('link', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span onclick=\"${(event) => this.#onClick(event)}\" class=\"intranet-avatar-widget-item__link\">\n\t\t\t\t\t${this.getOptions().linkName}\n\t\t\t\t</span>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getButton(): HTMLElement\n\t{\n\t\treturn this.cache.remember('button', () => {\n\t\t\tconst button = new Button({\n\t\t\t\tsize: Button.Size.SMALL,\n\t\t\t\ttext: this.getOptions().buttonName,\n\t\t\t\tuseAirDesign: true,\n\t\t\t\tstyle: AirButtonStyle.OUTLINE_ACCENT_2,\n\t\t\t\tnoCaps: true,\n\t\t\t\twide: true,\n\t\t\t\tonclick: (event) => {\n\t\t\t\t\tthis.#onClick(event);\n\t\t\t\t},\n\t\t\t});\n\n\t\t\treturn button.render();\n\t\t});\n\t}\n\n\t#onClick(target): ?string\n\t{\n\t\tAnalytics.send(Analytics.EVENT_CLICK_INSTALL_DESKTOP_APP);\n\n\t\tif (this.#isLinux)\n\t\t{\n\t\t\tthis.#getLinuxMenu(target).toggle();\n\t\t}\n\t\telse if (this.#isMac && this.getOptions().downloadLinks?.macos)\n\t\t{\n\t\t\tdocument.location.href = this.getOptions().downloadLinks.macos;\n\t\t}\n\t\telse if (this.#isWindows && this.getOptions().downloadLinks?.windows)\n\t\t{\n\t\t\tdocument.location.href = this.getOptions().downloadLinks.windows;\n\t\t}\n\t}\n\n\t#getLinuxMenu(target: Button | HTMLElement): Menu\n\t{\n\t\treturn this.cache.remember('linuxMenu', () => {\n\t\t\tlet bindElement = null;\n\t\t\tlet offsetLeft = 0;\n\t\t\tlet offsetTop = 0;\n\n\t\t\tif (target instanceof Button)\n\t\t\t{\n\t\t\t\tbindElement = target.getContainer();\n\t\t\t\toffsetLeft = 83;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tbindElement = target;\n\t\t\t\toffsetLeft = 5;\n\t\t\t\toffsetTop = 10;\n\t\t\t}\n\n\t\t\treturn new Menu({\n\t\t\t\tbindElement,\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: this.getOptions().linuxMenuTitles.deb,\n\t\t\t\t\t\thref: this.getOptions().downloadLinks.linuxDeb,\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis.#getLinuxMenu().close();\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: this.getOptions().linuxMenuTitles.rpm,\n\t\t\t\t\t\thref: this.getOptions().downloadLinks.linuxRpm,\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis.#getLinuxMenu().close();\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\n\t\t\t\t],\n\t\t\t\tangle: true,\n\t\t\t\toffsetLeft,\n\t\t\t\toffsetTop,\n\t\t\t});\n\t\t});\n\t}\n}\n","import { Tag } from 'main.core';\nimport { AirButtonStyle, Button } from 'ui.buttons';\nimport { Content } from './content';\nimport { Analytics } from '../analytics';\nimport type { OtpContentOptions } from '../types';\n\nexport class OtpContent extends Content\n{\n\tgetOptions(): OtpContentOptions\n\t{\n\t\treturn super.getOptions();\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tif (this.getOptions().isActive)\n\t\t\t{\n\t\t\t\treturn this.#getConnectedState();\n\t\t\t}\n\n\t\t\treturn this.#getCanConnectState();\n\t\t});\n\t}\n\n\t#getCanConnectState(): HTMLElement\n\t{\n\t\treturn this.cache.remember('canConnectState', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"intranet-avatar-widget-item__wrapper --column-format\" data-id=\"bx-avatar-widget-content-otp\">\n\t\t\t\t\t<div class=\"intranet-avatar-widget-item__wrapper-title\">\n\t\t\t\t\t\t<i class=\"ui-icon-set --o-shield intranet-avatar-widget-item__icon --active\"/>\n\t\t\t\t\t\t<span class=\"intranet-avatar-widget-item__title\">${this.getOptions().title}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.#getButton()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getConnectedState(): HTMLElement\n\t{\n\t\treturn this.cache.remember('canConnectState', () => {\n\t\t\tconst onclick = () => {\n\t\t\t\tthis.#openSettingsSlider();\n\t\t\t};\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"intranet-avatar-widget-item__wrapper --column-format\" data-id=\"bx-avatar-widget-content-otp\">\n\t\t\t\t\t<div class=\"intranet-avatar-widget-item__wrapper-title\">\n\t\t\t\t\t\t<i class=\"ui-icon-set --o-shield intranet-avatar-widget-item__icon\"/>\n\t\t\t\t\t\t<div class=\"intranet-avatar-widget-item__info-wrapper\">\n\t\t\t\t\t\t\t<span class=\"intranet-avatar-widget-item__title\">${this.getOptions().title}</span>\n\t\t\t\t\t\t\t<span onclick=\"${onclick}\" class=\"intranet-avatar-widget-item__link\">${this.getOptions().settingsButtonTitle}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"intranet-avatar-widget-item__status\">\n\t\t\t\t\t\t<i class=\"ui-icon-set --check-s\"></i>\n\t\t\t\t\t\t${this.getOptions().connectStatus}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getButton(): HTMLElement\n\t{\n\t\treturn this.cache.remember('button', () => {\n\t\t\tconst button = new Button({\n\t\t\t\tsize: Button.Size.SMALL,\n\t\t\t\ttext: this.getOptions().connectButtonTitle,\n\t\t\t\tuseAirDesign: true,\n\t\t\t\tstyle: AirButtonStyle.OUTLINE_ACCENT_2,\n\t\t\t\tnoCaps: true,\n\t\t\t\twide: true,\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.#openSettingsSlider();\n\t\t\t\t},\n\t\t\t});\n\n\t\t\treturn button.render();\n\t\t});\n\t}\n\n\t#openSettingsSlider(): void\n\t{\n\t\tAnalytics.send(Analytics.EVENT_CLICK_2FA_SETUP);\n\t\tBX.SidePanel.Instance.open(this.getOptions().settingsPath, { width: 1100 });\n\t}\n}\n","import { Dom, Tag, Type, Loc } from 'main.core';\nimport { PULL } from 'pull.client';\nimport { Counter } from 'ui.cnt';\nimport { FeaturePromotersRegistry } from 'ui.info-helper';\nimport { Content } from './content';\nimport { Router } from 'crm.router';\nimport type { SignDocumentsContentOptions } from '../types';\n\nexport class SignDocumentsContent extends Content\n{\n\tgetOptions(): SignDocumentsContentOptions\n\t{\n\t\treturn super.getOptions();\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tconst onclick = () => {\n\t\t\t\tthis.#onClick();\n\t\t\t};\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div onclick=\"${onclick}\" class=\"intranet-avatar-widget-item__wrapper\" data-id=\"bx-avatar-widget-content-sign-documents\">\n\t\t\t\t\t<i class=\"ui-icon-set ${this.#getCounter() ? '--active' : ''} --o-file intranet-avatar-widget-item__icon\"/>\n\t\t\t\t\t<div class=\"intranet-avatar-widget-item__info-wrapper\">\n\t\t\t\t\t\t<span class=\"intranet-avatar-widget-item__title\">\n\t\t\t\t\t\t\t${this.getOptions().title}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"intranet-avatar-widget-item__description\">\n\t\t\t\t\t\t\t${this.getOptions().description}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.#getCounterWrapper()}\n\t\t\t\t\t<i class=\"ui-icon-set --chevron-right-m intranet-avatar-widget-item__chevron\"/>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getCounter(): ?Counter\n\t{\n\t\treturn this.cache.remember('counter', () => {\n\t\t\tif (Number(this.getOptions().counter) < 1)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tPULL.subscribe({\n\t\t\t\tmoduleId: 'sign',\n\t\t\t\tcommand: this.getOptions().counterEventName,\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\tif (!Type.isNumber(params?.needActionCount))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.getOptions().counter = params.needActionCount;\n\n\t\t\t\t\tif (params?.needActionCount > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#getCounter().update(params.needActionCount);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#getCounter().destroy();\n\t\t\t\t\t\tconst icon = this.getLayout().querySelector('.intranet-avatar-widget-item__icon');\n\t\t\t\t\t\tDom.removeClass(icon, '--active');\n\t\t\t\t\t\tthis.cache.delete('counter');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\n\t\t\treturn new Counter({\n\t\t\t\tcolor: Counter.Color.DANGER,\n\t\t\t\tsize: Counter.Size.MEDIUM,\n\t\t\t\tvalue: this.getOptions().counter,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getCounterWrapper(): HTMLElement\n\t{\n\t\treturn this.cache.remember('counterWrapper', () => {\n\t\t\tconst counter = this.#getCounter();\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"intranet-avatar-widget-item__counter\">\n\t\t\t\t\t${counter?.render()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#onClick(): void\n\t{\n\t\tif (this.getOptions().isLocked)\n\t\t{\n\t\t\tFeaturePromotersRegistry.getPromoter({ code: 'limit_office_e_signature' }).show();\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst userId = Number(Loc.getMessage('USER_ID'));\n\n\t\tif (userId > 0)\n\t\t{\n\t\t\tRouter.openSlider(\n\t\t\t\t`${Loc.getMessage('SITE_DIR')}company/personal/user/${userId}/sign?noRedirect=Y`,\n\t\t\t\t{ width: 1000, cacheable: false },\n\t\t\t);\n\t\t}\n\t}\n}\n","import { Tag } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Content } from './content';\nimport { SalaryVacationMenu } from 'humanresources.hcmlink.salary-vacation-menu';\nimport { Analytics } from '../analytics';\nimport type { SalaryVacationContentOptions } from '../types';\n\nexport class SalaryVacationContent extends Content\n{\n\t#salaryVacationMenu: SalaryVacationMenu;\n\n\tconstructor(options: SalaryVacationContentOptions)\n\t{\n\t\tsuper(options);\n\t\tthis.#salaryVacationMenu = new SalaryVacationMenu();\n\t}\n\n\tgetOptions(): SalaryVacationContentOptions\n\t{\n\t\treturn super.getOptions();\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tif (this.#salaryVacationMenu.isHidden())\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif (this.#salaryVacationMenu.isDisabled())\n\t\t\t{\n\t\t\t\treturn this.#getDisabledState();\n\t\t\t}\n\n\t\t\treturn this.#getActiveState();\n\t\t});\n\t}\n\n\t#getDisabledState(): HTMLElement\n\t{\n\t\treturn this.cache.remember('disabledState', () => {\n\t\t\tEventEmitter.emit('BX.Intranet.AvatarWidget.Popup:makeWithHint');\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div\n\t\t\t\t\tclass=\"intranet-avatar-widget-item__wrapper\"\n\t\t\t\t\t${this.#salaryVacationMenu.isDisabled() ? `data-hint=\"${this.getOptions().disabledHint}\"` : ''}\n\t\t\t\t\tdata-hint-no-icon\n\t\t\t\t\tdata-hint-html\n\t\t\t\t\tdata-hint-interactivity\n\t\t\t\t\tdata-id=\"bx-avatar-widget-content-salary-vacation\"\n\t\t\t\t >\n\t\t\t\t\t<i class=\"ui-icon-set --o-favorite intranet-avatar-widget-item__icon\"/>\n\t\t\t\t\t<span class=\"intranet-avatar-widget-item__title\">${this.getOptions().title}</span>\n\t\t\t\t\t${this.#getChevron()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getActiveState(): HTMLElement\n\t{\n\t\treturn this.cache.remember('activeState', () => {\n\t\t\tconst onclick = () => {\n\t\t\t\tthis.#salaryVacationMenu.show(this.#getChevron());\n\t\t\t\tAnalytics.send(Analytics.EVENT_CLICK_SALARY);\n\t\t\t};\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div onclick=\"${onclick}\" class=\"intranet-avatar-widget-item__wrapper\" data-id=\"bx-avatar-widget-content-salary-vacation\">\n\t\t\t\t\t<i class=\"ui-icon-set --active --o-favorite intranet-avatar-widget-item__icon\"/>\n\t\t\t\t\t<span class=\"intranet-avatar-widget-item__title\">${this.getOptions().title}</span>\n\t\t\t\t\t${this.#getChevron()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getChevron(): HTMLElement\n\t{\n\t\treturn this.cache.remember('chevron', () => {\n\t\t\treturn Tag.render`<i class=\"ui-icon-set --chevron-right-m intranet-avatar-widget-item__chevron\"/>`;\n\t\t});\n\t}\n}\n","import { Tag, Text } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Menu } from 'main.popup';\nimport { Content } from './content';\nimport { Analytics } from '../analytics';\nimport type { ExtensionContentOptions } from '../types';\n\nexport class ExtensionContent extends Content\n{\n\t#bindElementDataId: string = 'intranet-avatar-widget-extensions';\n\n\tgetOptions(): ExtensionContentOptions\n\t{\n\t\treturn super.getOptions();\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tconst onclick = () => {\n\t\t\t\tAnalytics.send(Analytics.EVENT_CLICK_EXTENSION);\n\t\t\t\tthis.#getMenu().toggle();\n\t\t\t};\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div onclick=\"${onclick}\" class=\"intranet-avatar-widget-item__wrapper\" data-id=\"bx-avatar-widget-content-extension\">\n\t\t\t\t\t<i class=\"ui-icon-set --o-box intranet-avatar-widget-item__icon\"/>\n\t\t\t\t\t<span class=\"intranet-avatar-widget-item__title\">${Text.encode(this.getOptions().text)}</span>\n\t\t\t\t\t<i data-id=\"${this.#bindElementDataId}\" class=\"ui-icon-set --chevron-right-m intranet-avatar-widget-item__chevron\"/>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getMenu(): Menu\n\t{\n\t\treturn this.cache.remember('menu', () => {\n\t\t\tconst menu = new Menu({\n\t\t\t\tbindElement: document.querySelector(`[data-id=\"${this.#bindElementDataId}\"]`),\n\t\t\t\titems: this.getOptions().items,\n\t\t\t\tangle: true,\n\t\t\t\tcachable: false,\n\t\t\t\toffsetLeft: 10,\n\t\t\t});\n\t\t\tEventEmitter.subscribe('SidePanel.Slider:onOpenStart', () => {\n\t\t\t\tmenu.close();\n\t\t\t});\n\n\t\t\treturn menu;\n\t\t});\n\t}\n}\n","import { DesktopApi } from 'im.v2.lib.desktop-api';\nimport { Tag, Uri } from 'main.core';\nimport { Content } from './content';\nimport { Analytics } from '../analytics';\nimport type { LogoutContentOptions } from '../types';\n\nexport class LogoutContent extends Content\n{\n\tgetOptions(): LogoutContentOptions\n\t{\n\t\treturn super.getOptions();\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tconst onclick = () => {\n\t\t\t\tAnalytics.send(Analytics.EVENT_CLICK_LOGOUT);\n\n\t\t\t\tif (DesktopApi.isDesktop())\n\t\t\t\t{\n\t\t\t\t\tDesktopApi.logout();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconst backUrl = new Uri(window.location.pathname);\n\t\t\t\t\tbackUrl.removeQueryParam(this.getOptions().removeQueryParam);\n\t\t\t\t\tconst newUrl = new Uri(this.getOptions().path);\n\t\t\t\t\tnewUrl.setQueryParam('sessid', BX.bitrix_sessid());\n\t\t\t\t\tnewUrl.setQueryParam('backurl', encodeURIComponent(backUrl.toString()));\n\t\t\t\t\tdocument.location.href = newUrl;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div onclick=\"${onclick}\" class=\"intranet-avatar-widget-item__wrapper --pointer\" data-id=\"bx-avatar-widget-content-logout\">\n\t\t\t\t\t<i class=\"ui-icon-set --o-log-out intranet-avatar-widget-item__icon\"/>\n\t\t\t\t\t<span class=\"intranet-avatar-widget-item__title\">${this.getOptions().title}</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n}\n","import { Tag } from 'main.core';\nimport { Content } from './content';\nimport { Analytics } from '../analytics';\n\nexport class ThemeContent extends Content\n{\n\tgetOptions(): Object\n\t{\n\t\treturn super.getOptions();\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tconst onclick = () => {\n\t\t\t\tAnalytics.send(Analytics.EVENT_CLICK_CHANGE_PORTAL_THEME);\n\t\t\t\tBX.Intranet.Bitrix24.ThemePicker.Singleton.showDialog(false);\n\t\t\t};\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div onclick=\"${onclick}\" class=\"intranet-avatar-widget-item__wrapper --pointer\" data-id=\"bx-avatar-widget-content-settings\">\n\t\t\t\t\t<i class=\"ui-icon-set --o-image intranet-avatar-widget-item__icon\"/>\n\t\t\t\t\t<span class=\"intranet-avatar-widget-item__title\">${this.getOptions().title}</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n}\n","import { Cache } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { PopupComponentsMaker } from 'ui.popupcomponentsmaker';\nimport { MainContent } from './content/main-content';\nimport { QrAuthContent } from './content/qr-auth-content';\nimport { DesktopContent } from './content/desktop-content';\nimport { OtpContent } from './content/otp-content';\nimport { SignDocumentsContent } from './content/sign-documents-content';\nimport { SalaryVacationContent } from './content/salary-vacation-content';\nimport { ExtensionContent } from './content/extension-content';\nimport { LogoutContent } from './content/logout-content';\nimport { ThemeContent } from './content/theme-content';\nimport { Analytics } from './analytics';\nimport type { ConfigOptions, PopupOptions } from './types';\n\nexport class Popup extends EventEmitter\n{\n\t#cache = new Cache.MemoryCache();\n\t#popupsShowAfterBasePopup: Array<Popup> = [];\n\n\tconstructor(options: PopupOptions)\n\t{\n\t\tsuper();\n\t\tthis.setOptions(options);\n\t\tthis.setEventNamespace('BX.Intranet.AvatarWidget.Popup');\n\t\tthis.setEventHandlers();\n\t}\n\n\tsetOptions(options: PopupOptions): void\n\t{\n\t\tthis.#cache.set('options', options);\n\t}\n\n\tgetOptions(): PopupOptions\n\t{\n\t\treturn this.#cache.get('options', {});\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.getBasePopup().show();\n\t\tthis.emit('show');\n\t\tAnalytics.send(Analytics.EVENT_OPEN_WIDGET);\n\t}\n\n\tclose(): void\n\t{\n\t\tthis.getBasePopup().close();\n\t}\n\n\tgetBasePopup(): PopupComponentsMaker\n\t{\n\t\treturn this.#cache.remember('popup', () => {\n\t\t\tthis.emit('beforeInit');\n\n\t\t\tconst popup = new PopupComponentsMaker({\n\t\t\t\ttarget: this.getOptions().target,\n\t\t\t\twidth: 450,\n\t\t\t\tcontent: this.#getContent(),\n\t\t\t\tpopupLoader: this.getOptions().loader,\n\t\t\t});\n\t\t\tthis.#cache.set('popup', popup);\n\n\t\t\tthis.emit('afterInit');\n\n\t\t\treturn popup;\n\t\t});\n\t}\n\n\t#getContent(): Array<ConfigOptions>\n\t{\n\t\treturn this.#cache.remember('content', () => {\n\t\t\tconst content = [\n\t\t\t\tthis.#getMainContent().getConfig(),\n\t\t\t];\n\n\t\t\tif (this.getOptions().content?.signDocuments?.isAvailable)\n\t\t\t{\n\t\t\t\tcontent.push(\n\t\t\t\t\tthis.#getSignDocumentsContent().getConfig(),\n\t\t\t\t\tthis.#getSalaryVacationContent().getConfig(),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (this.getOptions().content?.otp?.isAvailable)\n\t\t\t{\n\t\t\t\tcontent.push({\n\t\t\t\t\thtml: [\n\t\t\t\t\t\tthis.#getQrAuthContent().getConfig(),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: [\n\t\t\t\t\t\t\t\tthis.#getDesktopContent().getConfig(),\n\t\t\t\t\t\t\t\tthis.#getOtpContent().getConfig(),\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcontent.push({\n\t\t\t\t\thtml: [\n\t\t\t\t\t\tthis.#getQrAuthContent().getConfig(),\n\t\t\t\t\t\tthis.#getDesktopContent().getConfig(),\n\t\t\t\t\t],\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (this.getOptions().content?.extension?.isAvailable)\n\t\t\t{\n\t\t\t\tcontent.push(this.#getExtensionContent().getConfig());\n\t\t\t}\n\n\t\t\tcontent.push(\n\t\t\t\t{\n\t\t\t\t\thtml: [\n\t\t\t\t\t\tthis.#getThemeContent().getConfig(),\n\t\t\t\t\t\tthis.#getLogoutContent().getConfig(),\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t);\n\n\t\t\treturn content;\n\t\t});\n\t}\n\n\t#getMainContent(): MainContent\n\t{\n\t\treturn this.#cache.remember('mainContent', () => {\n\t\t\treturn new MainContent({\n\t\t\t\t...this.getOptions().content.main,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getSignDocumentsContent(): SignDocumentsContent\n\t{\n\t\treturn this.#cache.remember('myDocumentsContent', () => {\n\t\t\treturn new SignDocumentsContent({\n\t\t\t\t...this.getOptions().content.signDocuments,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getSalaryVacationContent(): SalaryVacationContent\n\t{\n\t\treturn this.#cache.remember('salaryVacationContent', () => {\n\t\t\treturn new SalaryVacationContent({\n\t\t\t\t...this.getOptions().content.salaryVacation,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getQrAuthContent(): QrAuthContent\n\t{\n\t\treturn this.#cache.remember('qrAuthContent', () => {\n\t\t\treturn new QrAuthContent({\n\t\t\t\tisSmall: !this.getOptions().content.otp?.isAvailable,\n\t\t\t\t...this.getOptions().content.qrAuth,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getDesktopContent(): DesktopContent\n\t{\n\t\treturn this.#cache.remember('desktopContent', () => {\n\t\t\treturn new DesktopContent({\n\t\t\t\tisSmall: !this.getOptions().content.otp?.isAvailable,\n\t\t\t\t...this.getOptions().content.desktop,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getOtpContent(): OtpContent\n\t{\n\t\treturn this.#cache.remember('otpContent', () => {\n\t\t\treturn new OtpContent({\n\t\t\t\t...this.getOptions().content.otp,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getExtensionContent(): ExtensionContent\n\t{\n\t\treturn this.#cache.remember('extensionContent', () => {\n\t\t\treturn new ExtensionContent({\n\t\t\t\t...this.getOptions().content.extension,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getThemeContent(): ThemeContent\n\t{\n\t\treturn this.#cache.remember('settingsContent', () => {\n\t\t\treturn new ThemeContent({\n\t\t\t\t...this.getOptions().content.theme,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getLogoutContent(): LogoutContent\n\t{\n\t\treturn this.#cache.remember('logoutContent', () => {\n\t\t\treturn new LogoutContent({\n\t\t\t\t...this.getOptions().content.logout,\n\t\t\t});\n\t\t});\n\t}\n\n\tsetEventHandlers(): void\n\t{\n\t\tthis.subscribe('beforeInit', () => {\n\t\t\tEventEmitter.subscribe('BX.Intranet.AvatarWidget.Popup:makeWithHint', () => {\n\t\t\t\tthis.subscribe('afterInit', () => {\n\t\t\t\t\tBX.UI.Hint.init(this.getBasePopup().getPopup().getPopupContainer());\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.subscribe('afterInit', () => {\n\t\t\t\tthis.#setAutoHideEventHandlers();\n\n\t\t\t\tconst close = () => {\n\t\t\t\t\tthis.close();\n\t\t\t\t};\n\n\t\t\t\tEventEmitter.subscribe('SidePanel.Slider:onOpenStart', close);\n\t\t\t\tEventEmitter.subscribe('BX.Intranet.AvatarWidget.Popup:openChild', close);\n\t\t\t});\n\t\t});\n\t}\n\n\t#setAutoHideEventHandlers(): void\n\t{\n\t\tEventEmitter.subscribe('BX.Main.Popup:onShow', (event) => {\n\t\t\tif (!this.getBasePopup().getPopup().isShown())\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst popup = event.getTarget();\n\n\t\t\tif (popup && popup.getId() === this.getBasePopup().getPopup().getId())\n\t\t\t{\n\t\t\t\tthis.getBasePopup().getPopup().setAutoHide(true);\n\t\t\t\tEventEmitter.emit('BX.Intranet.AvatarWidget.Popup:enabledAutoHide');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.getBasePopup().getPopup().setAutoHide(false);\n\t\t\t\tEventEmitter.emit('BX.Intranet.AvatarWidget.Popup:disabledAutoHide');\n\n\t\t\t\tif (!this.#popupsShowAfterBasePopup.includes(popup))\n\t\t\t\t{\n\t\t\t\t\tthis.#popupsShowAfterBasePopup.push(popup);\n\t\t\t\t}\n\n\t\t\t\tconst handler = () => {\n\t\t\t\t\tthis.#popupsShowAfterBasePopup = this.#popupsShowAfterBasePopup.filter((item) => item !== popup);\n\n\t\t\t\t\tif (this.#popupsShowAfterBasePopup.length === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getBasePopup().getPopup().setAutoHide(true);\n\t\t\t\t\t\tEventEmitter.emit('BX.Intranet.AvatarWidget.Popup:enabledAutoHide');\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tpopup.subscribeOnce('onClose', handler);\n\t\t\t\tpopup.subscribeOnce('onDestroy', handler);\n\t\t\t}\n\t\t});\n\t}\n}\n","import { Cache } from 'main.core';\nimport { Popup } from './popup';\nimport type { GeneralOptions } from './types';\nimport './style.css';\n\nexport class AvatarWidget\n{\n\t#cache = new Cache.MemoryCache();\n\tstatic #instance: AvatarWidget;\n\n\tstatic getInstance(): AvatarWidget\n\t{\n\t\tif (!this.#instance)\n\t\t{\n\t\t\tthis.#instance = new this();\n\t\t}\n\n\t\treturn this.#instance;\n\t}\n\n\tshow(): void\n\t{\n\t\tif (this.#getPopup().getBasePopup().isShown())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#getPopup().show();\n\t}\n\n\tsetOptions(options: GeneralOptions): AvatarWidget\n\t{\n\t\tthis.#cache.set('options', options);\n\n\t\treturn this;\n\t}\n\n\tgetOptions(): GeneralOptions\n\t{\n\t\treturn this.#cache.get('options', {});\n\t}\n\n\t#getPopup(): Popup\n\t{\n\t\treturn this.#cache.remember('popup', () => {\n\t\t\treturn new Popup({\n\t\t\t\ttarget: this.getOptions().buttonWrapper,\n\t\t\t\tloader: this.getOptions().loader,\n\t\t\t\tcontent: {\n\t\t\t\t\t...this.getOptions().data,\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n}\n"],"names":["Content","EventEmitter","constructor","options","super","this","cache","Cache","MemoryCache","setOptions","setEventNamespace","set","getOptions","get","getLayout","Error","getConfig","html","minHeight","Analytics","[object Object]","event","sendData","tool","TOOLS","category","CATEGORY","CATEGORY_PROFILE","EVENT_PROFILE_VIEW","c_section","EVENT_OPEN_WIDGET","EVENT_CLICK_SALARY","EVENT_CLICK_INSTALL_DESKTOP_APP","EVENT_CLICK_2FA_SETUP","EVENT_CLICK_EXTENSION","EVENT_CLICK_LOGOUT","EVENT_CLICK_CHANGE_PORTAL_THEME","EVENT_CLICK_LOGIN_HISTORY","EVENT_CLICK_NETWORK","EVENT_CLICK_ACTIVITY_PORTAL_LIST","MainContent","Object","value","writable","remember","babelHelpers","Tag","render","BX","SidePanel","Instance","open","url","sendOpenProfile","getContainer","fullName","status","size","userpicPath","encodeURI","userPhotoSrc","avatar","role","AvatarRoundExtranet","AvatarRoundGuest","AvatarRound","element","Event","bind","preventDefault","stopPropagation","target","toggle","items","menuItems","forEach","item","push","type","title","icon","onclick","close","emit","Menu","bindElement","sendOpenCommonSecurity","width","send","window","DesktopAccountList","document","querySelector","show","isAvailable","isConfigured","allowedChangeHistory","Helper","FeaturePromotersRegistry","getPromoter","code","isTimemanAvailable","WorkTimeButton","error","console","subscribe","data","userId","id","toString","preparedUrl","setUserPic","innerHTML","QrAuthContent","isSmall","flex","Button","Size","EXTRA_EXTRA_SMALL","text","buttonTitle","useAirDesign","style","AirButtonStyle","OUTLINE","noCaps","wide","QrAuthorization","popup","_this$getOptions$popu","content","_this$getOptions$popu2","description","intent","DesktopContent","Browser","isLinux","isWin","isMac","displayBlock","statusName","installInfo","_this$getOptions$inst","linux","_this$getOptions$inst2","mac","_this$getOptions$inst3","windows","linkName","SMALL","buttonName","OUTLINE_ACCENT_2","downloadLinks","_this$getOptions$down","macos","location","href","_this$getOptions$down2","offsetLeft","offsetTop","linuxMenuTitles","deb","linuxDeb","rpm","linuxRpm","angle","OtpContent","isActive","settingsButtonTitle","connectStatus","connectButtonTitle","settingsPath","SignDocumentsContent","Number","counter","PULL","moduleId","command","counterEventName","callback","params","Type","isNumber","needActionCount","update","destroy","Dom","removeClass","delete","Counter","color","Color","DANGER","MEDIUM","isLocked","Loc","getMessage","Router","openSlider","cacheable","SalaryVacationContent","SalaryVacationMenu","isHidden","isDisabled","disabledHint","ExtensionContent","Text","encode","menu","cachable","LogoutContent","DesktopApi","isDesktop","logout","backUrl","Uri","pathname","removeQueryParam","newUrl","path","setQueryParam","bitrix_sessid","encodeURIComponent","ThemeContent","Intranet","Bitrix24","ThemePicker","Singleton","showDialog","Popup","setEventHandlers","getBasePopup","PopupComponentsMaker","popupLoader","loader","UI","Hint","init","getPopup","getPopupContainer","_this$getOptions$cont","signDocuments","_this$getOptions$cont2","_this$getOptions$cont3","otp","_this$getOptions$cont4","_this$getOptions$cont5","extension","_this$getOptions$cont6","main","salaryVacation","_this$getOptions$cont7","qrAuth","_this$getOptions$cont8","desktop","theme","isShown","getTarget","getId","setAutoHide","includes","handler","filter","length","subscribeOnce","AvatarWidget","buttonWrapper"],"mappings":"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"}