this.BX=this.BX||{};this.BX.Intranet=this.BX.Intranet||{};(function(e,t,s,i){"use strict";var a=babelHelpers.classPrivateFieldLooseKey("slider");var l=babelHelpers.classPrivateFieldLooseKey("container");var r=babelHelpers.classPrivateFieldLooseKey("loaded");var n=babelHelpers.classPrivateFieldLooseKey("handleSliderOpenStartOnce");var o=babelHelpers.classPrivateFieldLooseKey("handleSliderOpening");var d=babelHelpers.classPrivateFieldLooseKey("handleSliderClosing");var c=babelHelpers.classPrivateFieldLooseKey("handleSliderCloseComplete");var b=babelHelpers.classPrivateFieldLooseKey("handleSliderDestroy");var u=babelHelpers.classPrivateFieldLooseKey("handleZIndexChange");class h{constructor(e){Object.defineProperty(this,u,{value:m});Object.defineProperty(this,b,{value:g});Object.defineProperty(this,c,{value:P});Object.defineProperty(this,d,{value:B});Object.defineProperty(this,o,{value:v});Object.defineProperty(this,n,{value:p});Object.defineProperty(this,a,{writable:true,value:null});Object.defineProperty(this,l,{writable:true,value:null});Object.defineProperty(this,r,{writable:true,value:false});babelHelpers.classPrivateFieldLooseBase(this,a)[a]=e;babelHelpers.classPrivateFieldLooseBase(this,l)[l]=document.getElementById("im-chat-menu");if(!babelHelpers.classPrivateFieldLooseBase(this,l)[l]){console.warn("ChatMenu: container not found");return}s.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,l)[l],document.body);i.EventEmitter.subscribeOnce(babelHelpers.classPrivateFieldLooseBase(this,a)[a],"SidePanel.Slider:onOpenStart",babelHelpers.classPrivateFieldLooseBase(this,n)[n].bind(this));i.EventEmitter.subscribe(babelHelpers.classPrivateFieldLooseBase(this,a)[a],"SidePanel.Slider:onOpening",babelHelpers.classPrivateFieldLooseBase(this,o)[o].bind(this));i.EventEmitter.subscribe(babelHelpers.classPrivateFieldLooseBase(this,a)[a],"SidePanel.Slider:onClosing",babelHelpers.classPrivateFieldLooseBase(this,d)[d].bind(this));i.EventEmitter.subscribe(babelHelpers.classPrivateFieldLooseBase(this,a)[a],"SidePanel.Slider:onCloseComplete",babelHelpers.classPrivateFieldLooseBase(this,c)[c].bind(this));i.EventEmitter.subscribe(babelHelpers.classPrivateFieldLooseBase(this,a)[a],"SidePanel.Slider:onDestroy",babelHelpers.classPrivateFieldLooseBase(this,b)[b].bind(this));i.EventEmitter.subscribe("IM.Layout:onLayoutChange",(()=>{if(!babelHelpers.classPrivateFieldLooseBase(this,r)[r]){babelHelpers.classPrivateFieldLooseBase(this,r)[r]=true;s.Dom.addClass(this.getContainer(),"--loaded")}}))}getContainer(){return babelHelpers.classPrivateFieldLooseBase(this,l)[l]}setZIndex(e){s.Dom.style(this.getContainer(),"z-index",e)}reset(){var e;(e=this.getMenu())==null?void 0:e.reset()}getMenu(){const e=s.Reflection.getClass("BX.Main.interfaceButtonsManager");if(e){return e.getById("chat-menu")}return null}}function p(){i.EventEmitter.subscribe(babelHelpers.classPrivateFieldLooseBase(this,a)[a].getZIndexComponent(),"onZIndexChange",babelHelpers.classPrivateFieldLooseBase(this,u)[u].bind(this))}function v(){this.setZIndex(babelHelpers.classPrivateFieldLooseBase(this,a)[a].getZIndexComponent().getZIndex()+1);s.Dom.style(this.getContainer(),"display","block");requestAnimationFrame((()=>{s.Dom.addClass(this.getContainer(),"--open")}))}function B(){this.reset();s.Dom.removeClass(this.getContainer(),"--open")}function P(){s.Dom.style(this.getContainer(),"display","none")}function g(){this.reset()}function m(){const e=babelHelpers.classPrivateFieldLooseBase(this,a)[a].getZIndexComponent().getZIndex();this.setZIndex(e+1)}const f=65;const y=240;const L=18;var F=babelHelpers.classPrivateFieldLooseKey("onWindowResize");var H=babelHelpers.classPrivateFieldLooseKey("chatMenuBar");var S=babelHelpers.classPrivateFieldLooseKey("handleWindowResize");class C extends t.Slider{constructor(e,t){const i=s.Type.isPlainObject(t)?{...t}:{};const a=e.startsWith("im:slider");if(a){i.hideControls=false;i.autoOffset=false}if(s.Type.isNumber(i.customLeftBoundary)&&i.customLeftBoundary<f){i.customLeftBoundary=f+L}super(e,i);Object.defineProperty(this,S,{value:I});Object.defineProperty(this,F,{writable:true,value:null});Object.defineProperty(this,H,{writable:true,value:null});babelHelpers.classPrivateFieldLooseBase(this,H)[H]=a?new h(this):null;babelHelpers.classPrivateFieldLooseBase(this,F)[F]=babelHelpers.classPrivateFieldLooseBase(this,S)[S].bind(this)}applyHacks(){this.adjustBackgroundSize();s.Event.bind(window,"resize",babelHelpers.classPrivateFieldLooseBase(this,F)[F]);return true}resetHacks(){this.resetBackgroundSize();s.Event.unbind(window,"resize",babelHelpers.classPrivateFieldLooseBase(this,F)[F])}getLeftBoundary(){const e=s.Reflection.getClass("BX.Intranet.LeftMenu");const t=e!=null&&e.isCollapsed()||babelHelpers.classPrivateFieldLooseBase(this,H)[H]!==null?f:y;return t+L}getRightBoundary(){return 0}getTopBoundary(){return 0}calculateOuterBoundary(){if(babelHelpers.classPrivateFieldLooseBase(this,H)[H]!==null){return{top:58,right:18}}return{top:18,right:18}}adjustBackgroundSize(){const e=s.Reflection.getClass("BX.Intranet.Bitrix24.ThemePicker.Singleton");if(!e){return}const t=e.getAppliedTheme();if(t&&t.resizable===true){if(t.video){this.adjustVideoSize()}else if(t.width>0&&t.height>0){this.adjustImageSize(t.width,t.height)}}}adjustImageSize(e,t){const i=document.documentElement.clientWidth;const a=document.documentElement.clientHeight;const l=t/e;const r=a/i;const n=r>l?a/l:i;const o=r>l?a:i*l;s.Dom.style(document.body,"background-size",`${n}px ${o}px`)}adjustVideoSize(){const e=s.Reflection.getClass("BX.Intranet.Bitrix24.ThemePicker.Singleton");if(!e){return}const t=e.getVideoContainer();if(t){s.Dom.style(t,"right",`${window.innerWidth-document.documentElement.clientWidth}px`)}}resetBackgroundSize(){s.Dom.style(document.body,"background-size",null);const e=s.Reflection.getClass("BX.Intranet.Bitrix24.ThemePicker.Singleton");if(e){const t=e.getVideoContainer();if(t){s.Dom.style(t,"right",null)}}}}function I(){this.adjustBackgroundSize()}t.SliderManager.registerSliderClass("BX.Intranet.Bitrix24.Slider",{startPosition:"bottom",hideToolbarOnOpen:true},{animationDuration:200,label:{text:"",bgColor:"#0075FF"}});const x=s.Reflection.namespace("BX.Bitrix24");Object.defineProperty(x,"Slider",{get:()=>{console.warn("Don't use BX.Bitrix24.Slider.");return t.SidePanel.Instance}});Object.defineProperty(x,"PageSlider",{get:()=>{console.warn("Don't use BX.Bitrix24.PageSlider.");return t.SidePanel.Instance}});e.Slider=C})(this.BX.Intranet.Bitrix24=this.BX.Intranet.Bitrix24||{},BX.SidePanel,BX,BX.Event);
//# sourceMappingURL=air-sidepanel.bundle.map.js