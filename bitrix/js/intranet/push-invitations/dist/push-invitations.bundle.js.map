{"version":3,"file":"push-invitations.bundle.js","sources":["../src/push-invitations.js"],"sourcesContent":["import 'ui.notification';\nimport { Dom, Type } from 'main.core';\n\nexport class PushInvitations extends BX.UI.Notification.Balloon\n{\n\tinvitationButton: ?Element = null;\n\tconstructor(...args) {\n\t\tsuper(...args);\n\n\t\tthis.doNotAdjustPosition = true;\n\t\tthis.invitationButton = this.getData().target;\n\n\t\taddEventListener('resize', (event) => {\n\t\t\tfor (const key of Object.keys(BX.UI.Notification.Center.balloons))\n\t\t\t{\n\t\t\t\tconst ballon = BX.UI.Notification.Center.balloons[key];\n\t\t\t\tif (ballon.category === 'PushInvitations')\n\t\t\t\t{\n\t\t\t\t\tballon.getContainer().style.left = `${this.invitationButton.offsetLeft - this.invitationButton.scrollWidth - 100}px`;\n\t\t\t\t\tballon.getContainer().style.top = `${this.invitationButton.offsetTop + this.invitationButton.scrollHeight + 25}px`;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\tif (this.container !== null)\n\t\t{\n\t\t\treturn this.container;\n\t\t}\n\n\t\tthis.container = Dom.create('div', {\n\t\t\tprops: {\n\t\t\t\tclassName: 'ui-notification-balloon ui-notification-balloon-animate intranet-notification-balloon-push-invitation-content',\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tthis.render(),\n\t\t\t],\n\t\t});\n\n\t\treturn this.container;\n\t}\n\n\tadjustPosition(): void\n\t{\n\t\tif (this.invitationButton !== null)\n\t\t{\n\t\t\tconst invitationButtons = document.querySelectorAll('[data-id=\"invitationButton\"]');\n\t\t\tif (invitationButtons.length > 0)\n\t\t\t{\n\t\t\t\tthis.invitationButton = invitationButtons[0];\n\t\t\t}\n\t\t}\n\n\t\tthis.getContainer().style.left = `${this.invitationButton.offsetLeft - this.invitationButton.scrollWidth - 100}px`;\n\t\tthis.getContainer().style.top = `${this.invitationButton.offsetTop + this.invitationButton.scrollHeight + 25}px`;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst ballon = this;\n\t\tconst width = this.getWidth();\n\t\tconst title = this.getData().title;\n\t\tconst description = this.getData().description;\n\n\t\tconst actions = this.getActions().map(function(action) {\n\t\t\treturn action.getContainer();\n\t\t});\n\n\t\treturn Dom.create('div', {\n\t\t\tprops: {\n\t\t\t\tclassName: 'intranet-notification-balloon-container',\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tDom.create('div', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'ui-notification-balloon-content',\n\t\t\t\t\t},\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\twidth: Type.isNumber(width) ? `${width}px` : width,\n\t\t\t\t\t},\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\tthis.getPointerContainer(),\n\t\t\t\t\t\tthis.getMessageContainer(title, description),\n\t\t\t\t\t\tDom.create('div', {\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\tclassName: 'ui-notification-balloon-close-btn',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\tclick() {\n\t\t\t\t\t\t\t\t\tballon.close();\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}),\n\t\t\t\t\t],\n\t\t\t\t}),\n\t\t\t\tDom.create('div', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'ui-notification-balloon-actions',\n\t\t\t\t\t},\n\t\t\t\t\tchildren: actions,\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t}\n\n\tgetPointerContainer(): HTMLElement\n\t{\n\t\treturn Dom.create('div', {\n\t\t\tprops: {\n\t\t\t\tclassName: 'intranet-notification-balloon-circle-pointer',\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tDom.create('div', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'intranet-notification-balloon-circle',\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tDom.create('div', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'intranet-notification-balloon-line',\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t}\n\n\tgetMessageContainer(title, description): HTMLElement\n\t{\n\t\treturn Dom.create('div', {\n\t\t\tprops: {\n\t\t\t\tclassName: 'ui-notification-balloon-message',\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tDom.create('div', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'intranet-notification-balloon-message-title',\n\t\t\t\t\t},\n\t\t\t\t\thtml: title,\n\t\t\t\t}),\n\t\t\t\tDom.create('div', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'intranet-notification-balloon-message-description',\n\t\t\t\t\t},\n\t\t\t\t\thtml: description,\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t}\n}\n"],"names":["PushInvitations","args","babelHelpers","_this","doNotAdjustPosition","invitationButton","getData","target","addEventListener","event","key","Object","keys","BX","UI","Notification","Center","balloons","ballon","category","getContainer","style","left","offsetLeft","scrollWidth","top","offsetTop","scrollHeight","value","this","container","Dom","create","props","className","children","render","invitationButtons","document","querySelectorAll","length","width","getWidth","title","description","actions","getActions","map","action","Type","isNumber","getPointerContainer","getMessageContainer","events","click","close","html","Balloon"],"mappings":"qDAGaA,cAGZ,cAAeC,GAAM,MAgBjB,OAhBiBC,oCACpBC,0FAASF,IAAMC,qFAFa,MAI5BC,EAAKC,qBAAsB,EAC3BD,EAAKE,iBAAmBF,EAAKG,UAAUC,OAEvCC,iBAAiB,SAAWC,IAC3B,IAAK,MAAMC,KAAOC,OAAOC,KAAKC,GAAGC,GAAGC,aAAaC,OAAOC,UACxD,CACC,MAAMC,EAASL,GAAGC,GAAGC,aAAaC,OAAOC,SAASP,GAC1B,oBAApBQ,EAAOC,WAEVD,EAAOE,eAAeC,MAAMC,KAAUnB,EAAKE,iBAAiBkB,WAAapB,EAAKE,iBAAiBmB,YAAc,IAAzE,KACpCN,EAAOE,eAAeC,MAAMI,IAAStB,EAAKE,iBAAiBqB,UAAYvB,EAAKE,iBAAiBsB,aAAe,GAAzE,WAkItC,OAlJ0BzB,2BAoB1BA,6BAAAQ,mBAAAkB,iBAIA,OAAuB,OAAnBC,KAAKC,YAKTD,KAAKC,UAAYC,MAAIC,OAAO,MAAO,CAClCC,MAAO,CACNC,UAAW,iHAEZC,SAAU,CACTN,KAAKO,aARCP,KAAKC,aAabpB,qBAAAkB,iBAIA,GAA8B,OAA1BC,KAAKxB,iBACT,CACC,MAAMgC,EAAoBC,SAASC,iBAAiB,gCAChDF,EAAkBG,OAAS,IAE9BX,KAAKxB,iBAAmBgC,EAAkB,IAI5CR,KAAKT,eAAeC,MAAMC,KAAUO,KAAKxB,iBAAiBkB,WAAaM,KAAKxB,iBAAiBmB,YAAc,IAAzE,KAClCK,KAAKT,eAAeC,MAAMI,IAASI,KAAKxB,iBAAiBqB,UAAYG,KAAKxB,iBAAiBsB,aAAe,GAAzE,QACjCjB,aAAAkB,iBAIA,MAAMV,EAASW,KACTY,EAAQZ,KAAKa,WACbC,EAAQd,KAAKvB,UAAUqC,MACvBC,EAAcf,KAAKvB,UAAUsC,YAE7BC,EAAUhB,KAAKiB,aAAaC,KAAI,SAASC,GAC9C,OAAOA,EAAO5B,kBAGf,OAAOW,MAAIC,OAAO,MAAO,CACxBC,MAAO,CACNC,UAAW,2CAEZC,SAAU,CACTJ,MAAIC,OAAO,MAAO,CACjBC,MAAO,CACNC,UAAW,mCAEZb,MAAO,CACNoB,MAAOQ,OAAKC,SAAST,GAAYA,EAAF,KAAcA,GAE9CN,SAAU,CACTN,KAAKsB,sBACLtB,KAAKuB,oBAAoBT,EAAOC,GAChCb,MAAIC,OAAO,MAAO,CACjBC,MAAO,CACNC,UAAW,qCAEZmB,OAAQ,CACPC,QACCpC,EAAOqC,eAMZxB,MAAIC,OAAO,MAAO,CACjBC,MAAO,CACNC,UAAW,mCAEZC,SAAUU,UAIbnC,0BAAAkB,iBAIA,OAAOG,MAAIC,OAAO,MAAO,CACxBC,MAAO,CACNC,UAAW,gDAEZC,SAAU,CACTJ,MAAIC,OAAO,MAAO,CACjBC,MAAO,CACNC,UAAW,0CAGbH,MAAIC,OAAO,MAAO,CACjBC,MAAO,CACNC,UAAW,8CAKfxB,0BAAAkB,eAEmBe,EAAOC,GAE1B,OAAOb,MAAIC,OAAO,MAAO,CACxBC,MAAO,CACNC,UAAW,mCAEZC,SAAU,CACTJ,MAAIC,OAAO,MAAO,CACjBC,MAAO,CACNC,UAAW,+CAEZsB,KAAMb,IAEPZ,MAAIC,OAAO,MAAO,CACjBC,MAAO,CACNC,UAAW,qDAEZsB,KAAMZ,cA9I0B/B,GAAGC,GAAGC,aAAa0C"}