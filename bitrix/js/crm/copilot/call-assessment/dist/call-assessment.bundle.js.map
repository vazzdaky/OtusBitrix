{"version":3,"file":"call-assessment.bundle.js","sources":["../src/components/navigation/breadcrumbs.js","../src/components/navigation/button.js","../src/components/navigation/navigation.js","../src/components/common/text-editor-wrapper-component.js","../src/validator/prompt-length.js","../src/components/common/ai-disabled-in-settings.js","../src/components/page/base-page.js","../src/components/page/about-page.js","../src/components/enum/client-type.js","../src/components/page/client-page.js","../src/validator/border-accord.js","../src/components/common/pill.js","../src/components/common/help-link.js","../src/components/common/text-with-dialog.js","../src/components/page/control-page.js","../src/components/common/availability/button.js","../src/components/common/availability/chevron.js","../src/components/common/availability/period-row.js","../src/components/enum/weekday-type.js","../src/validator/time-period.js","../src/components/common/availability/custom-row.js","../src/components/enum/availability-type.js","../src/components/common/availability/type-selector.js","../src/components/page/settings-page.js","../src/components/call-assessment.js","../src/call-assessment.js"],"sourcesContent":["import { Loc } from 'main.core';\n\nexport const BreadcrumbsEvents = {\n\titemClick: 'crm:copilot:call-assessment:breadcrumb-item-click',\n};\n\nexport const Breadcrumbs = {\n\tprops: {\n\t\tactiveTabId: {\n\t\t\ttype: String,\n\t\t},\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\ttabs: this.getTabsData(),\n\t\t};\n\t},\n\n\tmethods: {\n\t\titemTitleClassList(id: string, isSoon: boolean): string[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t'crm-copilot__call-assessment_breadcrumbs-item-title',\n\t\t\t\t{ '--active': id === this.activeTabId },\n\t\t\t\t{ '--soon': isSoon },\n\t\t\t];\n\t\t},\n\t\tgetTab(id: string): Object\n\t\t{\n\t\t\treturn this.getTabsData().find((tab) => tab.id === id);\n\t\t},\n\t\tgetTabsData(): Object[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tid: 'about',\n\t\t\t\t\ttitle: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_ABOUT'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'client',\n\t\t\t\t\ttitle: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CLIENT'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'settings',\n\t\t\t\t\ttitle: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'control',\n\t\t\t\t\ttitle: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CONTROL'),\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t\temitClickEvent(itemId: string): void\n\t\t{\n\t\t\tconst tab = this.getTab(itemId);\n\n\t\t\tif (!tab.soon)\n\t\t\t{\n\t\t\t\tthis.$Bitrix.eventEmitter.emit(BreadcrumbsEvents.itemClick, { itemId });\n\t\t\t}\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tsoonTitle(): string\n\t\t{\n\t\t\treturn Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_BREADCRUMBS_SOON');\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div class=\"crm-copilot__call-assessment_breadcrumbs-wrapper\">\n\t\t\t<div\n\t\t\t\tv-for=\"(tab, index) in tabs\"\n\t\t\t\t@click=\"emitClickEvent(tab.id)\"\n\t\t\t\tclass=\"crm-copilot__call-assessment_breadcrumbs-item\"\n\t\t\t>\n\t\t\t\t<span v-if=\"tab.soon\" class=\"crm-copilot__call-assessment_breadcrumbs-soon\">\n\t\t\t\t\t{{ soonTitle }}\n\t\t\t\t</span>\n\t\t\t\t<span :class=\"itemTitleClassList(tab.id, tab.soon)\">\n\t\t\t\t\t{{ tab.title }}\n\t\t\t\t</span>\n\t\t\t\t<span \n\t\t\t\t\tv-if=\"index+1 < tabs.length\"\n\t\t\t\t\tclass=\"crm-copilot__call-assessment_breadcrumbs-divider\"\n\t\t\t\t></span>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Loc } from 'main.core';\nimport { Button as UiButton, ButtonState } from 'ui.buttons';\n\nexport const ButtonEvents = {\n\tclick: 'crm:copilot:call-assessment:navigation-button-click',\n};\n\nexport const Button = {\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tisEnabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\n\tmounted()\n\t{\n\t\tthis.initButton();\n\t},\n\n\twatch: {\n\t\tisEnabled(value: boolean): void\n\t\t{\n\t\t\tthis.button.setState(value ? ButtonState.ACTIVE : ButtonState.DISABLED);\n\t\t},\n\t},\n\n\tmethods: {\n\t\tinitButton(): void\n\t\t{\n\t\t\tthis.button = new UiButton({\n\t\t\t\ttext: Loc.getMessage(`CRM_COPILOT_CALL_ASSESSMENT_NAVIGATION_BUTTON_${this.id.toUpperCase()}`),\n\t\t\t\tcolor: this.buttonColor,\n\t\t\t\tround: true,\n\t\t\t\tsize: BX.UI.Button.Size.LARGE,\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.emitClickEvent();\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tif (this.isEnabled !== true)\n\t\t\t{\n\t\t\t\tthis.button.setState(ButtonState.DISABLED);\n\t\t\t}\n\n\t\t\tthis.button.setDataSet({\n\t\t\t\tid: `crm-copilot-call-assessment-buttons-${this.id.toLowerCase()}`,\n\t\t\t});\n\n\t\t\tif (this.$refs.button)\n\t\t\t{\n\t\t\t\tthis.button.renderTo(this.$refs.button);\n\t\t\t}\n\t\t},\n\t\temitClickEvent(): void\n\t\t{\n\t\t\tif (this.isEnabled)\n\t\t\t{\n\t\t\t\tthis.$Bitrix.eventEmitter.emit(ButtonEvents.click, { id: this.id });\n\t\t\t}\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tbuttonColor(): string\n\t\t{\n\t\t\tif (this.id === 'continue' || this.id === 'submit' || this.id === 'close')\n\t\t\t{\n\t\t\t\treturn UiButton.Color.SUCCESS;\n\t\t\t}\n\n\t\t\tif (this.id === 'update')\n\t\t\t{\n\t\t\t\treturn UiButton.Color.LIGHT_BORDER;\n\t\t\t}\n\n\t\t\treturn UiButton.Color.LIGHT;\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div ref=\"button\" class=\"crm-copilot-call-assessment-button\"></div>\n\t`,\n};\n","import { Loc } from 'main.core';\n\nimport 'ui.icon-set.main';\nimport { Button } from './button';\n\nconst ARTICLE_CODE = '23240682';\n\nexport const Navigation = {\n\tcomponents: {\n\t\tButton,\n\t},\n\n\tprops: {\n\t\tactiveTabId: {\n\t\t\ttype: String,\n\t\t},\n\t\tisEnabled: {\n\t\t\ttype: Boolean,\n\t\t},\n\t\treadOnly: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tshowSaveButton: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tfirstPage: 'about',\n\t\t\tlastPage: 'control',\n\t\t};\n\t},\n\n\tcomputed: {\n\t\thelp(): string\n\t\t{\n\t\t\treturn Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_NAVIGATION_HELP');\n\t\t},\n\t\tbuttons(): string[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t'cancel',\n\t\t\t\t'back',\n\t\t\t\t'continue',\n\t\t\t\t'submit',\n\t\t\t\t'close',\n\t\t\t\t'update',\n\t\t\t];\n\t\t},\n\t},\n\n\tmethods: {\n\t\tshowArticle(): void\n\t\t{\n\t\t\twindow.top.BX?.Helper?.show(`redirect=detail&code=${ARTICLE_CODE}`);\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div class=\"crm-copilot__call-assessment_navigation-container\">\n\t\t\t<div class=\"crm-copilot__call-assessment_navigation-buttons-wrapper\">\n\t\t\t\t<Button v-if=\"activeTabId !== lastPage\" id=\"continue\" :is-enabled=\"isEnabled\" />\n\t\t\t\t<Button v-if=\"activeTabId === lastPage && !readOnly\" id=\"submit\" />\n\t\t\t\t<Button v-if=\"activeTabId === lastPage && readOnly\" id=\"close\" />\n\t\t\t\t<Button v-if=\"activeTabId === firstPage\" id=\"cancel\" />\n\t\t\t\t<Button v-if=\"activeTabId !== firstPage\" id=\"back\" />\n\t\t\t</div>\n\t\t\t<div v-if=\"showSaveButton && activeTabId !== lastPage\">\n\t\t\t\t<Button id=\"update\" :is-enabled=\"isEnabled\" />\n\t\t\t</div>\n\t\t\t<div v-else class=\"crm-copilot__call-assessment_article\" @click=\"showArticle\">\n\t\t\t\t<span class=\"ui-icon-set --help\"></span>\n\t\t\t\t{{ help }}\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Event, Runtime, Type } from 'main.core';\nimport { TextEditor, TextEditorComponent } from 'ui.text-editor';\n\nexport const TextEditorWrapperComponent = {\n\tcomponents: {\n\t\tTextEditorComponent,\n\t},\n\n\temits: [\n\t\t'change',\n\t],\n\n\tprops: {\n\t\ttextEditor: TextEditor,\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\ttextEditorEvents: {\n\t\t\t\tonChange: this.emitChangeData,\n\t\t\t},\n\t\t};\n\t},\n\n\tmounted(): void\n\t{\n\t\tthis.setTextEditorHeight();\n\t\tthis.windowResizeHandler = this.windowResizeHandler.bind(this);\n\n\t\tEvent.bind(window, 'resize', this.windowResizeHandler);\n\t},\n\n\tunmounted(): void\n\t{\n\t\tEvent.unbind(window, 'resize', this.windowResizeHandler);\n\t},\n\n\tmethods: {\n\t\temitChangeData(): void\n\t\t{\n\t\t\tif (!Type.isFunction(this.onChangeDebounce))\n\t\t\t{\n\t\t\t\tthis.onChangeDebounce = Runtime.debounce(this.onChange, 100, this);\n\t\t\t}\n\n\t\t\tthis.onChangeDebounce();\n\t\t},\n\t\tonChange(): void\n\t\t{\n\t\t\tthis.$emit('change', {\n\t\t\t\tprompt: this.textEditor.getText(),\n\t\t\t});\n\t\t},\n\t\twindowResizeHandler(): void\n\t\t{\n\t\t\tthis.setTextEditorHeight();\n\t\t},\n\t\tsetTextEditorHeight(): void\n\t\t{\n\t\t\tconst editorOffsetTop = this.$el.parentNode.offsetTop;\n\n\t\t\tconst navigationClassName = '.crm-copilot__call-assessment_navigation-container';\n\t\t\tconst navigationOffsetTop = document.querySelector(navigationClassName)?.offsetTop ?? 0;\n\n\t\t\tconst textEditorContainerBottomPadding = 20;\n\t\t\tconst availableHeight = navigationOffsetTop - editorOffsetTop - textEditorContainerBottomPadding;\n\t\t\tconst minHeight = Math.round(availableHeight * 0.5);\n\t\t\tconst maxHeight = Math.round(availableHeight * 0.8);\n\n\t\t\tif (minHeight < 200)\n\t\t\t{\n\t\t\t\tthis.textEditor?.setMinHeight(maxHeight);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.textEditor?.setMinHeight(minHeight);\n\t\t\t}\n\n\t\t\tthis.textEditor?.setMaxHeight(maxHeight);\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<TextEditorComponent \n\t\t\t:events=\"textEditorEvents\"\n\t\t\t:editor-instance=\"textEditor\"\n\t\t/>\n\t`,\n};\n","import { Loc } from 'main.core';\n\nconst LENGTH_RANGE = {\n\tMIN: 100,\n\tMAX: 5000,\n};\n\nexport class PromptLength\n{\n\t#errorMessage: ?string = null;\n\n\tvalidate(prompt: string): boolean\n\t{\n\t\tif (prompt.length < LENGTH_RANGE.MIN)\n\t\t{\n\t\t\tthis.#errorMessage = Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_ABOUT_PROMPT_LENGTH_MIN_ERROR', {\n\t\t\t\t'#MIN_VALUE#': LENGTH_RANGE.MIN,\n\t\t\t});\n\n\t\t\treturn false;\n\t\t}\n\n\t\tif (prompt.length > LENGTH_RANGE.MAX)\n\t\t{\n\t\t\tthis.#errorMessage = Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_ABOUT_PROMPT_LENGTH_MAX_ERROR', {\n\t\t\t\t'#MAX_VALUE#': LENGTH_RANGE.MAX,\n\t\t\t});\n\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.#errorMessage = null;\n\n\t\treturn true;\n\t}\n\n\tgetError(): ?string\n\t{\n\t\treturn this.#errorMessage;\n\t}\n}\n","import { Loc } from 'main.core';\nimport 'ui.icon-set.main';\n\nexport const AiDisabledInSettings = {\n\tmethods: {\n\t\tshowLimitCopilotOffSlider(): void\n\t\t{\n\t\t\ttop.BX.UI?.InfoHelper?.show('limit_v2_crm_copilot_call_assessment_off');\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tmessage(): string\n\t\t{\n\t\t\treturn Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_AI_DISABLED');\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div class=\"crm-copilot__call-assessment-ai-disabled\">\n\t\t\t<span v-html=\"message\"></span>\n\t\t\t<span\n\t\t\t\t@click=\"showLimitCopilotOffSlider\"\n\t\t\t\tclass=\"ui-icon-set --help\"\n\t\t\t></span>\n\t\t</div>\n\t`,\n};\n","import { Runtime, Type } from 'main.core';\nimport { UI } from 'ui.notification';\n\nimport { AiDisabledInSettings } from '../common/ai-disabled-in-settings';\nimport { Breadcrumbs } from '../navigation/breadcrumbs';\n\nexport const BasePage = {\n\tcomponents: {\n\t\tBreadcrumbs,\n\t\tAiDisabledInSettings,\n\t},\n\n\tprops: {\n\t\treadOnly: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tisEnabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tisActive: {\n\t\t\ttype: Boolean,\n\t\t},\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\tdefault: {},\n\t\t},\n\t\tsettings: {\n\t\t\ttype: Object,\n\t\t\tdefault: {},\n\t\t},\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tid: null, // must be defined in child class\n\t\t};\n\t},\n\n\tmethods: {\n\t\tgetId(): string\n\t\t{\n\t\t\treturn this.id;\n\t\t},\n\n\t\tgetData(): Object\n\t\t{\n\t\t\t// must be implement in child class\n\n\t\t\treturn {};\n\t\t},\n\n\t\tisReadyToMoveOn(): boolean\n\t\t{\n\t\t\treturn this.validate();\n\t\t},\n\n\t\tvalidate(): boolean\n\t\t{\n\t\t\t// must be implement in child class\n\n\t\t\treturn true;\n\t\t},\n\n\t\tonValidationFailed(): void\n\t\t{\n\t\t\tUI.Notification.Center.notify({\n\t\t\t\tcontent: this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_VALIDATION_ERROR'),\n\t\t\t\tautoHideDelay: 3000,\n\t\t\t});\n\t\t},\n\n\t\temitChangeData(): void\n\t\t{\n\t\t\tif (!Type.isFunction(this.onChangeDebounce))\n\t\t\t{\n\t\t\t\tthis.onChangeDebounce = Runtime.debounce(this.onChange, 100, this);\n\t\t\t}\n\n\t\t\tthis.onChangeDebounce();\n\t\t},\n\n\t\tonChange(): void\n\t\t{\n\t\t\tthis.$emit('onChange', {\n\t\t\t\tid: this.id,\n\t\t\t\tdata: this.getData(),\n\t\t\t});\n\t\t},\n\n\t\tgetBodyFieldClassList(additionalClasses: string[] = []): Array\n\t\t{\n\t\t\treturn [\n\t\t\t\t'crm-copilot__call-assessment_page-section-body-field',\n\t\t\t\t...additionalClasses,\n\t\t\t\t{ '--read-only': this.isEnabled !== true },\n\t\t\t];\n\t\t},\n\t},\n};\n","import { Loc, Type } from 'main.core';\nimport { BBCodeParser } from 'ui.bbcode.parser';\nimport { TextEditor, TextEditorComponent } from 'ui.text-editor';\nimport { TextEditorWrapperComponent } from '../common/text-editor-wrapper-component';\nimport { PromptLength as PromptLengthValidator } from './../../validator/prompt-length';\nimport { BasePage } from './base-page';\n\nexport const AboutPage = {\n\textends: BasePage,\n\n\tcomponents: {\n\t\tTextEditorComponent,\n\t\tTextEditorWrapperComponent,\n\t},\n\n\tprops: {\n\t\ttextEditor: TextEditor,\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tid: 'about',\n\t\t\tparser: new BBCodeParser(),\n\t\t\tpromptLengthValidator: new PromptLengthValidator(),\n\t\t\tpromptLengthError: null,\n\t\t};\n\t},\n\n\tmethods: {\n\t\tgetData(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\tprompt: this.textEditor.getText(),\n\t\t\t};\n\t\t},\n\t\tisReadyToMoveOn(): boolean\n\t\t{\n\t\t\treturn Type.isStringFilled(this.textEditor.getText());\n\t\t},\n\t\tvalidate(): boolean\n\t\t{\n\t\t\treturn this.promptLengthValidator.validate(this.getPlainPromptText());\n\t\t},\n\t\tonValidationFailed(): void\n\t\t{\n\t\t\tthis.promptLengthError = this.promptLengthValidator.getError();\n\t\t},\n\t\tonChange(): void\n\t\t{\n\t\t\tthis.promptLengthError = null;\n\t\t\tBasePage.methods.onChange.call(this);\n\t\t},\n\t\tgetPlainPromptText(): number\n\t\t{\n\t\t\treturn this.parser.parse(this.textEditor.getText()).toPlainText().trim();\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tpageTitle(): string\n\t\t{\n\t\t\treturn Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_ABOUT_TITLE');\n\t\t},\n\t\tpageDescription(): string\n\t\t{\n\t\t\treturn Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_ABOUT_DESCRIPTION');\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div v-if=\"isActive\">\n\t\t\t<div class=\"crm-copilot__call-assessment_page-section\">\n\t\t\t\t<Breadcrumbs :active-tab-id=\"id\" />\n\t\t\t\t<header class=\"crm-copilot__call-assessment_page-section-header\">\n\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-header-title\">\n\t\t\t\t\t\t{{ pageTitle }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-header-description\">\n\t\t\t\t\t\t{{ pageDescription }}\n\t\t\t\t\t</div>\n\t\t\t\t</header>\n\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body\">\n\t\t\t\t\t<AiDisabledInSettings v-if=\"!isEnabled\" />\n\t\t\t\t\t<div :class=\"this.getBodyFieldClassList()\">\n\t\t\t\t\t\t<TextEditorWrapperComponent\n\t\t\t\t\t\t\t:textEditor=\"textEditor\"\n\t\t\t\t\t\t\t@change=\"onChange\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div v-if=\"promptLengthError\" class=\"crm-copilot__call-assessment_page-section-body-field-error\">\n\t\t\t\t\t\t\t{{ promptLengthError }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","export const clientType = Object.freeze({\n\tnew: 1,\n\tinWork: 2,\n\treturn: 3,\n\trepeated: 4,\n});\n","import { Loc, Type } from 'main.core';\nimport { clientType as clientTypeEnum } from '../enum/client-type';\nimport { BasePage } from './base-page';\n\nexport const ClientPage = {\n\textends: BasePage,\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tid: 'client',\n\t\t\tactiveClientTypeIds: this.data.activeClientTypeIds ?? [],\n\t\t};\n\t},\n\n\tmethods: {\n\t\tgetData(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\tclientTypeIds: [...this.activeClientTypeIds],\n\t\t\t};\n\t\t},\n\t\tgetClientTypeClassList(clientTypeId: string): string[]\n\t\t{\n\t\t\tconst clientType = this.clientTypes.find((client) => client.id === clientTypeId);\n\n\t\t\treturn [\n\t\t\t\t'crm-copilot__call-assessment_page-section-body-field-client-type',\n\t\t\t\t`--client-${clientType.id}`,\n\t\t\t\t{ '--active': this.activeClientTypeIds.includes(clientTypeId) },\n\t\t\t\t{ '--readonly': this.readOnly },\n\t\t\t];\n\t\t},\n\t\tonClientTypeSelect(clientTypeId: string): void\n\t\t{\n\t\t\tif (this.readOnly)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.activeClientTypeIds.includes(clientTypeId))\n\t\t\t{\n\t\t\t\tconst index = this.activeClientTypeIds.indexOf(clientTypeId);\n\t\t\t\tthis.activeClientTypeIds.splice(index, 1);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.activeClientTypeIds.push(clientTypeId);\n\t\t\t}\n\n\t\t\tthis.emitChangeData();\n\t\t},\n\t\tonCheckboxClick(): boolean\n\t\t{\n\t\t\treturn !this.readOnly;\n\t\t},\n\t\tvalidate(): boolean\n\t\t{\n\t\t\treturn Type.isArrayFilled(this.activeClientTypeIds);\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tpageTitle(): string\n\t\t{\n\t\t\treturn Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CLIENT_TITLE');\n\t\t},\n\t\tpageDescription(): string\n\t\t{\n\t\t\treturn Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CLIENT_DESCRIPTION');\n\t\t},\n\t\tclientTypes(): Array<Object>\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tid: clientTypeEnum.new,\n\t\t\t\t\ttitle: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CLIENT_TYPE_NEW_TITLE'),\n\t\t\t\t\tdescription: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CLIENT_TYPE_NEW_DESCRIPTION'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: clientTypeEnum.inWork,\n\t\t\t\t\ttitle: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CLIENT_TYPE_IN_WORK_TITLE'),\n\t\t\t\t\tdescription: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CLIENT_TYPE_IN_WORK_DESCRIPTION'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: clientTypeEnum.return,\n\t\t\t\t\ttitle: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CLIENT_TYPE_RETURN_CUSTOMER_TITLE'),\n\t\t\t\t\tdescription: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CLIENT_TYPE_RETURN_CUSTOMER_DESCRIPTION'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: clientTypeEnum.repeated,\n\t\t\t\t\ttitle: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CLIENT_TYPE_REPEATED_APPROACH_TITLE'),\n\t\t\t\t\tdescription: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CLIENT_TYPE_REPEATED_APPROACH_DESCRIPTION'),\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div v-if=\"isActive\">\n\t\t\t<div class=\"crm-copilot__call-assessment_page-section\">\n\t\t\t\t<Breadcrumbs :active-tab-id=\"id\" />\n\t\t\t\t<header class=\"crm-copilot__call-assessment_page-section-header\">\n\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-header-title\">\n\t\t\t\t\t\t{{ pageTitle }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-header-description\">\n\t\t\t\t\t\t{{ pageDescription }}\n\t\t\t\t\t</div>\n\t\t\t\t</header>\n\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body\">\n\t\t\t\t\t<AiDisabledInSettings v-if=\"!isEnabled\" />\n\t\t\t\t\t<div :class=\"this.getBodyFieldClassList()\">\n\t\t\t\t\t\t<div v-for=\"(clientType, index) in clientTypes\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t:class=getClientTypeClassList(clientType.id)\n\t\t\t\t\t\t\t\t@click=\"onClientTypeSelect(clientType.id)\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field-client-type-avatar\">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field-client-type-info\">\n\t\t\t\t\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field-client-type-title\">\n\t\t\t\t\t\t\t\t\t\t{{ clientType.title }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field-client-type-description\">\n\t\t\t\t\t\t\t\t\t\t{{ clientType.description }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t:class=\"(readOnly ? 'readonly' : '')\"\n\t\t\t\t\t\t\t\t\t:onclick=\"onCheckboxClick\"\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tv-model=\"activeClientTypeIds\"\n\t\t\t\t\t\t\t\t\t:value=\"clientType.id\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<hr\n\t\t\t\t\t\t\t\tv-if=\"index + 1 < clientTypes.length\"\n\t\t\t\t\t\t\t\tclass=\"crm-copilot__call-assessment_page-section-body-field-client-type-divider\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Loc } from 'main.core';\n\nexport class BordersAccord\n{\n\t#errorMessage: ?string = null;\n\n\tvalidate(lowBorder: number, highBorder: number): boolean\n\t{\n\t\tif (highBorder < lowBorder)\n\t\t{\n\t\t\tthis.#errorMessage = Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CONTROL_VALIDATION_ERROR');\n\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.#errorMessage = null;\n\n\t\treturn true;\n\t}\n\n\tgetError(): ?string\n\t{\n\t\treturn this.#errorMessage;\n\t}\n}\n","import { Loc, Runtime } from 'main.core';\n\nconst DELTA = 10;\n\nexport const Pill = {\n\temits: [\n\t\t'change',\n\t],\n\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tadditionalClass: {\n\t\t\ttype: String,\n\t\t},\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tcurrentValue: this.value,\n\t\t};\n\t},\n\n\tmethods: {\n\t\tonInlineValueKeyDown(event: KeyboardEvent): boolean\n\t\t{\n\t\t\tconst { key, code, ctrlKey, metaKey } = event;\n\n\t\t\tif (metaKey || ctrlKey)\n\t\t\t{\n\t\t\t\tconst allowedKeysWithCtrlAndMeta = ['KeyA', 'KeyZ', 'KeyC', 'KeyV', 'KeyR', 'KeyX'];\n\t\t\t\tif (!allowedKeysWithCtrlAndMeta.includes(code))\n\t\t\t\t{\n\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst allowedKeys = ['ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown', 'Backspace', 'Delete'];\n\t\t\tif (allowedKeys.includes(code))\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (key === ' ' || Number.isNaN(Number(key)))\n\t\t\t{\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\tonInlineValueChange(event: InputEvent): void\n\t\t{\n\t\t\tconst value = Number(this.$refs.input.innerText);\n\t\t\tthis.executeValueChange(value);\n\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tconst range = document.createRange();\n\t\t\t\tconst selection = window.getSelection();\n\n\t\t\t\trange.selectNodeContents(this.$refs.input);\n\t\t\t\trange.collapse(false);\n\n\t\t\t\tselection.removeAllRanges();\n\t\t\t\tselection.addRange(range);\n\t\t\t\tthis.$refs.input.focus();\n\t\t\t});\n\t\t},\n\t\tonInlineValueBlur(): void\n\t\t{\n\t\t\tconst onlyNums = this.$refs.input.innerText.replaceAll(/\\D/g, '');\n\t\t\tif (onlyNums === '')\n\t\t\t{\n\t\t\t\tthis.executeValueChange(0);\n\t\t\t}\n\t\t},\n\t\tchangeValue(action: string): void\n\t\t{\n\t\t\tlet value = (action === 'plus' ? this.value + DELTA : this.value - DELTA);\n\n\t\t\tif (value % DELTA > 0)\n\t\t\t{\n\t\t\t\tvalue = Math.ceil(value / DELTA) * 10;\n\t\t\t}\n\n\t\t\tthis.executeValueChange(value);\n\t\t},\n\t\texecuteValueChange(value: number, action: ?string = null): void\n\t\t{\n\t\t\tthis.currentValue = value;\n\n\t\t\tthis.$refs.input.innerText = (\n\t\t\t\tvalue === 0\n\t\t\t\t\t? 0\n\t\t\t\t\t: this.$refs.input.innerText.replace(/^0+/, '')\n\t\t\t);\n\n\t\t\t// @todo animation will be redone\n\t\t\t// if (action)\n\t\t\t// {\n\t\t\t// \tconst target = (action === 'plus' ? this.$refs.plus : this.$refs.minus);\n\t\t\t// \tconst timeoutIdName = (action === 'plus' ? 'timeoutIdPlus' : 'timeoutIdMinus');\n\t\t\t//\n\t\t\t// \tDom.removeClass(target, '--click');\n\t\t\t// \tsetTimeout(() => {\n\t\t\t// \t\tif (Type.isNumber(this[timeoutIdName]))\n\t\t\t// \t\t{\n\t\t\t// \t\t\tclearTimeout(this[timeoutIdName]);\n\t\t\t// \t\t}\n\t\t\t// \t\tDom.addClass(target, '--click');\n\t\t\t// \t\tthis[timeoutIdName] = setTimeout(() => {\n\t\t\t// \t\t\tDom.removeClass(target, '--click');\n\t\t\t// \t\t}, 600);\n\t\t\t// \t}, 10);\n\t\t\t// }\n\n\t\t\tRuntime.debounce(\n\t\t\t\t() => {\n\t\t\t\t\tthis.$emit('change', this.currentValue);\n\t\t\t\t},\n\t\t\t\t300,\n\t\t\t\tthis,\n\t\t\t)();\n\t\t},\n\t},\n\n\tcomputed: {\n\t\ttitle(): string {\n\t\t\treturn Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PILL_TITLE');\n\t\t},\n\t\tclassList(): Array<string>\n\t\t{\n\t\t\treturn [\n\t\t\t\t'crm-copilot__call-assessment-pill',\n\t\t\t\tthis.additionalClass,\n\t\t\t];\n\t\t},\n\t\tminusButtonClassList(): Array\n\t\t{\n\t\t\treturn [\n\t\t\t\t'crm-copilot__call-assessment-pill-minus',\n\t\t\t\t{ '--disabled': this.currentValue <= 0 },\n\t\t\t];\n\t\t},\n\t\tplusButtonClassList(): Array\n\t\t{\n\t\t\treturn [\n\t\t\t\t'crm-copilot__call-assessment-pill-plus',\n\t\t\t\t{ '--disabled': this.currentValue >= 100 },\n\t\t\t];\n\t\t},\n\t},\n\n\twatch: {\n\t\tcurrentValue(value: number): void\n\t\t{\n\t\t\tif (value <= 0)\n\t\t\t{\n\t\t\t\tthis.currentValue = 0;\n\t\t\t}\n\n\t\t\tif (value >= 100)\n\t\t\t{\n\t\t\t\tthis.currentValue = 100;\n\t\t\t}\n\n\t\t\tif (Number.isNaN(value))\n\t\t\t{\n\t\t\t\tthis.currentValue = 0;\n\t\t\t}\n\n\t\t\tthis.$refs.input.innerText = this.currentValue;\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div :class=\"classList\">\n\t\t\t<div class=\"crm-copilot__call-assessment-pill-title\" v-html=\"title\">\n\t\t\t</div>\n\t\t\t<div class=\"crm-copilot__call-assessment-pill-control\">\n\t\t\t\t<div\n\t\t\t\t\t:class=\"minusButtonClassList\"\n\t\t\t\t\t@click=\"changeValue('minus')\"\n\t\t\t\t\tref=\"minus\"\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"crm-copilot__call-assessment-pill-value-container\">\n\t\t\t\t\t<div \n\t\t\t\t\t\tclass=\"crm-copilot__call-assessment-pill-value\"\n\t\t\t\t\t\tcontenteditable=\"true\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t@keydown=\"onInlineValueKeyDown\"\n\t\t\t\t\t\t@input=\"onInlineValueChange\"\n\t\t\t\t\t\t@blur=\"onInlineValueBlur\"\n\t\t\t\t\t\tref=\"input\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ currentValue }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"crm-copilot__call-assessment-pill-percent\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\t:class=\"plusButtonClassList\"\n\t\t\t\t\t@click=\"changeValue('plus')\"\n\t\t\t\t\tref=\"plus\"\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Loc } from 'main.core';\n\nexport const HelpLink = {\n\tprops: {\n\t\tarticleCode: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tmethods: {\n\t\tonClick(): void\n\t\t{\n\t\t\twindow.top.BX?.Helper?.show(`redirect=detail&code=${this.articleCode}`);\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<span class=\"crm-copilot__call-assessment-help-link\" ref=\"container\" @click=\"onClick\">\n\t\t\t${Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_HELP')}\n\t\t</span>\n\t`,\n};\n","import { Event } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { Dialog } from 'ui.entity-selector';\nimport { HelpLink } from './help-link';\n\nexport const TextWithDialog = {\n\tcomponents: {\n\t\tHelpLink,\n\t},\n\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcontent: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdialogTargetId: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t\tarticleCode: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tvalue: {\n\t\t\ttype: Number,\n\t\t},\n\t\titems: {\n\t\t\ttype: Array,\n\t\t},\n\t\ttabs: {\n\t\t\ttype: Array,\n\t\t},\n\t\tselectedItems: {\n\t\t\ttype: Array,\n\t\t},\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tstatus: this.isChecked ?? false,\n\t\t\tcurrentValue: this.value ?? null,\n\t\t};\n\t},\n\n\tmounted(): void\n\t{\n\t\tthis.initDialog();\n\t},\n\n\tupdated(): void\n\t{\n\t\tthis.initDialog();\n\t},\n\n\twatch: {\n\t\tcurrentValue(value): void\n\t\t{\n\t\t\tthis.emitSelectItem(value);\n\t\t},\n\t},\n\n\tmethods: {\n\t\tinitDialog(): void\n\t\t{\n\t\t\tif (this.dialogTargetId === null)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst targetNode = document.getElementById(this.dialogTargetId);\n\n\t\t\tthis.clientSelectorDialog = new Dialog({\n\t\t\t\ttargetNode,\n\t\t\t\tcontext: `CRM_COPILOT_CALL_ASSESSMENT_DIALOG_${this.id}`,\n\t\t\t\tmultiple: false,\n\t\t\t\tdropdownMode: true,\n\t\t\t\tshowAvatars: false,\n\t\t\t\tenableSearch: false,\n\t\t\t\twidth: 450,\n\t\t\t\tzIndex: 2500,\n\t\t\t\titems: this.items ?? [],\n\t\t\t\ttabs: this.tabs ?? [],\n\t\t\t\tselectedItems: this.selectedItems ?? [],\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': (event: BaseEvent) => {\n\t\t\t\t\t\tconst { item: { id } } = event.getData();\n\t\t\t\t\t\tthis.currentValue = id;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tEvent.bind(targetNode, 'click', () => {\n\t\t\t\tthis.clientSelectorDialog.show();\n\t\t\t});\n\t\t},\n\t\temitSelectItem(itemId: number): void\n\t\t{\n\t\t\tthis.$emit('onSelectItem', itemId);\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div>\n\t\t\t<span\n\t\t\t\tclass=\"crm-copilot__call-assessment_call_count\"\n\t\t\t\tv-html=\"content\"\n\t\t\t></span>\n\t\t\t<HelpLink :articleCode=\"articleCode\" />\n\t\t</div>\n\t`,\n};\n","import { Loc } from 'main.core';\nimport { UI } from 'ui.notification';\nimport { BordersAccord } from '../../validator/border-accord';\nimport { Pill } from '../common/pill';\nimport { TextWithDialog } from '../common/text-with-dialog';\nimport { BasePage } from './base-page';\n\nexport const ControlPage = {\n\textends: BasePage,\n\n\tcomponents: {\n\t\tTextWithDialog,\n\t\tPill,\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tid: 'control',\n\t\t\tlowBorder: this.data.lowBorder,\n\t\t\thighBorder: this.data.highBorder,\n\t\t\tvalidator: new BordersAccord(),\n\t\t};\n\t},\n\n\tmethods: {\n\t\tgetData(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\tlowBorder: this.lowBorder,\n\t\t\t\thighBorder: this.highBorder,\n\t\t\t};\n\t\t},\n\t\tsetLowBorder(value: number): void\n\t\t{\n\t\t\tthis.lowBorder = value;\n\t\t},\n\t\tsetHighBorder(value: number): void\n\t\t{\n\t\t\tthis.highBorder = value;\n\t\t},\n\t\tvalidate(): boolean\n\t\t{\n\t\t\treturn this.validator.validate(this.lowBorder, this.highBorder);\n\t\t},\n\t\tonValidationFailed(): void\n\t\t{\n\t\t\tUI.Notification.Center.notify({\n\t\t\t\tcontent: this.validator.getError(),\n\t\t\t\tautoHideDelay: 3000,\n\t\t\t});\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tpageTitle(): string\n\t\t{\n\t\t\treturn Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CONTROL_TITLE');\n\t\t},\n\t\tpageDescription(): string\n\t\t{\n\t\t\treturn Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CONTROL_DESCRIPTION');\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div v-if=\"isActive\">\n\t\t\t<div class=\"crm-copilot__call-assessment_page-section\">\n\t\t\t\t<Breadcrumbs :active-tab-id=\"id\"/>\n\t\t\t\t<header class=\"crm-copilot__call-assessment_page-section-header\">\n\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-header-title\">\n\t\t\t\t\t\t{{ pageTitle }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-header-description\">\n\t\t\t\t\t\t{{ pageDescription }}\n\t\t\t\t\t</div>\n\t\t\t\t</header>\n\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body\">\n\t\t\t\t\t<AiDisabledInSettings v-if=\"!isEnabled\" />\n\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field-container\">\n\t\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field-title --low-icon\">\n\t\t\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CONTROL_LOW_BORDER_TITLE') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field-content\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"crm-copilot__call-assessment_page-section-body-field-subtitle\"\n\t\t\t\t\t\t\t\tv-html=\"this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CONTROL_LOW_BORDER_DESCRIPTION')\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Pill\n\t\t\t\t\t\t\t\tadditionalClass=\"--low\"\n\t\t\t\t\t\t\t\t:value=\"lowBorder\"\n\t\t\t\t\t\t\t\t@change=\"setLowBorder\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field-additional\">\n\t\t\t\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CONTROL_LOW_BORDER_ADDITIONAL') }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field-container\">\n\t\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field-title --high-icon\">\n\t\t\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CONTROL_HIGH_BORDER_TITLE') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field-content\">\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tclass=\"crm-copilot__call-assessment_page-section-body-field-subtitle\"\n\t\t\t\t\t\t\t\tv-html=\"this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CONTROL_HIGH_BORDER_DESCRIPTION')\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Pill\n\t\t\t\t\t\t\t\tadditionalClass=\"--high\"\n\t\t\t\t\t\t\t\t:value=\"highBorder\"\n\t\t\t\t\t\t\t\t@change=\"setHighBorder\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field-additional\">\n\t\t\t\t\t\t\t\t{{ this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_CONTROL_HIGH_BORDER_ADDITIONAL') }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","export const Button = {\n\tprops: {\n\t\taction: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tindex: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tclassList(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\t'crm-copilot__call-assessment-availability-selector-button': true,\n\t\t\t\t'--add': this.action === 'add',\n\t\t\t\t'--remove': this.action !== 'add',\n\t\t\t};\n\t\t},\n\t},\n\n\tmethods: {\n\t\tonClick(): void\n\t\t{\n\t\t\tconst { action, index } = this;\n\n\t\t\tthis.$emit('button-click', {\n\t\t\t\tindex,\n\t\t\t\taction,\n\t\t\t});\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div :class=\"classList\" @click=\"onClick\"></div>\n\t`,\n};\n","export const Chevron = {\n\tprops: {\n\t\tisExpanded: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tclassList(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\t'crm-copilot__call-assessment-availability-selector-chevron': true,\n\t\t\t\t'--expanded': this.isExpanded,\n\t\t\t};\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div :class=\"classList\"></div>\n\t`,\n};\n","import { DatetimeConverter } from 'crm.timeline.tools';\nimport { BaseEvent } from 'main.core.events';\nimport { DatePicker } from 'ui.date-picker';\n\nimport { Chevron } from './chevron';\n\nexport const PeriodRow = {\n\tcomponents: {\n\t\tChevron,\n\t},\n\tprops: {\n\t\tstartPoint: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tendPoint: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmodelValue: {\n\t\t\ttype: Object,\n\t\t\tdefault: {},\n\t\t},\n\t},\n\temits: ['update:modelValue'],\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tcurrentStartPoint: this.startPoint,\n\t\t\tcurrentEndPoint: this.endPoint,\n\t\t\tisExpanded: false,\n\t\t};\n\t},\n\n\tcreated(): void\n\t{\n\t\tthis.datePicker = new DatePicker({\n\t\t\trangeStartInput: this.$refs.start,\n\t\t\trangeEndInput: this.$refs.end,\n\t\t\tselectionMode: 'range',\n\t\t\tdefaultTime: '08:00',\n\t\t\tdateFormat: DatetimeConverter.getSiteDateTimeFormat(true),\n\t\t\ttimeFormat: DatetimeConverter.getSiteShortTimeFormat(),\n\t\t\tselectedDates: [this.currentStartPoint, this.currentEndPoint],\n\t\t\tenableTime: true,\n\t\t\tevents: {\n\t\t\t\tonSelectChange: (event: BaseEvent) => {\n\t\t\t\t\tconst dates = event\n\t\t\t\t\t\t.getTarget()\n\t\t\t\t\t\t.getSelectedDates()\n\t\t\t\t\t\t.map((date: Date) => event.getTarget().formatDate(date, DatetimeConverter.getSiteDateTimeFormat(true)))\n\t\t\t\t\t;\n\n\t\t\t\t\tif (dates[0])\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.currentStartPoint = dates[0];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (dates[1])\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.currentEndPoint = dates[1];\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.$emit('update:modelValue', {\n\t\t\t\t\t\tstartPoint: this.currentStartPoint,\n\t\t\t\t\t\tendPoint: this.currentEndPoint,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tonShow: () => {\n\t\t\t\t\tthis.isExpanded = true;\n\t\t\t\t},\n\t\t\t\tonHide: () => {\n\t\t\t\t\tthis.isExpanded = false;\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t},\n\n\tmounted(): void\n\t{\n\t\tthis.datePicker.setTargetNode(this.$refs.wrapper);\n\t\tthis.datePicker.selectRange(this.currentStartPoint, this.currentEndPoint);\n\t},\n\n\tbeforeUnmount(): void\n\t{\n\t\tthis.datePicker.destroy();\n\t},\n\n\tmethods: {\n\t\tshowPicker(event: PointerEvent): void\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tthis.datePicker.show();\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"crm-copilot__call-assessment-availability-selector-row\"\n\t\t\tref=\"wrapper\"\n\t\t>\n\t\t\t<div class=\"crm-copilot__call-assessment-availability-selector-row-wrapper\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tref=\"start\"\n\t\t\t\t\tclass=\"crm-copilot__call-assessment-availability-selector-input\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\treadonly=\"readonly\"\n\t\t\t\t\t@click=\"showPicker\"\n\t\t\t\t\t:value=\"currentStartPoint\"\n\t\t\t\t>\n\t\t\t\t<Chevron \n\t\t\t\t\t:isExpanded=\"isExpanded\"\n\t\t\t\t\t@click=\"showPicker\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"crm-copilot__call-assessment-availability-selector-delimiter\"></div>\n\t\t\t<div class=\"crm-copilot__call-assessment-availability-selector-row-wrapper\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tref=\"end\"\n\t\t\t\t\tclass=\"crm-copilot__call-assessment-availability-selector-input\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\treadonly=\"readonly\"\n\t\t\t\t\t@click=\"showPicker\"\n\t\t\t\t\t:value=\"currentEndPoint\"\n\t\t\t\t>\n\t\t\t\t<Chevron \n\t\t\t\t\t:isExpanded=\"isExpanded\"\n\t\t\t\t\t@click=\"showPicker\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","export const weekdayType = Object.freeze({\n\tmonday: 'monday',\n\ttuesday: 'tuesday',\n\twednesday: 'wednesday',\n\tthursday: 'thursday',\n\tfriday: 'friday',\n\tsaturday: 'saturday',\n\tsunday: 'sunday',\n\tworking: 'working',\n\tweekends: 'weekends',\n});\n","import { Loc } from 'main.core';\n\nexport class TimePeriod\n{\n\t#errorMessage: ?string = null;\n\n\tvalidate(startTime: string, endTime: string): boolean\n\t{\n\t\tconst parseTime = (dateTimeStr) => {\n\t\t\tconst [, time] = dateTimeStr.split(' ');\n\t\t\tconst [hours, minutes] = time.split(':').map(Number);\n\n\t\t\treturn new Date(9999, 11, 31, hours, minutes);\n\t\t};\n\n\t\tconst start = parseTime(startTime);\n\t\tconst end = parseTime(endTime);\n\n\t\tif (Number.isNaN(start) || Number.isNaN(end))\n\t\t{\n\t\t\tthis.#errorMessage = Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_VALIDATION_TIME_ERROR_1');\n\n\t\t\treturn false;\n\t\t}\n\n\t\tif (start.getTime() >= end.getTime())\n\t\t{\n\t\t\tthis.#errorMessage = Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_VALIDATION_TIME_ERROR_2');\n\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.#errorMessage = null;\n\n\t\treturn true;\n\t}\n\n\tgetError(): ?string\n\t{\n\t\treturn this.#errorMessage;\n\t}\n}\n","import { DatetimeConverter } from 'crm.timeline.tools';\nimport { Dom, Type } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { DatePicker } from 'ui.date-picker';\n\nimport { Chevron } from './chevron';\nimport { weekdayType as weekdayTypeList } from '../../enum/weekday-type';\nimport { TimePeriod as TimePeriodValidator } from '../../../validator/time-period';\n\nexport const CustomRow = {\n\tcomponents: {\n\t\tChevron,\n\t},\n\tprops: {\n\t\tweekdayType: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tstartPoint: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tendPoint: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmodelValue: {\n\t\t\ttype: Object,\n\t\t\tdefault: {},\n\t\t},\n\t},\n\temits: ['update:modelValue'],\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tcurrentWeekdayType: this.weekdayType ?? weekdayTypeList.working,\n\t\t\tcurrentStartPoint: this.startPoint,\n\t\t\tcurrentEndPoint: this.endPoint,\n\t\t\tisExpandedStartPoint: false,\n\t\t\tisExpandedEndPoint: false,\n\t\t\ttimePeriodValidator: new TimePeriodValidator(),\n\t\t};\n\t},\n\n\tcreated(): void\n\t{\n\t\tthis.datePicker = new DatePicker({\n\t\t\ttype: 'time',\n\t\t\tdateFormat: DatetimeConverter.getSiteDateTimeFormat(true),\n\t\t\ttimeFormat: DatetimeConverter.getSiteShortTimeFormat(),\n\t\t\tminuteStep: 5,\n\t\t\tevents: {\n\t\t\t\tonSelectChange: (event: BaseEvent) => {\n\t\t\t\t\tconst wrapper = event.getTarget().getInputField().parentNode;\n\t\t\t\t\tif (!Type.isDomNode(wrapper))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst dates = event\n\t\t\t\t\t\t.getTarget()\n\t\t\t\t\t\t.getSelectedDates()\n\t\t\t\t\t\t.map((date: Date) => event.getTarget().formatDate(date, DatetimeConverter.getSiteDateTimeFormat(true)))\n\t\t\t\t\t;\n\n\t\t\t\t\tif (!dates[0])\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (wrapper?.getAttribute('id') === 'start-point-selector')\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.currentStartPoint = dates[0];\n\t\t\t\t\t}\n\t\t\t\t\telse if (wrapper?.getAttribute('id') === 'end-point-selector')\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.currentEndPoint = dates[0];\n\t\t\t\t\t}\n\n\t\t\t\t\tconst isValidRow = this.timePeriodValidator.validate(this.currentStartPoint, this.currentEndPoint);\n\t\t\t\t\tif (isValidRow)\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.removeClass(this.$refs.start, '--invalid');\n\t\t\t\t\t\tDom.removeClass(this.$refs.end, '--invalid');\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.addClass(this.$refs.start, '--invalid');\n\t\t\t\t\t\tDom.addClass(this.$refs.end, '--invalid');\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.$emit('update:modelValue', {\n\t\t\t\t\t\tweekdayType: this.currentWeekdayType,\n\t\t\t\t\t\tstartPoint: this.currentStartPoint,\n\t\t\t\t\t\tendPoint: this.currentEndPoint,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tonHide: () => {\n\t\t\t\t\tthis.isExpandedStartPoint = false;\n\t\t\t\t\tthis.isExpandedEndPoint = false;\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t},\n\n\tbeforeUnmount(): void\n\t{\n\t\tthis.datePicker.destroy();\n\t},\n\n\tcomputed: {\n\t\tweekdayTypeList(): Array<Object>\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tvalue: weekdayTypeList.monday,\n\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PERIOD_SELECTOR_PERIOD_MONDAY'),\n\t\t\t\t}, {\n\t\t\t\t\tvalue: weekdayTypeList.tuesday,\n\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PERIOD_SELECTOR_PERIOD_TUESDAY'),\n\t\t\t\t}, {\n\t\t\t\t\tvalue: weekdayTypeList.wednesday,\n\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PERIOD_SELECTOR_PERIOD_WEDNESDAY'),\n\t\t\t\t}, {\n\t\t\t\t\tvalue: weekdayTypeList.thursday,\n\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PERIOD_SELECTOR_PERIOD_THURSDAY'),\n\t\t\t\t}, {\n\t\t\t\t\tvalue: weekdayTypeList.friday,\n\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PERIOD_SELECTOR_PERIOD_FRIDAY'),\n\t\t\t\t}, {\n\t\t\t\t\tvalue: weekdayTypeList.saturday,\n\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PERIOD_SELECTOR_PERIOD_SATURDAY'),\n\t\t\t\t}, {\n\t\t\t\t\tvalue: weekdayTypeList.sunday,\n\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PERIOD_SELECTOR_PERIOD_SUNDAY'),\n\t\t\t\t}, {\n\t\t\t\t\tvalue: weekdayTypeList.working,\n\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PERIOD_SELECTOR_PERIOD_WORKING_DAYS'),\n\t\t\t\t}, {\n\t\t\t\t\tvalue: weekdayTypeList.weekends,\n\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PERIOD_SELECTOR_PERIOD_WEEKENDS'),\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\n\t\tstartTimeString(): string\n\t\t{\n\t\t\treturn this.currentStartPoint.split(' ')[1];\n\t\t},\n\n\t\tendTimeString(): string\n\t\t{\n\t\t\treturn this.currentEndPoint.split(' ')[1];\n\t\t},\n\t},\n\n\twatch: {\n\t\tcurrentWeekdayType(weekdayType: String): void\n\t\t{\n\t\t\tthis.currentWeekdayType = weekdayType;\n\n\t\t\tthis.$emit('update:modelValue', {\n\t\t\t\tweekdayType: this.currentWeekdayType,\n\t\t\t\tstartPoint: this.currentStartPoint,\n\t\t\t\tendPoint: this.currentEndPoint,\n\t\t\t});\n\t\t},\n\t},\n\n\tmethods: {\n\t\tshowPicker(event: PointerEvent): void\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tconst wrapper = event.target.parentNode;\n\t\t\tif (!Type.isDomNode(wrapper))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.datePicker.setTargetNode(wrapper);\n\n\t\t\tif (wrapper?.getAttribute('id') === 'start-point-selector')\n\t\t\t{\n\t\t\t\tthis.datePicker.setInputField(this.$refs.start);\n\t\t\t\tthis.datePicker.selectDate(this.currentStartPoint);\n\t\t\t\tthis.isExpandedStartPoint = true;\n\t\t\t}\n\t\t\telse if (wrapper?.getAttribute('id') === 'end-point-selector')\n\t\t\t{\n\t\t\t\tthis.datePicker.setInputField(this.$refs.end);\n\t\t\t\tthis.datePicker.selectDate(this.currentEndPoint);\n\t\t\t\tthis.isExpandedEndPoint = true;\n\t\t\t}\n\n\t\t\tthis.datePicker.show();\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div class=\"crm-copilot__call-assessment-availability-selector-row\">\n\t\t\t<div \n\t\t\t\tclass=\"crm-copilot__call-assessment-availability-selector-row-wrapper\"\n\t\t\t\tstyle=\"padding-right: 15px;\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-after-icon ui-ctl-dropdown\">\n\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t\t<select\n\t\t\t\t\t\tclass=\"ui-ctl-element crm-copilot__call-assessment-availability-selector-input  --weekday-type\"\n\t\t\t\t\t\tv-model=\"currentWeekdayType\"\n\t\t\t\t\t\t:value=\"currentWeekdayType\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<option\n\t\t\t\t\t\t\tv-for=\"typeItem in weekdayTypeList\"\n\t\t\t\t\t\t\t:value=\"typeItem.value\"\n\t\t\t\t\t\t\t:disabled=\"currentWeekdayType === typeItem.value\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{typeItem.title}}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div \n\t\t\t\tid=\"start-point-selector\"\n\t\t\t\tclass=\"crm-copilot__call-assessment-availability-selector-row-wrapper\"\n\t\t\t>\n\t\t\t\t<input \n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tref=\"start\"\n\t\t\t\t\tclass=\"crm-copilot__call-assessment-availability-selector-input --time\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\treadonly=\"readonly\"\n\t\t\t\t\t@click=\"showPicker\"\n\t\t\t\t\t:value=\"startTimeString\"\n\t\t\t\t>\n\t\t\t\t<Chevron\n\t\t\t\t\t:isExpanded=\"isExpandedStartPoint\"\n\t\t\t\t\t@click=\"showPicker\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"crm-copilot__call-assessment-availability-selector-delimiter\"></div>\n\t\t\t<div\n\t\t\t\tid=\"end-point-selector\"\n\t\t\t\tclass=\"crm-copilot__call-assessment-availability-selector-row-wrapper\"\n\t\t\t>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tref=\"end\"\n\t\t\t\t\tclass=\"crm-copilot__call-assessment-availability-selector-input --time\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\treadonly=\"readonly\"\n\t\t\t\t\t@click=\"showPicker\"\n\t\t\t\t\t:value=\"endTimeString\"\n\t\t\t\t>\n\t\t\t\t<Chevron\n\t\t\t\t\t:isExpanded=\"isExpandedEndPoint\"\n\t\t\t\t\t@click=\"showPicker\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","export const availabilityType = Object.freeze({\n\talways_active: 'always_active',\n\tinactive: 'inactive',\n\tperiod: 'period',\n\tcustom: 'custom',\n});\n","import { DatetimeConverter } from 'crm.timeline.tools';\nimport { Type } from 'main.core';\nimport { DateTimeFormat } from 'main.date';\n\nimport { Button } from './button';\nimport { PeriodRow } from './period-row';\nimport { CustomRow } from './custom-row';\nimport { availabilityType as availabilityTypeList } from '../../enum/availability-type';\nimport { weekdayType as weekdayTypeList } from '../../enum/weekday-type';\n\nexport const TypeSelector = {\n\tcomponents: {\n\t\tButton,\n\t\tPeriodRow,\n\t\tCustomRow,\n\t},\n\n\tprops: {\n\t\tavailabilityType: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\treadOnly: {\n\t\t\ttype: Boolean,\n\t\t},\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tcurrentAvailabilityType: this.availabilityType,\n\t\t\tavailabilityTypeData: {},\n\t\t};\n\t},\n\n\tbeforeCreate(): void\n\t{\n\t\tthis.availabilityTypeList = availabilityTypeList;\n\t\tthis.dateTimeFormat = DatetimeConverter.getSiteDateTimeFormat(true);\n\t},\n\n\tcomputed: {\n\t\ttypeList(): Array<Object>\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tvalue: availabilityTypeList.always_active,\n\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_AVAILABILITY_SELECTOR_ALWAYS_ACTIVE'),\n\t\t\t\t}, {\n\t\t\t\t\tvalue: availabilityTypeList.period,\n\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_AVAILABILITY_SELECTOR_PERIOD'),\n\t\t\t\t}, {\n\t\t\t\t\tvalue: availabilityTypeList.custom,\n\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_AVAILABILITY_SELECTOR_CUSTOM'),\n\t\t\t\t}, {\n\t\t\t\t\tvalue: availabilityTypeList.inactive,\n\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_AVAILABILITY_SELECTOR_INACTIVE'),\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\n\t\thasRows(): boolean\n\t\t{\n\t\t\treturn Type.isArrayFilled(this.availabilityTypeData[this.currentAvailabilityType]);\n\t\t},\n\n\t\trowsForCurrentType(): Array<Object>\n\t\t{\n\t\t\treturn this.availabilityTypeData[this.currentAvailabilityType] ?? [];\n\t\t},\n\n\t\tisExtendedAvailabilityType(): boolean\n\t\t{\n\t\t\treturn this.currentAvailabilityType !== availabilityTypeList.always_active\n\t\t\t\t&& this.currentAvailabilityType !== availabilityTypeList.inactive\n\t\t\t;\n\t\t},\n\t},\n\n\twatch: {\n\t\tcurrentAvailabilityType(availabilityType: String): void\n\t\t{\n\t\t\tthis.$emit('type-change', {\n\t\t\t\tavailabilityType,\n\t\t\t});\n\t\t},\n\t},\n\n\tmethods: {\n\t\tonActionButtonClick({ action, index }): void\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.currentAvailabilityType === availabilityTypeList.always_active\n\t\t\t\t|| this.currentAvailabilityType === availabilityTypeList.inactive\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (action === 'add')\n\t\t\t{\n\t\t\t\tconst item = (\n\t\t\t\t\tthis.currentAvailabilityType === availabilityTypeList.period\n\t\t\t\t\t\t? this.getDefaultDatePeriodItem()\n\t\t\t\t\t\t: this.getDefaultCustomItem()\n\t\t\t\t);\n\n\t\t\t\tthis.rowsForCurrentType.push(item);\n\t\t\t}\n\t\t\telse // remove\n\t\t\t{\n\t\t\t\tthis.rowsForCurrentType.splice(index, 1);\n\t\t\t}\n\t\t},\n\n\t\tonUpdateCustomRow(row: Object): void\n\t\t{\n\t\t\tthis.$emit('data-change', {\n\t\t\t\tavailabilityType: this.currentAvailabilityType,\n\t\t\t\tavailabilityTypeData: this.getAvailabilityData(),\n\t\t\t\tupdatedRow: row,\n\t\t\t});\n\t\t},\n\n\t\tgetDefaultDatePeriodItem(): Object\n\t\t{\n\t\t\tconst startPointDate = this.getRoundedToNearestMinuteDate(new Date(), 15);\n\t\t\tconst endPointDate = this.getRoundedToNearestMinuteDate(new Date(), 15);\n\t\t\tendPointDate.setDate(endPointDate.getDate() + 7); // 1 week by default\n\n\t\t\treturn {\n\t\t\t\tstartPoint: DateTimeFormat.format(this.dateTimeFormat, startPointDate),\n\t\t\t\tendPoint: DateTimeFormat.format(this.dateTimeFormat, endPointDate),\n\t\t\t};\n\t\t},\n\n\t\tgetDefaultCustomItem(): Object\n\t\t{\n\t\t\tconst startPointDate = Math.round((new Date()).setHours(8, 0, 0, 0) / 1000);\n\t\t\tconst endPointDate = Math.round((new Date()).setHours(18, 0, 0, 0) / 1000);\n\n\t\t\treturn {\n\t\t\t\tweekdayType: weekdayTypeList.working,\n\t\t\t\tstartPoint: DateTimeFormat.format(this.dateTimeFormat, startPointDate),\n\t\t\t\tendPoint: DateTimeFormat.format(this.dateTimeFormat, endPointDate),\n\t\t\t};\n\t\t},\n\n\t\tgetRoundedToNearestMinuteDate(date: Date, minutes: number): Date\n\t\t{\n\t\t\tconst currentTime = date.getTime();\n\t\t\tconst ms = minutes * 60 * 1000;\n\t\t\tconst roundedTime = Math.round(currentTime / ms) * ms;\n\n\t\t\treturn new Date(roundedTime);\n\t\t},\n\n\t\tgetAvailabilityData(): Array\n\t\t{\n\t\t\treturn this.availabilityTypeData[this.currentAvailabilityType] ?? [];\n\t\t},\n\n\t\tsetAvailabilityData(availabilityData: Array): void\n\t\t{\n\t\t\tif (Type.isArrayFilled(availabilityData))\n\t\t\t{\n\t\t\t\tthis.availabilityTypeData[this.currentAvailabilityType] = availabilityData;\n\n\t\t\t\tif (this.currentAvailabilityType === this.availabilityTypeList.period)\n\t\t\t\t{\n\t\t\t\t\tthis.availabilityTypeData[this.availabilityTypeList.custom] = [\n\t\t\t\t\t\tthis.getDefaultCustomItem(),\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t\telse if (this.currentAvailabilityType === this.availabilityTypeList.custom)\n\t\t\t\t{\n\t\t\t\t\tthis.availabilityTypeData[this.availabilityTypeList.period] = [\n\t\t\t\t\t\tthis.getDefaultDatePeriodItem(),\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.availabilityTypeData = {\n\t\t\t\t[this.availabilityTypeList.period]: [\n\t\t\t\t\tthis.getDefaultDatePeriodItem(),\n\t\t\t\t],\n\t\t\t\t[this.availabilityTypeList.custom]: [\n\t\t\t\t\tthis.getDefaultCustomItem(),\n\t\t\t\t],\n\t\t\t};\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div class=\"crm-copilot__call-assessment-availability-selector\">\n\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-after-icon ui-ctl-dropdown\">\n\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t<select\n\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\tv-model=\"currentAvailabilityType\"\n\t\t\t\t\t:value=\"currentAvailabilityType\"\n\t\t\t\t>\n\t\t\t\t\t<option\n\t\t\t\t\t\tv-for=\"typeItem in typeList\"\n\t\t\t\t\t\t:value=\"typeItem.value\"\n\t\t\t\t\t\t:disabled=\"readOnly && currentAvailabilityType !== typeItem.value\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{typeItem.title}}\n\t\t\t\t\t</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t<div \n\t\t\t\tclass=\"crm-copilot__call-assessment-availability-rows\"\n\t\t\t\tv-if=\"isExtendedAvailabilityType\"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"crm-copilot__call-assessment-availability-row\"\n\t\t\t\t\tv-if=\"currentAvailabilityType === availabilityTypeList.period\"\n\t\t\t\t\tv-for=\"(row, index) in rowsForCurrentType\"\n\t\t\t\t>\n\t\t\t\t\t<PeriodRow\n\t\t\t\t\t\t:start-point=\"row.startPoint\"\n\t\t\t\t\t\t:end-point=\"row.endPoint\"\n\t\t\t\t\t\tv-model=\"availabilityTypeData[availabilityTypeList.period][index]\"\n\t\t\t\t\t/>\n\t\t\t\t\t<Button\n\t\t\t\t\t\t:action=\"(index < rowsForCurrentType.length - 1 ? 'remove' : 'add')\"\n\t\t\t\t\t\t:index=\"index\"\n\t\t\t\t\t\t@button-click=\"onActionButtonClick\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"crm-copilot__call-assessment-availability-row\"\n\t\t\t\t\tv-if=\"currentAvailabilityType === availabilityTypeList.custom\"\n\t\t\t\t\tv-for=\"(row, index) in rowsForCurrentType\"\n\t\t\t\t>\n\t\t\t\t\t<CustomRow\n\t\t\t\t\t\t:weekday-type=\"row.weekdayType\"\n\t\t\t\t\t\t:start-point=\"row.startPoint\"\n\t\t\t\t\t\t:end-point=\"row.endPoint\"\n\t\t\t\t\t\tv-model=\"availabilityTypeData[availabilityTypeList.custom][index]\"\n\t\t\t\t\t\tv-on:update:modelValue=\"onUpdateCustomRow\"\n\t\t\t\t\t/>\n\t\t\t\t\t<Button\n\t\t\t\t\t\t:action=\"(index < rowsForCurrentType.length - 1 ? 'remove' : 'add')\"\n\t\t\t\t\t\t:index=\"index\"\n\t\t\t\t\t\t@button-click=\"onActionButtonClick\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Extension } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { InfoHelper } from 'ui.info-helper';\n\nimport 'ui.forms';\n\nimport { BasePage } from './base-page';\nimport { TypeSelector } from '../common/availability/type-selector';\nimport { availabilityType as availabilityTypeList } from '../enum/availability-type';\nimport { TimePeriod as TimePeriodValidator } from './../../validator/time-period';\n\nexport const SettingsPage = {\n\textends: BasePage,\n\tcomponents: {\n\t\tTypeSelector,\n\t},\n\n\tdata(): Object\n\t{\n\t\tlet currentAutoCheckTypeId = 0;\n\t\tif (this.settings.baas?.hasPackage)\n\t\t{\n\t\t\tcurrentAutoCheckTypeId = this.data.autoCheckTypeId ?? 1;\n\t\t}\n\n\t\treturn {\n\t\t\tid: 'settings',\n\t\t\tcallTypeId: this.data.callTypeId ?? 1,\n\t\t\tautoCheckTypeId: currentAutoCheckTypeId,\n\t\t\tavailabilityType: this.data.availabilityType ?? availabilityTypeList.always_active,\n\t\t\tavailabilityData: this.data.availabilityData ?? [],\n\t\t\ttimePeriodValidator: new TimePeriodValidator(),\n\t\t\ttimePeriodError: null,\n\t\t};\n\t},\n\n\tmethods: {\n\t\tgetData(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\tcallTypeId: this.callTypeId,\n\t\t\t\tautoCheckTypeId: this.autoCheckTypeId,\n\t\t\t\tavailabilityType: this.availabilityType,\n\t\t\t\tavailabilityData: this.$refs.typeSelector?.getAvailabilityData() ?? [],\n\t\t\t};\n\t\t},\n\n\t\tonAutoCheckTypeIdChange(event: BaseEvent): void\n\t\t{\n\t\t\tif (this.isBaasHasPackage)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { value } = event.target;\n\t\t\tif (value !== 0)\n\t\t\t{\n\t\t\t\tif (this.packageEmptySliderCode)\n\t\t\t\t{\n\t\t\t\t\tInfoHelper.show(this.packageEmptySliderCode);\n\t\t\t\t}\n\n\t\t\t\tvoid this.$nextTick(() => {\n\t\t\t\t\tthis.autoCheckTypeId = 0;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tonAvailabilityTypeChange(data: Object): void\n\t\t{\n\t\t\tthis.availabilityType = data.availabilityType;\n\n\t\t\tthis.timePeriodError = null;\n\t\t},\n\n\t\tonAvailabilityDataChange(data: Object): void\n\t\t{\n\t\t\t// @todo: setup \"availabilityData\" data here in the future if needed\n\t\t\t// const { availabilityType, availabilityTypeData, updatedRow } = data;\n\n\t\t\tthis.validate();\n\t\t\tthis.onValidationFailed();\n\t\t},\n\n\t\tvalidate(): boolean\n\t\t{\n\t\t\tif (this.availabilityType === availabilityTypeList.custom)\n\t\t\t{\n\t\t\t\tconst data = this.$refs.typeSelector?.getAvailabilityData() ?? [];\n\t\t\t\tconst invalidItems = data.filter((item: Object) => {\n\t\t\t\t\treturn !this.timePeriodValidator.validate(item.startPoint, item.endPoint);\n\t\t\t\t});\n\n\t\t\t\treturn invalidItems.length === 0;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\tonValidationFailed(): void\n\t\t{\n\t\t\tthis.timePeriodError = this.timePeriodValidator.getError();\n\t\t},\n\t},\n\n\tmounted()\n\t{\n\t\tthis.$refs.typeSelector?.setAvailabilityData(this.availabilityData);\n\t},\n\n\tcomputed: {\n\t\tpageTitle(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_TITLE');\n\t\t},\n\n\t\tpageDescription(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_DESCRIPTION');\n\t\t},\n\n\t\tpageSectionSettingsCallType(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_CALL_TYPE');\n\t\t},\n\n\t\tpageSectionSettingsCallTypeDescription(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_CALL_TYPE_DESCRIPTION');\n\t\t},\n\n\t\tpageSectionSettingsCheck(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_CHECK');\n\t\t},\n\n\t\tpageSectionSettingsCheckDescription(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_CHECK_DESCRIPTION');\n\t\t},\n\n\t\tcallTypes(): Array<Object>\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tid: 1,\n\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_CALL_TYPE_ALL'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 2,\n\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_CALL_TYPE_INCOMING'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 3,\n\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_CALL_TYPE_OUTGOING'),\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\n\t\tcheckTypes(): Array<Object>\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tvalue: 1,\n\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_CHECK_FIRST_INCOMING'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: 2,\n\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_CHECK_ALL_INCOMING'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: 3,\n\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_CHECK_ALL_OUTGOING'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: 4,\n\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_CHECK_ALL'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: 0,\n\t\t\t\t\ttitle: this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_CHECK_DISABLED'),\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\n\t\tisBaasAvailable(): boolean\n\t\t{\n\t\t\treturn this.settings.baas?.isAvailable ?? false;\n\t\t},\n\n\t\tisBaasHasPackage(): boolean\n\t\t{\n\t\t\treturn this.settings.baas?.hasPackage ?? false;\n\t\t},\n\n\t\tpackageEmptySliderCode(): ?string\n\t\t{\n\t\t\treturn this.settings.baas?.aiPackagesEmptySliderCode ?? null;\n\t\t},\n\n\t\tpageSectionSettingsAvailability(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_AVAILABILITY');\n\t\t},\n\n\t\tpageSectionSettingsAvailabilityDescription(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PAGE_SETTINGS_AVAILABILITY_DESCRIPTION');\n\t\t},\n\n\t\tisCallAssessmentAvailabilityEnabled(): boolean\n\t\t{\n\t\t\treturn Extension.getSettings('crm.copilot.call-assessment').get('callAssessmentAvailabilityEnabled');\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div v-show=\"isActive\">\n\t\t\t<div class=\"crm-copilot__call-assessment_page-section\">\n\t\t\t\t<Breadcrumbs :active-tab-id=\"id\" />\n\t\t\t\t<header class=\"crm-copilot__call-assessment_page-section-header\">\n\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-header-title\">\n\t\t\t\t\t\t{{ pageTitle }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-header-description\">\n\t\t\t\t\t\t{{ pageDescription }}\n\t\t\t\t\t</div>\n\t\t\t\t</header>\n\n\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body\">\n\t\t\t\t\t<AiDisabledInSettings v-if=\"!isEnabled\" />\n\t\t\t\t\t<div :class=\"this.getBodyFieldClassList(['ui-ctl', 'ui-ctl-after-icon', 'ui-ctl-dropdown', 'ui-ctl-w100'])\">\n\t\t\t\t\t\t<label>{{ pageSectionSettingsCallType }}</label>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-after-icon ui-ctl-dropdown\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t\t\t\t<select class=\"ui-ctl-element\" v-model=\"callTypeId\">\n\t\t\t\t\t\t\t\t<option \n\t\t\t\t\t\t\t\t\tv-for=\"callType in callTypes\"\n\t\t\t\t\t\t\t\t\t:value=\"callType.id\"\n\t\t\t\t\t\t\t\t\t:disabled=\"readOnly && callTypeId !== callType.id\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{callType.title}}\n\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field-description\">\n\t\t\t\t\t\t\t{{ pageSectionSettingsCallTypeDescription }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div \n\t\t\t\t\tv-if=\"isBaasAvailable\"\n\t\t\t\t\tclass=\"crm-copilot__call-assessment_page-section-body\"\n\t\t\t\t>\n\t\t\t\t\t<div :class=\"this.getBodyFieldClassList(['ui-ctl', 'ui-ctl-after-icon', 'ui-ctl-dropdown', 'ui-ctl-w100'])\">\n\t\t\t\t\t\t<label>{{ pageSectionSettingsCheck }}</label>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-after-icon ui-ctl-dropdown\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t\t\t\t<select \n\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\tv-model=\"autoCheckTypeId\"\n\t\t\t\t\t\t\t\t@change=\"onAutoCheckTypeIdChange\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<option \n\t\t\t\t\t\t\t\t\tv-for=\"checkType in checkTypes\"\n\t\t\t\t\t\t\t\t\t:value=\"checkType.value\"\n\t\t\t\t\t\t\t\t\t:disabled=\"readOnly && autoCheckTypeId !== checkType.value\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{checkType.title}}\n\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field-description\">\n\t\t\t\t\t\t\t{{ pageSectionSettingsCheckDescription }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"isCallAssessmentAvailabilityEnabled\"\n\t\t\t\t\tclass=\"crm-copilot__call-assessment_page-section-body\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field\">\n\t\t\t\t\t\t<label>{{ pageSectionSettingsAvailability }}</label>\n\t\t\t\t\t\t<TypeSelector\n\t\t\t\t\t\t\tref=\"typeSelector\"\n\t\t\t\t\t\t\t:availabilityType=\"availabilityType\"\n\t\t\t\t\t\t\t:readOnly=\"readOnly\"\n\t\t\t\t\t\t\t@typeChange=\"onAvailabilityTypeChange\"\n\t\t\t\t\t\t\t@dataChange=\"onAvailabilityDataChange\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div class=\"crm-copilot__call-assessment_page-section-body-field-description\">\n\t\t\t\t\t\t\t{{ pageSectionSettingsAvailabilityDescription }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-if=\"timePeriodError\" class=\"crm-copilot__call-assessment_page-section-body-field-error\">\n\t\t\t\t\t\t\t{{ timePeriodError }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { ajax as Ajax, Loc, Text, Type } from 'main.core';\nimport { QueueManager } from 'pull.queuemanager';\nimport { UI } from 'ui.notification';\nimport { TextEditor } from 'ui.text-editor';\n\nimport { BreadcrumbsEvents } from './navigation/breadcrumbs';\nimport { ButtonEvents } from './navigation/button';\nimport { Navigation } from './navigation/navigation';\nimport { AboutPage } from './page/about-page';\nimport { BasePage } from './page/base-page';\nimport { ClientPage } from './page/client-page';\nimport { ControlPage } from './page/control-page';\nimport { SettingsPage } from './page/settings-page';\nimport { availabilityType } from './enum/availability-type';\n\n/**\n * @see BasePage\n */\ninterface Page extends BasePage\n{\n\tgetId(): string,\n\tgetData(): Object,\n\tvalidate(): boolean,\n\tonValidationFailed(): void,\n\tisReadyToMoveOn(): boolean,\n}\n\nexport const CallAssessment = {\n\tcomponents: {\n\t\tAboutPage,\n\t\tClientPage,\n\t\tSettingsPage,\n\t\tControlPage,\n\t\tNavigation,\n\t},\n\n\tprops: {\n\t\tsettings: {\n\t\t\ttype: Object,\n\t\t\tdefault: {},\n\t\t},\n\t\tparams: {\n\t\t\ttype: Object,\n\t\t\tdefault: {},\n\t\t},\n\t\ttextEditor: TextEditor,\n\t},\n\n\tdata(): Object\n\t{\n\t\tconst { data } = this.params;\n\n\t\tlet id = null;\n\t\tif (this.settings.isCopy)\n\t\t{\n\t\t\tid = null;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tid = data?.id ?? null;\n\t\t}\n\n\t\treturn {\n\t\t\tid,\n\t\t\tpagesData: this.initPagesData(data),\n\t\t\tactivePageId: 'about',\n\t\t\ttitle: data.title ?? null,\n\t\t\tcanShowNextPage: false,\n\t\t};\n\t},\n\n\twatch: {\n\t\tactivePageId(pageId: string): void\n\t\t{\n\t\t\tthis.onPageDataChange({\n\t\t\t\tid: pageId,\n\t\t\t\tdata: this.getPageData(pageId),\n\t\t\t});\n\t\t},\n\t},\n\n\tmethods: {\n\t\tinitPagesData(data: Object): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\tclient: {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tactiveClientTypeIds: data?.clientTypeIds,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tsettings: {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tcallTypeId: data?.callTypeId,\n\t\t\t\t\t\tautoCheckTypeId: data?.autoCheckTypeId,\n\t\t\t\t\t\tavailabilityType: data?.availabilityType ?? availabilityType.always_active,\n\t\t\t\t\t\tavailabilityData: data?.availabilityData ?? [],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcontrol: {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tlowBorder: data?.lowBorder ?? 0,\n\t\t\t\t\t\thighBorder: data?.highBorder ?? 100,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\tonNavigationButtonClick({ data }): void\n\t\t{\n\t\t\tconst { id } = data;\n\t\t\tif (id === 'cancel' || id === 'close')\n\t\t\t{\n\t\t\t\tthis.closeSlider();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (id === 'back')\n\t\t\t{\n\t\t\t\tconst currentIndex = this.pagesList.indexOf(this.activePageId);\n\n\t\t\t\tif (currentIndex > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.activePageId = this.pagesList[currentIndex - 1];\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.isActivePageValid())\n\t\t\t{\n\t\t\t\tthis.onActivePageValidationFailed();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (id === 'continue')\n\t\t\t{\n\t\t\t\tconst currentIndex = this.pagesList.indexOf(this.activePageId);\n\n\t\t\t\tif (currentIndex < this.pagesList.length - 1)\n\t\t\t\t{\n\t\t\t\t\tthis.activePageId = this.pagesList[currentIndex + 1];\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (id === 'submit' || id === 'update')\n\t\t\t{\n\t\t\t\tthis.sendData();\n\t\t\t}\n\t\t},\n\t\tsendData(): void\n\t\t{\n\t\t\tlet data = {\n\t\t\t\ttitle: this.title,\n\t\t\t};\n\n\t\t\tthis.pagesList.forEach((pageId: string) => {\n\t\t\t\tdata = {\n\t\t\t\t\t...data,\n\t\t\t\t\t...this.$refs[pageId]?.getData(),\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tconst dataParams = {\n\t\t\t\tid: this.id,\n\t\t\t\tdata,\n\t\t\t\teventId: QueueManager.registerRandomEventId('crm-copilot-call-assessment'),\n\t\t\t};\n\n\t\t\ttop.BX.Event.EventEmitter.emit('crm:copilot:callAssessment:beforeSave', dataParams);\n\n\t\t\tAjax\n\t\t\t\t.runAction('crm.copilot.callassessment.save', { data: dataParams })\n\t\t\t\t.then(\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\ttop.BX.Event.EventEmitter.emit('crm:copilot:callAssessment:save', {\n\t\t\t\t\t\t\t...dataParams,\n\t\t\t\t\t\t\tstatus: response?.status,\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (response?.status !== 'success')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\t\tcontent: Text.encode(response.errors[0].message),\n\t\t\t\t\t\t\t\tautoHideDelay: 6000,\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.onSaveCallback();\n\t\t\t\t\t\tthis.closeSlider();\n\t\t\t\t\t},\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tconst messageCode = response.errors[0]?.code === 'AI_NOT_AVAILABLE'\n\t\t\t\t\t\t\t? 'CRM_COPILOT_CALL_ASSESSMENT_PAGE_COPILOT_ERROR'\n\t\t\t\t\t\t\t: 'CRM_COPILOT_CALL_ASSESSMENT_PAGE_SAVE_ERROR'\n\t\t\t\t\t\t;\n\n\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: Loc.getMessage(messageCode),\n\t\t\t\t\t\t\tautoHideDelay: 6000,\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t)\n\t\t\t\t.catch((response) => {\n\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\tcontent: Text.encode(response.errors[0].message),\n\t\t\t\t\t\tautoHideDelay: 6000,\n\t\t\t\t\t});\n\n\t\t\t\t\tthrow response;\n\t\t\t\t})\n\t\t\t;\n\t\t},\n\t\tcloseSlider(): void\n\t\t{\n\t\t\ttop.BX.SidePanel.Instance.getSliderByWindow(window).close();\n\t\t},\n\t\tonSaveCallback(): void\n\t\t{\n\t\t\tif (Type.isFunction(this.params?.events?.onSave))\n\t\t\t{\n\t\t\t\tthis.params.events.onSave();\n\t\t\t}\n\t\t},\n\t\tsetActivePageId({ data }): void\n\t\t{\n\t\t\tconst newPageId = data.itemId;\n\t\t\tconst currentPageIndex = this.pagesList.indexOf(this.activePageId);\n\t\t\tconst newPageIndex = this.pagesList.indexOf(newPageId);\n\n\t\t\tif (currentPageIndex === newPageIndex)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (newPageIndex > currentPageIndex && !this.isActivePageValid())\n\t\t\t{\n\t\t\t\tthis.onActivePageValidationFailed();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.activePageId = newPageId;\n\t\t},\n\t\tisPageActive(id: string): boolean\n\t\t{\n\t\t\treturn this.activePageId === id;\n\t\t},\n\t\tonPageDataChange({ id: pageId, data }): void\n\t\t{\n\t\t\tthis.pagesData[pageId] = data;\n\t\t\tthis.canShowNextPage = this.isActivePageReadyToMoveOn();\n\t\t},\n\t\tgetPageData(pageId: string): Object\n\t\t{\n\t\t\tif (Type.isObjectLike(this.pagesData[pageId]))\n\t\t\t{\n\t\t\t\treturn this.pagesData[pageId].data;\n\t\t\t}\n\n\t\t\treturn {};\n\t\t},\n\t\tgetPageSettings(pageId: string): Object\n\t\t{\n\t\t\tif (pageId === 'settings')\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tbaas: this.settings.baas ?? {},\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {};\n\t\t},\n\t\tsetTitle(title: string): void\n\t\t{\n\t\t\tthis.title = title;\n\t\t},\n\t\tisActivePageValid(): boolean\n\t\t{\n\t\t\treturn this.getActivePage().validate();\n\t\t},\n\t\tonActivePageValidationFailed(): void\n\t\t{\n\t\t\treturn this.getActivePage().onValidationFailed();\n\t\t},\n\t\tisActivePageReadyToMoveOn(): boolean\n\t\t{\n\t\t\treturn this.getActivePage().isReadyToMoveOn();\n\t\t},\n\t\tgetActivePage(): Page\n\t\t{\n\t\t\treturn this.$refs[this.activePageId];\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tpagesList(): []\n\t\t{\n\t\t\treturn [\n\t\t\t\t'about',\n\t\t\t\t'client',\n\t\t\t\t'settings',\n\t\t\t\t'control',\n\t\t\t];\n\t\t},\n\t\tisNew(): boolean\n\t\t{\n\t\t\treturn this.params.data?.id <= 0;\n\t\t},\n\t\treadOnly(): boolean\n\t\t{\n\t\t\treturn this.settings.readOnly;\n\t\t},\n\t\tisEnabled(): boolean\n\t\t{\n\t\t\treturn this.settings.isEnabled;\n\t\t},\n\t},\n\n\tmounted()\n\t{\n\t\tthis.canShowNextPage = this.isActivePageReadyToMoveOn();\n\n\t\tthis.$Bitrix.eventEmitter.subscribe(BreadcrumbsEvents.itemClick, this.setActivePageId);\n\t\tthis.$Bitrix.eventEmitter.subscribe(ButtonEvents.click, this.onNavigationButtonClick);\n\t},\n\n\tbeforeUnmount()\n\t{\n\t\tthis.$Bitrix.eventEmitter.unsubscribe(BreadcrumbsEvents.itemClick, this.setActivePageId);\n\t\tthis.$Bitrix.eventEmitter.unsubscribe(ButtonEvents.click, this.onNavigationButtonClick);\n\t},\n\n\ttemplate: `\n\t\t<div class=\"crm-copilot__call-assessment_container\">\n\t\t\t<div class=\"crm-copilot__call-assessment_page-wrapper\">\n\t\t\t\t<AboutPage \n\t\t\t\t\t:is-active=\"isPageActive('about')\"\n\t\t\t\t\t:is-enabled=\"isEnabled\"\n\t\t\t\t\t:data=\"getPageData('about')\"\n\t\t\t\t\t:text-editor=\"textEditor\"\n\t\t\t\t\t@onChange=\"onPageDataChange\"\n\t\t\t\t\tref=\"about\"\n\t\t\t\t/>\n\t\t\t\t<ClientPage \n\t\t\t\t\t:is-active=\"isPageActive('client')\"\n\t\t\t\t\t:is-enabled=\"isEnabled\"\n\t\t\t\t\t:data=\"getPageData('client')\"\n\t\t\t\t\t:read-only=\"readOnly\"\n\t\t\t\t\t@onChange=\"onPageDataChange\"\n\t\t\t\t\tref=\"client\"\n\t\t\t\t/>\n\t\t\t\t<SettingsPage\n\t\t\t\t\t:is-active=\"isPageActive('settings')\"\n\t\t\t\t\t:is-enabled=\"isEnabled\"\n\t\t\t\t\t:data=\"getPageData('settings')\"\n\t\t\t\t\t:settings=\"getPageSettings('settings')\"\n\t\t\t\t\t:read-only=\"readOnly\"\n\t\t\t\t\t@onChange=\"onPageDataChange\"\n\t\t\t\t\tref=\"settings\"\n\t\t\t\t/>\n\t\t\t\t<ControlPage\n\t\t\t\t\t:is-active=\"isPageActive('control')\"\n\t\t\t\t\t:is-enabled=\"isEnabled\"\n\t\t\t\t\t:data=\"getPageData('control')\"\n\t\t\t\t\t:read-only=\"readOnly\"\n\t\t\t\t\t@onChange=\"onPageDataChange\"\n\t\t\t\t\tref=\"control\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<Navigation \n\t\t\t\t:active-tab-id=\"activePageId\"\n\t\t\t\t:is-enabled=\"canShowNextPage\"\n\t\t\t\t:read-only=\"readOnly\"\n\t\t\t\t:show-save-button=\"!isNew && !readOnly\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { Loc, Reflection, Type } from 'main.core';\nimport { BasicEditor } from 'ui.text-editor';\nimport { BitrixVue, VueCreateAppResult } from 'ui.vue3';\nimport { CallAssessment as CallAssessmentComponent } from './components/call-assessment';\nimport 'ui.design-tokens';\nimport './call-assessment.css';\n\ntype CallAssessmentParams = {\n\tdata: Object,\n\tconfig?: Object,\n\tevents?: Object,\n}\n\nexport class CallAssessment\n{\n\t#container: HTMLElement;\n\t#app: ?VueCreateAppResult = null;\n\t#layoutComponent: ?Object = null;\n\t#title: string = null;\n\n\t#textEditor: BasicEditor = null;\n\t#isReadOnly: boolean = true;\n\t#isEnabled: boolean = true;\n\n\tconstructor(containerId: string, params: CallAssessmentParams = {})\n\t{\n\t\tthis.#container = document.getElementById(containerId);\n\n\t\tif (!Type.isDomNode(this.#container))\n\t\t{\n\t\t\tthrow new Error('container not found');\n\t\t}\n\n\t\tthis.#isReadOnly = params.config?.readOnly ?? true;\n\t\tthis.#isEnabled = params.config?.isEnabled ?? true;\n\n\t\tthis.#initTitleInlineEditing(params);\n\n\t\tthis.#app = BitrixVue.createApp(CallAssessmentComponent, {\n\t\t\ttextEditor: this.#getTextEditor(params.data, params.config ?? {}),\n\t\t\tsettings: {\n\t\t\t\treadOnly: this.#isReadOnly,\n\t\t\t\tisEnabled: this.#isEnabled,\n\t\t\t\tisCopy: params.config?.isCopy ?? false,\n\t\t\t\tbaas: params.config?.baasSettings ?? false,\n\t\t\t},\n\t\t\tparams: {\n\t\t\t\tdata: params.data,\n\t\t\t\tevents: params.events,\n\t\t\t},\n\t\t});\n\n\t\tthis.#layoutComponent = this.#app.mount(this.#container);\n\t}\n\n\t#initTitleInlineEditing(params: CallAssessmentParams): void\n\t{\n\t\tif (this.#isReadOnly)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst ToolbarManager = Reflection.getClass('BX.UI.ToolbarManager');\n\t\tconst toolbar = ToolbarManager?.getDefaultToolbar();\n\t\tif (toolbar)\n\t\t{\n\t\t\tconst ToolbarEvents = Reflection.getClass('BX.UI.ToolbarEvents');\n\t\t\ttoolbar.subscribe(ToolbarEvents.finishEditing, ({ data }) => {\n\t\t\t\tconst { updatedTitle } = data;\n\n\t\t\t\tthis.#title = updatedTitle;\n\t\t\t\tthis.#layoutComponent.setTitle(this.#title);\n\t\t\t});\n\t\t}\n\n\t\tconst { data } = params;\n\n\t\tif (Type.isString(data?.title))\n\t\t{\n\t\t\tthis.#title = data.title;\n\t\t}\n\t}\n\n\t#getTextEditor({ prompt: content }, { copilotSettings }): BasicEditor\n\t{\n\t\tif (this.#textEditor !== null)\n\t\t{\n\t\t\treturn this.#textEditor;\n\t\t}\n\n\t\tconst toolbar = (\n\t\t\tthis.#isReadOnly\n\t\t\t\t? []\n\t\t\t\t: [\n\t\t\t\t\t'bold', 'italic', 'underline', 'strikethrough',\n\t\t\t\t\t'|',\n\t\t\t\t\t'numbered-list', 'bulleted-list',\n\t\t\t\t\t'copilot',\n\t\t\t\t]\n\t\t);\n\n\t\tthis.#textEditor = new BasicEditor({\n\t\t\teditable: !this.#isReadOnly,\n\t\t\tremovePlugins: ['BlockToolbar'],\n\t\t\tminHeight: 250,\n\t\t\tmaxHeight: 400,\n\t\t\tcontent,\n\t\t\tplaceholder: Loc.getMessage('CRM_COPILOT_CALL_ASSESSMENT_PLACEHOLDER'),\n\t\t\tparagraphPlaceholder: Loc.getMessage(\n\t\t\t\tType.isPlainObject(copilotSettings)\n\t\t\t\t\t? 'CRM_COPILOT_CALL_ASSESSMENT_PLACEHOLDER_WITH_COPILOT'\n\t\t\t\t\t: null,\n\t\t\t),\n\t\t\ttoolbar,\n\t\t\tfloatingToolbar: [],\n\t\t\tcollapsingMode: false,\n\t\t\tcopilot: {\n\t\t\t\tcopilotOptions: Type.isPlainObject(copilotSettings) ? copilotSettings : null,\n\t\t\t\ttriggerBySpace: true,\n\t\t\t},\n\t\t});\n\n\t\treturn this.#textEditor;\n\t}\n}\n"],"names":["BreadcrumbsEvents","itemClick","Breadcrumbs","props","activeTabId","type","String","data","tabs","getTabsData","methods","itemTitleClassList","id","isSoon","getTab","find","tab","title","Loc","getMessage","emitClickEvent","itemId","soon","$Bitrix","eventEmitter","emit","computed","soonTitle","template","ButtonEvents","click","Button","required","isEnabled","Boolean","default","mounted","initButton","watch","value","button","setState","ButtonState","ACTIVE","DISABLED","UiButton","text","toUpperCase","color","buttonColor","round","size","BX","UI","Size","LARGE","onclick","setDataSet","toLowerCase","$refs","renderTo","Color","SUCCESS","LIGHT_BORDER","LIGHT","ARTICLE_CODE","Navigation","components","readOnly","showSaveButton","firstPage","lastPage","help","buttons","showArticle","window","top","Helper","show","TextEditorWrapperComponent","TextEditorComponent","emits","textEditor","TextEditor","textEditorEvents","onChange","emitChangeData","setTextEditorHeight","windowResizeHandler","bind","Event","unmounted","unbind","Type","isFunction","onChangeDebounce","Runtime","debounce","$emit","prompt","getText","editorOffsetTop","$el","parentNode","offsetTop","navigationClassName","navigationOffsetTop","document","querySelector","textEditorContainerBottomPadding","availableHeight","minHeight","Math","maxHeight","setMinHeight","setMaxHeight","LENGTH_RANGE","MIN","MAX","PromptLength","validate","length","getError","AiDisabledInSettings","showLimitCopilotOffSlider","InfoHelper","message","BasePage","isActive","Object","settings","getId","getData","isReadyToMoveOn","onValidationFailed","Notification","Center","notify","content","autoHideDelay","getBodyFieldClassList","additionalClasses","AboutPage","extends","parser","BBCodeParser","promptLengthValidator","PromptLengthValidator","promptLengthError","isStringFilled","getPlainPromptText","call","parse","toPlainText","trim","pageTitle","pageDescription","clientType","freeze","new","inWork","return","repeated","ClientPage","activeClientTypeIds","clientTypeIds","getClientTypeClassList","clientTypeId","clientTypes","client","includes","onClientTypeSelect","index","indexOf","splice","push","onCheckboxClick","isArrayFilled","clientTypeEnum","description","BordersAccord","lowBorder","highBorder","DELTA","Pill","Number","additionalClass","currentValue","onInlineValueKeyDown","event","key","code","ctrlKey","metaKey","allowedKeysWithCtrlAndMeta","preventDefault","allowedKeys","isNaN","onInlineValueChange","input","innerText","executeValueChange","$nextTick","range","createRange","selection","getSelection","selectNodeContents","collapse","removeAllRanges","addRange","focus","onInlineValueBlur","onlyNums","replaceAll","changeValue","action","ceil","replace","classList","minusButtonClassList","plusButtonClassList","HelpLink","articleCode","onClick","TextWithDialog","dialogTargetId","items","Array","selectedItems","status","isChecked","initDialog","updated","emitSelectItem","targetNode","getElementById","clientSelectorDialog","Dialog","context","multiple","dropdownMode","showAvatars","enableSearch","width","zIndex","events","item","ControlPage","validator","setLowBorder","setHighBorder","Chevron","isExpanded","PeriodRow","startPoint","endPoint","modelValue","currentStartPoint","currentEndPoint","created","datePicker","DatePicker","rangeStartInput","start","rangeEndInput","end","selectionMode","defaultTime","dateFormat","DatetimeConverter","getSiteDateTimeFormat","timeFormat","getSiteShortTimeFormat","selectedDates","enableTime","onSelectChange","dates","getTarget","getSelectedDates","map","date","formatDate","onShow","onHide","setTargetNode","wrapper","selectRange","beforeUnmount","destroy","showPicker","stopPropagation","weekdayType","monday","tuesday","wednesday","thursday","friday","saturday","sunday","working","weekends","TimePeriod","startTime","endTime","parseTime","dateTimeStr","time","split","hours","minutes","Date","getTime","CustomRow","currentWeekdayType","weekdayTypeList","isExpandedStartPoint","isExpandedEndPoint","timePeriodValidator","TimePeriodValidator","minuteStep","getInputField","isDomNode","getAttribute","isValidRow","Dom","removeClass","addClass","startTimeString","endTimeString","target","setInputField","selectDate","availabilityType","always_active","inactive","period","custom","TypeSelector","currentAvailabilityType","availabilityTypeData","beforeCreate","availabilityTypeList","dateTimeFormat","typeList","hasRows","rowsForCurrentType","isExtendedAvailabilityType","onActionButtonClick","getDefaultDatePeriodItem","getDefaultCustomItem","onUpdateCustomRow","row","getAvailabilityData","updatedRow","startPointDate","getRoundedToNearestMinuteDate","endPointDate","setDate","getDate","DateTimeFormat","format","setHours","currentTime","ms","roundedTime","setAvailabilityData","availabilityData","SettingsPage","currentAutoCheckTypeId","baas","hasPackage","autoCheckTypeId","callTypeId","timePeriodError","typeSelector","onAutoCheckTypeIdChange","isBaasHasPackage","packageEmptySliderCode","onAvailabilityTypeChange","onAvailabilityDataChange","invalidItems","filter","pageSectionSettingsCallType","pageSectionSettingsCallTypeDescription","pageSectionSettingsCheck","pageSectionSettingsCheckDescription","callTypes","checkTypes","isBaasAvailable","isAvailable","aiPackagesEmptySliderCode","pageSectionSettingsAvailability","pageSectionSettingsAvailabilityDescription","isCallAssessmentAvailabilityEnabled","Extension","getSettings","get","CallAssessment","params","isCopy","pagesData","initPagesData","activePageId","canShowNextPage","pageId","onPageDataChange","getPageData","control","onNavigationButtonClick","closeSlider","currentIndex","pagesList","isActivePageValid","onActivePageValidationFailed","sendData","forEach","dataParams","eventId","QueueManager","registerRandomEventId","EventEmitter","Ajax","runAction","then","response","Text","encode","errors","onSaveCallback","messageCode","catch","SidePanel","Instance","getSliderByWindow","close","onSave","setActivePageId","newPageId","currentPageIndex","newPageIndex","isPageActive","isActivePageReadyToMoveOn","isObjectLike","getPageSettings","setTitle","getActivePage","isNew","subscribe","unsubscribe","constructor","containerId","Error","config","BitrixVue","createApp","CallAssessmentComponent","baasSettings","mount","ToolbarManager","Reflection","getClass","toolbar","getDefaultToolbar","ToolbarEvents","finishEditing","updatedTitle","isString","copilotSettings","BasicEditor","editable","removePlugins","placeholder","paragraphPlaceholder","isPlainObject","floatingToolbar","collapsingMode","copilot","copilotOptions","triggerBySpace"],"mappings":";;;;;;CAEO,MAAMA,iBAAiB,GAAG;GAChCC,SAAS,EAAE;CACZ,CAAC;AAED,CAAO,MAAMC,WAAW,GAAG;GAC1BC,KAAK,EAAE;KACNC,WAAW,EAAE;OACZC,IAAI,EAAEC;;IAEP;GAEDC,IAAI,GACJ;KACC,OAAO;OACNC,IAAI,EAAE,IAAI,CAACC,WAAW;MACtB;IACD;GAEDC,OAAO,EAAE;KACRC,kBAAkB,CAACC,EAAU,EAAEC,MAAe,EAC9C;OACC,OAAO,CACN,qDAAqD,EACrD;SAAE,UAAU,EAAED,EAAE,KAAK,IAAI,CAACR;QAAa,EACvC;SAAE,QAAQ,EAAES;QAAQ,CACpB;MACD;KACDC,MAAM,CAACF,EAAU,EACjB;OACC,OAAO,IAAI,CAACH,WAAW,EAAE,CAACM,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACJ,EAAE,KAAKA,EAAE,CAAC;MACtD;KACDH,WAAW,GACX;OACC,OAAO,CACN;SACCG,EAAE,EAAE,OAAO;SACXK,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,wCAAwC;QAC9D,EACD;SACCP,EAAE,EAAE,QAAQ;SACZK,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,yCAAyC;QAC/D,EACD;SACCP,EAAE,EAAE,UAAU;SACdK,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,2CAA2C;QACjE,EACD;SACCP,EAAE,EAAE,SAAS;SACbK,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,0CAA0C;QAChE,CACD;MACD;KACDC,cAAc,CAACC,MAAc,EAC7B;OACC,MAAML,GAAG,GAAG,IAAI,CAACF,MAAM,CAACO,MAAM,CAAC;OAE/B,IAAI,CAACL,GAAG,CAACM,IAAI,EACb;SACC,IAAI,CAACC,OAAO,CAACC,YAAY,CAACC,IAAI,CAACzB,iBAAiB,CAACC,SAAS,EAAE;WAAEoB;UAAQ,CAAC;;;IAGzE;GAEDK,QAAQ,EAAE;KACTC,SAAS,GACT;OACC,OAAOT,aAAG,CAACC,UAAU,CAAC,8CAA8C,CAAC;;IAEtE;GAEDS,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;CAoBZ,CAAC;;CCzFM,MAAMC,YAAY,GAAG;GAC3BC,KAAK,EAAE;CACR,CAAC;AAED,CAAO,MAAMC,MAAM,GAAG;GACrB5B,KAAK,EAAE;KACNS,EAAE,EAAE;OACHP,IAAI,EAAEC,MAAM;OACZ0B,QAAQ,EAAE;MACV;KACDC,SAAS,EAAE;OACV5B,IAAI,EAAE6B,OAAO;OACbC,OAAO,EAAE;;IAEV;GAEDC,OAAO,GACP;KACC,IAAI,CAACC,UAAU,EAAE;IACjB;GAEDC,KAAK,EAAE;KACNL,SAAS,CAACM,KAAc,EACxB;OACC,IAAI,CAACC,MAAM,CAACC,QAAQ,CAACF,KAAK,GAAGG,sBAAW,CAACC,MAAM,GAAGD,sBAAW,CAACE,QAAQ,CAAC;;IAExE;GAEDlC,OAAO,EAAE;KACR2B,UAAU,GACV;OACC,IAAI,CAACG,MAAM,GAAG,IAAIK,iBAAQ,CAAC;SAC1BC,IAAI,EAAE5B,aAAG,CAACC,UAAU,CAAE,iDAAgD,IAAI,CAACP,EAAE,CAACmC,WAAW,EAAG,EAAC,CAAC;SAC9FC,KAAK,EAAE,IAAI,CAACC,WAAW;SACvBC,KAAK,EAAE,IAAI;SACXC,IAAI,EAAEC,EAAE,CAACC,EAAE,CAACtB,MAAM,CAACuB,IAAI,CAACC,KAAK;SAC7BC,OAAO,EAAE,MAAM;WACd,IAAI,CAACpC,cAAc,EAAE;;QAEtB,CAAC;OAEF,IAAI,IAAI,CAACa,SAAS,KAAK,IAAI,EAC3B;SACC,IAAI,CAACO,MAAM,CAACC,QAAQ,CAACC,sBAAW,CAACE,QAAQ,CAAC;;OAG3C,IAAI,CAACJ,MAAM,CAACiB,UAAU,CAAC;SACtB7C,EAAE,EAAG,uCAAsC,IAAI,CAACA,EAAE,CAAC8C,WAAW,EAAG;QACjE,CAAC;OAEF,IAAI,IAAI,CAACC,KAAK,CAACnB,MAAM,EACrB;SACC,IAAI,CAACA,MAAM,CAACoB,QAAQ,CAAC,IAAI,CAACD,KAAK,CAACnB,MAAM,CAAC;;MAExC;KACDpB,cAAc,GACd;OACC,IAAI,IAAI,CAACa,SAAS,EAClB;SACC,IAAI,CAACV,OAAO,CAACC,YAAY,CAACC,IAAI,CAACI,YAAY,CAACC,KAAK,EAAE;WAAElB,EAAE,EAAE,IAAI,CAACA;UAAI,CAAC;;;IAGrE;GAEDc,QAAQ,EAAE;KACTuB,WAAW,GACX;OACC,IAAI,IAAI,CAACrC,EAAE,KAAK,UAAU,IAAI,IAAI,CAACA,EAAE,KAAK,QAAQ,IAAI,IAAI,CAACA,EAAE,KAAK,OAAO,EACzE;SACC,OAAOiC,iBAAQ,CAACgB,KAAK,CAACC,OAAO;;OAG9B,IAAI,IAAI,CAAClD,EAAE,KAAK,QAAQ,EACxB;SACC,OAAOiC,iBAAQ,CAACgB,KAAK,CAACE,YAAY;;OAGnC,OAAOlB,iBAAQ,CAACgB,KAAK,CAACG,KAAK;;IAE5B;GAEDpC,QAAQ,EAAG;;;CAGZ,CAAC;;CClFD,MAAMqC,YAAY,GAAG,UAAU;AAE/B,CAAO,MAAMC,UAAU,GAAG;GACzBC,UAAU,EAAE;KACXpC;IACA;GAED5B,KAAK,EAAE;KACNC,WAAW,EAAE;OACZC,IAAI,EAAEC;MACN;KACD2B,SAAS,EAAE;OACV5B,IAAI,EAAE6B;MACN;KACDkC,QAAQ,EAAE;OACT/D,IAAI,EAAE6B,OAAO;OACbC,OAAO,EAAE;MACT;KACDkC,cAAc,EAAE;OACfhE,IAAI,EAAE6B,OAAO;OACbC,OAAO,EAAE;;IAEV;GAED5B,IAAI,GACJ;KACC,OAAO;OACN+D,SAAS,EAAE,OAAO;OAClBC,QAAQ,EAAE;MACV;IACD;GAED7C,QAAQ,EAAE;KACT8C,IAAI,GACJ;OACC,OAAOtD,aAAG,CAACC,UAAU,CAAC,6CAA6C,CAAC;MACpE;KACDsD,OAAO,GACP;OACC,OAAO,CACN,QAAQ,EACR,MAAM,EACN,UAAU,EACV,QAAQ,EACR,OAAO,EACP,QAAQ,CACR;;IAEF;GAED/D,OAAO,EAAE;KACRgE,WAAW,GACX;OAAA;OACC,kBAAAC,MAAM,CAACC,GAAG,CAACxB,EAAE,8CAAb,eAAeyB,MAAM,qBAArB,sBAAuBC,IAAI,CAAE,wBAAuBb,YAAa,EAAC,CAAC;;IAEpE;GAEDrC,QAAQ,EAAG;;;;;;;;;;;;;;;;;;CAkBZ,CAAC;;CC7EM,MAAMmD,0BAA0B,GAAG;GACzCZ,UAAU,EAAE;0BACXa;IACA;GAEDC,KAAK,EAAE,CACN,QAAQ,CACR;GAED9E,KAAK,EAAE;KACN+E,UAAU,EAAEC;IACZ;GAED5E,IAAI,GACJ;KACC,OAAO;OACN6E,gBAAgB,EAAE;SACjBC,QAAQ,EAAE,IAAI,CAACC;;MAEhB;IACD;GAEDlD,OAAO,GACP;KACC,IAAI,CAACmD,mBAAmB,EAAE;KAC1B,IAAI,CAACC,mBAAmB,GAAG,IAAI,CAACA,mBAAmB,CAACC,IAAI,CAAC,IAAI,CAAC;KAE9DC,eAAK,CAACD,IAAI,CAACd,MAAM,EAAE,QAAQ,EAAE,IAAI,CAACa,mBAAmB,CAAC;IACtD;GAEDG,SAAS,GACT;KACCD,eAAK,CAACE,MAAM,CAACjB,MAAM,EAAE,QAAQ,EAAE,IAAI,CAACa,mBAAmB,CAAC;IACxD;GAED9E,OAAO,EAAE;KACR4E,cAAc,GACd;OACC,IAAI,CAACO,cAAI,CAACC,UAAU,CAAC,IAAI,CAACC,gBAAgB,CAAC,EAC3C;SACC,IAAI,CAACA,gBAAgB,GAAGC,iBAAO,CAACC,QAAQ,CAAC,IAAI,CAACZ,QAAQ,EAAE,GAAG,EAAE,IAAI,CAAC;;OAGnE,IAAI,CAACU,gBAAgB,EAAE;MACvB;KACDV,QAAQ,GACR;OACC,IAAI,CAACa,KAAK,CAAC,QAAQ,EAAE;SACpBC,MAAM,EAAE,IAAI,CAACjB,UAAU,CAACkB,OAAO;QAC/B,CAAC;MACF;KACDZ,mBAAmB,GACnB;OACC,IAAI,CAACD,mBAAmB,EAAE;MAC1B;KACDA,mBAAmB,GACnB;OAAA;OACC,MAAMc,eAAe,GAAG,IAAI,CAACC,GAAG,CAACC,UAAU,CAACC,SAAS;OAErD,MAAMC,mBAAmB,GAAG,oDAAoD;OAChF,MAAMC,mBAAmB,sDAAGC,QAAQ,CAACC,aAAa,CAACH,mBAAmB,CAAC,qBAA3C,uBAA6CD,SAAS,oCAAI,CAAC;OAEvF,MAAMK,gCAAgC,GAAG,EAAE;OAC3C,MAAMC,eAAe,GAAGJ,mBAAmB,GAAGL,eAAe,GAAGQ,gCAAgC;OAChG,MAAME,SAAS,GAAGC,IAAI,CAAC9D,KAAK,CAAC4D,eAAe,GAAG,GAAG,CAAC;OACnD,MAAMG,SAAS,GAAGD,IAAI,CAAC9D,KAAK,CAAC4D,eAAe,GAAG,GAAG,CAAC;OAEnD,IAAIC,SAAS,GAAG,GAAG,EACnB;SAAA;SACC,wBAAI,CAAC7B,UAAU,qBAAf,iBAAiBgC,YAAY,CAACD,SAAS,CAAC;QACxC,MAED;SAAA;SACC,yBAAI,CAAC/B,UAAU,qBAAf,kBAAiBgC,YAAY,CAACH,SAAS,CAAC;;OAGzC,yBAAI,CAAC7B,UAAU,qBAAf,kBAAiBiC,YAAY,CAACF,SAAS,CAAC;;IAEzC;GAEDrF,QAAQ,EAAG;;;;;;CAMZ,CAAC;;CCvFD,MAAMwF,YAAY,GAAG;GACpBC,GAAG,EAAE,GAAG;GACRC,GAAG,EAAE;CACN,CAAC;CAAC;AAEF,CAAO,MAAMC,YAAY,CACzB;GAAA;KAAA;OAAA;OAAA,OAC0B;;;GAEzBC,QAAQ,CAACrB,MAAc,EACvB;KACC,IAAIA,MAAM,CAACsB,MAAM,GAAGL,YAAY,CAACC,GAAG,EACpC;OACC,4CAAI,kCAAiBnG,aAAG,CAACC,UAAU,CAAC,gEAAgE,EAAE;SACrG,aAAa,EAAEiG,YAAY,CAACC;QAC5B,CAAC;OAEF,OAAO,KAAK;;KAGb,IAAIlB,MAAM,CAACsB,MAAM,GAAGL,YAAY,CAACE,GAAG,EACpC;OACC,4CAAI,kCAAiBpG,aAAG,CAACC,UAAU,CAAC,gEAAgE,EAAE;SACrG,aAAa,EAAEiG,YAAY,CAACE;QAC5B,CAAC;OAEF,OAAO,KAAK;;KAGb,4CAAI,kCAAiB,IAAI;KAEzB,OAAO,IAAI;;GAGZI,QAAQ,GACR;KACC,+CAAO,IAAI;;CAEb;;CCrCO,MAAMC,oBAAoB,GAAG;GACnCjH,OAAO,EAAE;KACRkH,yBAAyB,GACzB;OAAA;OACC,cAAAhD,GAAG,CAACxB,EAAE,CAACC,EAAE,8CAAT,WAAWwE,UAAU,qBAArB,sBAAuB/C,IAAI,CAAC,0CAA0C,CAAC;;IAExE;GAEDpD,QAAQ,EAAE;KACToG,OAAO,GACP;OACC,OAAO5G,aAAG,CAACC,UAAU,CAAC,yCAAyC,CAAC;;IAEjE;GAEDS,QAAQ,EAAG;;;;;;;;;CASZ,CAAC;;CCrBM,MAAMmG,QAAQ,GAAG;GACvB5D,UAAU,EAAE;KACXjE,WAAW;KACXyH;IACA;GAEDxH,KAAK,EAAE;KACNiE,QAAQ,EAAE;OACT/D,IAAI,EAAE6B,OAAO;OACbC,OAAO,EAAE;MACT;KACDF,SAAS,EAAE;OACV5B,IAAI,EAAE6B,OAAO;OACbC,OAAO,EAAE;MACT;KACD6F,QAAQ,EAAE;OACT3H,IAAI,EAAE6B;MACN;KACD3B,IAAI,EAAE;OACLF,IAAI,EAAE4H,MAAM;OACZ9F,OAAO,EAAE;MACT;KACD+F,QAAQ,EAAE;OACT7H,IAAI,EAAE4H,MAAM;OACZ9F,OAAO,EAAE;;IAEV;GAED5B,IAAI,GACJ;KACC,OAAO;OACNK,EAAE,EAAE,IAAI;MACR;IACD;;GAEDF,OAAO,EAAE;KACRyH,KAAK,GACL;OACC,OAAO,IAAI,CAACvH,EAAE;MACd;KAEDwH,OAAO,GACP;;;OAGC,OAAO,EAAE;MACT;KAEDC,eAAe,GACf;OACC,OAAO,IAAI,CAACb,QAAQ,EAAE;MACtB;KAEDA,QAAQ,GACR;;;OAGC,OAAO,IAAI;MACX;KAEDc,kBAAkB,GAClB;OACCjF,kBAAE,CAACkF,YAAY,CAACC,MAAM,CAACC,MAAM,CAAC;SAC7BC,OAAO,EAAE,IAAI,CAACnH,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,mDAAmD,CAAC;SACzFwH,aAAa,EAAE;QACf,CAAC;MACF;KAEDrD,cAAc,GACd;OACC,IAAI,CAACO,cAAI,CAACC,UAAU,CAAC,IAAI,CAACC,gBAAgB,CAAC,EAC3C;SACC,IAAI,CAACA,gBAAgB,GAAGC,iBAAO,CAACC,QAAQ,CAAC,IAAI,CAACZ,QAAQ,EAAE,GAAG,EAAE,IAAI,CAAC;;OAGnE,IAAI,CAACU,gBAAgB,EAAE;MACvB;KAEDV,QAAQ,GACR;OACC,IAAI,CAACa,KAAK,CAAC,UAAU,EAAE;SACtBtF,EAAE,EAAE,IAAI,CAACA,EAAE;SACXL,IAAI,EAAE,IAAI,CAAC6H,OAAO;QAClB,CAAC;MACF;KAEDQ,qBAAqB,CAACC,iBAA2B,GAAG,EAAE,EACtD;OACC,OAAO,CACN,sDAAsD,EACtD,GAAGA,iBAAiB,EACpB;SAAE,aAAa,EAAE,IAAI,CAAC5G,SAAS,KAAK;QAAM,CAC1C;;;CAGJ,CAAC;;CC9FM,MAAM6G,SAAS,GAAG;GACxBC,OAAO,EAAEhB,QAAQ;GAEjB5D,UAAU,EAAE;0BACXa,iCAAmB;KACnBD;IACA;GAED5E,KAAK,EAAE;KACN+E,UAAU,EAAEC;IACZ;GAED5E,IAAI,GACJ;KACC,OAAO;OACNK,EAAE,EAAE,OAAO;OACXoI,MAAM,EAAE,IAAIC,6BAAY,EAAE;OAC1BC,qBAAqB,EAAE,IAAIC,YAAqB,EAAE;OAClDC,iBAAiB,EAAE;MACnB;IACD;GAED1I,OAAO,EAAE;KACR0H,OAAO,GACP;OACC,OAAO;SACNjC,MAAM,EAAE,IAAI,CAACjB,UAAU,CAACkB,OAAO;QAC/B;MACD;KACDiC,eAAe,GACf;OACC,OAAOxC,cAAI,CAACwD,cAAc,CAAC,IAAI,CAACnE,UAAU,CAACkB,OAAO,EAAE,CAAC;MACrD;KACDoB,QAAQ,GACR;OACC,OAAO,IAAI,CAAC0B,qBAAqB,CAAC1B,QAAQ,CAAC,IAAI,CAAC8B,kBAAkB,EAAE,CAAC;MACrE;KACDhB,kBAAkB,GAClB;OACC,IAAI,CAACc,iBAAiB,GAAG,IAAI,CAACF,qBAAqB,CAACxB,QAAQ,EAAE;MAC9D;KACDrC,QAAQ,GACR;OACC,IAAI,CAAC+D,iBAAiB,GAAG,IAAI;OAC7BrB,QAAQ,CAACrH,OAAO,CAAC2E,QAAQ,CAACkE,IAAI,CAAC,IAAI,CAAC;MACpC;KACDD,kBAAkB,GAClB;OACC,OAAO,IAAI,CAACN,MAAM,CAACQ,KAAK,CAAC,IAAI,CAACtE,UAAU,CAACkB,OAAO,EAAE,CAAC,CAACqD,WAAW,EAAE,CAACC,IAAI,EAAE;;IAEzE;GAEDhI,QAAQ,EAAE;KACTiI,SAAS,GACT;OACC,OAAOzI,aAAG,CAACC,UAAU,CAAC,8CAA8C,CAAC;MACrE;KACDyI,eAAe,GACf;OACC,OAAO1I,aAAG,CAACC,UAAU,CAAC,oDAAoD,CAAC;;IAE5E;GAEDS,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;CA2BZ,CAAC;;CCjGM,MAAMiI,UAAU,GAAG5B,MAAM,CAAC6B,MAAM,CAAC;GACvCC,GAAG,EAAE,CAAC;GACNC,MAAM,EAAE,CAAC;GACTC,MAAM,EAAE,CAAC;GACTC,QAAQ,EAAE;CACX,CAAC,CAAC;;CCDK,MAAMC,UAAU,GAAG;GACzBpB,OAAO,EAAEhB,QAAQ;GAEjBxH,IAAI,GACJ;KAAA;KACC,OAAO;OACNK,EAAE,EAAE,QAAQ;OACZwJ,mBAAmB,2BAAE,IAAI,CAAC7J,IAAI,CAAC6J,mBAAmB,oCAAI;MACtD;IACD;GAED1J,OAAO,EAAE;KACR0H,OAAO,GACP;OACC,OAAO;SACNiC,aAAa,EAAE,CAAC,GAAG,IAAI,CAACD,mBAAmB;QAC3C;MACD;KACDE,sBAAsB,CAACC,YAAoB,EAC3C;OACC,MAAMV,aAAU,GAAG,IAAI,CAACW,WAAW,CAACzJ,IAAI,CAAE0J,MAAM,IAAKA,MAAM,CAAC7J,EAAE,KAAK2J,YAAY,CAAC;OAEhF,OAAO,CACN,kEAAkE,EACjE,YAAWV,aAAU,CAACjJ,EAAG,EAAC,EAC3B;SAAE,UAAU,EAAE,IAAI,CAACwJ,mBAAmB,CAACM,QAAQ,CAACH,YAAY;QAAG,EAC/D;SAAE,YAAY,EAAE,IAAI,CAACnG;QAAU,CAC/B;MACD;KACDuG,kBAAkB,CAACJ,YAAoB,EACvC;OACC,IAAI,IAAI,CAACnG,QAAQ,EACjB;SACC;;OAGD,IAAI,IAAI,CAACgG,mBAAmB,CAACM,QAAQ,CAACH,YAAY,CAAC,EACnD;SACC,MAAMK,KAAK,GAAG,IAAI,CAACR,mBAAmB,CAACS,OAAO,CAACN,YAAY,CAAC;SAC5D,IAAI,CAACH,mBAAmB,CAACU,MAAM,CAACF,KAAK,EAAE,CAAC,CAAC;QACzC,MAED;SACC,IAAI,CAACR,mBAAmB,CAACW,IAAI,CAACR,YAAY,CAAC;;OAG5C,IAAI,CAACjF,cAAc,EAAE;MACrB;KACD0F,eAAe,GACf;OACC,OAAO,CAAC,IAAI,CAAC5G,QAAQ;MACrB;KACDoD,QAAQ,GACR;OACC,OAAO3B,cAAI,CAACoF,aAAa,CAAC,IAAI,CAACb,mBAAmB,CAAC;;IAEpD;GAED1I,QAAQ,EAAE;KACTiI,SAAS,GACT;OACC,OAAOzI,aAAG,CAACC,UAAU,CAAC,+CAA+C,CAAC;MACtE;KACDyI,eAAe,GACf;OACC,OAAO1I,aAAG,CAACC,UAAU,CAAC,qDAAqD,CAAC;MAC5E;KACDqJ,WAAW,GACX;OACC,OAAO,CACN;SACC5J,EAAE,EAAEsK,UAAc,CAACnB,GAAG;SACtB9I,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,wDAAwD,CAAC;SAC/EgK,WAAW,EAAEjK,aAAG,CAACC,UAAU,CAAC,8DAA8D;QAC1F,EACD;SACCP,EAAE,EAAEsK,UAAc,CAAClB,MAAM;SACzB/I,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,4DAA4D,CAAC;SACnFgK,WAAW,EAAEjK,aAAG,CAACC,UAAU,CAAC,kEAAkE;QAC9F,EACD;SACCP,EAAE,EAAEsK,UAAc,CAACjB,MAAM;SACzBhJ,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,oEAAoE,CAAC;SAC3FgK,WAAW,EAAEjK,aAAG,CAACC,UAAU,CAAC,0EAA0E;QACtG,EACD;SACCP,EAAE,EAAEsK,UAAc,CAAChB,QAAQ;SAC3BjJ,KAAK,EAAEC,aAAG,CAACC,UAAU,CAAC,sEAAsE,CAAC;SAC7FgK,WAAW,EAAEjK,aAAG,CAACC,UAAU,CAAC,4EAA4E;QACxG,CACD;;IAEF;GAEDS,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAgDZ,CAAC;;CClJ+B;AAEhC,CAAO,MAAMwJ,aAAa,CAC1B;GAAA;KAAA;OAAA;OAAA,OAC0B;;;GAEzB5D,QAAQ,CAAC6D,SAAiB,EAAEC,UAAkB,EAC9C;KACC,IAAIA,UAAU,GAAGD,SAAS,EAC1B;OACC,4CAAI,sCAAiBnK,aAAG,CAACC,UAAU,CAAC,2DAA2D,CAAC;OAEhG,OAAO,KAAK;;KAGb,4CAAI,sCAAiB,IAAI;KAEzB,OAAO,IAAI;;GAGZuG,QAAQ,GACR;KACC,+CAAO,IAAI;;CAEb;;CCtBA,MAAM6D,KAAK,GAAG,EAAE;AAEhB,CAAO,MAAMC,IAAI,GAAG;GACnBvG,KAAK,EAAE,CACN,QAAQ,CACR;GAED9E,KAAK,EAAE;KACNoC,KAAK,EAAE;OACNlC,IAAI,EAAEoL,MAAM;OACZzJ,QAAQ,EAAE;MACV;KACD0J,eAAe,EAAE;OAChBrL,IAAI,EAAEC;;IAEP;GAEDC,IAAI,GACJ;KACC,OAAO;OACNoL,YAAY,EAAE,IAAI,CAACpJ;MACnB;IACD;GAED7B,OAAO,EAAE;KACRkL,oBAAoB,CAACC,KAAoB,EACzC;OACC,MAAM;SAAEC,GAAG;SAAEC,IAAI;SAAEC,OAAO;SAAEC;QAAS,GAAGJ,KAAK;OAE7C,IAAII,OAAO,IAAID,OAAO,EACtB;SACC,MAAME,0BAA0B,GAAG,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,CAAC;SACnF,IAAI,CAACA,0BAA0B,CAACxB,QAAQ,CAACqB,IAAI,CAAC,EAC9C;WACCF,KAAK,CAACM,cAAc,EAAE;WAEtB,OAAO,KAAK;;SAGb,OAAO,IAAI;;OAGZ,MAAMC,WAAW,GAAG,CAAC,WAAW,EAAE,YAAY,EAAE,SAAS,EAAE,WAAW,EAAE,WAAW,EAAE,QAAQ,CAAC;OAC9F,IAAIA,WAAW,CAAC1B,QAAQ,CAACqB,IAAI,CAAC,EAC9B;SACC,OAAO,IAAI;;OAGZ,IAAID,GAAG,KAAK,GAAG,IAAIL,MAAM,CAACY,KAAK,CAACZ,MAAM,CAACK,GAAG,CAAC,CAAC,EAC5C;SACCD,KAAK,CAACM,cAAc,EAAE;SAEtB,OAAO,KAAK;;OAGb,OAAO,IAAI;MACX;KACDG,mBAAmB,CAACT,KAAiB,EACrC;OACC,MAAMtJ,KAAK,GAAGkJ,MAAM,CAAC,IAAI,CAAC9H,KAAK,CAAC4I,KAAK,CAACC,SAAS,CAAC;OAChD,IAAI,CAACC,kBAAkB,CAAClK,KAAK,CAAC;OAE9B,IAAI,CAACmK,SAAS,CAAC,MAAM;SACpB,MAAMC,KAAK,GAAGhG,QAAQ,CAACiG,WAAW,EAAE;SACpC,MAAMC,SAAS,GAAGlI,MAAM,CAACmI,YAAY,EAAE;SAEvCH,KAAK,CAACI,kBAAkB,CAAC,IAAI,CAACpJ,KAAK,CAAC4I,KAAK,CAAC;SAC1CI,KAAK,CAACK,QAAQ,CAAC,KAAK,CAAC;SAErBH,SAAS,CAACI,eAAe,EAAE;SAC3BJ,SAAS,CAACK,QAAQ,CAACP,KAAK,CAAC;SACzB,IAAI,CAAChJ,KAAK,CAAC4I,KAAK,CAACY,KAAK,EAAE;QACxB,CAAC;MACF;KACDC,iBAAiB,GACjB;OACC,MAAMC,QAAQ,GAAG,IAAI,CAAC1J,KAAK,CAAC4I,KAAK,CAACC,SAAS,CAACc,UAAU,CAAC,KAAK,EAAE,EAAE,CAAC;OACjE,IAAID,QAAQ,KAAK,EAAE,EACnB;SACC,IAAI,CAACZ,kBAAkB,CAAC,CAAC,CAAC;;MAE3B;KACDc,WAAW,CAACC,MAAc,EAC1B;OACC,IAAIjL,KAAK,GAAIiL,MAAM,KAAK,MAAM,GAAG,IAAI,CAACjL,KAAK,GAAGgJ,KAAK,GAAG,IAAI,CAAChJ,KAAK,GAAGgJ,KAAM;OAEzE,IAAIhJ,KAAK,GAAGgJ,KAAK,GAAG,CAAC,EACrB;SACChJ,KAAK,GAAGyE,IAAI,CAACyG,IAAI,CAAClL,KAAK,GAAGgJ,KAAK,CAAC,GAAG,EAAE;;OAGtC,IAAI,CAACkB,kBAAkB,CAAClK,KAAK,CAAC;MAC9B;KACDkK,kBAAkB,CAAClK,KAAa,EAAEiL,MAAe,GAAG,IAAI,EACxD;OACC,IAAI,CAAC7B,YAAY,GAAGpJ,KAAK;OAEzB,IAAI,CAACoB,KAAK,CAAC4I,KAAK,CAACC,SAAS,GACzBjK,KAAK,KAAK,CAAC,GACR,CAAC,GACD,IAAI,CAACoB,KAAK,CAAC4I,KAAK,CAACC,SAAS,CAACkB,OAAO,CAAC,KAAK,EAAE,EAAE,CAC/C;;;;;;;;;;;;;;;;;;;;;OAqBD1H,iBAAO,CAACC,QAAQ,CACf,MAAM;SACL,IAAI,CAACC,KAAK,CAAC,QAAQ,EAAE,IAAI,CAACyF,YAAY,CAAC;QACvC,EACD,GAAG,EACH,IAAI,CACJ,EAAE;;IAEJ;GAEDjK,QAAQ,EAAE;KACTT,KAAK,GAAW;OACf,OAAOC,aAAG,CAACC,UAAU,CAAC,wCAAwC,CAAC;MAC/D;KACDwM,SAAS,GACT;OACC,OAAO,CACN,mCAAmC,EACnC,IAAI,CAACjC,eAAe,CACpB;MACD;KACDkC,oBAAoB,GACpB;OACC,OAAO,CACN,yCAAyC,EACzC;SAAE,YAAY,EAAE,IAAI,CAACjC,YAAY,IAAI;QAAG,CACxC;MACD;KACDkC,mBAAmB,GACnB;OACC,OAAO,CACN,wCAAwC,EACxC;SAAE,YAAY,EAAE,IAAI,CAAClC,YAAY,IAAI;QAAK,CAC1C;;IAEF;GAEDrJ,KAAK,EAAE;KACNqJ,YAAY,CAACpJ,KAAa,EAC1B;OACC,IAAIA,KAAK,IAAI,CAAC,EACd;SACC,IAAI,CAACoJ,YAAY,GAAG,CAAC;;OAGtB,IAAIpJ,KAAK,IAAI,GAAG,EAChB;SACC,IAAI,CAACoJ,YAAY,GAAG,GAAG;;OAGxB,IAAIF,MAAM,CAACY,KAAK,CAAC9J,KAAK,CAAC,EACvB;SACC,IAAI,CAACoJ,YAAY,GAAG,CAAC;;OAGtB,IAAI,CAAChI,KAAK,CAAC4I,KAAK,CAACC,SAAS,GAAG,IAAI,CAACb,YAAY;;IAE/C;GAED/J,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAmCZ,CAAC;;CCxNM,MAAMkM,QAAQ,GAAG;GACvB3N,KAAK,EAAE;KACN4N,WAAW,EAAE;OACZ1N,IAAI,EAAEC,MAAM;OACZ0B,QAAQ,EAAE;;IAEX;GAEDtB,OAAO,EAAE;KACRsN,OAAO,GACP;OAAA;OACC,kBAAArJ,MAAM,CAACC,GAAG,CAACxB,EAAE,8CAAb,eAAeyB,MAAM,qBAArB,sBAAuBC,IAAI,CAAE,wBAAuB,IAAI,CAACiJ,WAAY,EAAC,CAAC;;IAExE;GAEDnM,QAAQ,EAAG;;KAEPV,aAAG,CAACC,UAAU,CAAC,kCAAkC,CAAE;;;CAGxD,CAAC;;CCjBM,MAAM8M,cAAc,GAAG;GAC7B9J,UAAU,EAAE;KACX2J;IACA;GAED3N,KAAK,EAAE;KACNS,EAAE,EAAE;OACHP,IAAI,EAAEC,MAAM;OACZ0B,QAAQ,EAAE;MACV;KACD0G,OAAO,EAAE;OACRrI,IAAI,EAAEC,MAAM;OACZ0B,QAAQ,EAAE;MACV;KACDkM,cAAc,EAAE;OACf7N,IAAI,EAAEC,MAAM;OACZ0B,QAAQ,EAAE,KAAK;OACfG,OAAO,EAAE;MACT;KACD4L,WAAW,EAAE;OACZ1N,IAAI,EAAEC,MAAM;OACZ0B,QAAQ,EAAE;MACV;KACDO,KAAK,EAAE;OACNlC,IAAI,EAAEoL;MACN;KACD0C,KAAK,EAAE;OACN9N,IAAI,EAAE+N;MACN;KACD5N,IAAI,EAAE;OACLH,IAAI,EAAE+N;MACN;KACDC,aAAa,EAAE;OACdhO,IAAI,EAAE+N;;IAEP;GAED7N,IAAI,GACJ;KAAA;KACC,OAAO;OACN+N,MAAM,qBAAE,IAAI,CAACC,SAAS,8BAAI,KAAK;OAC/B5C,YAAY,iBAAE,IAAI,CAACpJ,KAAK,0BAAI;MAC5B;IACD;GAEDH,OAAO,GACP;KACC,IAAI,CAACoM,UAAU,EAAE;IACjB;GAEDC,OAAO,GACP;KACC,IAAI,CAACD,UAAU,EAAE;IACjB;GAEDlM,KAAK,EAAE;KACNqJ,YAAY,CAACpJ,KAAK,EAClB;OACC,IAAI,CAACmM,cAAc,CAACnM,KAAK,CAAC;;IAE3B;GAED7B,OAAO,EAAE;KACR8N,UAAU,GACV;OAAA;OACC,IAAI,IAAI,CAACN,cAAc,KAAK,IAAI,EAChC;SACC;;OAGD,MAAMS,UAAU,GAAGhI,QAAQ,CAACiI,cAAc,CAAC,IAAI,CAACV,cAAc,CAAC;OAE/D,IAAI,CAACW,oBAAoB,GAAG,IAAIC,wBAAM,CAAC;SACtCH,UAAU;SACVI,OAAO,EAAG,sCAAqC,IAAI,CAACnO,EAAG,EAAC;SACxDoO,QAAQ,EAAE,KAAK;SACfC,YAAY,EAAE,IAAI;SAClBC,WAAW,EAAE,KAAK;SAClBC,YAAY,EAAE,KAAK;SACnBC,KAAK,EAAE,GAAG;SACVC,MAAM,EAAE,IAAI;SACZlB,KAAK,iBAAE,IAAI,CAACA,KAAK,0BAAI,EAAE;SACvB3N,IAAI,gBAAE,IAAI,CAACA,IAAI,yBAAI,EAAE;SACrB6N,aAAa,yBAAE,IAAI,CAACA,aAAa,kCAAI,EAAE;SACvCiB,MAAM,EAAE;WACP,eAAe,EAAGzD,KAAgB,IAAK;aACtC,MAAM;eAAE0D,IAAI,EAAE;iBAAE3O;;cAAM,GAAGiL,KAAK,CAACzD,OAAO,EAAE;aACxC,IAAI,CAACuD,YAAY,GAAG/K,EAAE;;;QAGxB,CAAC;OAEF8E,eAAK,CAACD,IAAI,CAACkJ,UAAU,EAAE,OAAO,EAAE,MAAM;SACrC,IAAI,CAACE,oBAAoB,CAAC/J,IAAI,EAAE;QAChC,CAAC;MACF;KACD4J,cAAc,CAACrN,MAAc,EAC7B;OACC,IAAI,CAAC6E,KAAK,CAAC,cAAc,EAAE7E,MAAM,CAAC;;IAEnC;GAEDO,QAAQ,EAAG;;;;;;;;;CASZ,CAAC;;CC7GM,MAAM4N,WAAW,GAAG;GAC1BzG,OAAO,EAAEhB,QAAQ;GAEjB5D,UAAU,EAAE;KACX8J,cAAc;KACdzC;IACA;GAEDjL,IAAI,GACJ;KACC,OAAO;OACNK,EAAE,EAAE,SAAS;OACbyK,SAAS,EAAE,IAAI,CAAC9K,IAAI,CAAC8K,SAAS;OAC9BC,UAAU,EAAE,IAAI,CAAC/K,IAAI,CAAC+K,UAAU;OAChCmE,SAAS,EAAE,IAAIrE,aAAa;MAC5B;IACD;GAED1K,OAAO,EAAE;KACR0H,OAAO,GACP;OACC,OAAO;SACNiD,SAAS,EAAE,IAAI,CAACA,SAAS;SACzBC,UAAU,EAAE,IAAI,CAACA;QACjB;MACD;KACDoE,YAAY,CAACnN,KAAa,EAC1B;OACC,IAAI,CAAC8I,SAAS,GAAG9I,KAAK;MACtB;KACDoN,aAAa,CAACpN,KAAa,EAC3B;OACC,IAAI,CAAC+I,UAAU,GAAG/I,KAAK;MACvB;KACDiF,QAAQ,GACR;OACC,OAAO,IAAI,CAACiI,SAAS,CAACjI,QAAQ,CAAC,IAAI,CAAC6D,SAAS,EAAE,IAAI,CAACC,UAAU,CAAC;MAC/D;KACDhD,kBAAkB,GAClB;OACCjF,kBAAE,CAACkF,YAAY,CAACC,MAAM,CAACC,MAAM,CAAC;SAC7BC,OAAO,EAAE,IAAI,CAAC+G,SAAS,CAAC/H,QAAQ,EAAE;SAClCiB,aAAa,EAAE;QACf,CAAC;;IAEH;GAEDjH,QAAQ,EAAE;KACTiI,SAAS,GACT;OACC,OAAOzI,aAAG,CAACC,UAAU,CAAC,gDAAgD,CAAC;MACvE;KACDyI,eAAe,GACf;OACC,OAAO1I,aAAG,CAACC,UAAU,CAAC,sDAAsD,CAAC;;IAE9E;GAEDS,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA2DZ,CAAC;;CC5HM,MAAMG,QAAM,GAAG;GACrB5B,KAAK,EAAE;KACNqN,MAAM,EAAE;OACPnN,IAAI,EAAEC,MAAM;OACZ0B,QAAQ,EAAE;MACV;KACD4I,KAAK,EAAE;OACNvK,IAAI,EAAEoL,MAAM;OACZzJ,QAAQ,EAAE;;IAEX;GAEDN,QAAQ,EAAE;KACTiM,SAAS,GACT;OACC,OAAO;SACN,2DAA2D,EAAE,IAAI;SACjE,OAAO,EAAE,IAAI,CAACH,MAAM,KAAK,KAAK;SAC9B,UAAU,EAAE,IAAI,CAACA,MAAM,KAAK;QAC5B;;IAEF;GAED9M,OAAO,EAAE;KACRsN,OAAO,GACP;OACC,MAAM;SAAER,MAAM;SAAE5C;QAAO,GAAG,IAAI;OAE9B,IAAI,CAAC1E,KAAK,CAAC,cAAc,EAAE;SAC1B0E,KAAK;SACL4C;QACA,CAAC;;IAEH;GAED5L,QAAQ,EAAG;;;CAGZ,CAAC;;CCtCM,MAAMgO,OAAO,GAAG;GACtBzP,KAAK,EAAE;KACN0P,UAAU,EAAE;OACXxP,IAAI,EAAE6B,OAAO;OACbC,OAAO,EAAE;;IAEV;GAEDT,QAAQ,EAAE;KACTiM,SAAS,GACT;OACC,OAAO;SACN,4DAA4D,EAAE,IAAI;SAClE,YAAY,EAAE,IAAI,CAACkC;QACnB;;IAEF;GAEDjO,QAAQ,EAAG;;;CAGZ,CAAC;;CCfM,MAAMkO,SAAS,GAAG;GACxB3L,UAAU,EAAE;KACXyL;IACA;GACDzP,KAAK,EAAE;KACN4P,UAAU,EAAE;OACX1P,IAAI,EAAEC,MAAM;OACZ0B,QAAQ,EAAE;MACV;KACDgO,QAAQ,EAAE;OACT3P,IAAI,EAAEC,MAAM;OACZ0B,QAAQ,EAAE;MACV;KACDiO,UAAU,EAAE;OACX5P,IAAI,EAAE4H,MAAM;OACZ9F,OAAO,EAAE;;IAEV;GACD8C,KAAK,EAAE,CAAC,mBAAmB,CAAC;GAE5B1E,IAAI,GACJ;KACC,OAAO;OACN2P,iBAAiB,EAAE,IAAI,CAACH,UAAU;OAClCI,eAAe,EAAE,IAAI,CAACH,QAAQ;OAC9BH,UAAU,EAAE;MACZ;IACD;GAEDO,OAAO,GACP;KACC,IAAI,CAACC,UAAU,GAAG,IAAIC,wBAAU,CAAC;OAChCC,eAAe,EAAE,IAAI,CAAC5M,KAAK,CAAC6M,KAAK;OACjCC,aAAa,EAAE,IAAI,CAAC9M,KAAK,CAAC+M,GAAG;OAC7BC,aAAa,EAAE,OAAO;OACtBC,WAAW,EAAE,OAAO;OACpBC,UAAU,EAAEC,oCAAiB,CAACC,qBAAqB,CAAC,IAAI,CAAC;OACzDC,UAAU,EAAEF,oCAAiB,CAACG,sBAAsB,EAAE;OACtDC,aAAa,EAAE,CAAC,IAAI,CAAChB,iBAAiB,EAAE,IAAI,CAACC,eAAe,CAAC;OAC7DgB,UAAU,EAAE,IAAI;OAChB7B,MAAM,EAAE;SACP8B,cAAc,EAAGvF,KAAgB,IAAK;WACrC,MAAMwF,KAAK,GAAGxF,KAAK,CACjByF,SAAS,EAAE,CACXC,gBAAgB,EAAE,CAClBC,GAAG,CAAEC,IAAU,IAAK5F,KAAK,CAACyF,SAAS,EAAE,CAACI,UAAU,CAACD,IAAI,EAAEX,oCAAiB,CAACC,qBAAqB,CAAC,IAAI,CAAC,CAAC,CAAC;WAGxG,IAAIM,KAAK,CAAC,CAAC,CAAC,EACZ;aACC,IAAI,CAACnB,iBAAiB,GAAGmB,KAAK,CAAC,CAAC,CAAC;;WAGlC,IAAIA,KAAK,CAAC,CAAC,CAAC,EACZ;aACC,IAAI,CAAClB,eAAe,GAAGkB,KAAK,CAAC,CAAC,CAAC;;WAGhC,IAAI,CAACnL,KAAK,CAAC,mBAAmB,EAAE;aAC/B6J,UAAU,EAAE,IAAI,CAACG,iBAAiB;aAClCF,QAAQ,EAAE,IAAI,CAACG;YACf,CAAC;UACF;SACDwB,MAAM,EAAE,MAAM;WACb,IAAI,CAAC9B,UAAU,GAAG,IAAI;UACtB;SACD+B,MAAM,EAAE,MAAM;WACb,IAAI,CAAC/B,UAAU,GAAG,KAAK;;;MAGzB,CAAC;IACF;GAEDzN,OAAO,GACP;KACC,IAAI,CAACiO,UAAU,CAACwB,aAAa,CAAC,IAAI,CAAClO,KAAK,CAACmO,OAAO,CAAC;KACjD,IAAI,CAACzB,UAAU,CAAC0B,WAAW,CAAC,IAAI,CAAC7B,iBAAiB,EAAE,IAAI,CAACC,eAAe,CAAC;IACzE;GAED6B,aAAa,GACb;KACC,IAAI,CAAC3B,UAAU,CAAC4B,OAAO,EAAE;IACzB;GAEDvR,OAAO,EAAE;KACRwR,UAAU,CAACrG,KAAmB,EAC9B;OACCA,KAAK,CAACM,cAAc,EAAE;OACtBN,KAAK,CAACsG,eAAe,EAAE;OAEvB,IAAI,CAAC9B,UAAU,CAACvL,IAAI,EAAE;;IAEvB;GAEDlD,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAsCZ,CAAC;;CC1IM,MAAMwQ,WAAW,GAAGnK,MAAM,CAAC6B,MAAM,CAAC;GACxCuI,MAAM,EAAE,QAAQ;GAChBC,OAAO,EAAE,SAAS;GAClBC,SAAS,EAAE,WAAW;GACtBC,QAAQ,EAAE,UAAU;GACpBC,MAAM,EAAE,QAAQ;GAChBC,QAAQ,EAAE,UAAU;GACpBC,MAAM,EAAE,QAAQ;GAChBC,OAAO,EAAE,SAAS;GAClBC,QAAQ,EAAE;CACX,CAAC,CAAC;;CCV8B;AAEhC,CAAO,MAAMC,UAAU,CACvB;GAAA;KAAA;OAAA;OAAA,OAC0B;;;GAEzBtL,QAAQ,CAACuL,SAAiB,EAAEC,OAAe,EAC3C;KACC,MAAMC,SAAS,GAAIC,WAAW,IAAK;OAClC,MAAM,GAAGC,IAAI,CAAC,GAAGD,WAAW,CAACE,KAAK,CAAC,GAAG,CAAC;OACvC,MAAM,CAACC,KAAK,EAAEC,OAAO,CAAC,GAAGH,IAAI,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC5B,GAAG,CAAC/F,MAAM,CAAC;OAEpD,OAAO,IAAI8H,IAAI,CAAC,IAAI,EAAE,EAAE,EAAE,EAAE,EAAEF,KAAK,EAAEC,OAAO,CAAC;MAC7C;KAED,MAAM9C,KAAK,GAAGyC,SAAS,CAACF,SAAS,CAAC;KAClC,MAAMrC,GAAG,GAAGuC,SAAS,CAACD,OAAO,CAAC;KAE9B,IAAIvH,MAAM,CAACY,KAAK,CAACmE,KAAK,CAAC,IAAI/E,MAAM,CAACY,KAAK,CAACqE,GAAG,CAAC,EAC5C;OACC,4CAAI,sCAAiBxP,aAAG,CAACC,UAAU,CAAC,mEAAmE,CAAC;OAExG,OAAO,KAAK;;KAGb,IAAIqP,KAAK,CAACgD,OAAO,EAAE,IAAI9C,GAAG,CAAC8C,OAAO,EAAE,EACpC;OACC,4CAAI,sCAAiBtS,aAAG,CAACC,UAAU,CAAC,mEAAmE,CAAC;OAExG,OAAO,KAAK;;KAGb,4CAAI,sCAAiB,IAAI;KAEzB,OAAO,IAAI;;GAGZuG,QAAQ,GACR;KACC,+CAAO,IAAI;;CAEb;;CChCO,MAAM+L,SAAS,GAAG;GACxBtP,UAAU,EAAE;KACXyL;IACA;GACDzP,KAAK,EAAE;KACNiS,WAAW,EAAE;OACZ/R,IAAI,EAAEC,MAAM;OACZ0B,QAAQ,EAAE;MACV;KACD+N,UAAU,EAAE;OACX1P,IAAI,EAAEC,MAAM;OACZ0B,QAAQ,EAAE;MACV;KACDgO,QAAQ,EAAE;OACT3P,IAAI,EAAEC,MAAM;OACZ0B,QAAQ,EAAE;MACV;KACDiO,UAAU,EAAE;OACX5P,IAAI,EAAE4H,MAAM;OACZ9F,OAAO,EAAE;;IAEV;GACD8C,KAAK,EAAE,CAAC,mBAAmB,CAAC;GAE5B1E,IAAI,GACJ;KAAA;KACC,OAAO;OACNmT,kBAAkB,uBAAE,IAAI,CAACtB,WAAW,gCAAIuB,WAAe,CAACf,OAAO;OAC/D1C,iBAAiB,EAAE,IAAI,CAACH,UAAU;OAClCI,eAAe,EAAE,IAAI,CAACH,QAAQ;OAC9B4D,oBAAoB,EAAE,KAAK;OAC3BC,kBAAkB,EAAE,KAAK;OACzBC,mBAAmB,EAAE,IAAIC,UAAmB;MAC5C;IACD;GAED3D,OAAO,GACP;KACC,IAAI,CAACC,UAAU,GAAG,IAAIC,wBAAU,CAAC;OAChCjQ,IAAI,EAAE,MAAM;OACZwQ,UAAU,EAAEC,oCAAiB,CAACC,qBAAqB,CAAC,IAAI,CAAC;OACzDC,UAAU,EAAEF,oCAAiB,CAACG,sBAAsB,EAAE;OACtD+C,UAAU,EAAE,CAAC;OACb1E,MAAM,EAAE;SACP8B,cAAc,EAAGvF,KAAgB,IAAK;WACrC,MAAMiG,OAAO,GAAGjG,KAAK,CAACyF,SAAS,EAAE,CAAC2C,aAAa,EAAE,CAAC1N,UAAU;WAC5D,IAAI,CAACV,cAAI,CAACqO,SAAS,CAACpC,OAAO,CAAC,EAC5B;aACC;;WAGD,MAAMT,KAAK,GAAGxF,KAAK,CACjByF,SAAS,EAAE,CACXC,gBAAgB,EAAE,CAClBC,GAAG,CAAEC,IAAU,IAAK5F,KAAK,CAACyF,SAAS,EAAE,CAACI,UAAU,CAACD,IAAI,EAAEX,oCAAiB,CAACC,qBAAqB,CAAC,IAAI,CAAC,CAAC,CAAC;WAGxG,IAAI,CAACM,KAAK,CAAC,CAAC,CAAC,EACb;aACC;;WAGD,IAAI,CAAAS,OAAO,oBAAPA,OAAO,CAAEqC,YAAY,CAAC,IAAI,CAAC,MAAK,sBAAsB,EAC1D;aACC,IAAI,CAACjE,iBAAiB,GAAGmB,KAAK,CAAC,CAAC,CAAC;YACjC,MACI,IAAI,CAAAS,OAAO,oBAAPA,OAAO,CAAEqC,YAAY,CAAC,IAAI,CAAC,MAAK,oBAAoB,EAC7D;aACC,IAAI,CAAChE,eAAe,GAAGkB,KAAK,CAAC,CAAC,CAAC;;WAGhC,MAAM+C,UAAU,GAAG,IAAI,CAACN,mBAAmB,CAACtM,QAAQ,CAAC,IAAI,CAAC0I,iBAAiB,EAAE,IAAI,CAACC,eAAe,CAAC;WAClG,IAAIiE,UAAU,EACd;aACCC,aAAG,CAACC,WAAW,CAAC,IAAI,CAAC3Q,KAAK,CAAC6M,KAAK,EAAE,WAAW,CAAC;aAC9C6D,aAAG,CAACC,WAAW,CAAC,IAAI,CAAC3Q,KAAK,CAAC+M,GAAG,EAAE,WAAW,CAAC;YAC5C,MAED;aACC2D,aAAG,CAACE,QAAQ,CAAC,IAAI,CAAC5Q,KAAK,CAAC6M,KAAK,EAAE,WAAW,CAAC;aAC3C6D,aAAG,CAACE,QAAQ,CAAC,IAAI,CAAC5Q,KAAK,CAAC+M,GAAG,EAAE,WAAW,CAAC;;WAG1C,IAAI,CAACxK,KAAK,CAAC,mBAAmB,EAAE;aAC/BkM,WAAW,EAAE,IAAI,CAACsB,kBAAkB;aACpC3D,UAAU,EAAE,IAAI,CAACG,iBAAiB;aAClCF,QAAQ,EAAE,IAAI,CAACG;YACf,CAAC;UACF;SACDyB,MAAM,EAAE,MAAM;WACb,IAAI,CAACgC,oBAAoB,GAAG,KAAK;WACjC,IAAI,CAACC,kBAAkB,GAAG,KAAK;;;MAGjC,CAAC;IACF;GAED7B,aAAa,GACb;KACC,IAAI,CAAC3B,UAAU,CAAC4B,OAAO,EAAE;IACzB;GAEDvQ,QAAQ,EAAE;KACTiS,eAAe,GACf;OACC,OAAO,CACN;SACCpR,KAAK,EAAEoR,WAAe,CAACtB,MAAM;SAC7BpR,KAAK,EAAE,IAAI,CAACM,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,2DAA2D;QAC9F,EAAE;SACFoB,KAAK,EAAEoR,WAAe,CAACrB,OAAO;SAC9BrR,KAAK,EAAE,IAAI,CAACM,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,4DAA4D;QAC/F,EAAE;SACFoB,KAAK,EAAEoR,WAAe,CAACpB,SAAS;SAChCtR,KAAK,EAAE,IAAI,CAACM,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,8DAA8D;QACjG,EAAE;SACFoB,KAAK,EAAEoR,WAAe,CAACnB,QAAQ;SAC/BvR,KAAK,EAAE,IAAI,CAACM,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,6DAA6D;QAChG,EAAE;SACFoB,KAAK,EAAEoR,WAAe,CAAClB,MAAM;SAC7BxR,KAAK,EAAE,IAAI,CAACM,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,2DAA2D;QAC9F,EAAE;SACFoB,KAAK,EAAEoR,WAAe,CAACjB,QAAQ;SAC/BzR,KAAK,EAAE,IAAI,CAACM,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,6DAA6D;QAChG,EAAE;SACFoB,KAAK,EAAEoR,WAAe,CAAChB,MAAM;SAC7B1R,KAAK,EAAE,IAAI,CAACM,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,2DAA2D;QAC9F,EAAE;SACFoB,KAAK,EAAEoR,WAAe,CAACf,OAAO;SAC9B3R,KAAK,EAAE,IAAI,CAACM,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,iEAAiE;QACpG,EAAE;SACFoB,KAAK,EAAEoR,WAAe,CAACd,QAAQ;SAC/B5R,KAAK,EAAE,IAAI,CAACM,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,6DAA6D;QAChG,CACD;MACD;KAEDqT,eAAe,GACf;OACC,OAAO,IAAI,CAACtE,iBAAiB,CAACkD,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;MAC3C;KAEDqB,aAAa,GACb;OACC,OAAO,IAAI,CAACtE,eAAe,CAACiD,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;;IAE1C;GAED9Q,KAAK,EAAE;KACNoR,kBAAkB,CAACtB,cAAmB,EACtC;OACC,IAAI,CAACsB,kBAAkB,GAAGtB,cAAW;OAErC,IAAI,CAAClM,KAAK,CAAC,mBAAmB,EAAE;SAC/BkM,WAAW,EAAE,IAAI,CAACsB,kBAAkB;SACpC3D,UAAU,EAAE,IAAI,CAACG,iBAAiB;SAClCF,QAAQ,EAAE,IAAI,CAACG;QACf,CAAC;;IAEH;GAEDzP,OAAO,EAAE;KACRwR,UAAU,CAACrG,KAAmB,EAC9B;OACCA,KAAK,CAACM,cAAc,EAAE;OACtBN,KAAK,CAACsG,eAAe,EAAE;OAEvB,MAAML,OAAO,GAAGjG,KAAK,CAAC6I,MAAM,CAACnO,UAAU;OACvC,IAAI,CAACV,cAAI,CAACqO,SAAS,CAACpC,OAAO,CAAC,EAC5B;SACC;;OAGD,IAAI,CAACzB,UAAU,CAACwB,aAAa,CAACC,OAAO,CAAC;OAEtC,IAAI,CAAAA,OAAO,oBAAPA,OAAO,CAAEqC,YAAY,CAAC,IAAI,CAAC,MAAK,sBAAsB,EAC1D;SACC,IAAI,CAAC9D,UAAU,CAACsE,aAAa,CAAC,IAAI,CAAChR,KAAK,CAAC6M,KAAK,CAAC;SAC/C,IAAI,CAACH,UAAU,CAACuE,UAAU,CAAC,IAAI,CAAC1E,iBAAiB,CAAC;SAClD,IAAI,CAAC0D,oBAAoB,GAAG,IAAI;QAChC,MACI,IAAI,CAAA9B,OAAO,oBAAPA,OAAO,CAAEqC,YAAY,CAAC,IAAI,CAAC,MAAK,oBAAoB,EAC7D;SACC,IAAI,CAAC9D,UAAU,CAACsE,aAAa,CAAC,IAAI,CAAChR,KAAK,CAAC+M,GAAG,CAAC;SAC7C,IAAI,CAACL,UAAU,CAACuE,UAAU,CAAC,IAAI,CAACzE,eAAe,CAAC;SAChD,IAAI,CAAC0D,kBAAkB,GAAG,IAAI;;OAG/B,IAAI,CAACxD,UAAU,CAACvL,IAAI,EAAE;;IAEvB;GAEDlD,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA8DZ,CAAC;;CCvQM,MAAMiT,gBAAgB,GAAG5M,MAAM,CAAC6B,MAAM,CAAC;GAC7CgL,aAAa,EAAE,eAAe;GAC9BC,QAAQ,EAAE,UAAU;GACpBC,MAAM,EAAE,QAAQ;GAChBC,MAAM,EAAE;CACT,CAAC,CAAC;;CCKK,MAAMC,YAAY,GAAG;GAC3B/Q,UAAU,EAAE;aACXpC,QAAM;KACN+N,SAAS;KACT2D;IACA;GAEDtT,KAAK,EAAE;KACN0U,gBAAgB,EAAE;OACjBxU,IAAI,EAAEC,MAAM;OACZ0B,QAAQ,EAAE;MACV;KACDoC,QAAQ,EAAE;OACT/D,IAAI,EAAE6B;;IAEP;GAED3B,IAAI,GACJ;KACC,OAAO;OACN4U,uBAAuB,EAAE,IAAI,CAACN,gBAAgB;OAC9CO,oBAAoB,EAAE;MACtB;IACD;GAEDC,YAAY,GACZ;KACC,IAAI,CAACC,oBAAoB,GAAGA,gBAAoB;KAChD,IAAI,CAACC,cAAc,GAAGzE,oCAAiB,CAACC,qBAAqB,CAAC,IAAI,CAAC;IACnE;GAEDrP,QAAQ,EAAE;KACT8T,QAAQ,GACR;OACC,OAAO,CACN;SACCjT,KAAK,EAAE+S,gBAAoB,CAACR,aAAa;SACzC7T,KAAK,EAAE,IAAI,CAACM,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,iEAAiE;QACpG,EAAE;SACFoB,KAAK,EAAE+S,gBAAoB,CAACN,MAAM;SAClC/T,KAAK,EAAE,IAAI,CAACM,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,0DAA0D;QAC7F,EAAE;SACFoB,KAAK,EAAE+S,gBAAoB,CAACL,MAAM;SAClChU,KAAK,EAAE,IAAI,CAACM,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,0DAA0D;QAC7F,EAAE;SACFoB,KAAK,EAAE+S,gBAAoB,CAACP,QAAQ;SACpC9T,KAAK,EAAE,IAAI,CAACM,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,4DAA4D;QAC/F,CACD;MACD;KAEDsU,OAAO,GACP;OACC,OAAO5P,cAAI,CAACoF,aAAa,CAAC,IAAI,CAACmK,oBAAoB,CAAC,IAAI,CAACD,uBAAuB,CAAC,CAAC;MAClF;KAEDO,kBAAkB,GAClB;OAAA;OACC,gCAAO,IAAI,CAACN,oBAAoB,CAAC,IAAI,CAACD,uBAAuB,CAAC,oCAAI,EAAE;MACpE;KAEDQ,0BAA0B,GAC1B;OACC,OAAO,IAAI,CAACR,uBAAuB,KAAKG,gBAAoB,CAACR,aAAa,IACtE,IAAI,CAACK,uBAAuB,KAAKG,gBAAoB,CAACP,QAAQ;;IAGnE;GAEDzS,KAAK,EAAE;KACN6S,uBAAuB,CAACN,mBAAwB,EAChD;OACC,IAAI,CAAC3O,KAAK,CAAC,aAAa,EAAE;2BACzB2O;QACA,CAAC;;IAEH;GAEDnU,OAAO,EAAE;KACRkV,mBAAmB,CAAC;OAAEpI,MAAM;OAAE5C;MAAO,EACrC;OACC,IACC,IAAI,CAACuK,uBAAuB,KAAKG,gBAAoB,CAACR,aAAa,IAChE,IAAI,CAACK,uBAAuB,KAAKG,gBAAoB,CAACP,QAAQ,EAElE;SACC;;OAGD,IAAIvH,MAAM,KAAK,KAAK,EACpB;SACC,MAAM+B,IAAI,GACT,IAAI,CAAC4F,uBAAuB,KAAKG,gBAAoB,CAACN,MAAM,GACzD,IAAI,CAACa,wBAAwB,EAAE,GAC/B,IAAI,CAACC,oBAAoB,EAC5B;SAED,IAAI,CAACJ,kBAAkB,CAAC3K,IAAI,CAACwE,IAAI,CAAC;QAClC;;SAED;WACC,IAAI,CAACmG,kBAAkB,CAAC5K,MAAM,CAACF,KAAK,EAAE,CAAC,CAAC;;MAEzC;KAEDmL,iBAAiB,CAACC,GAAW,EAC7B;OACC,IAAI,CAAC9P,KAAK,CAAC,aAAa,EAAE;SACzB2O,gBAAgB,EAAE,IAAI,CAACM,uBAAuB;SAC9CC,oBAAoB,EAAE,IAAI,CAACa,mBAAmB,EAAE;SAChDC,UAAU,EAAEF;QACZ,CAAC;MACF;KAEDH,wBAAwB,GACxB;OACC,MAAMM,cAAc,GAAG,IAAI,CAACC,6BAA6B,CAAC,IAAI7C,IAAI,EAAE,EAAE,EAAE,CAAC;OACzE,MAAM8C,YAAY,GAAG,IAAI,CAACD,6BAA6B,CAAC,IAAI7C,IAAI,EAAE,EAAE,EAAE,CAAC;OACvE8C,YAAY,CAACC,OAAO,CAACD,YAAY,CAACE,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC;;OAEjD,OAAO;SACNxG,UAAU,EAAEyG,wBAAc,CAACC,MAAM,CAAC,IAAI,CAAClB,cAAc,EAAEY,cAAc,CAAC;SACtEnG,QAAQ,EAAEwG,wBAAc,CAACC,MAAM,CAAC,IAAI,CAAClB,cAAc,EAAEc,YAAY;QACjE;MACD;KAEDP,oBAAoB,GACpB;OACC,MAAMK,cAAc,GAAGnP,IAAI,CAAC9D,KAAK,CAAE,IAAIqQ,IAAI,EAAE,CAAEmD,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC;OAC3E,MAAML,YAAY,GAAGrP,IAAI,CAAC9D,KAAK,CAAE,IAAIqQ,IAAI,EAAE,CAAEmD,QAAQ,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC;OAE1E,OAAO;SACNtE,WAAW,EAAEuB,WAAe,CAACf,OAAO;SACpC7C,UAAU,EAAEyG,wBAAc,CAACC,MAAM,CAAC,IAAI,CAAClB,cAAc,EAAEY,cAAc,CAAC;SACtEnG,QAAQ,EAAEwG,wBAAc,CAACC,MAAM,CAAC,IAAI,CAAClB,cAAc,EAAEc,YAAY;QACjE;MACD;KAEDD,6BAA6B,CAAC3E,IAAU,EAAE6B,OAAe,EACzD;OACC,MAAMqD,WAAW,GAAGlF,IAAI,CAAC+B,OAAO,EAAE;OAClC,MAAMoD,EAAE,GAAGtD,OAAO,GAAG,EAAE,GAAG,IAAI;OAC9B,MAAMuD,WAAW,GAAG7P,IAAI,CAAC9D,KAAK,CAACyT,WAAW,GAAGC,EAAE,CAAC,GAAGA,EAAE;OAErD,OAAO,IAAIrD,IAAI,CAACsD,WAAW,CAAC;MAC5B;KAEDZ,mBAAmB,GACnB;OAAA;OACC,iCAAO,IAAI,CAACb,oBAAoB,CAAC,IAAI,CAACD,uBAAuB,CAAC,qCAAI,EAAE;MACpE;KAED2B,mBAAmB,CAACC,gBAAuB,EAC3C;OACC,IAAIlR,cAAI,CAACoF,aAAa,CAAC8L,gBAAgB,CAAC,EACxC;SACC,IAAI,CAAC3B,oBAAoB,CAAC,IAAI,CAACD,uBAAuB,CAAC,GAAG4B,gBAAgB;SAE1E,IAAI,IAAI,CAAC5B,uBAAuB,KAAK,IAAI,CAACG,oBAAoB,CAACN,MAAM,EACrE;WACC,IAAI,CAACI,oBAAoB,CAAC,IAAI,CAACE,oBAAoB,CAACL,MAAM,CAAC,GAAG,CAC7D,IAAI,CAACa,oBAAoB,EAAE,CAC3B;UACD,MACI,IAAI,IAAI,CAACX,uBAAuB,KAAK,IAAI,CAACG,oBAAoB,CAACL,MAAM,EAC1E;WACC,IAAI,CAACG,oBAAoB,CAAC,IAAI,CAACE,oBAAoB,CAACN,MAAM,CAAC,GAAG,CAC7D,IAAI,CAACa,wBAAwB,EAAE,CAC/B;;SAGF;;OAGD,IAAI,CAACT,oBAAoB,GAAG;SAC3B,CAAC,IAAI,CAACE,oBAAoB,CAACN,MAAM,GAAG,CACnC,IAAI,CAACa,wBAAwB,EAAE,CAC/B;SACD,CAAC,IAAI,CAACP,oBAAoB,CAACL,MAAM,GAAG,CACnC,IAAI,CAACa,oBAAoB,EAAE;QAE5B;;IAEF;GAEDlU,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA2DZ,CAAC;;CCnPM,MAAMoV,YAAY,GAAG;GAC3BjO,OAAO,EAAEhB,QAAQ;GACjB5D,UAAU,EAAE;KACX+Q;IACA;GAED3U,IAAI,GACJ;KAAA;KACC,IAAI0W,sBAAsB,GAAG,CAAC;KAC9B,2BAAI,IAAI,CAAC/O,QAAQ,CAACgP,IAAI,aAAlB,oBAAoBC,UAAU,EAClC;OAAA;OACCF,sBAAsB,4BAAG,IAAI,CAAC1W,IAAI,CAAC6W,eAAe,oCAAI,CAAC;;KAGxD,OAAO;OACNxW,EAAE,EAAE,UAAU;OACdyW,UAAU,2BAAE,IAAI,CAAC9W,IAAI,CAAC8W,UAAU,oCAAI,CAAC;OACrCD,eAAe,EAAEH,sBAAsB;OACvCpC,gBAAgB,2BAAE,IAAI,CAACtU,IAAI,CAACsU,gBAAgB,oCAAIS,gBAAoB,CAACR,aAAa;OAClFiC,gBAAgB,4BAAE,IAAI,CAACxW,IAAI,CAACwW,gBAAgB,qCAAI,EAAE;OAClDjD,mBAAmB,EAAE,IAAIC,UAAmB,EAAE;OAC9CuD,eAAe,EAAE;MACjB;IACD;GAED5W,OAAO,EAAE;KACR0H,OAAO,GACP;OAAA;OACC,OAAO;SACNiP,UAAU,EAAE,IAAI,CAACA,UAAU;SAC3BD,eAAe,EAAE,IAAI,CAACA,eAAe;SACrCvC,gBAAgB,EAAE,IAAI,CAACA,gBAAgB;SACvCkC,gBAAgB,qDAAE,IAAI,CAACpT,KAAK,CAAC4T,YAAY,qBAAvB,uBAAyBtB,mBAAmB,EAAE,oCAAI;QACpE;MACD;KAEDuB,uBAAuB,CAAC3L,KAAgB,EACxC;OACC,IAAI,IAAI,CAAC4L,gBAAgB,EACzB;SACC;;OAGD,MAAM;SAAElV;QAAO,GAAGsJ,KAAK,CAAC6I,MAAM;OAC9B,IAAInS,KAAK,KAAK,CAAC,EACf;SACC,IAAI,IAAI,CAACmV,sBAAsB,EAC/B;WACC7P,wBAAU,CAAC/C,IAAI,CAAC,IAAI,CAAC4S,sBAAsB,CAAC;;SAG7C,KAAK,IAAI,CAAChL,SAAS,CAAC,MAAM;WACzB,IAAI,CAAC0K,eAAe,GAAG,CAAC;UACxB,CAAC;;MAEH;KAEDO,wBAAwB,CAACpX,IAAY,EACrC;OACC,IAAI,CAACsU,gBAAgB,GAAGtU,IAAI,CAACsU,gBAAgB;OAE7C,IAAI,CAACyC,eAAe,GAAG,IAAI;MAC3B;KAEDM,wBAAwB,CAACrX,IAAY,EACrC;;;;OAIC,IAAI,CAACiH,QAAQ,EAAE;OACf,IAAI,CAACc,kBAAkB,EAAE;MACzB;KAEDd,QAAQ,GACR;OACC,IAAI,IAAI,CAACqN,gBAAgB,KAAKS,gBAAoB,CAACL,MAAM,EACzD;SAAA;SACC,MAAM1U,IAAI,uDAAG,IAAI,CAACoD,KAAK,CAAC4T,YAAY,qBAAvB,uBAAyBtB,mBAAmB,EAAE,qCAAI,EAAE;SACjE,MAAM4B,YAAY,GAAGtX,IAAI,CAACuX,MAAM,CAAEvI,IAAY,IAAK;WAClD,OAAO,CAAC,IAAI,CAACuE,mBAAmB,CAACtM,QAAQ,CAAC+H,IAAI,CAACQ,UAAU,EAAER,IAAI,CAACS,QAAQ,CAAC;UACzE,CAAC;SAEF,OAAO6H,YAAY,CAACpQ,MAAM,KAAK,CAAC;;OAGjC,OAAO,IAAI;MACX;KAEDa,kBAAkB,GAClB;OACC,IAAI,CAACgP,eAAe,GAAG,IAAI,CAACxD,mBAAmB,CAACpM,QAAQ,EAAE;;IAE3D;GAEDtF,OAAO,GACP;KAAA;KACC,8BAAI,CAACuB,KAAK,CAAC4T,YAAY,qBAAvB,uBAAyBT,mBAAmB,CAAC,IAAI,CAACC,gBAAgB,CAAC;IACnE;GAEDrV,QAAQ,EAAE;KACTiI,SAAS,GACT;OACC,OAAO,IAAI,CAACpI,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,iDAAiD,CAAC;MACrF;KAEDyI,eAAe,GACf;OACC,OAAO,IAAI,CAACrI,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,uDAAuD,CAAC;MAC3F;KAED4W,2BAA2B,GAC3B;OACC,OAAO,IAAI,CAACxW,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,qDAAqD,CAAC;MACzF;KAED6W,sCAAsC,GACtC;OACC,OAAO,IAAI,CAACzW,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,iEAAiE,CAAC;MACrG;KAED8W,wBAAwB,GACxB;OACC,OAAO,IAAI,CAAC1W,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,iDAAiD,CAAC;MACrF;KAED+W,mCAAmC,GACnC;OACC,OAAO,IAAI,CAAC3W,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,6DAA6D,CAAC;MACjG;KAEDgX,SAAS,GACT;OACC,OAAO,CACN;SACCvX,EAAE,EAAE,CAAC;SACLK,KAAK,EAAE,IAAI,CAACM,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,yDAAyD;QAC5F,EACD;SACCP,EAAE,EAAE,CAAC;SACLK,KAAK,EAAE,IAAI,CAACM,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,8DAA8D;QACjG,EACD;SACCP,EAAE,EAAE,CAAC;SACLK,KAAK,EAAE,IAAI,CAACM,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,8DAA8D;QACjG,CACD;MACD;KAEDiX,UAAU,GACV;OACC,OAAO,CACN;SACC7V,KAAK,EAAE,CAAC;SACRtB,KAAK,EAAE,IAAI,CAACM,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,gEAAgE;QACnG,EACD;SACCoB,KAAK,EAAE,CAAC;SACRtB,KAAK,EAAE,IAAI,CAACM,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,8DAA8D;QACjG,EACD;SACCoB,KAAK,EAAE,CAAC;SACRtB,KAAK,EAAE,IAAI,CAACM,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,8DAA8D;QACjG,EACD;SACCoB,KAAK,EAAE,CAAC;SACRtB,KAAK,EAAE,IAAI,CAACM,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,qDAAqD;QACxF,EACD;SACCoB,KAAK,EAAE,CAAC;SACRtB,KAAK,EAAE,IAAI,CAACM,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,0DAA0D;QAC7F,CACD;MACD;KAEDkX,eAAe,GACf;OAAA;OACC,wDAAO,IAAI,CAACnQ,QAAQ,CAACgP,IAAI,qBAAlB,qBAAoBoB,WAAW,oCAAI,KAAK;MAC/C;KAEDb,gBAAgB,GAChB;OAAA;OACC,wDAAO,IAAI,CAACvP,QAAQ,CAACgP,IAAI,qBAAlB,qBAAoBC,UAAU,oCAAI,KAAK;MAC9C;KAEDO,sBAAsB,GACtB;OAAA;OACC,wDAAO,IAAI,CAACxP,QAAQ,CAACgP,IAAI,qBAAlB,qBAAoBqB,yBAAyB,oCAAI,IAAI;MAC5D;KAEDC,+BAA+B,GAC/B;OACC,OAAO,IAAI,CAACjX,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,wDAAwD,CAAC;MAC5F;KAEDsX,0CAA0C,GAC1C;OACC,OAAO,IAAI,CAAClX,OAAO,CAACL,GAAG,CAACC,UAAU,CAAC,oEAAoE,CAAC;MACxG;KAEDuX,mCAAmC,GACnC;OACC,OAAOC,mBAAS,CAACC,WAAW,CAAC,6BAA6B,CAAC,CAACC,GAAG,CAAC,mCAAmC,CAAC;;IAErG;GAEDjX,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAuFZ,CAAC;;CChSD;CACA;CACA;;AAUA,CAAO,MAAMkX,cAAc,GAAG;GAC7B3U,UAAU,EAAE;KACX2E,SAAS;KACTqB,UAAU;KACV6M,YAAY;KACZxH,WAAW;KACXtL;IACA;GAED/D,KAAK,EAAE;KACN+H,QAAQ,EAAE;OACT7H,IAAI,EAAE4H,MAAM;OACZ9F,OAAO,EAAE;MACT;KACD4W,MAAM,EAAE;OACP1Y,IAAI,EAAE4H,MAAM;OACZ9F,OAAO,EAAE;MACT;KACD+C,UAAU,EAAEC;IACZ;GAED5E,IAAI,GACJ;KAAA;KACC,MAAM;OAAEA;MAAM,GAAG,IAAI,CAACwY,MAAM;KAE5B,IAAInY,EAAE,GAAG,IAAI;KACb,IAAI,IAAI,CAACsH,QAAQ,CAAC8Q,MAAM,EACxB;OACCpY,EAAE,GAAG,IAAI;MACT,MAED;OAAA;OACCA,EAAE,eAAGL,IAAI,oBAAJA,IAAI,CAAEK,EAAE,uBAAI,IAAI;;KAGtB,OAAO;OACNA,EAAE;OACFqY,SAAS,EAAE,IAAI,CAACC,aAAa,CAAC3Y,IAAI,CAAC;OACnC4Y,YAAY,EAAE,OAAO;OACrBlY,KAAK,iBAAEV,IAAI,CAACU,KAAK,0BAAI,IAAI;OACzBmY,eAAe,EAAE;MACjB;IACD;GAED9W,KAAK,EAAE;KACN6W,YAAY,CAACE,MAAc,EAC3B;OACC,IAAI,CAACC,gBAAgB,CAAC;SACrB1Y,EAAE,EAAEyY,MAAM;SACV9Y,IAAI,EAAE,IAAI,CAACgZ,WAAW,CAACF,MAAM;QAC7B,CAAC;;IAEH;GAED3Y,OAAO,EAAE;KACRwY,aAAa,CAAC3Y,IAAY,EAC1B;OAAA;OACC,OAAO;SACNkK,MAAM,EAAE;WACPlK,IAAI,EAAE;aACL6J,mBAAmB,EAAE7J,IAAI,oBAAJA,IAAI,CAAE8J;;UAE5B;SACDnC,QAAQ,EAAE;WACT3H,IAAI,EAAE;aACL8W,UAAU,EAAE9W,IAAI,oBAAJA,IAAI,CAAE8W,UAAU;aAC5BD,eAAe,EAAE7W,IAAI,oBAAJA,IAAI,CAAE6W,eAAe;aACtCvC,gBAAgB,2BAAEtU,IAAI,oBAAJA,IAAI,CAAEsU,gBAAgB,oCAAIA,gBAAgB,CAACC,aAAa;aAC1EiC,gBAAgB,2BAAExW,IAAI,oBAAJA,IAAI,CAAEwW,gBAAgB,oCAAI;;UAE7C;SACDyC,OAAO,EAAE;WACRjZ,IAAI,EAAE;aACL8K,SAAS,qBAAE9K,IAAI,oBAAJA,IAAI,CAAE8K,SAAS,8BAAI,CAAC;aAC/BC,UAAU,sBAAE/K,IAAI,oBAAJA,IAAI,CAAE+K,UAAU,+BAAI;;;QAGlC;MACD;KACDmO,uBAAuB,CAAC;OAAElZ;MAAM,EAChC;OACC,MAAM;SAAEK;QAAI,GAAGL,IAAI;OACnB,IAAIK,EAAE,KAAK,QAAQ,IAAIA,EAAE,KAAK,OAAO,EACrC;SACC,IAAI,CAAC8Y,WAAW,EAAE;SAElB;;OAGD,IAAI9Y,EAAE,KAAK,MAAM,EACjB;SACC,MAAM+Y,YAAY,GAAG,IAAI,CAACC,SAAS,CAAC/O,OAAO,CAAC,IAAI,CAACsO,YAAY,CAAC;SAE9D,IAAIQ,YAAY,GAAG,CAAC,EACpB;WACC,IAAI,CAACR,YAAY,GAAG,IAAI,CAACS,SAAS,CAACD,YAAY,GAAG,CAAC,CAAC;;SAGrD;;OAGD,IAAI,CAAC,IAAI,CAACE,iBAAiB,EAAE,EAC7B;SACC,IAAI,CAACC,4BAA4B,EAAE;SAEnC;;OAGD,IAAIlZ,EAAE,KAAK,UAAU,EACrB;SACC,MAAM+Y,YAAY,GAAG,IAAI,CAACC,SAAS,CAAC/O,OAAO,CAAC,IAAI,CAACsO,YAAY,CAAC;SAE9D,IAAIQ,YAAY,GAAG,IAAI,CAACC,SAAS,CAACnS,MAAM,GAAG,CAAC,EAC5C;WACC,IAAI,CAAC0R,YAAY,GAAG,IAAI,CAACS,SAAS,CAACD,YAAY,GAAG,CAAC,CAAC;;SAGrD;;OAGD,IAAI/Y,EAAE,KAAK,QAAQ,IAAIA,EAAE,KAAK,QAAQ,EACtC;SACC,IAAI,CAACmZ,QAAQ,EAAE;;MAEhB;KACDA,QAAQ,GACR;OACC,IAAIxZ,IAAI,GAAG;SACVU,KAAK,EAAE,IAAI,CAACA;QACZ;OAED,IAAI,CAAC2Y,SAAS,CAACI,OAAO,CAAEX,MAAc,IAAK;SAAA;SAC1C9Y,IAAI,GAAG;WACN,GAAGA,IAAI;WACP,0BAAG,IAAI,CAACoD,KAAK,CAAC0V,MAAM,CAAC,qBAAlB,mBAAoBjR,OAAO,EAAE;UAChC;QACD,CAAC;OAEF,MAAM6R,UAAU,GAAG;SAClBrZ,EAAE,EAAE,IAAI,CAACA,EAAE;SACXL,IAAI;SACJ2Z,OAAO,EAAEC,8BAAY,CAACC,qBAAqB,CAAC,6BAA6B;QACzE;OAEDxV,GAAG,CAACxB,EAAE,CAACsC,KAAK,CAAC2U,YAAY,CAAC5Y,IAAI,CAAC,uCAAuC,EAAEwY,UAAU,CAAC;OAEnFK,cAAI,CACFC,SAAS,CAAC,iCAAiC,EAAE;SAAEha,IAAI,EAAE0Z;QAAY,CAAC,CAClEO,IAAI,CACHC,QAAQ,IAAK;SACb7V,GAAG,CAACxB,EAAE,CAACsC,KAAK,CAAC2U,YAAY,CAAC5Y,IAAI,CAAC,iCAAiC,EAAE;WACjE,GAAGwY,UAAU;WACb3L,MAAM,EAAEmM,QAAQ,oBAARA,QAAQ,CAAEnM;UAClB,CAAC;SAEF,IAAI,CAAAmM,QAAQ,oBAARA,QAAQ,CAAEnM,MAAM,MAAK,SAAS,EAClC;WACCjL,kBAAE,CAACkF,YAAY,CAACC,MAAM,CAACC,MAAM,CAAC;aAC7BC,OAAO,EAAEgS,cAAI,CAACC,MAAM,CAACF,QAAQ,CAACG,MAAM,CAAC,CAAC,CAAC,CAAC9S,OAAO,CAAC;aAChDa,aAAa,EAAE;YACf,CAAC;WAEF;;SAGD,IAAI,CAACkS,cAAc,EAAE;SACrB,IAAI,CAACnB,WAAW,EAAE;QAClB,EACAe,QAAQ,IAAK;SAAA;SACb,MAAMK,WAAW,GAAG,sBAAAL,QAAQ,CAACG,MAAM,CAAC,CAAC,CAAC,qBAAlB,kBAAoB7O,IAAI,MAAK,kBAAkB,GAChE,gDAAgD,GAChD,6CAA6C;SAGhD1I,kBAAE,CAACkF,YAAY,CAACC,MAAM,CAACC,MAAM,CAAC;WAC7BC,OAAO,EAAExH,aAAG,CAACC,UAAU,CAAC2Z,WAAW,CAAC;WACpCnS,aAAa,EAAE;UACf,CAAC;QACF,CACD,CACAoS,KAAK,CAAEN,QAAQ,IAAK;SACpBpX,kBAAE,CAACkF,YAAY,CAACC,MAAM,CAACC,MAAM,CAAC;WAC7BC,OAAO,EAAEgS,cAAI,CAACC,MAAM,CAACF,QAAQ,CAACG,MAAM,CAAC,CAAC,CAAC,CAAC9S,OAAO,CAAC;WAChDa,aAAa,EAAE;UACf,CAAC;SAEF,MAAM8R,QAAQ;QACd,CAAC;MAEH;KACDf,WAAW,GACX;OACC9U,GAAG,CAACxB,EAAE,CAAC4X,SAAS,CAACC,QAAQ,CAACC,iBAAiB,CAACvW,MAAM,CAAC,CAACwW,KAAK,EAAE;MAC3D;KACDN,cAAc,GACd;OAAA;OACC,IAAIhV,cAAI,CAACC,UAAU,iBAAC,IAAI,CAACiT,MAAM,4CAAX,aAAazJ,MAAM,qBAAnB,oBAAqB8L,MAAM,CAAC,EAChD;SACC,IAAI,CAACrC,MAAM,CAACzJ,MAAM,CAAC8L,MAAM,EAAE;;MAE5B;KACDC,eAAe,CAAC;OAAE9a;MAAM,EACxB;OACC,MAAM+a,SAAS,GAAG/a,IAAI,CAACc,MAAM;OAC7B,MAAMka,gBAAgB,GAAG,IAAI,CAAC3B,SAAS,CAAC/O,OAAO,CAAC,IAAI,CAACsO,YAAY,CAAC;OAClE,MAAMqC,YAAY,GAAG,IAAI,CAAC5B,SAAS,CAAC/O,OAAO,CAACyQ,SAAS,CAAC;OAEtD,IAAIC,gBAAgB,KAAKC,YAAY,EACrC;SACC;;OAGD,IAAIA,YAAY,GAAGD,gBAAgB,IAAI,CAAC,IAAI,CAAC1B,iBAAiB,EAAE,EAChE;SACC,IAAI,CAACC,4BAA4B,EAAE;SAEnC;;OAGD,IAAI,CAACX,YAAY,GAAGmC,SAAS;MAC7B;KACDG,YAAY,CAAC7a,EAAU,EACvB;OACC,OAAO,IAAI,CAACuY,YAAY,KAAKvY,EAAE;MAC/B;KACD0Y,gBAAgB,CAAC;OAAE1Y,EAAE,EAAEyY,MAAM;OAAE9Y;MAAM,EACrC;OACC,IAAI,CAAC0Y,SAAS,CAACI,MAAM,CAAC,GAAG9Y,IAAI;OAC7B,IAAI,CAAC6Y,eAAe,GAAG,IAAI,CAACsC,yBAAyB,EAAE;MACvD;KACDnC,WAAW,CAACF,MAAc,EAC1B;OACC,IAAIxT,cAAI,CAAC8V,YAAY,CAAC,IAAI,CAAC1C,SAAS,CAACI,MAAM,CAAC,CAAC,EAC7C;SACC,OAAO,IAAI,CAACJ,SAAS,CAACI,MAAM,CAAC,CAAC9Y,IAAI;;OAGnC,OAAO,EAAE;MACT;KACDqb,eAAe,CAACvC,MAAc,EAC9B;OACC,IAAIA,MAAM,KAAK,UAAU,EACzB;SAAA;SACC,OAAO;WACNnC,IAAI,yBAAE,IAAI,CAAChP,QAAQ,CAACgP,IAAI,kCAAI;UAC5B;;OAGF,OAAO,EAAE;MACT;KACD2E,QAAQ,CAAC5a,KAAa,EACtB;OACC,IAAI,CAACA,KAAK,GAAGA,KAAK;MAClB;KACD4Y,iBAAiB,GACjB;OACC,OAAO,IAAI,CAACiC,aAAa,EAAE,CAACtU,QAAQ,EAAE;MACtC;KACDsS,4BAA4B,GAC5B;OACC,OAAO,IAAI,CAACgC,aAAa,EAAE,CAACxT,kBAAkB,EAAE;MAChD;KACDoT,yBAAyB,GACzB;OACC,OAAO,IAAI,CAACI,aAAa,EAAE,CAACzT,eAAe,EAAE;MAC7C;KACDyT,aAAa,GACb;OACC,OAAO,IAAI,CAACnY,KAAK,CAAC,IAAI,CAACwV,YAAY,CAAC;;IAErC;GAEDzX,QAAQ,EAAE;KACTkY,SAAS,GACT;OACC,OAAO,CACN,OAAO,EACP,QAAQ,EACR,UAAU,EACV,SAAS,CACT;MACD;KACDmC,KAAK,GACL;OAAA;OACC,OAAO,0BAAI,CAAChD,MAAM,CAACxY,IAAI,qBAAhB,kBAAkBK,EAAE,KAAI,CAAC;MAChC;KACDwD,QAAQ,GACR;OACC,OAAO,IAAI,CAAC8D,QAAQ,CAAC9D,QAAQ;MAC7B;KACDnC,SAAS,GACT;OACC,OAAO,IAAI,CAACiG,QAAQ,CAACjG,SAAS;;IAE/B;GAEDG,OAAO,GACP;KACC,IAAI,CAACgX,eAAe,GAAG,IAAI,CAACsC,yBAAyB,EAAE;KAEvD,IAAI,CAACna,OAAO,CAACC,YAAY,CAACwa,SAAS,CAAChc,iBAAiB,CAACC,SAAS,EAAE,IAAI,CAACob,eAAe,CAAC;KACtF,IAAI,CAAC9Z,OAAO,CAACC,YAAY,CAACwa,SAAS,CAACna,YAAY,CAACC,KAAK,EAAE,IAAI,CAAC2X,uBAAuB,CAAC;IACrF;GAEDzH,aAAa,GACb;KACC,IAAI,CAACzQ,OAAO,CAACC,YAAY,CAACya,WAAW,CAACjc,iBAAiB,CAACC,SAAS,EAAE,IAAI,CAACob,eAAe,CAAC;KACxF,IAAI,CAAC9Z,OAAO,CAACC,YAAY,CAACya,WAAW,CAACpa,YAAY,CAACC,KAAK,EAAE,IAAI,CAAC2X,uBAAuB,CAAC;IACvF;GAED7X,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA6CZ,CAAC;;CCzX8B;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;AAQ/B,CAAO,MAAMkX,gBAAc,CAC3B;GAUCoD,WAAW,CAACC,WAAmB,EAAEpD,OAA4B,GAAG,EAAE,EAClE;KAAA;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA,OAT4B;;KAAI;OAAA;OAAA,OACJ;;KAAI;OAAA;OAAA,OACf;;KAAI;OAAA;OAAA,OAEM;;KAAI;OAAA;OAAA,OACR;;KAAI;OAAA;OAAA,OACL;;KAIrB,4CAAI,4BAAcpS,QAAQ,CAACiI,cAAc,CAACuN,WAAW,CAAC;KAEtD,IAAI,CAACtW,cAAI,CAACqO,SAAS,yCAAC,IAAI,0BAAY,EACpC;OACC,MAAM,IAAIkI,KAAK,CAAC,qBAAqB,CAAC;;KAGvC,4CAAI,yEAAerD,OAAM,CAACsD,MAAM,qBAAb,eAAejY,QAAQ,oCAAI,IAAI;KAClD,4CAAI,wEAAc2U,OAAM,CAACsD,MAAM,qBAAb,gBAAepa,SAAS,oCAAI,IAAI;KAElD,4CAAI,oDAAyB8W,OAAM;KAEnC,4CAAI,gBAAQuD,iBAAS,CAACC,SAAS,CAACC,cAAuB,EAAE;OACxDtX,UAAU,0CAAE,IAAI,kCAAgB6T,OAAM,CAACxY,IAAI,qBAAEwY,OAAM,CAACsD,MAAM,8BAAI,EAAE,CAAC;OACjEnU,QAAQ,EAAE;SACT9D,QAAQ,0CAAE,IAAI,2BAAY;SAC1BnC,SAAS,0CAAE,IAAI,yBAAW;SAC1B+W,MAAM,8CAAED,OAAM,CAACsD,MAAM,qBAAb,gBAAerD,MAAM,oCAAI,KAAK;SACtC9B,IAAI,8CAAE6B,OAAM,CAACsD,MAAM,qBAAb,gBAAeI,YAAY,oCAAI;QACrC;OACD1D,MAAM,EAAE;SACPxY,IAAI,EAAEwY,OAAM,CAACxY,IAAI;SACjB+O,MAAM,EAAEyJ,OAAM,CAACzJ;;MAEhB,CAAC;KAEF,4CAAI,wCAAoB,4CAAI,cAAMoN,KAAK,yCAAC,IAAI,0BAAY;;CAwE1D;CAAC,kCArEwB3D,MAA4B,EACpD;GACC,4CAAI,IAAI,6BACR;KACC;;GAGD,MAAM4D,cAAc,GAAGC,oBAAU,CAACC,QAAQ,CAAC,sBAAsB,CAAC;GAClE,MAAMC,OAAO,GAAGH,cAAc,oBAAdA,cAAc,CAAEI,iBAAiB,EAAE;GACnD,IAAID,OAAO,EACX;KACC,MAAME,aAAa,GAAGJ,oBAAU,CAACC,QAAQ,CAAC,qBAAqB,CAAC;KAChEC,OAAO,CAACd,SAAS,CAACgB,aAAa,CAACC,aAAa,EAAE,CAAC;OAAE1c;MAAM,KAAK;OAC5D,MAAM;SAAE2c;QAAc,GAAG3c,IAAI;OAE7B,4CAAI,oBAAU2c,YAAY;OAC1B,4CAAI,sCAAkBrB,QAAQ,yCAAC,IAAI,kBAAQ;MAC3C,CAAC;;GAGH,MAAM;KAAEtb;IAAM,GAAGwY,MAAM;GAEvB,IAAIlT,cAAI,CAACsX,QAAQ,CAAC5c,IAAI,oBAAJA,IAAI,CAAEU,KAAK,CAAC,EAC9B;KACC,4CAAI,oBAAUV,IAAI,CAACU,KAAK;;CAE1B;CAAC,yBAEc;GAAEkF,MAAM,EAAEuC;CAAQ,CAAC,EAAE;GAAE0U;CAAgB,CAAC,EACvD;GACC,IAAI,4CAAI,gCAAiB,IAAI,EAC7B;KACC,+CAAO,IAAI;;GAGZ,MAAMN,OAAO,GACZ,4CAAI,8BACD,EAAE,GACF,CACD,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,eAAe,EAC9C,GAAG,EACH,eAAe,EAAE,eAAe,EAChC,SAAS,CAEX;GAED,4CAAI,8BAAe,IAAIO,yBAAW,CAAC;KAClCC,QAAQ,EAAE,yCAAC,IAAI,2BAAY;KAC3BC,aAAa,EAAE,CAAC,cAAc,CAAC;KAC/BxW,SAAS,EAAE,GAAG;KACdE,SAAS,EAAE,GAAG;KACdyB,OAAO;KACP8U,WAAW,EAAEtc,aAAG,CAACC,UAAU,CAAC,yCAAyC,CAAC;KACtEsc,oBAAoB,EAAEvc,aAAG,CAACC,UAAU,CACnC0E,cAAI,CAAC6X,aAAa,CAACN,eAAe,CAAC,GAChC,sDAAsD,GACtD,IAAI,CACP;KACDN,OAAO;KACPa,eAAe,EAAE,EAAE;KACnBC,cAAc,EAAE,KAAK;KACrBC,OAAO,EAAE;OACRC,cAAc,EAAEjY,cAAI,CAAC6X,aAAa,CAACN,eAAe,CAAC,GAAGA,eAAe,GAAG,IAAI;OAC5EW,cAAc,EAAE;;IAEjB,CAAC;GAEF,+CAAO,IAAI;CACZ;;;;;;;;"}