{"version":3,"file":"task-full-card.bundle.js","sources":["../src/component/chat/chat.js","../src/component/footer-create/footer-create.js","../src/component/footer-edit/more/more.js","../src/component/footer-edit/footer-edit.js","../src/component/app.js","../src/task-full-card.js"],"sourcesContent":["import { EventEmitter } from 'main.core.events';\nimport { Messenger } from 'im.public';\nimport 'im.v2.application.integration.task';\n\nimport { Core } from 'tasks.v2.core';\nimport { Model } from 'tasks.v2.const';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport './chat.css';\n\n// @vue/component\nexport const Chat = {\n\tname: 'TaskFullCardChat',\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\ttask(): TaskModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/getById`](this.taskId);\n\t\t},\n\t},\n\twatch: {\n\t\ttaskId(): void\n\t\t{\n\t\t\tvoid this.openChat();\n\t\t},\n\t},\n\tmounted(): void\n\t{\n\t\tvoid this.openChat();\n\t},\n\tmethods: {\n\t\tasync openChat(): Promise<void>\n\t\t{\n\t\t\tthis.app?.bitrixVue.unmount();\n\t\t\tthis.app ??= await Messenger.initApplication('task');\n\n\t\t\tif (this.taskId > 0)\n\t\t\t{\n\t\t\t\tvoid this.app.mount({\n\t\t\t\t\trootContainer: this.$el,\n\t\t\t\t\tchatId: this.task.chatId,\n\t\t\t\t\ttaskId: this.taskId,\n\t\t\t\t\ttype: Core.getParams().chatType,\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tawait this.app.mountPlaceholder({\n\t\t\t\t\trootContainer: this.$el,\n\t\t\t\t\ttaskId: this.taskId,\n\t\t\t\t});\n\n\t\t\t\tEventEmitter.emit('tasks:card:onMembersCountChange', {\n\t\t\t\t\ttaskId: this.taskId,\n\t\t\t\t\tuserCounter: 1,\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-full-card-chat\"></div>\n\t`,\n};\n","import { Event } from 'main.core';\nimport { Button as UiButton, AirButtonStyle, ButtonSize } from 'ui.vue3.components.button';\n\nimport { EventName } from 'tasks.v2.const';\nimport { AddTaskButton } from 'tasks.v2.component.add-task-button';\nimport './footer-create.css';\n\n// @vue/component\nexport const FooterCreate = {\n\tcomponents: {\n\t\tUiButton,\n\t\tAddTaskButton,\n\t},\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['addTask'],\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tAirButtonStyle,\n\t\t\tButtonSize,\n\t\t};\n\t},\n\tmethods: {\n\t\tclose(): void\n\t\t{\n\t\t\tEvent.EventEmitter.emit(EventName.CloseFullCard);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-full-card-footer-create\">\n\t\t\t<AddTaskButton :taskId=\"taskId\" @addTask=\"$emit('addTask')\"/>\n\t\t\t<UiButton\n\t\t\t\t:text=\"loc('TASKS_V2_TASK_FULL_CARD_CANCEL')\"\n\t\t\t\t:size=\"ButtonSize.LARGE\"\n\t\t\t\t:style=\"AirButtonStyle.PLAIN\"\n\t\t\t\tdata-task-cancel-button\n\t\t\t\t@click=\"close\"\n\t\t\t/>\n\t\t\t<UiButton\n\t\t\t\tclass=\"tasks-full-card-footer-template-button\"\n\t\t\t\t:text=\"loc('TASKS_V2_TASK_FULL_CARD_TEMPLATES')\"\n\t\t\t\t:size=\"ButtonSize.SMALL\"\n\t\t\t\t:style=\"AirButtonStyle.PLAIN_NO_ACCENT\"\n\t\t\t\t:dropdown=\"true\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { Event, Runtime } from 'main.core';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport { BMenu, MenuItemDesign, type MenuOptions, type MenuItemOptions } from 'ui.vue3.components.menu';\nimport { BIcon } from 'ui.icon-set.api.vue';\nimport { Outline } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.outline';\n\nimport { EventName, Model, TaskStatus } from 'tasks.v2.const';\nimport { responsibleMeta } from 'tasks.v2.component.fields.responsible';\nimport { EntitySelectorDialog } from 'tasks.v2.lib.entity-selector-dialog';\nimport { taskService } from 'tasks.v2.provider.service.task-service';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport './more.css';\n\n// @vue/component\nexport const More = {\n\tname: 'TaskFullCardMore',\n\tcomponents: {\n\t\tBIcon,\n\t\tBMenu,\n\t},\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisMenuShown: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tcurrentUserId: `${Model.Interface}/currentUserId`,\n\t\t}),\n\t\ttask(): TaskModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/getById`](this.taskId);\n\t\t},\n\t\tpreselected(): [string, number][]\n\t\t{\n\t\t\treturn [['user', this.task.responsibleId || this.currentUserId]];\n\t\t},\n\t\tisCreator(): boolean\n\t\t{\n\t\t\treturn this.currentUserId === this.task.creatorId;\n\t\t},\n\t\tisResponsible(): boolean\n\t\t{\n\t\t\treturn this.currentUserId === this.task.responsibleId;\n\t\t},\n\t\tmenuOptions(): Function\n\t\t{\n\t\t\treturn (): MenuOptions => ({\n\t\t\t\tid: 'tasks-full-card-footer-more-menu',\n\t\t\t\tbindElement: this.$refs.button.$el,\n\t\t\t\titems: this.menuItems,\n\t\t\t});\n\t\t},\n\t\tmenuItems(): MenuItemOptions[]\n\t\t{\n\t\t\tconst statuses = {\n\t\t\t\t[TaskStatus.Pending]: {\n\t\t\t\t\t[this.isResponsible]: [\n\t\t\t\t\t\tthis.getCompleteItem(),\n\t\t\t\t\t\tthis.getDefferItem(),\n\t\t\t\t\t\tthis.getDelegateItem(),\n\t\t\t\t\t],\n\t\t\t\t\t[this.isCreator]: [\n\t\t\t\t\t\tthis.getDefferItem(),\n\t\t\t\t\t\tthis.getDelegateItem(),\n\t\t\t\t\t\tthis.getDeleteItem(),\n\t\t\t\t\t],\n\t\t\t\t\t[this.isResponsible && this.isCreator]: [\n\t\t\t\t\t\tthis.getCompleteItem(),\n\t\t\t\t\t\tthis.getDefferItem(),\n\t\t\t\t\t\tthis.getDelegateItem(),\n\t\t\t\t\t\tthis.getDeleteItem(),\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t[TaskStatus.InProgress]: {\n\t\t\t\t\t[this.isResponsible]: [\n\t\t\t\t\t\tthis.getPauseItem(),\n\t\t\t\t\t\tthis.getDefferItem(),\n\t\t\t\t\t\tthis.getDelegateItem(),\n\t\t\t\t\t],\n\t\t\t\t\t[this.isCreator]: [\n\t\t\t\t\t\tthis.getDefferItem(),\n\t\t\t\t\t\tthis.getDelegateItem(),\n\t\t\t\t\t\tthis.getDeleteItem(),\n\t\t\t\t\t],\n\t\t\t\t\t[this.isResponsible && this.isCreator]: [\n\t\t\t\t\t\tthis.getPauseItem(),\n\t\t\t\t\t\tthis.getDefferItem(),\n\t\t\t\t\t\tthis.getDelegateItem(),\n\t\t\t\t\t\tthis.getDeleteItem(),\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t[TaskStatus.Deferred]: {\n\t\t\t\t\t[this.isResponsible]: [\n\t\t\t\t\t\tthis.getCompleteItem(),\n\t\t\t\t\t\tthis.getDelegateItem(),\n\t\t\t\t\t],\n\t\t\t\t\t[this.isCreator]: [\n\t\t\t\t\t\tthis.getCompleteItem(),\n\t\t\t\t\t\tthis.getDelegateItem(),\n\t\t\t\t\t\tthis.getDeleteItem(),\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t[TaskStatus.SupposedlyCompleted]: {\n\t\t\t\t\t[this.isResponsible]: [\n\t\t\t\t\t\tthis.getFixItem(),\n\t\t\t\t\t\tthis.getDelegateItem(),\n\t\t\t\t\t],\n\t\t\t\t\t[this.isCreator]: [\n\t\t\t\t\t\tthis.getDisapproveItem(),\n\t\t\t\t\t\tthis.getDelegateItem(),\n\t\t\t\t\t\tthis.getDeleteItem(),\n\t\t\t\t\t],\n\t\t\t\t\t[this.isResponsible && this.isCreator]: [\n\t\t\t\t\t\tthis.getCompleteItem(),\n\t\t\t\t\t\tthis.getDelegateItem(),\n\t\t\t\t\t\tthis.getDeleteItem(),\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t[TaskStatus.Completed]: {\n\t\t\t\t\t[this.isCreator]: [\n\t\t\t\t\t\tthis.getRenewItem(),\n\t\t\t\t\t\tthis.getDeleteItem(),\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn statuses[this.task.status].true;\n\t\t},\n\t},\n\tmethods: {\n\t\thandleClick(): void\n\t\t{\n\t\t\tthis.isMenuShown = true;\n\t\t},\n\t\tgetDefferItem(): MenuItemOptions\n\t\t{\n\t\t\tif (!this.task.rights.defer)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\ttitle: this.loc('TASKS_V2_TASK_FULL_CARD_DEFER'),\n\t\t\t\ticon: Outline.PAUSE_L,\n\t\t\t\tonClick: (): void => taskService.defer(this.taskId),\n\t\t\t};\n\t\t},\n\t\tgetPauseItem(): MenuItemOptions\n\t\t{\n\t\t\tif (!this.task.rights.pause)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\ttitle: this.loc('TASKS_V2_TASK_FULL_CARD_PAUSE'),\n\t\t\t\ticon: Outline.STOP_L,\n\t\t\t\tonClick: (): void => taskService.pause(this.taskId),\n\t\t\t};\n\t\t},\n\t\tgetRenewItem(): MenuItemOptions\n\t\t{\n\t\t\tif (!this.task.rights.renew)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\ttitle: this.loc('TASKS_V2_TASK_FULL_CARD_RENEW'),\n\t\t\t\ticon: Outline.UNDO,\n\t\t\t\tonClick: (): void => taskService.renew(this.taskId),\n\t\t\t};\n\t\t},\n\t\tgetFixItem(): MenuItemOptions\n\t\t{\n\t\t\tif (!this.task.rights.renew)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\ttitle: this.loc('TASKS_V2_TASK_FULL_CARD_FIX'),\n\t\t\t\ticon: Outline.UNDO,\n\t\t\t\tonClick: (): void => taskService.renew(this.taskId),\n\t\t\t};\n\t\t},\n\t\tgetDisapproveItem(): MenuItemOptions\n\t\t{\n\t\t\tif (!this.task.rights.disapprove)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\ttitle: this.loc('TASKS_V2_TASK_FULL_CARD_DISAPPROVE'),\n\t\t\t\ticon: Outline.UNDO,\n\t\t\t\tonClick: (): void => taskService.disapprove(this.taskId),\n\t\t\t};\n\t\t},\n\t\tgetCompleteItem(): MenuItemOptions\n\t\t{\n\t\t\tif (!this.task.rights.complete)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\ttitle: this.loc('TASKS_V2_TASK_FULL_CARD_COMPLETE'),\n\t\t\t\ticon: Outline.SENDED,\n\t\t\t\tonClick: (): void => taskService.complete(this.taskId),\n\t\t\t};\n\t\t},\n\t\tgetDelegateItem(): MenuItemOptions\n\t\t{\n\t\t\tif (!this.task.rights.delegate)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\ttitle: this.loc('TASKS_V2_TASK_FULL_CARD_DELEGATE'),\n\t\t\t\ticon: Outline.DELEGATE,\n\t\t\t\tonClick: (): void => {\n\t\t\t\t\tconst onItemChangeDebounced = Runtime.debounce(this.handleDelegateSelect, 10, this);\n\n\t\t\t\t\tthis.dialog ??= new EntitySelectorDialog({\n\t\t\t\t\t\t...responsibleMeta.dialogOptions(this.$options.name),\n\t\t\t\t\t\tpreselectedItems: this.preselected,\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t'Item:onSelect': onItemChangeDebounced,\n\t\t\t\t\t\t\t'Item:onDeselect': onItemChangeDebounced,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\tthis.dialog.selectItemsByIds(this.preselected);\n\t\t\t\t\tthis.dialog.showTo(this.$refs.button.$el);\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\thandleDelegateSelect(): void\n\t\t{\n\t\t\tconst responsibleId = this.dialog.getSelectedItems()[0]?.getId() ?? 0;\n\n\t\t\tvoid taskService.update(\n\t\t\t\tthis.taskId,\n\t\t\t\t{ responsibleId },\n\t\t\t);\n\t\t},\n\t\tgetDeleteItem(): MenuItemOptions\n\t\t{\n\t\t\tif (!this.task.rights.remove)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdesign: MenuItemDesign.Alert,\n\t\t\t\ttitle: this.loc('TASKS_V2_TASK_FULL_CARD_DELETE'),\n\t\t\t\ticon: Outline.TRASHCAN,\n\t\t\t\tonClick: (): void => {\n\t\t\t\t\tvoid taskService.delete(this.taskId);\n\t\t\t\t\tEvent.EventEmitter.emit(EventName.CloseFullCard);\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BIcon\n\t\t\tv-if=\"menuItems\"\n\t\t\tclass=\"tasks-full-card-footer-more\"\n\t\t\t:name=\"Outline.MORE_L\"\n\t\t\tdata-task-more-button\n\t\t\tref=\"button\"\n\t\t\t@click=\"handleClick\"\n\t\t/>\n\t\t<BMenu v-if=\"isMenuShown\" :options=\"menuOptions()\" @close=\"isMenuShown = false\"/>\n\t`,\n};\n","import { mapGetters } from 'ui.vue3.vuex';\nimport { Button as UiButton, AirButtonStyle, ButtonSize, ButtonIcon } from 'ui.vue3.components.button';\nimport { BIcon } from 'ui.icon-set.api.vue';\nimport { Outline } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.outline';\n\nimport { Model, TaskStatus } from 'tasks.v2.const';\nimport { taskService } from 'tasks.v2.provider.service.task-service';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport { More } from './more/more';\nimport './footer-edit.css';\n\ntype ButtonOptions = {\n\ttext: string,\n\tcolor: string,\n\tdisabled: boolean,\n\tonClick: Function,\n};\n\n// @vue/component\nexport const FooterEdit = {\n\tcomponents: {\n\t\tUiButton,\n\t\tBIcon,\n\t\tMore,\n\t},\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tAirButtonStyle,\n\t\t\tButtonSize,\n\t\t\tButtonIcon,\n\t\t\tOutline,\n\t\t\tTaskStatus,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tcurrentUserId: `${Model.Interface}/currentUserId`,\n\t\t}),\n\t\ttask(): TaskModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/getById`](this.taskId);\n\t\t},\n\t\tisCreator(): boolean\n\t\t{\n\t\t\treturn this.currentUserId === this.task.creatorId;\n\t\t},\n\t\tisResponsible(): boolean\n\t\t{\n\t\t\treturn this.currentUserId === this.task.responsibleId;\n\t\t},\n\t\tstatusButton(): ButtonOptions | null\n\t\t{\n\t\t\tconst statuses = {\n\t\t\t\t[TaskStatus.Pending]: {\n\t\t\t\t\t[this.isCreator]: this.getCompleteButton(),\n\t\t\t\t\t[this.isResponsible]: this.getStartButton(),\n\t\t\t\t},\n\t\t\t\t[TaskStatus.InProgress]: {\n\t\t\t\t\t[this.isResponsible]: this.getCompleteButton(),\n\t\t\t\t\t[this.isCreator]: this.getCompleteButton(),\n\t\t\t\t},\n\t\t\t\t[TaskStatus.Deferred]: {\n\t\t\t\t\t[this.isResponsible]: this.getRenewButton(),\n\t\t\t\t\t[this.isCreator]: this.getRenewButton(),\n\t\t\t\t},\n\t\t\t\t[TaskStatus.SupposedlyCompleted]: {\n\t\t\t\t\t[this.isResponsible]: this.getReviewButton(),\n\t\t\t\t\t[this.isCreator]: this.getApproveButton(),\n\t\t\t\t},\n\t\t\t\t[TaskStatus.Completed]: {\n\t\t\t\t\t[this.isResponsible && !this.isCreator]: this.getRenewButton(AirButtonStyle.PLAIN),\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn statuses[this.task.status].true;\n\t\t},\n\t},\n\tmethods: {\n\t\tgetStartButton(): ButtonOptions\n\t\t{\n\t\t\tif (!this.task.rights.start)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\ttext: this.loc('TASKS_V2_TASK_FULL_CARD_START'),\n\t\t\t\tonClick: (): void => taskService.start(this.taskId),\n\t\t\t};\n\t\t},\n\t\tgetCompleteButton(): ButtonOptions\n\t\t{\n\t\t\tif (!this.task.rights.complete)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\ttext: this.loc('TASKS_V2_TASK_FULL_CARD_COMPLETE'),\n\t\t\t\tonClick: (): void => taskService.complete(this.taskId),\n\t\t\t};\n\t\t},\n\t\tgetRenewButton(style: string): ButtonOptions\n\t\t{\n\t\t\tif (!this.task.rights.renew)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\ttext: this.loc('TASKS_V2_TASK_FULL_CARD_RENEW'),\n\t\t\t\tstyle,\n\t\t\t\tonClick: (): void => taskService.renew(this.taskId),\n\t\t\t};\n\t\t},\n\t\tgetReviewButton(): ButtonOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: this.loc('TASKS_V2_TASK_FULL_CARD_ON_REVIEW'),\n\t\t\t\tdisabled: true,\n\t\t\t};\n\t\t},\n\t\tgetApproveButton(): ButtonOptions\n\t\t{\n\t\t\tif (!this.task.rights.approve)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\ttext: this.loc('TASKS_V2_TASK_FULL_CARD_APPROVE'),\n\t\t\t\tonClick: (): void => taskService.complete(this.taskId),\n\t\t\t};\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-full-card-footer-edit\">\n\t\t\t<UiButton\n\t\t\t\tv-if=\"statusButton\"\n\t\t\t\t:text=\"statusButton.text\"\n\t\t\t\t:size=\"ButtonSize.LARGE\"\n\t\t\t\t:style=\"statusButton.style ?? AirButtonStyle.FILLED\"\n\t\t\t\t:disabled=\"statusButton.disabled ?? false\"\n\t\t\t\tdata-task-status-button\n\t\t\t\t@click=\"statusButton.onClick\"\n\t\t\t/>\n\t\t\t<More :taskId=\"taskId\"/>\n\t\t\t<div class=\"tasks-full-card-footer-actions\">\n\t\t\t\t<div class=\"tasks-full-card-footer-reaction\">\n\t\t\t\t\t<BIcon :name=\"Outline.LIKE\"/>\n\t\t\t\t\t<div class=\"tasks-full-card-footer-reaction-text\">Нравится</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-full-card-footer-views\">\n\t\t\t\t\t<BIcon :name=\"Outline.OBSERVER\"/>\n\t\t\t\t\t<div class=\"tasks-full-card-footer-views-text\">1</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Dom, Event, Text, Type } from 'main.core';\n\nimport { mapActions, mapGetters } from 'ui.vue3.vuex';\nimport { Outline } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.outline';\n\nimport { CardType, EventName, Model } from 'tasks.v2.const';\nimport { Chip } from 'tasks.v2.component.elements.chip';\nimport { FieldList } from 'tasks.v2.component.elements.field-list';\nimport { Title as FieldTitle } from 'tasks.v2.component.fields.title';\nimport { Importance } from 'tasks.v2.component.fields.importance';\nimport { DescriptionField, DescriptionSheet } from 'tasks.v2.component.fields.description';\nimport { Creator, creatorMeta } from 'tasks.v2.component.fields.creator';\nimport { Responsible, responsibleMeta } from 'tasks.v2.component.fields.responsible';\nimport { Deadline, deadlineMeta } from 'tasks.v2.component.fields.deadline';\nimport { Status, statusMeta } from 'tasks.v2.component.fields.status';\nimport { Files, FilesSheet, FilesChip, filesMeta } from 'tasks.v2.component.fields.files';\nimport { CheckList, CheckListChip, CheckListSheet, checkListMeta } from 'tasks.v2.component.fields.check-list';\nimport { Group, GroupChip, groupMeta } from 'tasks.v2.component.fields.group';\nimport { Flow, FlowChip, flowMeta } from 'tasks.v2.component.fields.flow';\nimport { Accomplices, AccomplicesChip, accomplicesMeta } from 'tasks.v2.component.fields.accomplices';\nimport { Auditors, AuditorsChip, auditorsMeta } from 'tasks.v2.component.fields.auditors';\nimport { fileService } from 'tasks.v2.provider.service.file-service';\nimport { taskService } from 'tasks.v2.provider.service.task-service';\nimport { checkListService } from 'tasks.v2.provider.service.check-list-service';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\nimport type { CheckListModel } from 'tasks.v2.model.check-list';\n\nimport { Chat } from './chat/chat';\nimport { FooterCreate } from './footer-create/footer-create';\nimport { FooterEdit } from './footer-edit/footer-edit';\nimport './app.css';\n\n// @vue/component\nexport const App = {\n\tname: 'TaskFullCard',\n\tcomponents: {\n\t\tFieldTitle,\n\t\tImportance,\n\t\tDescriptionField,\n\t\tDescriptionSheet,\n\t\tFiles,\n\t\tFilesSheet,\n\t\tCheckList,\n\t\tCheckListSheet,\n\t\tFieldList,\n\t\tChip,\n\t\tChat,\n\t\tFooterCreate,\n\t\tFooterEdit,\n\t},\n\tprovide(): Object\n\t{\n\t\treturn {\n\t\t\tanalytics: this.analytics,\n\t\t\tcardType: CardType.Full,\n\t\t};\n\t},\n\tprops: {\n\t\tid: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: () => Text.getRandom(),\n\t\t},\n\t\tanalytics: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => ({}),\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t\tresizeObserver: null,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\ttaskId: this.id,\n\t\t\tisBottomSheetShown: false,\n\t\t\tisFilesSheetShown: false,\n\t\t\tisCheckListSheetShown: false,\n\t\t\tchipsEventHandlers: {\n\t\t\t\tshowCheckList: this.openCheckList,\n\t\t\t},\n\t\t\tcheckListId: 0,\n\t\t\tfiles: fileService.get(this.id).getFiles(),\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tcurrentUserId: `${Model.Interface}/currentUserId`,\n\t\t}),\n\t\twasAccomplicesFilled(): boolean\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/wasFieldFilled`](this.taskId, accomplicesMeta.id);\n\t\t},\n\t\twasAuditorsFilled(): boolean\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/wasFieldFilled`](this.taskId, auditorsMeta.id);\n\t\t},\n\t\twasFlowFilled(): boolean\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/wasFieldFilled`](this.taskId, flowMeta.id);\n\t\t},\n\t\twasGroupFilled(): boolean\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/wasFieldFilled`](this.taskId, groupMeta.id);\n\t\t},\n\t\twasFilesFilled(): boolean\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/wasFieldFilled`](this.taskId, filesMeta.id);\n\t\t},\n\t\ttask(): TaskModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/getById`](this.taskId);\n\t\t},\n\t\tcheckLists(): CheckListModel[]\n\t\t{\n\t\t\treturn this.task?.checklist\n\t\t\t\t? this.$store.getters[`${Model.CheckList}/getByIds`](this.task.checklist)\n\t\t\t\t: [];\n\t\t},\n\t\tisEdit(): boolean\n\t\t{\n\t\t\treturn Type.isNumber(this.taskId) && this.taskId > 0;\n\t\t},\n\t\tfields(): Object[]\n\t\t{\n\t\t\tconst fields = [\n\t\t\t\t{\n\t\t\t\t\ttitle: creatorMeta.title,\n\t\t\t\t\tcomponent: Creator,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\ttaskId: this.taskId,\n\t\t\t\t\t\tcontext: this.$options.name,\n\t\t\t\t\t\tselectorWithActionMenu: this.isEdit,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: responsibleMeta.title,\n\t\t\t\t\tcomponent: Responsible,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\ttaskId: this.taskId,\n\t\t\t\t\t\tcontext: this.$options.name,\n\t\t\t\t\t\tselectorWithActionMenu: this.isEdit,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: deadlineMeta.title,\n\t\t\t\t\tcomponent: Deadline,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: statusMeta.title,\n\t\t\t\t\tcomponent: Status,\n\t\t\t\t\twithSeparator: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: filesMeta.title,\n\t\t\t\t\tcomponent: Files,\n\t\t\t\t\tchip: FilesChip,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: checkListMeta.title,\n\t\t\t\t\tcomponent: CheckList,\n\t\t\t\t\tchip: CheckListChip,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: groupMeta.getTitle(this.task.groupId),\n\t\t\t\t\tcomponent: Group,\n\t\t\t\t\tchip: GroupChip,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: accomplicesMeta.title,\n\t\t\t\t\tcomponent: Accomplices,\n\t\t\t\t\tchip: AccomplicesChip,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: auditorsMeta.title,\n\t\t\t\t\tcomponent: Auditors,\n\t\t\t\t\tchip: AuditorsChip,\n\t\t\t\t\twithSeparator: this.wasAccomplicesFilled,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: flowMeta.title,\n\t\t\t\t\tcomponent: Flow,\n\t\t\t\t\tchip: FlowChip,\n\t\t\t\t\twithSeparator: true,\n\t\t\t\t},\n\t\t\t];\n\n\t\t\t/* eslint-disable no-param-reassign */\n\t\t\tfields.forEach((field) => {\n\t\t\t\tfield.props ??= {};\n\t\t\t\tfield.props.taskId = this.taskId;\n\t\t\t});\n\n\t\t\treturn fields;\n\t\t},\n\t\tprimaryFields(): Object[]\n\t\t{\n\t\t\tconst primaryFields = new Set([Creator, Responsible, Deadline, Status]);\n\n\t\t\treturn this.fields.filter(({ component }) => primaryFields.has(component));\n\t\t},\n\t\tprojectFields(): Object[]\n\t\t{\n\t\t\tconst projectFields = new Set();\n\t\t\tif (this.wasGroupFilled)\n\t\t\t{\n\t\t\t\tprojectFields.add(Group);\n\t\t\t}\n\n\t\t\tif (this.wasFlowFilled)\n\t\t\t{\n\t\t\t\tprojectFields.add(Flow);\n\t\t\t}\n\n\t\t\treturn this.fields.filter(({ component }) => projectFields.has(component));\n\t\t},\n\t\tparticipantsFields(): Object[]\n\t\t{\n\t\t\tconst participantsFields = new Set();\n\n\t\t\tif (this.wasAccomplicesFilled)\n\t\t\t{\n\t\t\t\tparticipantsFields.add(Accomplices);\n\t\t\t}\n\n\t\t\tif (this.wasAuditorsFilled)\n\t\t\t{\n\t\t\t\tparticipantsFields.add(Auditors);\n\t\t\t}\n\n\t\t\treturn this.fields.filter(({ component }) => participantsFields.has(component));\n\t\t},\n\t\tchips(): any[]\n\t\t{\n\t\t\treturn this.fields.filter(({ chip }) => chip).map(({ chip }) => chip);\n\t\t},\n\t},\n\twatch: {\n\t\tasync task(): Promise<void>\n\t\t{\n\t\t\tif (this.task)\n\t\t\t{\n\t\t\t\tawait this.$nextTick();\n\t\t\t\tthis.tryStartObserver();\n\t\t\t}\n\t\t},\n\t},\n\tasync created(): Promise<void>\n\t{\n\t\tif (!this.isEdit && !this.task)\n\t\t{\n\t\t\tvoid this.$store.dispatch(`${Model.Tasks}/insert`, {\n\t\t\t\tid: this.taskId,\n\t\t\t\tcreatorId: this.currentUserId,\n\t\t\t});\n\t\t}\n\n\t\tawait this.$store.dispatch(`${Model.Tasks}/clearFieldsFilled`, this.taskId);\n\n\t\tif (this.isEdit && !this.task)\n\t\t{\n\t\t\tawait taskService.getById(this.taskId);\n\t\t}\n\t},\n\tmounted(): void\n\t{\n\t\tthis.tryStartObserver();\n\t},\n\tbeforeUnmount(): void\n\t{\n\t\tif (this.resizeObserver)\n\t\t{\n\t\t\tthis.resizeObserver.disconnect();\n\t\t}\n\t},\n\tunmounted(): void\n\t{\n\t\tif (!this.isEdit)\n\t\t{\n\t\t\tvoid this.$store.dispatch(`${Model.Tasks}/delete`, this.taskId);\n\t\t\tfileService.delete(this.taskId);\n\t\t}\n\t},\n\tmethods: {\n\t\t...mapActions(Model.Interface, [\n\t\t\t'updateTitleFieldOffsetHeight',\n\t\t]),\n\t\ttryStartObserver(): void\n\t\t{\n\t\t\tif (this.$refs.title && !this.resizeObserver)\n\t\t\t{\n\t\t\t\tthis.resizeObserver = this.getObserver();\n\t\t\t\tthis.resizeObserver.observe(this.$refs.title);\n\t\t\t}\n\t\t},\n\t\tgetObserver(): ResizeObserver\n\t\t{\n\t\t\treturn new ResizeObserver((entries) => {\n\t\t\t\tfor (const entry of entries)\n\t\t\t\t{\n\t\t\t\t\tif (entry.target === this.$refs.title)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.updateTitleFieldOffsetHeight(entry.contentRect.height);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tasync addTask(): Promise<void>\n\t\t{\n\t\t\tconst checkLists = this.checkLists;\n\n\t\t\tconst [id] = await taskService.add(this.task);\n\n\t\t\tthis.taskId = id;\n\n\t\t\tif (checkLists.length > 0)\n\t\t\t{\n\t\t\t\tawait checkListService.save(this.taskId, checkLists);\n\t\t\t}\n\n\t\t\tfileService.replace(this.id, this.taskId);\n\t\t},\n\t\topenEditor(): void\n\t\t{\n\t\t\tthis.handleShowBottomSheet();\n\t\t},\n\t\tcloseEditor(slot: { close: () => void }): void\n\t\t{\n\t\t\tslot.close();\n\t\t\tthis.handleCloseBottomSheet();\n\t\t},\n\t\topenFiles(): void\n\t\t{\n\t\t\tthis.isFilesSheetShown = true;\n\t\t\tthis.handleShowBottomSheet();\n\t\t},\n\t\tcloseFiles(): void\n\t\t{\n\t\t\tthis.isFilesSheetShown = false;\n\t\t\tthis.handleCloseBottomSheet();\n\t\t\tthis.handleCloseBottomSheet();\n\t\t},\n\t\topenCheckList(checkListId?: number): void\n\t\t{\n\t\t\tthis.checkListId = checkListId;\n\t\t\tthis.isCheckListSheetShown = true;\n\t\t\tthis.handleShowBottomSheet();\n\t\t},\n\t\tcloseCheckList(): void\n\t\t{\n\t\t\tthis.isCheckListSheetShown = false;\n\t\t\tthis.handleCloseBottomSheet();\n\t\t},\n\t\thandleShowBottomSheet(): void\n\t\t{\n\t\t\tthis.isBottomSheetShown = true;\n\t\t\tDom.addClass(this.$refs.scrollContent, '--disable-scroll');\n\t\t\tthis.$refs.scrollContent.scrollTo({\n\t\t\t\ttop: 0,\n\t\t\t\tbehavior: 'smooth',\n\t\t\t});\n\t\t},\n\t\thandleCloseBottomSheet(): void\n\t\t{\n\t\t\tthis.isBottomSheetShown = false;\n\t\t\tDom.removeClass(this.$refs.scrollContent, '--disable-scroll');\n\t\t},\n\t\tclose(): void\n\t\t{\n\t\t\tEvent.EventEmitter.emit(EventName.CloseFullCard);\n\t\t},\n\t\tgetEventListeners(chip, handlers): Object\n\t\t{\n\t\t\tconst listeners = {};\n\n\t\t\tif (chip.emits)\n\t\t\t{\n\t\t\t\tObject.keys(handlers).forEach((event: string) => {\n\t\t\t\t\tif (chip.emits.includes(event))\n\t\t\t\t\t{\n\t\t\t\t\t\tlisteners[event] = handlers[event];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn listeners;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-full-card\" :data-task-id=\"taskId\" data-task-full>\n\t\t\t<template v-if=\"task\">\n\t\t\t\t<div class=\"tasks-full-card-main\" :class=\"{ '--overlay': isBottomSheetShown }\">\n\t\t\t\t\t<div class=\"tasks-full-card-content\" ref=\"scrollContent\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"tasks-full-card-title\"\n\t\t\t\t\t\t\t:class=\"{'--no-padding-bottom': task.description.length > 0}\"\n\t\t\t\t\t\t\tref=\"title\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<FieldTitle :taskId=\"taskId\"/>\n\t\t\t\t\t\t\t<Importance :taskId=\"taskId\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<FilesSheet\n\t\t\t\t\t\t\t:taskId=\"taskId\"\n\t\t\t\t\t\t\t:isShown=\"isFilesSheetShown\"\n\t\t\t\t\t\t\t@close=\"closeFiles\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<CheckListSheet\n\t\t\t\t\t\t\t:taskId=\"taskId\"\n\t\t\t\t\t\t\t:checkListId=\"checkListId\"\n\t\t\t\t\t\t\t:isShown=\"isCheckListSheetShown\"\n\t\t\t\t\t\t\t@close=\"closeCheckList\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<DescriptionField\n\t\t\t\t\t\t\t:taskId=\"taskId\"\n\t\t\t\t\t\t\tv-slot=\"slot\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<DescriptionSheet\n\t\t\t\t\t\t\t\t:taskId=\"taskId\"\n\t\t\t\t\t\t\t\t:isShown=\"slot.isShown\"\n\t\t\t\t\t\t\t\t:doOpenInEditMode=\"slot.doOpenInEditMode\"\n\t\t\t\t\t\t\t\t@show=\"openEditor\"\n\t\t\t\t\t\t\t\t@close=\"closeEditor(slot)\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</DescriptionField>\n\t\t\t\t\t\t<div class=\"tasks-full-card-fields\">\n\t\t\t\t\t\t\t<div class=\"tasks-full-card-field-container\" data-field-container>\n\t\t\t\t\t\t\t\t<FieldList :fields=\"primaryFields\"/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"tasks-full-card-chips-fields\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tv-if=\"files.length > 0 || wasFilesFilled\"\n\t\t\t\t\t\t\t\t\tclass=\"tasks-full-card-field-container\"\n\t\t\t\t\t\t\t\t\tdata-field-container\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Files :taskId=\"taskId\" @open=\"openFiles\"/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tv-if=\"task.checklist.length > 0\"\n\t\t\t\t\t\t\t\t\tclass=\"tasks-full-card-field-container --custom\"\n\t\t\t\t\t\t\t\t\tdata-field-container\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<CheckList :taskId=\"taskId\" @open=\"openCheckList\"/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tv-if=\"projectFields.length > 0\"\n\t\t\t\t\t\t\t\t\tclass=\"tasks-full-card-field-container\"\n\t\t\t\t\t\t\t\t\tdata-field-container\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FieldList :fields=\"projectFields\"/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tv-if=\"participantsFields.length > 0\"\n\t\t\t\t\t\t\t\t\tclass=\"tasks-full-card-field-container\"\n\t\t\t\t\t\t\t\t\tdata-field-container\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<FieldList\n\t\t\t\t\t\t\t\t\t\t:fields=\"participantsFields\"\n\t\t\t\t\t\t\t\t\t\t:useSeparator=\"participantsFields.length > 1\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"tasks-full-card-chips\">\n\t\t\t\t\t\t\t\t\t<template v-for=\"(chip, index) of chips\" :key=\"index\">\n\t\t\t\t\t\t\t\t\t\t<component\n\t\t\t\t\t\t\t\t\t\t\t:is=\"chip\"\n\t\t\t\t\t\t\t\t\t\t\tv-bind=\"{ taskId }\"\n\t\t\t\t\t\t\t\t\t\t\tv-on=\"getEventListeners(chip, chipsEventHandlers)\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<Chip :icon=\"Outline.APPS\" :text=\"'Ещё'\" :soon=\"true\"/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"tasks-full-card-footer\">\n\t\t\t\t\t\t<FooterEdit v-if=\"isEdit\" :taskId=\"taskId\"/>\n\t\t\t\t\t\t<FooterCreate v-else :taskId=\"taskId\" @addTask=\"addTask\"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<Chat :taskId=\"taskId\"/>\n\t\t\t</template>\n\t\t\t<template v-else>\n\t\t\t\tLoading...\n\t\t\t</template>\n\t\t</div>\n\t`,\n};\n","import { Event, Tag } from 'main.core';\nimport type { Popup } from 'main.popup';\n\nimport { BitrixVue, type VueCreateAppResult } from 'ui.vue3';\nimport { locMixin } from 'ui.vue3.mixins.loc-mixin';\n\nimport { Core } from 'tasks.v2.core';\nimport { EventName } from 'tasks.v2.const';\nimport { SidePanelInstance } from 'tasks.v2.lib.side-panel-instance';\nimport type { Params } from 'tasks.v2.application.task-card';\n\nimport { App } from './component/app';\n\nexport class TaskFullCard\n{\n\t#application: ?VueCreateAppResult = null;\n\n\t#params: Params;\n\t#container: HTMLElement;\n\n\tconstructor(params: Params = {})\n\t{\n\t\tthis.#params = params;\n\t}\n\n\tasync showCard(): Promise<void>\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.#showSidePanel(resolve)\n\t\t\t\t.then(() => {\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\treject(error);\n\t\t\t\t});\n\t\t});\n\t}\n\n\tasync mountCard(): Promise<HTMLElement>\n\t{\n\t\tthis.#subscribe();\n\n\t\tthis.#container = this.#renderContainer();\n\n\t\tawait this.#mountApplication(this.#container);\n\n\t\treturn this.#container;\n\t}\n\n\tunmountCard(): void\n\t{\n\t\tthis.#unmountApplication();\n\n\t\tthis.#unsubscribe();\n\t}\n\n\tasync #showSidePanel(): Promise<void>\n\t{\n\t\tconst sidePanelId = `tasks-task-full-card-${this.#params.taskId ?? 0}`;\n\t\tconst maxWidth = 1510;\n\n\t\tconst card = await this.mountCard();\n\n\t\treturn new Promise((resolve) => {\n\t\t\tSidePanelInstance.open(sidePanelId, {\n\t\t\t\tcustomLeftBoundary: 0,\n\t\t\t\twidth: maxWidth,\n\t\t\t\tcacheable: false,\n\t\t\t\tcontentClassName: 'tasks-full-card-slider-content',\n\t\t\t\tcustomRightBoundary: 0,\n\t\t\t\tevents: {\n\t\t\t\t\tonOpen: resolve,\n\t\t\t\t\tonClose: this.#onSidePanelClose,\n\t\t\t\t},\n\t\t\t\tcontentCallback: () => card,\n\t\t\t});\n\t\t});\n\t}\n\n\t#onSidePanelClose = (): void => {\n\t\tthis.unmountCard();\n\t};\n\n\t#renderContainer(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-full-card-container\"></div>\n\t\t`;\n\t}\n\n\tasync #mountApplication(container: HTMLElement): Promise<void>\n\t{\n\t\tawait Core.init();\n\n\t\tconst application = BitrixVue.createApp(App, {\n\t\t\t...this.#params,\n\t\t\tid: this.#params.taskId,\n\t\t});\n\n\t\tapplication.mixin(locMixin);\n\t\tapplication.use(Core.getStore());\n\t\tapplication.mount(container);\n\n\t\tthis.#application = application;\n\t}\n\n\t#unmountApplication(): void\n\t{\n\t\tthis.#application.unmount();\n\t}\n\n\t#subscribe(): void\n\t{\n\t\tEvent.EventEmitter.subscribe(EventName.CloseFullCard, this.#onClose);\n\t\tEvent.EventEmitter.subscribe('BX.Main.Popup:onShow', this.#handlePopupShow);\n\t}\n\n\t#unsubscribe(): void\n\t{\n\t\tEvent.EventEmitter.unsubscribe(EventName.CloseFullCard, this.#onClose);\n\t\tEvent.EventEmitter.unsubscribe('BX.Main.Popup:onShow', this.#handlePopupShow);\n\t}\n\n\t#onClose = (): void => {\n\t\tSidePanelInstance.close();\n\t};\n\n\t#handlePopupShow = (event): void => {\n\t\tconst popup: Popup = event.getCompatData()[0];\n\n\t\tconst onScroll = () => popup.adjustPosition();\n\t\tconst onClose = () => {\n\t\t\tpopup.unsubscribe('onClose', onClose);\n\t\t\tpopup.unsubscribe('onDestroy', onClose);\n\t\t\tEvent.unbind(document, 'scroll', onScroll, true);\n\t\t};\n\n\t\tpopup.subscribe('onClose', onClose);\n\t\tpopup.subscribe('onDestroy', onClose);\n\t\tEvent.bind(document, 'scroll', onScroll, true);\n\t};\n}\n"],"names":["Chat","name","props","taskId","type","Number","String","required","computed","task","$store","getters","Model","Tasks","watch","openChat","mounted","methods","app","bitrixVue","unmount","Messenger","initApplication","mount","rootContainer","$el","chatId","Core","getParams","chatType","mountPlaceholder","EventEmitter","emit","userCounter","template","FooterCreate","components","UiButton","AddTaskButton","emits","setup","AirButtonStyle","ButtonSize","close","Event","EventName","CloseFullCard","More","BIcon","BMenu","Outline","data","isMenuShown","mapGetters","currentUserId","Interface","preselected","responsibleId","isCreator","creatorId","isResponsible","menuOptions","id","bindElement","$refs","button","items","menuItems","statuses","TaskStatus","Pending","getCompleteItem","getDefferItem","getDelegateItem","getDeleteItem","InProgress","getPauseItem","Deferred","SupposedlyCompleted","getFixItem","getDisapproveItem","Completed","getRenewItem","status","true","handleClick","rights","defer","title","loc","icon","PAUSE_L","onClick","taskService","pause","STOP_L","renew","UNDO","disapprove","complete","SENDED","delegate","DELEGATE","onItemChangeDebounced","Runtime","debounce","handleDelegateSelect","dialog","EntitySelectorDialog","responsibleMeta","dialogOptions","$options","preselectedItems","events","selectItemsByIds","showTo","getSelectedItems","getId","update","remove","design","MenuItemDesign","Alert","TRASHCAN","delete","FooterEdit","ButtonIcon","statusButton","getCompleteButton","getStartButton","getRenewButton","getReviewButton","getApproveButton","PLAIN","start","text","style","disabled","approve","App","FieldTitle","Importance","DescriptionField","DescriptionSheet","Files","FilesSheet","CheckList","CheckListSheet","FieldList","Chip","provide","analytics","cardType","CardType","Full","default","Text","getRandom","Object","resizeObserver","isBottomSheetShown","isFilesSheetShown","isCheckListSheetShown","chipsEventHandlers","showCheckList","openCheckList","checkListId","files","fileService","get","getFiles","wasAccomplicesFilled","accomplicesMeta","wasAuditorsFilled","auditorsMeta","wasFlowFilled","flowMeta","wasGroupFilled","groupMeta","wasFilesFilled","filesMeta","checkLists","checklist","isEdit","Type","isNumber","fields","creatorMeta","component","Creator","context","selectorWithActionMenu","Responsible","deadlineMeta","Deadline","statusMeta","Status","withSeparator","chip","FilesChip","checkListMeta","CheckListChip","getTitle","groupId","Group","GroupChip","Accomplices","AccomplicesChip","Auditors","AuditorsChip","Flow","FlowChip","forEach","field","primaryFields","Set","filter","has","projectFields","add","participantsFields","chips","map","$nextTick","tryStartObserver","created","dispatch","getById","beforeUnmount","disconnect","unmounted","mapActions","getObserver","observe","ResizeObserver","entries","entry","target","updateTitleFieldOffsetHeight","contentRect","height","addTask","length","checkListService","save","replace","openEditor","handleShowBottomSheet","closeEditor","slot","handleCloseBottomSheet","openFiles","closeFiles","closeCheckList","Dom","addClass","scrollContent","scrollTo","top","behavior","removeClass","getEventListeners","handlers","listeners","keys","event","includes","TaskFullCard","constructor","params","unmountCard","SidePanelInstance","popup","getCompatData","onScroll","adjustPosition","onClose","unsubscribe","unbind","document","subscribe","bind","showCard","Promise","resolve","reject","then","catch","error","mountCard","sidePanelId","maxWidth","card","open","customLeftBoundary","width","cacheable","contentClassName","customRightBoundary","onOpen","contentCallback","Tag","render","container","init","application","BitrixVue","createApp","mixin","locMixin","use","getStore"],"mappings":"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"}