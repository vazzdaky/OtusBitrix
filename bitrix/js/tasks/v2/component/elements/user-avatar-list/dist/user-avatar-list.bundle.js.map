{"version":3,"file":"user-avatar-list.bundle.js","sources":["../src/user-avatar-list-users.js","../src/user-avatar-list.js"],"sourcesContent":["import { BIcon } from 'ui.icon-set.api.vue';\nimport { Outline } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.outline';\nimport 'ui.tooltip';\n\nimport { UserAvatar } from 'tasks.v2.component.elements.user-avatar';\n\nimport './user-avatar-list-users.css';\n\n// @vue/component\nexport const UserAvatarListUsers = {\n\tcomponents: {\n\t\tBIcon,\n\t\tUserAvatar,\n\t},\n\tprops: {\n\t\tusers: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\twithCross: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['onClick', 'onCrossClick'],\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t};\n\t},\n\tmethods: {\n\t\tgetNode(userId: number): ?HTMLElement\n\t\t{\n\t\t\treturn this.$refs[`user_${userId}`]?.[0];\n\t\t},\n\t},\n\ttemplate: `\n\t\t<template v-for=\"(user, index) of users\" :key=\"user.id\">\n\t\t\t<div class=\"b24-user-avatar-list-user-container\" :data-user-id=\"user.id\">\n\t\t\t\t<div class=\"b24-user-avatar-list-user\" :ref=\"'user_' + user.id\" :class=\"'--' + user.type\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"b24-user-avatar-list-user-label\"\n\t\t\t\t\t\t:bx-tooltip-user-id=\"user.id\"\n\t\t\t\t\t\tbx-tooltip-context=\"b24\"\n\t\t\t\t\t\t@click=\"$emit('onClick', user.id)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class=\"b24-user-avatar-list-user-image\">\n\t\t\t\t\t\t\t<UserAvatar :src=\"user.image\" :type=\"user.type\"/>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"b24-user-avatar-list-user-title\">{{ user.name }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<BIcon\n\t\t\t\t\t\tv-if=\"withCross\"\n\t\t\t\t\t\tclass=\"b24-user-avatar-list-user-cross\"\n\t\t\t\t\t\t:name=\"Outline.CROSS_L\"\n\t\t\t\t\t\t@click=\"$emit('onCrossClick', user.id)\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<slot v-if=\"index === 0\" name=\"addButton\"></slot>\n\t\t\t</div>\n\t\t</template>\n\t`,\n};\n","import type { PopupOptions } from 'main.popup';\n\nimport { Popup } from 'ui.vue3.components.popup';\nimport 'ui.tooltip';\n\nimport { hrefClick } from 'tasks.v2.lib.href-click';\nimport { userService } from 'tasks.v2.provider.service.user-service';\nimport { UserAvatar } from 'tasks.v2.component.elements.user-avatar';\nimport type { UserModel } from 'tasks.v2.model.users';\n\nimport { UserAvatarListUsers } from './user-avatar-list-users';\nimport './user-avatar-list.css';\n\n// @vue/component\nexport const UserAvatarList = {\n\tname: 'UiUserAvatarList',\n\tcomponents: {\n\t\tPopup,\n\t\tUserAvatar,\n\t\tUserAvatarListUsers,\n\t},\n\tprops: {\n\t\tusers: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tvisibleAmount: {\n\t\t\ttype: Number,\n\t\t\tdefault: 3,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisPopupShown: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tvisibleUsers(): UserModel[]\n\t\t{\n\t\t\treturn this.users.slice(0, this.visibleAmount);\n\t\t},\n\t\tpopupUsers(): UserModel[]\n\t\t{\n\t\t\treturn this.users.slice(this.visibleAmount);\n\t\t},\n\t\tcount(): number\n\t\t{\n\t\t\treturn this.users.length;\n\t\t},\n\t\tinvisibleCount(): number\n\t\t{\n\t\t\treturn this.count - this.visibleAmount;\n\t\t},\n\t\tpopupOptions(): Function\n\t\t{\n\t\t\treturn (): PopupOptions => ({\n\t\t\t\tid: 'ui-user-avatar-list-more-popup',\n\t\t\t\tbindElement: this.$refs.more,\n\t\t\t\tpadding: 18,\n\t\t\t\tmaxWidth: 300,\n\t\t\t\tmaxHeight: window.innerHeight / 2 - 40,\n\t\t\t\toffsetTop: 8,\n\t\t\t\toffsetLeft: -18,\n\t\t\t\ttargetContainer: document.body,\n\t\t\t});\n\t\t},\n\t},\n\tmethods: {\n\t\tshowListUsers(): void\n\t\t{\n\t\t\tthis.isPopupShown = true;\n\t\t},\n\t\thandleClickFromListUsers(userId: number): void\n\t\t{\n\t\t\threfClick(userService.getUrl(userId));\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tref=\"container\"\n\t\t\tclass=\"b24-user-avatar-list\"\n\t\t>\n\t\t\t<UserAvatar\n\t\t\t\tv-for=\"user in visibleUsers\"\n\t\t\t\t:key=\"user.id\"\n\t\t\t\t:id=\"user.id\"\n\t\t\t\t:src=\"user.image\"\n\t\t\t\t:type=\"user.type\"\n\t\t\t\t:bx-tooltip-user-id=\"user.id\"\n\t\t\t\tbx-tooltip-context=\"b24\"\n\t\t\t\tclass=\"b24-user-avatar-list-item\"\n\t\t\t/>\n\t\t\t<div\n\t\t\t\tv-if=\"count > visibleAmount\"\n\t\t\t\tref=\"more\"\n\t\t\t\tclass=\"b24-user-avatar-list-more\"\n\t\t\t\t@click=\"showListUsers\"\n\t\t\t>\n\t\t\t\t+{{ invisibleCount }}\n\t\t\t</div>\n\t\t\t<Popup\n\t\t\t\tv-if=\"isPopupShown\"\n\t\t\t\t:options=\"popupOptions()\"\n\t\t\t\t@close=\"isPopupShown = false\"\n\t\t\t>\n\t\t\t\t<div class=\"b24-user-avatar-list-users --popup\">\n\t\t\t\t\t<UserAvatarListUsers\n\t\t\t\t\t\t:users=\"popupUsers\"\n\t\t\t\t\t\t:withCross=\"false\"\n\t\t\t\t\t\tref=\"popupUserList\"\n\t\t\t\t\t\t@onClick=\"(userId) => handleClickFromListUsers(userId)\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Popup>\n\t\t</div>\n\t`,\n};\n"],"names":["UserAvatarListUsers","components","BIcon","UserAvatar","props","users","type","Array","required","withCross","Boolean","emits","setup","Outline","methods","getNode","userId","$refs","template","UserAvatarList","name","Popup","visibleAmount","Number","default","data","isPopupShown","computed","visibleUsers","slice","popupUsers","count","length","invisibleCount","popupOptions","id","bindElement","more","padding","maxWidth","maxHeight","window","innerHeight","offsetTop","offsetLeft","targetContainer","document","body","showListUsers","handleClickFromListUsers","hrefClick","userService","getUrl"],"mappings":";;;;;;;;CASA;AACA,OAAaA,mBAAmB,GAAG;GAClCC,UAAU,EAAE;YACXC,wBAAK;iBACLC;IACA;GACDC,KAAK,EAAE;KACNC,KAAK,EAAE;OACNC,IAAI,EAAEC,KAAK;OACXC,QAAQ,EAAE;MACV;KACDC,SAAS,EAAE;OACVH,IAAI,EAAEI,OAAO;OACbF,QAAQ,EAAE;;IAEX;GACDG,KAAK,EAAE,CAAC,SAAS,EAAE,cAAc,CAAC;GAClCC,KAAK,GACL;KACC,OAAO;gBACNC;MACA;IACD;GACDC,OAAO,EAAE;KACRC,OAAO,CAACC,MAAc,EACtB;OAAA;OACC,sBAAO,IAAI,CAACC,KAAK,CAAE,QAAOD,MAAO,EAAC,CAAC,qBAA5B,YAA+B,CAAC,CAAC;;IAEzC;GACDE,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;CA0BZ,CAAC;;CCnDD;AACA,OAAaC,cAAc,GAAG;GAC7BC,IAAI,EAAE,kBAAkB;GACxBnB,UAAU,EAAE;YACXoB,8BAAK;iBACLlB,iDAAU;KACVH;IACA;GACDI,KAAK,EAAE;KACNC,KAAK,EAAE;OACNC,IAAI,EAAEC,KAAK;OACXC,QAAQ,EAAE;MACV;KACDc,aAAa,EAAE;OACdhB,IAAI,EAAEiB,MAAM;OACZC,OAAO,EAAE;;IAEV;GACDC,IAAI,GACJ;KACC,OAAO;OACNC,YAAY,EAAE;MACd;IACD;GACDC,QAAQ,EAAE;KACTC,YAAY,GACZ;OACC,OAAO,IAAI,CAACvB,KAAK,CAACwB,KAAK,CAAC,CAAC,EAAE,IAAI,CAACP,aAAa,CAAC;MAC9C;KACDQ,UAAU,GACV;OACC,OAAO,IAAI,CAACzB,KAAK,CAACwB,KAAK,CAAC,IAAI,CAACP,aAAa,CAAC;MAC3C;KACDS,KAAK,GACL;OACC,OAAO,IAAI,CAAC1B,KAAK,CAAC2B,MAAM;MACxB;KACDC,cAAc,GACd;OACC,OAAO,IAAI,CAACF,KAAK,GAAG,IAAI,CAACT,aAAa;MACtC;KACDY,YAAY,GACZ;OACC,OAAO,OAAqB;SAC3BC,EAAE,EAAE,gCAAgC;SACpCC,WAAW,EAAE,IAAI,CAACnB,KAAK,CAACoB,IAAI;SAC5BC,OAAO,EAAE,EAAE;SACXC,QAAQ,EAAE,GAAG;SACbC,SAAS,EAAEC,MAAM,CAACC,WAAW,GAAG,CAAC,GAAG,EAAE;SACtCC,SAAS,EAAE,CAAC;SACZC,UAAU,EAAE,CAAC,EAAE;SACfC,eAAe,EAAEC,QAAQ,CAACC;QAC1B,CAAC;;IAEH;GACDjC,OAAO,EAAE;KACRkC,aAAa,GACb;OACC,IAAI,CAACtB,YAAY,GAAG,IAAI;MACxB;KACDuB,wBAAwB,CAACjC,MAAc,EACvC;OACCkC,gCAAS,CAACC,iDAAW,CAACC,MAAM,CAACpC,MAAM,CAAC,CAAC;;IAEtC;GACDE,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAuCZ,CAAC;;;;;;;;;"}