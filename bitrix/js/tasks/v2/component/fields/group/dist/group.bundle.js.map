{"version":3,"file":"group.bundle.js","sources":["../src/group-meta.js","../src/stage/stage.js","../src/scrum/epic/epic.js","../src/scrum/story-points/story-points.js","../src/scrum/scrum.js","../src/group-popup/group-popup.js","../src/group-dialog.js","../src/group.js","../src/group-chip.js"],"sourcesContent":["import { Loc } from 'main.core';\nimport { Core } from 'tasks.v2.core';\nimport { GroupType, Model } from 'tasks.v2.const';\n\nexport const groupMeta = Object.freeze({\n\tid: 'groupId',\n\ttitle: Loc.getMessage('TASKS_V2_GROUP_TITLE'),\n\tgetTitle: (groupId: number) => {\n\t\tconst group = Core.getStore().getters[`${Model.Groups}/getById`](groupId);\n\n\t\treturn {\n\t\t\t[GroupType.Collab]: Loc.getMessage('TASKS_V2_GROUP_TITLE_COLLAB'),\n\t\t\t[GroupType.Scrum]: Loc.getMessage('TASKS_V2_GROUP_TITLE_SCRUM'),\n\t\t}[group?.type] ?? Loc.getMessage('TASKS_V2_GROUP_TITLE');\n\t},\n});\n","import { Tag } from 'main.core';\nimport { hint, type HintParams } from 'ui.vue3.directives.hint';\nimport { BMenu, type MenuOptions, type MenuItemOptions } from 'ui.vue3.components.menu';\nimport { BIcon } from 'ui.icon-set.api.vue';\nimport { CRM, Outline } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.crm';\nimport 'ui.icon-set.outline';\n\nimport { Model } from 'tasks.v2.const';\nimport { Loader } from 'tasks.v2.component.elements.user-custom-tag-selector';\nimport { Color } from 'tasks.v2.lib.color';\nimport { groupService } from 'tasks.v2.provider.service.group-service';\nimport { taskService } from 'tasks.v2.provider.service.task-service';\nimport type { GroupModel } from 'tasks.v2.model.groups';\nimport type { StageModel } from 'tasks.v2.model.stages';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport './stage.css';\n\n// @vue/component\nexport const Stage = {\n\tcomponents: {\n\t\tBIcon,\n\t\tLoader,\n\t\tBMenu,\n\t},\n\tdirectives: { hint },\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisMenuShown: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\ttask(): TaskModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/getById`](this.taskId);\n\t\t},\n\t\tisEdit(): boolean\n\t\t{\n\t\t\treturn Number.isInteger(this.taskId) && this.taskId > 0;\n\t\t},\n\t\tgroup(): GroupModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Groups}/getById`](this.task.groupId);\n\t\t},\n\t\tgroupId(): number\n\t\t{\n\t\t\treturn this.task.groupId;\n\t\t},\n\t\tstage(): StageModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Stages}/getById`](this.task.stageId) ?? null;\n\t\t},\n\t\tmenuOptions(): Function\n\t\t{\n\t\t\treturn (): MenuOptions => ({\n\t\t\t\tid: 'tasks-field-group-stage-menu',\n\t\t\t\tbindElement: this.$refs.stage,\n\t\t\t\toffsetTop: 8,\n\t\t\t\titems: this.menuItems,\n\t\t\t\tmaxHeight: window.innerHeight / 2,\n\t\t\t\ttargetContainer: document.body,\n\t\t\t});\n\t\t},\n\t\tmenuItems(): MenuItemOptions[]\n\t\t{\n\t\t\tconst stages = this.$store.getters[`${Model.Stages}/getByIds`](this.group.stagesIds ?? []);\n\n\t\t\treturn stages?.map((stage: StageModel): MenuItemOptions => ({\n\t\t\t\ttitle: stage.title,\n\t\t\t\tsvg: this.getStageSvg(new Color(stage.color).limit(250).toRgb()),\n\t\t\t\tisSelected: stage.id === this.stage.id,\n\t\t\t\tonClick: () => this.setStage(stage.id),\n\t\t\t}));\n\t\t},\n\t\tstageColor(): string\n\t\t{\n\t\t\treturn `#${this.stage.color}`;\n\t\t},\n\t\tbackgroundColor(): string\n\t\t{\n\t\t\treturn new Color(this.stage.color).setOpacity(0.1).limit(250).toRgb();\n\t\t},\n\t\tisDarkColor(): boolean\n\t\t{\n\t\t\treturn new Color(this.stage.color).isDark();\n\t\t},\n\t\ttooltip(): Function\n\t\t{\n\t\t\treturn (): HintParams => ({\n\t\t\t\ttext: this.loc('TASKS_V2_GROUP_STAGE_HINT'),\n\t\t\t\ttimeout: 500,\n\t\t\t\tpopupOptions: {\n\t\t\t\t\tclassName: 'tasks-field-group-hint',\n\t\t\t\t\toffsetTop: 2,\n\t\t\t\t\toffsetLeft: this.$refs.stage.offsetWidth / 2,\n\t\t\t\t\tbackground: 'var(--ui-color-bg-content-inapp)',\n\t\t\t\t\tpadding: 6,\n\t\t\t\t\tangle: true,\n\t\t\t\t\ttargetContainer: document.body,\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\treadonly(): boolean\n\t\t{\n\t\t\treturn !this.task.rights.edit;\n\t\t},\n\t},\n\twatch: {\n\t\tgroupId(): void\n\t\t{\n\t\t\tvoid this.loadStagesForCreation();\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tvoid this.loadStagesForCreation();\n\t},\n\tmethods: {\n\t\tgetStageSvg(color: string): SVGElement\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-icon-set --${CRM.STAGE}\" style=\"--ui-icon-set__icon-color: ${color}\"></div>\n\t\t\t`;\n\t\t},\n\t\tasync handleClick(): Promise<void>\n\t\t{\n\t\t\tif (this.readonly)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.group.stagesIds)\n\t\t\t{\n\t\t\t\tawait groupService.getStages(this.groupId);\n\t\t\t}\n\n\t\t\tthis.isMenuShown = true;\n\t\t},\n\t\tsetStage(stageId: number): void\n\t\t{\n\t\t\tvoid taskService.update(\n\t\t\t\tthis.taskId,\n\t\t\t\t{ stageId },\n\t\t\t);\n\t\t},\n\t\tasync loadStagesForCreation(): Promise<void>\n\t\t{\n\t\t\tif (this.isEdit || this.group.stagesIds)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tawait groupService.getStages(this.groupId);\n\n\t\t\tif (!this.task.stageId)\n\t\t\t{\n\t\t\t\tthis.setStage(this.group.stagesIds[0]);\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tv-if=\"stage\"\n\t\t\tv-hint=\"tooltip\"\n\t\t\tclass=\"tasks-field-group-stage\"\n\t\t\t:class=\"{ '--dark': isDarkColor, '--readonly': readonly }\"\n\t\t\t:style=\"{\n\t\t\t\t'--stage-color': stageColor,\n\t\t\t\t'--stage-background': backgroundColor,\n\t\t\t}\"\n\t\t\t:data-task-id=\"taskId\"\n\t\t\t:data-task-field-id=\"'stageId'\"\n\t\t\t:data-task-field-value=\"task.stageId\"\n\t\t\t:data-task-stage-title=\"stage?.title\"\n\t\t\tref=\"stage\"\n\t\t\t@click=\"handleClick\"\n\t\t>\n\t\t\t<div class=\"tasks-field-group-stage-text-container\">\n\t\t\t\t<div class=\"tasks-field-group-stage-text\">{{ stage.title }}</div>\n\t\t\t</div>\n\t\t\t<div class=\"tasks-field-group-stage-arrow\"></div>\n\t\t\t<BIcon v-if=\"!readonly\" :name=\"Outline.CHEVRON_DOWN_S\"/>\n\t\t</div>\n\t\t<div v-else class=\"tasks-field-group-stage-loader\">\n\t\t\t<Loader/>\n\t\t</div>\n\t\t<BMenu v-if=\"isMenuShown\" :options=\"menuOptions()\" @close=\"isMenuShown = false\"/>\n\t`,\n};\n","import { Runtime } from 'main.core';\n\nimport { hint, type HintParams } from 'ui.vue3.directives.hint';\nimport { BIcon } from 'ui.icon-set.api.vue';\nimport { Outline } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.outline';\n\nimport { EntitySelectorEntity, Model } from 'tasks.v2.const';\nimport { EntitySelectorDialog } from 'tasks.v2.lib.entity-selector-dialog';\nimport { Color } from 'tasks.v2.lib.color';\nimport { taskService } from 'tasks.v2.provider.service.task-service';\nimport type { EpicModel } from 'tasks.v2.model.epics';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport './epic.css';\n\n// @vue/component\nexport const Epic = {\n\tcomponents: {\n\t\tBIcon,\n\t},\n\tdirectives: { hint },\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t};\n\t},\n\tcomputed: {\n\t\ttask(): TaskModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/getById`](this.taskId);\n\t\t},\n\t\tepic(): ?EpicModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Epics}/getById`](this.task.epicId);\n\t\t},\n\t\tpreselectedEpic(): [string, number][]\n\t\t{\n\t\t\treturn this.epic ? [['epic-selector', this.epic.id]] : [];\n\t\t},\n\t\tepicColor(): string\n\t\t{\n\t\t\tif (!this.epic)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn new Color(this.epic.color).toRgb();\n\t\t},\n\t\tbackgroundColor(): string\n\t\t{\n\t\t\tif (!this.epic)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn new Color(this.epic.color).setOpacity(0.3).limit(250).toRgb();\n\t\t},\n\t\tisDarkColor(): boolean\n\t\t{\n\t\t\tif (!this.epic)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn new Color(this.epic.color).isDark();\n\t\t},\n\t\ttooltip(): Function\n\t\t{\n\t\t\treturn (): HintParams => ({\n\t\t\t\ttext: this.loc('TASKS_V2_GROUP_EPIC_HINT'),\n\t\t\t\ttimeout: 500,\n\t\t\t\tpopupOptions: {\n\t\t\t\t\tclassName: 'tasks-field-group-hint',\n\t\t\t\t\toffsetTop: 2,\n\t\t\t\t\toffsetLeft: this.$el.offsetWidth / 2,\n\t\t\t\t\tbackground: 'var(--ui-color-bg-content-inapp)',\n\t\t\t\t\tpadding: 6,\n\t\t\t\t\tangle: true,\n\t\t\t\t\ttargetContainer: document.body,\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tthis.handleEpicSelectedDebounced = Runtime.debounce(this.handleEpicSelected, 10, this);\n\t},\n\tmethods: {\n\t\thandleClick(): void\n\t\t{\n\t\t\tthis.showDialog();\n\t\t},\n\t\tshowDialog(): void\n\t\t{\n\t\t\tthis.dialog ??= new EntitySelectorDialog({\n\t\t\t\tmultiple: false,\n\t\t\t\tdropdownMode: true,\n\t\t\t\tenableSearch: true,\n\t\t\t\tcompactView: true,\n\t\t\t\thideOnDeselect: true,\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: EntitySelectorEntity.Epic,\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tgroupId: this.task.groupId,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdynamicLoad: true,\n\t\t\t\t\t\tdynamicSearch: true,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tpreselectedItems: this.preselectedEpic,\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': this.handleEpicSelectedDebounced,\n\t\t\t\t\t'Item:onDeselect': this.handleEpicSelectedDebounced,\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tthis.dialog.selectItemsByIds(this.preselectedEpic);\n\t\t\tthis.dialog.showTo(this.$el);\n\t\t},\n\t\thandleEpicSelected(): void\n\t\t{\n\t\t\tconst item = this.dialog.getSelectedItems()[0];\n\t\t\tif (item)\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.Epics}/insert`, {\n\t\t\t\t\tid: item.getId(),\n\t\t\t\t\ttitle: item.getTitle(),\n\t\t\t\t\tcolor: item.getAvatarOption('bgColor'),\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tvoid taskService.update(\n\t\t\t\tthis.taskId,\n\t\t\t\t{\n\t\t\t\t\tepicId: item?.getId() ?? 0,\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tv-hint=\"tooltip\"\n\t\t\tclass=\"tasks-field-group-scrum-epic\"\n\t\t\t:class=\"{ '--dark': isDarkColor, '--filled': epic }\"\n\t\t\t:style=\"{\n\t\t\t\t'--epic-color': epicColor,\n\t\t\t\t'--epic-background': backgroundColor,\n\t\t\t}\"\n\t\t\t@click=\"handleClick\"\n\t\t>\n\t\t\t<span class=\"tasks-field-group-scrum-epic-title\">\n\t\t\t\t{{ epic?.title || loc('TASKS_V2_GROUP_EPIC_EMPTY') }}\n\t\t\t</span>\n\t\t\t<BIcon :name=\"Outline.CHEVRON_DOWN_S\"/>\n\t\t</div>\n\t`,\n};\n","import { hint, type HintParams } from 'ui.vue3.directives.hint';\n\nimport { Model } from 'tasks.v2.const';\nimport { taskService } from 'tasks.v2.provider.service.task-service';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport './story-points.css';\n\n// @vue/component\nexport const StoryPoints = {\n\tdirectives: { hint },\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisFocused: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\ttask(): TaskModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/getById`](this.taskId);\n\t\t},\n\t\tstoryPoints(): string\n\t\t{\n\t\t\treturn this.task.storyPoints?.trim();\n\t\t},\n\t\ttooltip(): Function\n\t\t{\n\t\t\treturn (): HintParams => ({\n\t\t\t\ttext: this.loc('TASKS_V2_GROUP_STORY_POINTS_HINT'),\n\t\t\t\ttimeout: 500,\n\t\t\t\tpopupOptions: {\n\t\t\t\t\tclassName: 'tasks-field-group-hint',\n\t\t\t\t\toffsetTop: 2,\n\t\t\t\t\toffsetLeft: this.$refs.storyPoints.offsetWidth / 2,\n\t\t\t\t\tbackground: 'var(--ui-color-bg-content-inapp)',\n\t\t\t\t\tpadding: 6,\n\t\t\t\t\tangle: true,\n\t\t\t\t\ttargetContainer: document.body,\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t},\n\tmethods: {\n\t\tasync handleClick(): Promise<void>\n\t\t{\n\t\t\tthis.isFocused = true;\n\n\t\t\tawait this.$nextTick();\n\n\t\t\tthis.$refs.input.focus();\n\t\t},\n\t\thandleBlur(): void\n\t\t{\n\t\t\tthis.isFocused = false;\n\n\t\t\tvoid taskService.update(\n\t\t\t\tthis.taskId,\n\t\t\t\t{\n\t\t\t\t\tstoryPoints: this.$refs.input.value.trim(),\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<input\n\t\t\tv-if=\"isFocused\"\n\t\t\tclass=\"tasks-field-group-scrum-story-points-input\"\n\t\t\t:value=\"storyPoints\"\n\t\t\tref=\"input\"\n\t\t\t@blur=\"handleBlur\"\n\t\t/>\n\t\t<div\n\t\t\tv-else\n\t\t\tv-hint=\"tooltip\"\n\t\t\tclass=\"tasks-field-group-scrum-story-points\"\n\t\t\t:class=\"{ '--filled': storyPoints }\"\n\t\t\tref=\"storyPoints\"\n\t\t\t@click=\"handleClick\"\n\t\t>\n\t\t\t{{ storyPoints || '-' }}\n\t\t</div>\n\t`,\n};\n","import { Loader } from 'tasks.v2.component.elements.user-custom-tag-selector';\nimport { groupService } from 'tasks.v2.provider.service.group-service';\n\nimport { Epic } from './epic/epic';\nimport { StoryPoints } from './story-points/story-points';\nimport './scrum.css';\n\n// @vue/component\nexport const Scrum = {\n\tcomponents: {\n\t\tEpic,\n\t\tStoryPoints,\n\t\tLoader,\n\t},\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\thasScrumInfo: groupService.hasScrumInfo(this.taskId),\n\t\t};\n\t},\n\tasync mounted(): Promise<void>\n\t{\n\t\tawait groupService.getScrumInfo(this.taskId);\n\n\t\tthis.hasScrumInfo = groupService.hasScrumInfo(this.taskId);\n\t},\n\ttemplate: `\n\t\t<div v-if=\"hasScrumInfo\" class=\"tasks-field-group-scrum\">\n\t\t\t<Epic :taskId=\"taskId\"/>\n\t\t\t<StoryPoints :taskId=\"taskId\"/>\n\t\t</div>\n\t\t<div v-else class=\"tasks-field-group-scrum-loader\">\n\t\t\t<Loader/>\n\t\t</div>\n\t`,\n};\n","import { Event, Loc } from 'main.core';\nimport type { PopupOptions } from 'main.popup';\n\nimport { Popup } from 'ui.vue3.components.popup';\nimport { Button as UiButton, AirButtonStyle, ButtonSize } from 'ui.vue3.components.button';\n\nimport { GroupType, Model } from 'tasks.v2.const';\nimport { openGroup } from 'tasks.v2.lib.open-group';\nimport { groupService } from 'tasks.v2.provider.service.group-service';\nimport { userService } from 'tasks.v2.provider.service.user-service';\nimport type { GroupModel } from 'tasks.v2.model.groups';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\nimport './group-popup.css';\n\nexport const GroupPopup = {\n\tcomponents: {\n\t\tPopup,\n\t\tUiButton,\n\t},\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\tgetBindElement: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['close'],\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tAirButtonStyle,\n\t\t\tButtonSize,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisPopupShown: false,\n\t\t\t/** @type GroupInfo */\n\t\t\tgroupInfo: {},\n\t\t};\n\t},\n\tcomputed: {\n\t\ttask(): TaskModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/getById`](this.taskId);\n\t\t},\n\t\tgroup(): ?GroupModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Groups}/getById`](this.task.groupId);\n\t\t},\n\t\tbindElement(): HTMLElement\n\t\t{\n\t\t\treturn this.getBindElement();\n\t\t},\n\t\tpopupId(): string\n\t\t{\n\t\t\treturn 'tasks-field-group-popup';\n\t\t},\n\t\tpopupOptions(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tbindElement: this.bindElement,\n\t\t\t\tpadding: 24,\n\t\t\t\tminWidth: 260,\n\t\t\t\tmaxWidth: 400,\n\t\t\t\toffsetTop: 8,\n\t\t\t\ttargetContainer: document.body,\n\t\t\t};\n\t\t},\n\t\tgroupOwnerUrl(): string\n\t\t{\n\t\t\treturn userService.getUrl(this.groupInfo.ownerId);\n\t\t},\n\t\tgroupMembersCountFormatted(): string\n\t\t{\n\t\t\treturn Loc.getMessagePlural('TASKS_V2_GROUP_COUNT_MEMBERS', this.groupInfo.numberOfMembers, {\n\t\t\t\t'#COUNT#': this.groupInfo.numberOfMembers,\n\t\t\t});\n\t\t},\n\t\tgroupAboutFormatted(): string\n\t\t{\n\t\t\treturn {\n\t\t\t\t[GroupType.Collab]: this.loc('TASKS_V2_GROUP_ABOUT_COLLAB'),\n\t\t\t\t[GroupType.Scrum]: this.loc('TASKS_V2_GROUP_ABOUT_SCRUM'),\n\t\t\t}[this.group?.type] ?? this.loc('TASKS_V2_GROUP_ABOUT');\n\t\t},\n\t},\n\tmounted(): void\n\t{\n\t\tEvent.bind(this.bindElement, 'click', this.handleClick);\n\t\tEvent.bind(this.bindElement, 'mouseenter', this.handleMouseEnter);\n\t\tEvent.bind(this.bindElement, 'mouseleave', this.handleMouseLeave);\n\t},\n\tmethods: {\n\t\topenGroup(): void\n\t\t{\n\t\t\tvoid openGroup(this.group.id, this.group.type);\n\t\t},\n\t\thandleClick(): void\n\t\t{\n\t\t\tthis.clearTimeouts();\n\t\t},\n\t\thandleMouseEnter(): void\n\t\t{\n\t\t\tif (!this.group)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.groupInfoPromise = groupService.getGroupInfo(this.group.id);\n\n\t\t\tthis.clearTimeouts();\n\t\t\tthis.showTimeout = setTimeout(() => this.showPopup(), 400);\n\t\t},\n\t\thandleMouseLeave(): void\n\t\t{\n\t\t\tEvent.unbind(document, 'mouseover', this.updateHoverElement);\n\t\t\tEvent.bind(document, 'mouseover', this.updateHoverElement);\n\n\t\t\tthis.clearTimeouts();\n\t\t\tthis.closeTimeout = setTimeout(() => {\n\t\t\t\tif (!this.$refs.container?.contains(this.hoverElement) && !this.bindElement.contains(this.hoverElement))\n\t\t\t\t{\n\t\t\t\t\tthis.closePopup();\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t},\n\t\tupdateHoverElement(event: MouseEvent): void\n\t\t{\n\t\t\tthis.hoverElement = event.target;\n\t\t},\n\t\tasync showPopup(): Promise<void>\n\t\t{\n\t\t\tif (this.groupInfoPromise)\n\t\t\t{\n\t\t\t\tthis.groupInfo = await this.groupInfoPromise;\n\t\t\t}\n\n\t\t\tif (!this.group)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.clearTimeouts();\n\t\t\tthis.isPopupShown = true;\n\t\t\tawait this.$nextTick();\n\t\t\tthis.$refs.popup.adjustPosition();\n\t\t},\n\t\tclosePopup(): void\n\t\t{\n\t\t\tthis.clearTimeouts();\n\t\t\tthis.isPopupShown = false;\n\t\t\tEvent.unbind(this.$refs.container, 'mouseleave', this.handleMouseLeave);\n\t\t\tEvent.unbind(document, 'mouseover', this.updateHoverElement);\n\t\t},\n\t\tclearTimeouts(): void\n\t\t{\n\t\t\tclearTimeout(this.closeTimeout);\n\t\t\tclearTimeout(this.showTimeout);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Popup\n\t\t\tv-if=\"isPopupShown\"\n\t\t\t:id=\"popupId\"\n\t\t\t:options=\"popupOptions\"\n\t\t\tref=\"popup\"\n\t\t\t@close=\"closePopup\"\n\t\t>\n\t\t\t<div class=\"tasks-field-group-popup\" ref=\"container\">\n\t\t\t\t<div class=\"tasks-field-group-popup-header\">\n\t\t\t\t\t<img class=\"tasks-field-group-popup-image\" :src=\"group?.image\" :alt=\"group?.name\">\n\t\t\t\t\t<div class=\"tasks-field-group-popup-title-container\">\n\t\t\t\t\t\t<div class=\"tasks-field-group-popup-title\" :title=\"group?.name\">{{ group?.name }}</div>\n\t\t\t\t\t\t<div class=\"tasks-field-group-popup-subtitle\">{{ groupMembersCountFormatted }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-field-group-popup-button\">\n\t\t\t\t\t<UiButton\n\t\t\t\t\t\t:text=\"groupAboutFormatted\"\n\t\t\t\t\t\t:style=\"AirButtonStyle.OUTLINE_ACCENT_2\"\n\t\t\t\t\t\t:size=\"ButtonSize.SMALL\"\n\t\t\t\t\t\t:wide=\"true\"\n\t\t\t\t\t\t@click=\"openGroup\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-field-group-popup-info\">\n\t\t\t\t\t<div class=\"tasks-field-group-popup-field\">\n\t\t\t\t\t\t<div class=\"tasks-field-group-popup-field-title\">{{ loc('TASKS_V2_GROUP_OWNER') }}</div>\n\t\t\t\t\t\t<div class=\"tasks-field-group-popup-field-value\">\n\t\t\t\t\t\t\t<a :href=\"groupOwnerUrl\">{{ groupInfo.ownerName }}</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"tasks-field-group-popup-field\">\n\t\t\t\t\t\t<div class=\"tasks-field-group-popup-field-title\">{{ loc('TASKS_V2_GROUP_DATE_CREATE') }}</div>\n\t\t\t\t\t\t<div class=\"tasks-field-group-popup-field-value\">{{ groupInfo.dateCreate }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"tasks-field-group-popup-field\">\n\t\t\t\t\t\t<div class=\"tasks-field-group-popup-field-title\">{{ loc('TASKS_V2_GROUP_SUBJECT') }}</div>\n\t\t\t\t\t\t<div class=\"tasks-field-group-popup-field-value\">{{ groupInfo.subjectTitle }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Popup>\n\t`,\n};\n","import { Runtime } from 'main.core';\nimport { EntitySelectorDialog, type ItemId } from 'tasks.v2.lib.entity-selector-dialog';\nimport { Core } from 'tasks.v2.core';\nimport { EntitySelectorEntity, Model } from 'tasks.v2.const';\nimport { taskService } from 'tasks.v2.provider.service.task-service';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nclass GroupDialog\n{\n\t#taskId: number | string;\n\t#dialog: EntitySelectorDialog;\n\t#onUpdateOnce: Function | null = null;\n\t#onUpdate: Function | null = null;\n\t#onHide: Function | null = null;\n\n\tsetTaskId(taskId: number | string): GroupDialog\n\t{\n\t\tthis.#taskId = taskId;\n\n\t\treturn this;\n\t}\n\n\tasync init(): void\n\t{\n\t\tthis.#dialog ??= this.#createDialog();\n\t}\n\n\tshowTo(targetNode: HTMLElement): void\n\t{\n\t\tthis.init();\n\t\tthis.#dialog.selectItemsByIds(this.#items);\n\t\tthis.#dialog.showTo(targetNode);\n\t}\n\n\tonUpdateOnce(callback: Function): void\n\t{\n\t\tthis.#onUpdateOnce = callback;\n\t}\n\n\tonUpdate(callback: Function): void\n\t{\n\t\tthis.#onUpdate = callback;\n\t}\n\n\tonHide(callback: Function): void\n\t{\n\t\tthis.#onHide = callback;\n\t}\n\n\t#createDialog(): EntitySelectorDialog\n\t{\n\t\tconst handleItemChangeDebounced = Runtime.debounce(this.#handleItemChange, 10, this);\n\n\t\treturn new EntitySelectorDialog({\n\t\t\tcontext: 'tasks-card',\n\t\t\tmultiple: false,\n\t\t\thideOnDeselect: true,\n\t\t\tenableSearch: true,\n\t\t\tentities: [\n\t\t\t\t{\n\t\t\t\t\tid: EntitySelectorEntity.Project,\n\t\t\t\t},\n\t\t\t],\n\t\t\tpreselectedItems: this.#items,\n\t\t\tevents: {\n\t\t\t\t'Item:onSelect': handleItemChangeDebounced,\n\t\t\t\t'Item:onDeselect': handleItemChangeDebounced,\n\t\t\t\tonHide: () => {\n\t\t\t\t\tthis.#onHide();\n\t\t\t\t\tthis.#clearOnUpdateOnce();\n\t\t\t\t},\n\t\t\t\tonDestroy: this.#clearOnUpdateOnce,\n\t\t\t\tonLoad: async () => {\n\t\t\t\t\tthis.#upsertGroup();\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n\n\tasync #upsertGroup(): void\n\t{\n\t\tconst item = this.#dialog.getSelectedItems()[0];\n\t\tif (item)\n\t\t{\n\t\t\t// Insert group into Vuex and wait for it to complete\n\t\t\tawait Core.getStore().dispatch(`${Model.Groups}/insert`, {\n\t\t\t\tid: item.getId(),\n\t\t\t\tname: item.getTitle(),\n\t\t\t\timage: item.getAvatar(),\n\t\t\t\ttype: item.getEntityType(),\n\t\t\t});\n\t\t}\n\n\t\tthis.#updateGroup(item?.getId());\n\t}\n\n\t#handleItemChange(): void\n\t{\n\t\tthis.#upsertGroup();\n\t\tthis.#onUpdate();\n\t}\n\n\tget #items(): ItemId[]\n\t{\n\t\treturn [[EntitySelectorEntity.Project, this.#task.groupId]];\n\t}\n\n\tget #task(): TaskModel\n\t{\n\t\treturn Core.getStore().getters[`${Model.Tasks}/getById`](this.#taskId);\n\t}\n\n\t#updateGroup(groupId: number): void\n\t{\n\t\tvoid taskService.update(\n\t\t\tthis.#taskId,\n\t\t\t{\n\t\t\t\tgroupId,\n\t\t\t\tstageId: 0,\n\t\t\t},\n\t\t);\n\n\t\tthis.#onUpdateOnce?.();\n\t\tthis.#clearOnUpdateOnce();\n\t}\n\n\t#clearOnUpdateOnce = (): void => {\n\t\tthis.#onUpdateOnce = null;\n\t};\n}\n\nexport const groupDialog = new GroupDialog();\n","import { BMenu, MenuItemDesign, type MenuOptions } from 'ui.vue3.components.menu';\nimport { BIcon } from 'ui.icon-set.api.vue';\nimport { Outline } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.outline';\n\nimport { GroupType, Model } from 'tasks.v2.const';\nimport { heightTransition } from 'tasks.v2.lib.height-transition';\nimport { openGroup } from 'tasks.v2.lib.open-group';\nimport { taskService } from 'tasks.v2.provider.service.task-service';\nimport { Hint } from 'tasks.v2.component.elements.hint';\nimport type { GroupModel } from 'tasks.v2.model.groups';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport { groupMeta } from './group-meta';\nimport { Stage } from './stage/stage';\nimport { Scrum } from './scrum/scrum';\nimport { GroupPopup } from './group-popup/group-popup';\nimport { groupDialog } from './group-dialog';\nimport './group.css';\n\n// @vue/component\nexport const Group = {\n\tcomponents: {\n\t\tBIcon,\n\t\tBMenu,\n\t\tStage,\n\t\tScrum,\n\t\tHint,\n\t\tGroupPopup,\n\t},\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tgroupMeta,\n\t\t\tOutline,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisMenuShown: false,\n\t\t\tisHintShown: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\ttask(): TaskModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/getById`](this.taskId);\n\t\t},\n\t\tisEdit(): boolean\n\t\t{\n\t\t\treturn Number.isInteger(this.taskId) && this.taskId > 0;\n\t\t},\n\t\tgroup(): GroupModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Groups}/getById`](this.task.groupId);\n\t\t},\n\t\tisScrum(): boolean\n\t\t{\n\t\t\treturn this.group?.type === GroupType.Scrum;\n\t\t},\n\t\tmenuOptions(): MenuOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tid: 'tasks-field-group-menu',\n\t\t\t\tbindElement: this.$refs.group,\n\t\t\t\toffsetTop: 8,\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: this.getAboutItemTitle(),\n\t\t\t\t\t\ticon: Outline.FOLDER,\n\t\t\t\t\t\tonClick: this.openGroup,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: this.loc('TASKS_V2_GROUP_CHANGE'),\n\t\t\t\t\t\ticon: Outline.EDIT_L,\n\t\t\t\t\t\tonClick: this.showDialog,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tdesign: MenuItemDesign.Alert,\n\t\t\t\t\t\ttitle: this.loc('TASKS_V2_GROUP_CLEAR'),\n\t\t\t\t\t\ticon: Outline.CROSS_L,\n\t\t\t\t\t\tonClick: this.clearField,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\ttargetContainer: document.body,\n\t\t\t};\n\t\t},\n\t\tgroupName(): string\n\t\t{\n\t\t\treturn this.group?.name ?? this.loc('TASKS_V2_GROUP_HIDDEN');\n\t\t},\n\t\tgroupImage(): string\n\t\t{\n\t\t\treturn this.group?.image;\n\t\t},\n\t\thintText(): string\n\t\t{\n\t\t\treturn this.loc('TASKS_V2_GROUP_CANT_CHANGE_FLOW');\n\t\t},\n\t\tisSecret(): boolean\n\t\t{\n\t\t\treturn Boolean(this.task.groupId) && !this.group;\n\t\t},\n\t\thasFlow(): boolean\n\t\t{\n\t\t\treturn this.task.flowId > 0;\n\t\t},\n\t\treadonly(): boolean\n\t\t{\n\t\t\treturn !this.task.rights.edit || this.hasFlow;\n\t\t},\n\t},\n\tmounted(): void\n\t{\n\t\theightTransition.animate(this.$refs.container);\n\t},\n\tupdated(): void\n\t{\n\t\theightTransition.animate(this.$refs.container);\n\t},\n\tmethods: {\n\t\tgetAboutItemTitle(): string\n\t\t{\n\t\t\treturn {\n\t\t\t\t[GroupType.Collab]: this.loc('TASKS_V2_GROUP_ABOUT_COLLAB'),\n\t\t\t\t[GroupType.Scrum]: this.loc('TASKS_V2_GROUP_ABOUT_SCRUM'),\n\t\t\t}[this.group?.type] ?? this.loc('TASKS_V2_GROUP_ABOUT');\n\t\t},\n\t\thandleClick(): void\n\t\t{\n\t\t\tif (!this.isEdit && this.hasFlow)\n\t\t\t{\n\t\t\t\tthis.isHintShown = true;\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.readonly)\n\t\t\t{\n\t\t\t\tif (!this.isSecret)\n\t\t\t\t{\n\t\t\t\t\tvoid this.openGroup();\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.isEdit && this.group)\n\t\t\t{\n\t\t\t\tthis.showMenu();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.showDialog();\n\t\t\t}\n\t\t},\n\t\tshowMenu(): void\n\t\t{\n\t\t\tthis.isMenuShown = true;\n\t\t},\n\t\topenGroup(): void\n\t\t{\n\t\t\tvoid openGroup(this.group.id, this.group.type);\n\t\t},\n\t\tshowDialog(): void\n\t\t{\n\t\t\tgroupDialog.setTaskId(this.taskId).showTo(this.$refs.group);\n\t\t},\n\t\thandleCrossClick(event: MouseEvent): void\n\t\t{\n\t\t\tevent.stopPropagation();\n\n\t\t\tthis.clearField();\n\t\t},\n\t\tclearField(): void\n\t\t{\n\t\t\tvoid taskService.update(\n\t\t\t\tthis.taskId,\n\t\t\t\t{\n\t\t\t\t\tgroupId: 0,\n\t\t\t\t\tstageId: 0,\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"tasks-field-group\"\n\t\t\t:data-task-id=\"taskId\"\n\t\t\t:data-task-field-id=\"groupMeta.id\"\n\t\t\t:data-task-field-value=\"task.groupId\"\n\t\t\tref=\"container\"\n\t\t>\n\t\t\t<div class=\"tasks-field-group-group\" :class=\"{ '--secret': isSecret }\" ref=\"group\" @click=\"handleClick\">\n\t\t\t\t<template v-if=\"task.groupId\">\n\t\t\t\t\t<img v-if=\"groupImage\" class=\"tasks-field-group-image\" :src=\"groupImage\" :alt=\"groupName\"/>\n\t\t\t\t\t<BIcon v-else class=\"tasks-field-group-add-icon\" :name=\"Outline.FOLDER\"/>\n\t\t\t\t\t<div class=\"tasks-field-group-title\">{{ groupName }}</div>\n\t\t\t\t\t<BIcon\n\t\t\t\t\t\tv-if=\"!isEdit && (task.flowId ?? 0) <= 0\"\n\t\t\t\t\t\tclass=\"tasks-field-group-cross\"\n\t\t\t\t\t\t:name=\"Outline.CROSS_L\"\n\t\t\t\t\t\t@click.capture=\"handleCrossClick\"\n\t\t\t\t\t/>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<BIcon class=\"tasks-field-group-add-icon\" :name=\"Outline.FOLDER_PLUS\"/>\n\t\t\t\t\t<div class=\"tasks-field-group-add-text\">{{ loc('TASKS_V2_GROUP_ADD') }}</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t\t<Stage v-if=\"isEdit && group && !task.flowId\" :taskId=\"taskId\"/>\n\t\t\t<Scrum v-if=\"isScrum && !task.flowId\" :taskId=\"taskId\"/>\n\t\t</div>\n\t\t<Hint\n\t\t\tv-if=\"isHintShown\"\n\t\t\t:bindElement=\"$refs.container\"\n\t\t\t@close=\"isHintShown = false\"\n\t\t>\n\t\t\t{{ hintText }}\n\t\t</Hint>\n\t\t<BMenu v-if=\"isMenuShown\" :options=\"menuOptions\" @close=\"isMenuShown = false\"/>\n\t\t<GroupPopup :taskId=\"taskId\" :getBindElement=\"() => $refs.group\"/>\n\t`,\n};\n","import { Runtime } from 'main.core';\nimport { Outline } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.outline';\n\nimport { Core } from 'tasks.v2.core';\nimport { Model } from 'tasks.v2.const';\nimport { Chip, ChipDesign, type ChipImage } from 'tasks.v2.component.elements.chip';\nimport { Hint } from 'tasks.v2.component.elements.hint';\nimport { fieldHighlighter } from 'tasks.v2.lib.field-highlighter';\nimport { analytics } from 'tasks.v2.lib.analytics';\nimport { taskService } from 'tasks.v2.provider.service.task-service';\nimport type { GroupModel } from 'tasks.v2.model.groups';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\n\nimport { groupMeta } from './group-meta';\nimport { groupDialog } from './group-dialog';\nimport { GroupPopup } from './group-popup/group-popup';\n\n// @vue/component\nexport const GroupChip = {\n\tcomponents: {\n\t\tChip,\n\t\tHint,\n\t\tGroupPopup,\n\t},\n\tinject: ['analytics', 'cardType'],\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\tisAutonomous: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tgroupMeta,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tdoShowHint: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\ttask(): TaskModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/getById`](this.taskId);\n\t\t},\n\t\tgroup(): ?GroupModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Groups}/getById`](this.task.groupId);\n\t\t},\n\t\tdesign(): string\n\t\t{\n\t\t\treturn {\n\t\t\t\t[!this.isAutonomous && !this.isSelected]: ChipDesign.Shadow,\n\t\t\t\t[!this.isAutonomous && this.isSelected]: ChipDesign.ShadowAccent,\n\t\t\t\t[this.isAutonomous && !this.isSelected]: ChipDesign.Outline,\n\t\t\t\t[this.isAutonomous && this.isSelected]: ChipDesign.OutlineAccent,\n\t\t\t}.true;\n\t\t},\n\t\tisSelected(): boolean\n\t\t{\n\t\t\tif (this.isAutonomous)\n\t\t\t{\n\t\t\t\treturn this.task.groupId > 0;\n\t\t\t}\n\n\t\t\treturn this.$store.getters[`${Model.Tasks}/wasFieldFilled`](this.taskId, groupMeta.id);\n\t\t},\n\t\tisFilled(): boolean\n\t\t{\n\t\t\treturn Boolean(this.isAutonomous && this.group);\n\t\t},\n\t\tisFlowFilled(): boolean\n\t\t{\n\t\t\treturn this.task.flowId > 0;\n\t\t},\n\t\ttext(): string\n\t\t{\n\t\t\tif (this.isFilled)\n\t\t\t{\n\t\t\t\treturn this.group?.name ?? this.loc('TASKS_V2_GROUP_HIDDEN');\n\t\t\t}\n\n\t\t\treturn groupMeta.title;\n\t\t},\n\t\ticon(): ?string\n\t\t{\n\t\t\tif (this.isFilled)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn Outline.FOLDER;\n\t\t},\n\t\timage(): ?ChipImage\n\t\t{\n\t\t\tif (!this.isFilled)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tsrc: this.group?.image,\n\t\t\t\talt: this.group?.name,\n\t\t\t};\n\t\t},\n\t\tcanChange(): boolean\n\t\t{\n\t\t\treturn (this.task.flowId ?? 0) <= 0;\n\t\t},\n\t\thintText(): boolean\n\t\t{\n\t\t\treturn this.loc('TASKS_V2_GROUP_CANT_CHANGE_FLOW');\n\t\t},\n\t\treadonly(): boolean\n\t\t{\n\t\t\treturn !this.task.rights.edit;\n\t\t},\n\t\tisLocked(): boolean\n\t\t{\n\t\t\treturn !Core.getParams().limits.project;\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tgroupDialog.setTaskId(this.taskId).init();\n\t},\n\tmethods: {\n\t\thandleClick(): void\n\t\t{\n\t\t\tif (this.isLocked)\n\t\t\t{\n\t\t\t\tvoid Runtime.loadExtension('tasks.limit').then((exports) => {\n\t\t\t\t\tconst { Limit } = exports;\n\t\t\t\t\tLimit.showInstance({\n\t\t\t\t\t\tfeatureId: Core.getParams().limits.projectFeatureId,\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.isAutonomous && this.isSelected)\n\t\t\t{\n\t\t\t\tthis.highlightField();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.isFlowFilled)\n\t\t\t{\n\t\t\t\tthis.doShowHint = true;\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tgroupDialog.setTaskId(this.taskId).showTo(this.$refs.chip.$el);\n\n\t\t\tif (!this.isAutonomous)\n\t\t\t{\n\t\t\t\tgroupDialog.onUpdateOnce(this.highlightField);\n\t\t\t}\n\n\t\t\tgroupDialog.onHide(this.handleFieldClose);\n\t\t\tgroupDialog.onUpdate(this.handleUpdate);\n\t\t},\n\t\thighlightField(): void\n\t\t{\n\t\t\tvoid fieldHighlighter.setContainer(this.$root.$el).highlight(groupMeta.id);\n\t\t},\n\t\thandleClear(): void\n\t\t{\n\t\t\tvoid taskService.update(\n\t\t\t\tthis.taskId,\n\t\t\t\t{\n\t\t\t\t\tgroupId: 0,\n\t\t\t\t\tstageId: 0,\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\thandleFieldClose(): void\n\t\t{\n\t\t\tif (this.isAutonomous)\n\t\t\t{\n\t\t\t\tthis.$refs.chip.focus();\n\t\t\t}\n\t\t},\n\t\thandleUpdate(): void\n\t\t{\n\t\t\tanalytics.sendAddProject(this.analytics, {\n\t\t\t\tcardType: this.cardType,\n\t\t\t\tviewersCount: this.task.auditorsIds.length,\n\t\t\t\tcoexecutorsCount: this.task.accomplicesIds.length,\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Chip\n\t\t\tv-if=\"isSelected || !readonly\"\n\t\t\t:design=\"design\"\n\t\t\t:icon=\"icon\"\n\t\t\t:image=\"image\"\n\t\t\t:text=\"text\"\n\t\t\t:withClear=\"isFilled && !isFlowFilled\"\n\t\t\t:lock=\"isLocked\"\n\t\t\t:trimmable=\"isFilled\"\n\t\t\t:data-task-id=\"taskId\"\n\t\t\t:data-task-chip-id=\"groupMeta.id\"\n\t\t\t:data-task-chip-value=\"task.groupId\"\n\t\t\tref=\"chip\"\n\t\t\t@click=\"handleClick\"\n\t\t\t@clear=\"handleClear\"\n\t\t/>\n\t\t<Hint\n\t\t\tv-if=\"doShowHint\"\n\t\t\t:bindElement=\"$refs.chip.$el\"\n\t\t\t@close=\"doShowHint = false\"\n\t\t>\n\t\t\t{{ hintText }}\n\t\t</Hint>\n\t\t<GroupPopup v-if=\"isAutonomous\" :taskId=\"taskId\" :getBindElement=\"() => $refs.chip.$el\"/>\n\t`,\n};\n"],"names":["groupMeta","Object","freeze","id","title","Loc","getMessage","getTitle","groupId","group","Core","getStore","getters","Model","Groups","GroupType","Collab","Scrum","type","Stage","components","BIcon","Loader","BMenu","directives","hint","props","taskId","Number","String","required","setup","Outline","data","isMenuShown","computed","task","$store","Tasks","isEdit","isInteger","stage","Stages","stageId","menuOptions","bindElement","$refs","offsetTop","items","menuItems","maxHeight","window","innerHeight","targetContainer","document","body","stages","stagesIds","map","svg","getStageSvg","Color","color","limit","toRgb","isSelected","onClick","setStage","stageColor","backgroundColor","setOpacity","isDarkColor","isDark","tooltip","text","loc","timeout","popupOptions","className","offsetLeft","offsetWidth","background","padding","angle","readonly","rights","edit","watch","loadStagesForCreation","created","methods","Tag","render","CRM","STAGE","handleClick","groupService","getStages","taskService","update","template","Epic","epic","Epics","epicId","preselectedEpic","epicColor","$el","handleEpicSelectedDebounced","Runtime","debounce","handleEpicSelected","showDialog","dialog","EntitySelectorDialog","multiple","dropdownMode","enableSearch","compactView","hideOnDeselect","entities","EntitySelectorEntity","options","dynamicLoad","dynamicSearch","preselectedItems","events","selectItemsByIds","showTo","item","getSelectedItems","dispatch","getId","getAvatarOption","StoryPoints","isFocused","storyPoints","trim","$nextTick","input","focus","handleBlur","value","hasScrumInfo","mounted","getScrumInfo","GroupPopup","Popup","UiButton","getBindElement","Function","emits","AirButtonStyle","ButtonSize","isPopupShown","groupInfo","popupId","minWidth","maxWidth","groupOwnerUrl","userService","getUrl","ownerId","groupMembersCountFormatted","getMessagePlural","numberOfMembers","groupAboutFormatted","Event","bind","handleMouseEnter","handleMouseLeave","openGroup","clearTimeouts","groupInfoPromise","getGroupInfo","showTimeout","setTimeout","showPopup","unbind","updateHoverElement","closeTimeout","container","contains","hoverElement","closePopup","event","target","popup","adjustPosition","clearTimeout","GroupDialog","setTaskId","init","targetNode","onUpdateOnce","callback","onUpdate","onHide","handleItemChangeDebounced","context","Project","onDestroy","onLoad","name","image","getAvatar","getEntityType","groupDialog","Group","Hint","isHintShown","isScrum","getAboutItemTitle","icon","FOLDER","EDIT_L","design","MenuItemDesign","Alert","CROSS_L","clearField","groupName","groupImage","hintText","isSecret","Boolean","hasFlow","flowId","heightTransition","animate","updated","showMenu","handleCrossClick","stopPropagation","GroupChip","Chip","inject","isAutonomous","default","doShowHint","ChipDesign","Shadow","ShadowAccent","OutlineAccent","true","isFilled","isFlowFilled","src","alt","canChange","isLocked","getParams","limits","project","loadExtension","then","exports","Limit","showInstance","featureId","projectFeatureId","highlightField","chip","handleFieldClose","handleUpdate","fieldHighlighter","setContainer","$root","highlight","handleClear","analytics","sendAddProject","cardType","viewersCount","auditorsIds","length","coexecutorsCount","accomplicesIds"],"mappings":"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"}