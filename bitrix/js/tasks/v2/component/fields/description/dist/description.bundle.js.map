{"version":3,"file":"description.bundle.js","sources":["../src/default-editor-options.js","../src/actions/action-button.js","../src/actions/copilot.js","../src/actions/attach.js","../src/actions/mention.js","../src/description-editor.js","../src/edit-button.js","../src/description-preview.js","../src/description-field.js","../src/description-sheet.js","../src/description-popup.js","../src/description-inline.js"],"sourcesContent":["import { EntitySelectorEntity } from 'tasks.v2.const';\nimport type { TextEditorOptions } from 'ui.text-editor';\n\nexport const DefaultEditorOptions: TextEditorOptions = Object.freeze({\n\ttoolbar: [],\n\tfloatingToolbar: [\n\t\t'bold', 'italic', 'underline', 'strikethrough', '|',\n\t\t'numbered-list', 'bulleted-list', '|',\n\t\t'link',\n\t],\n\tremovePlugins: ['BlockToolbar'],\n\tvisualOptions: {\n\t\tborderWidth: 0,\n\t\tblockSpaceInline: 0,\n\t\tcolorBackground: 'transparent',\n\t},\n\tmention: {\n\t\tdialogOptions: {\n\t\t\tentities: [\n\t\t\t\t{\n\t\t\t\t\tid: EntitySelectorEntity.User,\n\t\t\t\t\toptions: {\n\t\t\t\t\t\temailUsers: true,\n\t\t\t\t\t\tinviteEmployeeLink: false,\n\t\t\t\t\t},\n\t\t\t\t\titemOptions: {\n\t\t\t\t\t\tdefault: {\n\t\t\t\t\t\t\tlink: '',\n\t\t\t\t\t\t\tlinkTitle: '',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: EntitySelectorEntity.StructureNode,\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tselectMode: 'usersOnly',\n\t\t\t\t\t\tallowFlatDepartments: false,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t},\n\tcopilot: {\n\t\tcopilotOptions: {},\n\t},\n\tparagraphPlaceholder: 'auto',\n});\n","import { BIcon, Outline } from 'ui.icon-set.api.vue';\n\n// @vue/component\nexport const ActionButton = {\n\tcomponents: {\n\t\tBIcon,\n\t},\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\ticonName: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ticonColor: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t};\n\t},\n\ttemplate: `\n\t\t<button class=\"tasks-card-description-action-button\" type=\"button\" :title=\"title\">\n\t\t\t<BIcon :name=\"iconName\" :color=\"iconColor\"/>\n\t\t</button>\n\t`,\n};\n","import { Outline } from 'ui.icon-set.api.vue';\n\nimport { ActionButton } from './action-button';\n\n// @vue/component\nexport const Copilot = {\n\tname: 'TaskDescriptionCopilot',\n\tcomponents: {\n\t\tActionButton,\n\t\tOutline,\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t};\n\t},\n\tcomputed: {\n\t\tbuttonColor(): String\n\t\t{\n\t\t\treturn 'var(--ui-color-copilot-primary)';\n\t\t},\n\t},\n\tmethods: {\n\t\thandleClick()\n\t\t{\n\t\t\talert('Not implemented yet');\n\t\t},\n\t},\n\ttemplate: `\n\t\t<ActionButton\n\t\t\t:iconName=\"Outline.COPILOT\"\n\t\t\t:title=\"loc('TASKS_V2_DESCRIPTION_ACTION_COPILOT_TITLE')\"\n\t\t\t:iconColor=\"buttonColor\"\n\t\t\t@click=\"handleClick\"\n\t\t/>\n\t`,\n};\n","import { Outline } from 'ui.icon-set.api.vue';\n\nimport { ActionButton } from './action-button';\n\n// @vue/component\nexport const Attach = {\n\tname: 'TaskDescriptionMention',\n\tcomponents: {\n\t\tActionButton,\n\t\tOutline,\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t};\n\t},\n\tmethods: {\n\t\thandleClick()\n\t\t{\n\t\t\talert('Not implemented yet');\n\t\t},\n\t},\n\ttemplate: `\n\t\t<ActionButton\n\t\t\t:iconName=\"Outline.ATTACH\"\n\t\t\t:title=\"loc('TASKS_V2_DESCRIPTION_ACTION_ATTACH_TITLE')\"\n\t\t\t@click=\"handleClick\"\n\t\t/>\n\t`,\n};\n","import { Outline } from 'ui.icon-set.api.vue';\n\nimport { ActionButton } from './action-button';\n\n// @vue/component\nexport const Mention = {\n\tname: 'TaskDescriptionMention',\n\tcomponents: {\n\t\tActionButton,\n\t\tOutline,\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t};\n\t},\n\ttemplate: `\n\t\t<ActionButton\n\t\t\t:iconName=\"Outline.MENTION\"\n\t\t\t:title=\"loc('TASKS_V2_DESCRIPTION_ACTION_MENTION_TITLE')\"\n\t\t/>\n\t`,\n};\n","import { Dom } from 'main.core';\nimport type { PopupOptions } from 'main.popup';\n\nimport { BIcon, Outline } from 'ui.icon-set.api.vue';\nimport { Plugins, TextEditor, TextEditorComponent } from 'ui.text-editor';\nimport { Button, ButtonColor, ButtonSize } from 'ui.vue3.components.button';\nimport { HtmlFormatterComponent } from 'ui.bbcode.formatter.html-formatter';\nimport { Popup } from 'ui.vue3.components.popup';\nimport type { TextEditorOptions } from 'ui.text-editor';\n\nimport { TaskModel } from 'tasks.v2.model.tasks';\nimport { Model } from 'tasks.v2.const';\nimport { fileService } from 'tasks.v2.provider.service.file-service';\nimport { taskService } from 'tasks.v2.provider.service.task-service';\n\nimport { DefaultEditorOptions } from './default-editor-options';\nimport { Copilot } from './actions/copilot';\nimport { Attach } from './actions/attach';\nimport { Mention } from './actions/mention';\nimport './description.css';\n\n// @vue/component\nexport const DescriptionEditor = {\n\tname: 'TaskDescriptionContent',\n\tcomponents: {\n\t\tBIcon,\n\t\tTextEditorComponent,\n\t\tHtmlFormatterComponent,\n\t\tPopup,\n\t\tButton,\n\t\tCopilot,\n\t\tAttach,\n\t\tMention,\n\t},\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\tdoOpenInEditMode: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tisExpanded: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\temits: ['close', 'editorResize', 'show', 'expand'],\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\t/** @type TextEditor */\n\t\t\teditor: null,\n\t\t\tButtonSize,\n\t\t\tButtonColor,\n\t\t\tOutline,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisEditMode: false,\n\t\t\tisWarningPopupShown: false,\n\t\t\tfiles: [],\n\t\t};\n\t},\n\tcomputed: {\n\t\ttask(): TaskModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/getById`](this.taskId);\n\t\t},\n\t\tpopupOptions(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tclassName: 'tasks-card-description-warning-popup',\n\t\t\t\twidth: 380,\n\t\t\t\tpadding: 24,\n\t\t\t\tautoHide: false,\n\t\t\t\tcloseByEsc: false,\n\t\t\t\toverlay: true,\n\t\t\t};\n\t\t},\n\t\treadonly(): boolean\n\t\t{\n\t\t\treturn !this.task.rights.edit;\n\t\t},\n\t},\n\tasync created(): Promise<void>\n\t{\n\t\tconst additionalEditorOptions: TextEditorOptions = {\n\t\t\tminHeight: 100,\n\t\t\tplaceholder: this.loc('TASKS_V2_DESCRIPTION_EDITOR_PLACEHOLDER'),\n\t\t\tcontent: this.task.description,\n\t\t\tevents: {\n\t\t\t\tonChange: this.handleChange,\n\t\t\t},\n\t\t\tfile: {\n\t\t\t\tmode: 'disk',\n\t\t\t},\n\t\t};\n\n\t\tthis.editor = new TextEditor({ ...DefaultEditorOptions, ...additionalEditorOptions });\n\n\t\tthis.isEditMode = this.doOpenInEditMode;\n\n\t\tthis.files = await fileService.get(this.taskId).list(this.task.fileIds);\n\n\t\tthis.editor.dispatchCommand(Plugins.File.ADD_FILES_COMMAND, this.files);\n\t},\n\tmounted(): void\n\t{\n\t\tthis.$emit('show');\n\n\t\tif (this.task.description.length === 0)\n\t\t{\n\t\t\tthis.isEditMode = true;\n\t\t}\n\t},\n\tmethods: {\n\t\thandleChange(): void\n\t\t{\n\t\t\tthis.$emit('editorResize');\n\t\t},\n\t\thandleCloseIconClick(): void\n\t\t{\n\t\t\tif (this.isEditMode && this.editor.getText() !== this.task.description)\n\t\t\t{\n\t\t\t\tthis.isWarningPopupShown = true;\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('close');\n\t\t\tthis.editor.setText(this.task.description);\n\t\t},\n\t\thandleSaveButtonClick(): void\n\t\t{\n\t\t\tvoid taskService.update(\n\t\t\t\tthis.taskId,\n\t\t\t\t{ description: this.editor.getText() },\n\t\t\t);\n\t\t\tthis.isEditMode = false;\n\n\t\t\tif (this.task.description.length === 0)\n\t\t\t{\n\t\t\t\tthis.$emit('close');\n\t\t\t}\n\t\t},\n\t\thandleCancelButtonClick(): void\n\t\t{\n\t\t\tthis.isEditMode = false;\n\t\t\tthis.editor.setText(this.task.description);\n\n\t\t\tif (this.task.description.length === 0)\n\t\t\t{\n\t\t\t\tthis.$emit('close');\n\t\t\t}\n\t\t},\n\t\thandleEditButtonClick(): void\n\t\t{\n\t\t\tvoid this.enableEdit();\n\t\t},\n\t\tasync enableEdit(): void\n\t\t{\n\t\t\tthis.isEditMode = true;\n\t\t\tawait this.$nextTick();\n\t\t\tthis.focusToEnd();\n\t\t},\n\t\tasync adjustEditor(): Promise<void>\n\t\t{\n\t\t\tif (this.editor.getMaxHeight() !== this.$refs.editorWrapper.offsetHeight)\n\t\t\t{\n\t\t\t\tthis.setMaxHeight(this.$refs.editorWrapper.offsetHeight);\n\t\t\t}\n\t\t},\n\t\tsetMaxHeight(maxHeight: number): void\n\t\t{\n\t\t\tthis.editor.setMaxHeight(maxHeight);\n\t\t\tDom.style(this.$refs.htmlFormatterComponent.$el, 'max-height', `${maxHeight}px`);\n\t\t},\n\t\tshowEditor(): void\n\t\t{\n\t\t\tDom.show(this.$refs.editorWrapper);\n\t\t},\n\t\thideEditor(): void\n\t\t{\n\t\t\tDom.hide(this.$refs.editorWrapper);\n\t\t},\n\t\tfocusToEnd(): void\n\t\t{\n\t\t\tthis.editor.focus(null, { defaultSelection: 'rootEnd' });\n\t\t},\n\t\thandlePopupOkButtonClick(): void\n\t\t{\n\t\t\tthis.$emit('close');\n\t\t\tthis.editor.setText(this.task.description);\n\t\t},\n\t\thandlePopupCancelButtonClick(): void\n\t\t{\n\t\t\tthis.isWarningPopupShown = false;\n\t\t},\n\t\tonExpandClick(): void\n\t\t{\n\t\t\tthis.$emit('expand', !this.isExpanded);\n\t\t},\n\t\tonMentionButtonClick(): void\n\t\t{\n\t\t\tthis.editor.dispatchCommand(BX.UI.TextEditor.Plugins.Mention.INSERT_MENTION_DIALOG_COMMAND);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-card-description-wrapper\">\n\t\t\t<div class=\"tasks-card-description-header\">\n\t\t\t\t<div class=\"tasks-card-description-title\">\n\t\t\t\t\t{{ loc('TASKS_V2_DESCRIPTION_TITLE') }}\n\t\t\t\t</div>\n\t\t\t\t<BIcon\n\t\t\t\t\tv-if=\"[true, false].includes(isExpanded)\"\n\t\t\t\t\tclass=\"tasks-card-description-expand-icon\"\n\t\t\t\t\t:name=\"isExpanded ? Outline.COLLAPSE_L : Outline.EXPAND_L\"\n\t\t\t\t\t@click=\"onExpandClick\"\n\t\t\t\t/>\n\t\t\t\t<BIcon :name=\"Outline.CROSS_L\" @click=\"handleCloseIconClick\"/>\n\t\t\t</div>\n\t\t\t<div class=\"tasks-card-description-editor-wrapper\" ref=\"editorWrapper\">\n\t\t\t\t<TextEditorComponent v-if=\"isEditMode\" :editor-instance=\"editor\"/>\n\t\t\t\t<HtmlFormatterComponent\n\t\t\t\t\tv-show=\"!isEditMode\"\n\t\t\t\t\tclass=\"tasks-card-description-view\"\n\t\t\t\t\t:bbcode=\"task.description\"\n\t\t\t\t\t:options=\"{\n\t\t\t\t\t\tfileMode: 'disk',\n\t\t\t\t\t}\"\n\t\t\t\t\t:formatData=\"{ files }\"\n\t\t\t\t\tref=\"htmlFormatterComponent\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div v-if=\"!readonly\" class=\"tasks-card-description-footer\">\n\t\t\t\t<div v-if=\"isEditMode\" class=\"tasks-card-description-action-list\">\n\t\t\t\t\t<Copilot />\n\t\t\t\t\t<Attach/>\n\t\t\t\t\t<Mention @click=\"onMentionButtonClick\"/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-card-description-footer-buttons\">\n\t\t\t\t\t<template v-if=\"isEditMode\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t:text=\"loc('TASKS_V2_DESCRIPTION_BUTTON_CANCEL')\"\n\t\t\t\t\t\t\t:size=\"ButtonSize.MEDIUM\"\n\t\t\t\t\t\t\t:color=\"ButtonColor.LINK\"\n\t\t\t\t\t\t\t@click=\"handleCancelButtonClick\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t:text=\"loc('TASKS_V2_DESCRIPTION_BUTTON_SAVE')\"\n\t\t\t\t\t\t\t:size=\"ButtonSize.MEDIUM\"\n\t\t\t\t\t\t\t:color=\"ButtonColor.PRIMARY\"\n\t\t\t\t\t\t\t@click=\"handleSaveButtonClick\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</template>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tv-else\n\t\t\t\t\t\t:text=\"loc('TASKS_V2_DESCRIPTION_BUTTON_EDIT')\"\n\t\t\t\t\t\t:size=\"ButtonSize.MEDIUM\"\n\t\t\t\t\t\t:color=\"ButtonColor.LINK\"\n\t\t\t\t\t\t@click=\"handleEditButtonClick\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<Popup v-if=\"isWarningPopupShown\" :options=\"popupOptions\">\n\t\t\t\t<div class=\"tasks-card-description-warning-popup-content\">\n\t\t\t\t\t<div class=\"tasks-card-description-warning-popup-title\">\n\t\t\t\t\t\t{{ loc('TASKS_V2_DESCRIPTION_WARNING_POPUP_TITLE') }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"tasks-card-description-warning-popup-description\">\n\t\t\t\t\t\t{{ loc('TASKS_V2_DESCRIPTION_WARNING_POPUP_DESCRIPTION') }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-card-description-warning-popup-buttons\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\t:text=\"loc('TASKS_V2_DESCRIPTION_WARNING_POPUP_BUTTON_CLOSE')\"\n\t\t\t\t\t\t:size=\"ButtonSize.MEDIUM\"\n\t\t\t\t\t\t:color=\"ButtonColor.PRIMARY\"\n\t\t\t\t\t\t@click=\"handlePopupOkButtonClick\"\n\t\t\t\t\t/>\n\t\t\t\t\t<Button\n\t\t\t\t\t\t:text=\"loc('TASKS_V2_DESCRIPTION_WARNING_POPUP_BUTTON_CANCEL')\"\n\t\t\t\t\t\t:size=\"ButtonSize.MEDIUM\"\n\t\t\t\t\t\t:color=\"ButtonColor.LIGHT_BORDER\"\n\t\t\t\t\t\t@click=\"handlePopupCancelButtonClick\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Popup>\n\t\t</div>\n\t`,\n};\n","import { BIcon, Outline } from 'ui.icon-set.api.vue';\nimport './description.css';\n\n// @vue/component\nexport const EditButton = {\n\tname: 'TaskDescriptionEditButton',\n\tcomponents: {\n\t\tBIcon,\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t};\n\t},\n\tcomputed: {\n\t\ticonSize(): number\n\t\t{\n\t\t\treturn 18;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-card-change-description\">\n\t\t\t<BIcon :name=\"Outline.EDIT_L\" :size=iconSize></BIcon>\n\t\t\t<div class=\"tasks-card-change-description-text\">{{ loc('TASKS_V2_CHANGE_DESCRIPTION') }}</div>\n\t\t</div>\n\t`,\n};\n","import { HtmlFormatterComponent } from 'ui.bbcode.formatter.html-formatter';\nimport { BIcon } from 'ui.icon-set.api.vue';\nimport { Outline } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.outline';\n\nimport { Model } from 'tasks.v2.const';\nimport { fileService } from 'tasks.v2.provider.service.file-service';\nimport type { TaskModel } from 'tasks.v2.model.tasks';\nimport './description.css';\n\n// @vue/component\nexport const DescriptionPreview = {\n\tname: 'TaskDescriptionPreview',\n\tcomponents: {\n\t\tHtmlFormatterComponent,\n\t\tBIcon,\n\t},\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['previewButtonClick'],\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tBIcon,\n\t\t\tOutline,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisOverflowing: false,\n\t\t\tfiles: [],\n\t\t};\n\t},\n\tcomputed: {\n\t\ttask(): TaskModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/getById`](this.taskId);\n\t\t},\n\t\ttaskDescription(): string\n\t\t{\n\t\t\treturn this.task.description ?? '';\n\t\t},\n\t\treadonly(): boolean\n\t\t{\n\t\t\treturn !this.task.rights.edit;\n\t\t},\n\t\tisMoreButtonShown(): boolean\n\t\t{\n\t\t\treturn this.isOverflowing || this.readonly;\n\t\t},\n\t},\n\twatch: {\n\t\tasync taskDescription(): void\n\t\t{\n\t\t\tawait this.$nextTick();\n\t\t\t//TODO files can break this logic\n\t\t\tthis.updateIsOverflowing();\n\t\t},\n\t},\n\tasync created(): Promise<void>\n\t{\n\t\tthis.files = await fileService.get(this.taskId).list(this.task.fileIds);\n\t},\n\tasync mounted(): Promise<void>\n\t{\n\t\tsetTimeout(() => this.updateIsOverflowing(), 200);\n\t},\n\tmethods: {\n\t\tupdateIsOverflowing(): void\n\t\t{\n\t\t\tthis.isOverflowing = this.$el.offsetHeight - 16 < this.$refs.htmlFormatter.$el.offsetHeight;\n\t\t},\n\t\tonPreviewClick(event): void\n\t\t{\n\t\t\tif (event.target.closest('a'))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('previewButtonClick', { doOpenInEditMode: false });\n\t\t},\n\t\tonEditButtonClick(): void\n\t\t{\n\t\t\tthis.$emit('previewButtonClick', { doOpenInEditMode: true });\n\t\t},\n\t\tonMoreButtonClick(): void\n\t\t{\n\t\t\tthis.$emit('previewButtonClick', { doOpenInEditMode: false });\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"tasks-card-description-preview\">\n\t\t\t<HtmlFormatterComponent\n\t\t\t\t:bbcode=\"task.description\"\n\t\t\t\t:options=\"{\n\t\t\t\t\tfileMode: 'disk',\n\t\t\t\t}\"\n\t\t\t\t:formatData=\"{ files }\"\n\t\t\t\tref=\"htmlFormatter\"\n\t\t\t\t@click=\"onPreviewClick\"\n\t\t\t/>\n\t\t\t<div class=\"tasks-card-description-preview-button\" @click=\"onMoreButtonClick\">\n\t\t\t\t<div v-if=\"isMoreButtonShown\" class=\"tasks-card-description-preview-button-more\">\n\t\t\t\t\t<span class=\"tasks-card-description-preview-button-text\">\n\t\t\t\t\t\t{{ loc('TASKS_V2_DESCRIPTION_PREVIEW_BUTTON_MORE') }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div v-else class=\"tasks-card-description-preview-button-edit\">\n\t\t\t\t\t<BIcon\n\t\t\t\t\t\t:size=\"18\"\n\t\t\t\t\t\t:name=\"Outline.EDIT_L\"\n\t\t\t\t\t/>\n\t\t\t\t\t<span class=\"tasks-card-description-preview-button-text\">\n\t\t\t\t\t\t{{ loc('TASKS_V2_DESCRIPTION_PREVIEW_BUTTON_EDIT') }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { TaskModel } from 'tasks.v2.model.tasks';\nimport { Model } from 'tasks.v2.const';\nimport { EditButton } from './edit-button';\nimport { DescriptionPreview } from './description-preview';\nimport './description.css';\n\n// @vue/component\nexport const DescriptionField = {\n\tname: 'TaskDescriptionField',\n\tcomponents: {\n\t\tEditButton,\n\t\tDescriptionPreview,\n\t},\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisSlotShown: false,\n\t\t\tdoOpenInEditMode: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\ttask(): TaskModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/getById`](this.taskId);\n\t\t},\n\t\treadonly(): boolean\n\t\t{\n\t\t\treturn !this.task.rights.edit;\n\t\t},\n\t},\n\tmethods: {\n\t\tonPreviewButtonClick(eventData): void\n\t\t{\n\t\t\tthis.doOpenInEditMode = eventData.doOpenInEditMode === true;\n\t\t\tthis.isSlotShown = true;\n\t\t},\n\t\tcloseSlot(): void\n\t\t{\n\t\t\tthis.isSlotShown = false;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<slot :isShown=\"isSlotShown\" :doOpenInEditMode=\"doOpenInEditMode\" :close=\"closeSlot\"></slot>\n\t\t<div\n\t\t\tv-if=\"!readonly || task.description.length > 0\"\n\t\t\tclass=\"tasks-card-description-field\"\n\t\t\t:data-task-id=\"taskId\"\n\t\t\t:data-task-field-id=\"'description'\"\n\t\t>\n\t\t\t<EditButton v-if=\"task.description.length === 0\" @click=\"isSlotShown = true\"></EditButton>\n\t\t\t<DescriptionPreview\n\t\t\t\tv-else\n\t\t\t\t:taskId=\"taskId\"\n\t\t\t\t@previewButtonClick=\"onPreviewButtonClick\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { mapGetters } from 'ui.vue3.vuex';\nimport { BottomSheet } from 'tasks.v2.component.elements.bottom-sheet';\nimport { Model } from 'tasks.v2.const';\nimport { DescriptionEditor } from './description-editor';\nimport './description.css';\n\n// @vue/component\nexport const DescriptionSheet = {\n\tname: 'TaskDescriptionSheet',\n\tcomponents: {\n\t\tBottomSheet,\n\t\tDescriptionEditor,\n\t},\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\tisShown: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tdoOpenInEditMode: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: ['show', 'close'],\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisExpanded: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\ttitleFieldOffsetHeight: `${Model.Interface}/titleFieldOffsetHeight`,\n\t\t}),\n\t},\n\twatch: {\n\t\ttitleFieldOffsetHeight(): void\n\t\t{\n\t\t\tthis.$refs.bottomSheet?.adjustPosition();\n\t\t\tvoid this.$refs.editorComponent?.adjustEditor();\n\t\t},\n\t},\n\tmethods: {\n\t\tonAfterEnter(): void\n\t\t{\n\t\t\tthis.$refs.editorComponent.focusToEnd();\n\t\t},\n\t\thandleShow(): void\n\t\t{\n\t\t\tvoid this.$refs.editorComponent.adjustEditor();\n\n\t\t\tthis.$emit('show');\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BottomSheet :isShown=\"isShown\" :isExpanded=\"isExpanded\" @after-enter=\"onAfterEnter\" ref=\"bottomSheet\">\n\t\t\t<DescriptionEditor\n\t\t\t\tref=\"editorComponent\"\n\t\t\t\t:taskId=\"taskId\"\n\t\t\t\t:doOpenInEditMode=\"doOpenInEditMode\"\n\t\t\t\t:isExpanded=\"isExpanded\"\n\t\t\t\t@expand=\"isExpanded = !isExpanded\"\n\t\t\t\t@show=\"handleShow\"\n\t\t\t\t@close=\"$emit('close')\"\n\t\t\t></DescriptionEditor>\n\t\t</BottomSheet>\n\t`,\n};\n","import { Dom, Event } from 'main.core';\nimport type { PopupOptions } from 'main.popup';\n\nimport { Popup } from 'ui.vue3.components.popup';\nimport { mapGetters } from 'ui.vue3.vuex';\n\nimport { Model } from 'tasks.v2.const';\nimport { TaskModel } from 'tasks.v2.model.tasks';\nimport { DescriptionEditor } from './description-editor';\nimport './description.css';\n\n// @vue/component\nexport const DescriptionPopup = {\n\tname: 'TaskDescriptionPopup',\n\tcomponents: {\n\t\tPopup,\n\t\tDescriptionEditor,\n\t},\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t\tisShown: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tdoOpenInEditMode: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: ['show', 'close', 'resize'],\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tresizeObserver: null,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tpopupHeight: 0,\n\t\t};\n\t},\n\tcomputed: {\n\t\tpopupId(): string\n\t\t{\n\t\t\treturn `tasks-field-description-popup-${this.taskId}`;\n\t\t},\n\t\tpopupOptions(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tclassName: 'tasks-card-description-popup',\n\t\t\t\tminHeight: 360,\n\t\t\t\tmaxHeight: this.popupMaxHeight,\n\t\t\t\twidth: 580,\n\t\t\t\toffsetTop: 0,\n\t\t\t\tpadding: 0,\n\t\t\t\tautoHide: false,\n\t\t\t\tcloseByEsc: false,\n\t\t\t\tanimation: {\n\t\t\t\t\tshowClassName: 'tasks-description-popup-show',\n\t\t\t\t\tcloseClassName: 'tasks-description-popup-close',\n\t\t\t\t\tcloseAnimationType: 'animation',\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\tonAfterShow: () => this.$refs.editorComponent.focusToEnd(),\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\tpopupMaxHeight(): number\n\t\t{\n\t\t\treturn document.body.offsetHeight - 120 - this.titleFieldOffsetHeight;\n\t\t},\n\t\ttask(): TaskModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/getById`](this.taskId);\n\t\t},\n\t\t...mapGetters({\n\t\t\ttitleFieldOffsetHeight: `${Model.Interface}/titleFieldOffsetHeight`,\n\t\t}),\n\t},\n\twatch: {\n\t\tasync titleFieldOffsetHeight(): Promise<void>\n\t\t{\n\t\t\tif (!this.$refs.popupComponent)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.resizeEditor();\n\t\t\tawait this.$nextTick();\n\t\t\tthis.onResize();\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tthis.resizeObserver = new ResizeObserver((entries) => {\n\t\t\tfor (const entry of entries)\n\t\t\t{\n\t\t\t\tif (entry.target === this.$refs.popupWrapper)\n\t\t\t\t{\n\t\t\t\t\tthis.onResize();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\tmounted(): void\n\t{\n\t\tEvent.bind(window, 'resize', this.onResize);\n\t},\n\tbeforeUnmount(): void\n\t{\n\t\tEvent.unbind(window, 'resize', this.onResize);\n\t},\n\tmethods: {\n\t\tonShow(): void\n\t\t{\n\t\t\tthis.resizeEditor();\n\t\t\tthis.$emit('show', { popupInstance: this.$refs.popupComponent.getPopupInstance() });\n\t\t\tthis.$refs.popupComponent?.getPopupInstance().adjustPosition();\n\t\t\tsetTimeout(() => this.resizeObserver.observe(this.$refs.popupWrapper), 300);\n\t\t},\n\t\tresizeEditor(): void\n\t\t{\n\t\t\tconst popupInstance = this.$refs.popupComponent?.getPopupInstance();\n\t\t\tconst popupContainer = popupInstance.getPopupContainer();\n\t\t\tthis.$refs.editorComponent.hideEditor();\n\t\t\tDom.style(popupContainer, 'min-height', 0);\n\t\t\tconst popupWithoutEditorHeight = popupContainer.clientHeight;\n\t\t\tconst additionalOffset = 240;\n\t\t\tconst maxHeight = document.body.clientHeight\n\t\t\t\t- popupWithoutEditorHeight\n\t\t\t\t- additionalOffset\n\t\t\t\t- this.titleFieldOffsetHeight\n\t\t\t;\n\t\t\tDom.style(popupContainer, 'min-height', '360px');\n\t\t\tthis.$refs.editorComponent.showEditor();\n\n\t\t\tthis.$refs.editorComponent.setMaxHeight(maxHeight);\n\n\t\t\tpopupInstance.setOffset();\n\t\t},\n\t\tonResize(): void\n\t\t{\n\t\t\tconst popupInstance = this.$refs.popupComponent?.getPopupInstance();\n\t\t\tif (popupInstance)\n\t\t\t{\n\t\t\t\tthis.$emit('resize');\n\t\t\t\tpopupInstance.adjustPosition();\n\t\t\t}\n\t\t},\n\t\tonClose(): void\n\t\t{\n\t\t\tthis.resizeObserver.disconnect();\n\t\t\tthis.$emit('close');\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Popup v-if=\"isShown\" :options=\"popupOptions\" ref=\"popupComponent\">\n\t\t\t<div class=\"tasks-card-description-popup-wrapper\" ref=\"popupWrapper\">\n\t\t\t\t<DescriptionEditor\n\t\t\t\t\tref=\"editorComponent\"\n\t\t\t\t\t:taskId=\"taskId\"\n\t\t\t\t\t:doOpenInEditMode=\"doOpenInEditMode\"\n\t\t\t\t\t@show=\"onShow\"\n\t\t\t\t\t@close=\"onClose\"\n\t\t\t\t></DescriptionEditor>\n\t\t\t</div>\n\t\t</Popup>\n\t`,\n};\n","import { Event } from 'main.core';\nimport type { TextEditorOptions } from 'ui.text-editor';\nimport { TextEditor, TextEditorComponent } from 'ui.text-editor';\n\nimport { TaskModel } from 'tasks.v2.model.tasks';\nimport { Model } from 'tasks.v2.const';\nimport { taskService } from 'tasks.v2.provider.service.task-service';\nimport { fileService } from 'tasks.v2.provider.service.file-service';\n\nimport { DefaultEditorOptions } from './default-editor-options';\nimport './description.css';\n\n// @vue/component\nexport const DescriptionInline = {\n\tname: 'TaskDescriptionInline',\n\tcomponents: {\n\t\tTextEditorComponent,\n\t},\n\tprops: {\n\t\ttaskId: {\n\t\t\ttype: [Number, String],\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\teditor: null,\n\t\t\tDefaultEditorOptions,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisFocused: false,\n\t\t\tisScrolledToTop: true,\n\t\t\tisScrolledToBottom: true,\n\t\t};\n\t},\n\tcomputed: {\n\t\ttask(): TaskModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Tasks}/getById`](this.taskId);\n\t\t},\n\t\ttaskDescription(): string\n\t\t{\n\t\t\treturn this.task.description;\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tconst additionalEditorOptions: TextEditorOptions = {\n\t\t\tminHeight: 20,\n\t\t\tmaxHeight: 112,\n\t\t\tplaceholder: this.loc('TASKS_V2_DESCRIPTION_INLINE_EDITOR_PLACEHOLDER'),\n\t\t\tcontent: this.taskDescription,\n\t\t\tevents: {\n\t\t\t\tonFocus: () => this.handleEditorFocus(),\n\t\t\t\tonBlur: () => this.handleEditorBlur(),\n\t\t\t\tonChange: () => this.handleEditorChange(),\n\t\t\t},\n\t\t};\n\t\tthis.editor = new TextEditor({ ...DefaultEditorOptions, ...additionalEditorOptions });\n\t\tEvent.bind(this.editor.getScrollerContainer(), 'scroll', this.handleScroll);\n\t},\n\tbeforeUnmount(): void\n\t{\n\t\tEvent.unbind(this.editor.getScrollerContainer(), 'scroll', this.handleScroll);\n\t},\n\tmethods: {\n\t\thasScroll(): boolean\n\t\t{\n\t\t\treturn !this.isScrolledToTop || !this.isScrolledToBottom;\n\t\t},\n\t\tasync handleEditorFocus(): void\n\t\t{\n\t\t\tthis.isFocused = true;\n\t\t},\n\t\tasync handleEditorBlur(): void\n\t\t{\n\t\t\tthis.isFocused = false;\n\n\t\t\tconst description = this.editor.getText();\n\t\t\tvoid taskService.update(\n\t\t\t\tthis.taskId,\n\t\t\t\t{ description },\n\t\t\t);\n\t\t},\n\t\thandleEditorChange(): void\n\t\t{\n\t\t\tthis.handleScroll();\n\t\t},\n\t\thandleScroll(): void\n\t\t{\n\t\t\tconst container = this.editor.getScrollerContainer();\n\t\t\tthis.isScrolledToTop = container.scrollTop === 0;\n\t\t\tthis.isScrolledToBottom = container.scrollTop + container.clientHeight >= container.scrollHeight - 5;\n\t\t},\n\t\tasync handlePaste(clipboardEvent: ClipboardEvent): void\n\t\t{\n\t\t\tif (!this.isFocused)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst service = fileService.get(this.taskId);\n\n\t\t\tvoid service.uploadFromClipboard({\n\t\t\t\tclipboardEvent,\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"tasks-card-description-inline\"\n\t\t\t:class=\"{ '--bottom-shadow': !isScrolledToBottom, '--top-shadow': !isScrolledToTop }\"\n\t\t\t:data-task-id=\"taskId\"\n\t\t\t:data-task-field-id=\"'description'\"\n\t\t\t@paste=\"handlePaste\"\n\t\t>\n\t\t\t<div class=\"tasks-card-description-inline-shadow --revert\" :class=\"{'--shown': !isScrolledToTop}\">\n\t\t\t\t<div class=\"tasks-card-description-inline-shadow-white\"/>\n\t\t\t\t<div class=\"tasks-card-description-inline-shadow-black\"/>\n\t\t\t</div>\n\t\t\t<TextEditorComponent :editor-instance=\"editor\"/>\n\t\t\t<div class=\"tasks-card-description-inline-shadow\" :class=\"{'--shown': !isScrolledToBottom}\">\n\t\t\t\t<div class=\"tasks-card-description-inline-shadow-white\"/>\n\t\t\t\t<div class=\"tasks-card-description-inline-shadow-black\"/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n"],"names":["DefaultEditorOptions","Object","freeze","toolbar","floatingToolbar","removePlugins","visualOptions","borderWidth","blockSpaceInline","colorBackground","mention","dialogOptions","entities","id","EntitySelectorEntity","User","options","emailUsers","inviteEmployeeLink","itemOptions","default","link","linkTitle","StructureNode","selectMode","allowFlatDepartments","copilot","copilotOptions","paragraphPlaceholder","ActionButton","components","BIcon","props","title","type","String","iconName","required","iconColor","setup","Outline","template","Copilot","name","computed","buttonColor","methods","handleClick","alert","Attach","Mention","DescriptionEditor","TextEditorComponent","HtmlFormatterComponent","Popup","Button","taskId","Number","doOpenInEditMode","Boolean","isExpanded","emits","editor","ButtonSize","ButtonColor","data","isEditMode","isWarningPopupShown","files","task","$store","getters","Model","Tasks","popupOptions","className","width","padding","autoHide","closeByEsc","overlay","readonly","rights","edit","created","additionalEditorOptions","minHeight","placeholder","loc","content","description","events","onChange","handleChange","file","mode","TextEditor","fileService","get","list","fileIds","dispatchCommand","Plugins","File","ADD_FILES_COMMAND","mounted","$emit","length","handleCloseIconClick","getText","setText","handleSaveButtonClick","taskService","update","handleCancelButtonClick","handleEditButtonClick","enableEdit","$nextTick","focusToEnd","adjustEditor","getMaxHeight","$refs","editorWrapper","offsetHeight","setMaxHeight","maxHeight","Dom","style","htmlFormatterComponent","$el","showEditor","show","hideEditor","hide","focus","defaultSelection","handlePopupOkButtonClick","handlePopupCancelButtonClick","onExpandClick","onMentionButtonClick","BX","UI","INSERT_MENTION_DIALOG_COMMAND","EditButton","iconSize","DescriptionPreview","isOverflowing","taskDescription","isMoreButtonShown","watch","updateIsOverflowing","setTimeout","htmlFormatter","onPreviewClick","event","target","closest","onEditButtonClick","onMoreButtonClick","DescriptionField","isSlotShown","onPreviewButtonClick","eventData","closeSlot","DescriptionSheet","BottomSheet","isShown","mapGetters","titleFieldOffsetHeight","Interface","bottomSheet","adjustPosition","editorComponent","onAfterEnter","handleShow","DescriptionPopup","resizeObserver","popupHeight","popupId","popupMaxHeight","offsetTop","animation","showClassName","closeClassName","closeAnimationType","onAfterShow","document","body","popupComponent","resizeEditor","onResize","ResizeObserver","entries","entry","popupWrapper","Event","bind","window","beforeUnmount","unbind","onShow","popupInstance","getPopupInstance","observe","popupContainer","getPopupContainer","popupWithoutEditorHeight","clientHeight","additionalOffset","setOffset","onClose","disconnect","DescriptionInline","isFocused","isScrolledToTop","isScrolledToBottom","onFocus","handleEditorFocus","onBlur","handleEditorBlur","handleEditorChange","getScrollerContainer","handleScroll","hasScroll","container","scrollTop","scrollHeight","handlePaste","clipboardEvent","service","uploadFromClipboard"],"mappings":"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"}