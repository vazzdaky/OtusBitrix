{"version":3,"file":"flow-service.bundle.js","sources":["../src/mappers.js","../src/flow-service.js","../src/index.js"],"sourcesContent":["import type { FlowModel } from 'tasks.v2.model.flows';\nimport type { FlowDto } from './types';\n\nexport function mapDtoToModel(flowDto: FlowDto): FlowModel\n{\n\treturn {\n\t\tid: flowDto.id,\n\t\tname: flowDto.name,\n\t\tefficiency: flowDto.efficiency,\n\t};\n}\n","import { Model } from 'tasks.v2.const';\nimport { Core } from 'tasks.v2.core';\nimport { apiClient } from 'tasks.v2.lib.api-client';\nimport { mapDtoToModel } from './mappers';\n\nclass FlowService\n{\n\tgetUrl(id: number, userId: number): string\n\t{\n\t\treturn `/company/personal/user/${userId}/tasks/flow/?ID_numsel=exact&ID_from=${id}&ID_to=${id}&apply_filter=Y`;\n\t}\n\n\tasync getFlow(id: number): Promise<void>\n\t{\n\t\ttry\n\t\t{\n\t\t\tconst data = await apiClient.post('Flow.get', { flow: { id } });\n\n\t\t\t// TODO: insert group\n\t\t\tconsole.log(data);\n\n\t\t\tconst flow = mapDtoToModel(data);\n\n\t\t\tawait Core.getStore().dispatch(`${Model.Flows}/insert`, flow);\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tconsole.error('FlowService: getFlow error', error);\n\t\t}\n\t}\n}\n\nexport const flowService = new FlowService();\n","import { mapDtoToModel } from './mappers';\n\nexport { flowService } from './flow-service';\nexport const FlowMappers = { mapDtoToModel };\nexport type { FlowDto } from './types';\n"],"names":["mapDtoToModel","flowDto","id","name","efficiency","FlowService","getUrl","userId","getFlow","data","apiClient","post","flow","console","log","Core","getStore","dispatch","Model","Flows","error","flowService","FlowMappers"],"mappings":";;;;;;;;CAGO,SAASA,aAAa,CAACC,OAAgB,EAC9C;GACC,OAAO;KACNC,EAAE,EAAED,OAAO,CAACC,EAAE;KACdC,IAAI,EAAEF,OAAO,CAACE,IAAI;KAClBC,UAAU,EAAEH,OAAO,CAACG;IACpB;CACF;;CCLA,MAAMC,WAAW,CACjB;GACCC,MAAM,CAACJ,EAAU,EAAEK,MAAc,EACjC;KACC,OAAQ,0BAAyBA,MAAO,wCAAuCL,EAAG,UAASA,EAAG,iBAAgB;;GAG/G,MAAMM,OAAO,CAACN,EAAU,EACxB;KACC,IACA;OACC,MAAMO,IAAI,GAAG,MAAMC,gCAAS,CAACC,IAAI,CAAC,UAAU,EAAE;SAAEC,IAAI,EAAE;WAAEV;;QAAM,CAAC;;;OAG/DW,OAAO,CAACC,GAAG,CAACL,IAAI,CAAC;OAEjB,MAAMG,IAAI,GAAGZ,aAAa,CAACS,IAAI,CAAC;OAEhC,MAAMM,kBAAI,CAACC,QAAQ,EAAE,CAACC,QAAQ,CAAE,GAAEC,oBAAK,CAACC,KAAM,SAAQ,EAAEP,IAAI,CAAC;MAC7D,CACD,OAAOQ,KAAK,EACZ;OACCP,OAAO,CAACO,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;;;CAGrD;AAEA,OAAaC,WAAW,GAAG,IAAIhB,WAAW,EAAE;;OC7B/BiB,WAAW,GAAG;GAAEtB;CAAc,CAAC;;;;;;;;;"}