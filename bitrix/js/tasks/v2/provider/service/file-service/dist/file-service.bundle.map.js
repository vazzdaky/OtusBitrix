{"version":3,"file":"file-service.bundle.map.js","names":["this","BX","Tasks","V2","Provider","exports","main_core_events","ui_uploader_core","ui_uploader_vue","disk_uploader_userFieldWidget","tasks_v2_const","tasks_v2_core","tasks_v2_lib_apiClient","tasks_v2_provider_service_taskService","mapDtoToModel","fileDto","serverFileId","id","serverId","type","name","size","width","height","isImage","isVideo","treatImageAsFile","downloadUrl","serverPreviewUrl","serverPreviewWidth","serverPreviewHeight","customData","EntityTypes","Object","freeze","Task","CheckListItem","_entityId","babelHelpers","classPrivateFieldLooseKey","_entityType","_menu","_loadedIds","_objectsIds","_promises","_adapter","_browseElement","_addFiles","_addLoadedIds","_addLoadedObjectsIds","_removeLoadedObjectsIds","_getIdsByObjectId","_updateEntity","_entityFileIds","FileService","EventEmitter","constructor","entityId","entityType","super","defineProperty","get","_get_entityFileIds","set","value","_updateEntity2","_getIdsByObjectId2","_removeLoadedObjectsIds2","_addLoadedObjectsIds2","_addLoadedIds2","_addFiles2","writable","Set","setEventNamespace","setEntityId","classPrivateFieldLooseBase","VueUploaderAdapter","getServiceKey","controller","imagePreviewHeight","imagePreviewWidth","imagePreviewQuality","treatOversizeImageAsFile","multiple","maxFileSize","subscribeFromOptions","event","item","file","getData","emit","fileIds","objectId","some","has","idsToRemove","filter","getEntityId","getAdapter","getFiles","getReactiveItems","isUploading","getItems","status","FileStatus","UPLOADING","LOADING","includes","browse","params","_babelHelpers$classPr","_babelHelpers$classPr2","UserFieldMenu","dialogId","uploader","getUploader","menuOptions","minWidth","animation","closeByEsc","bindOptions","forceBindPosition","forceTop","position","events","onPopupClose","onHideCallback","compact","show","bindElement","browseFiles","document","createElement","assignBrowse","click","browseMyDrive","openDiskFileDialog","destroy","unsubscribeAll","uploadFromClipboard","clipboardEvent","clipboardData","isFilePasted","preventDefault","files","getFilesFromDataTransfer","sync","ids","every","forEach","uploaderIds","Number","slice","push","removeFile","list","unloadedIds","length","Promise","all","promise","Resolvable","data","apiClient","post","map","objectsIds","values","newFiles","addFiles","resolve","error","console","$store","Core","getStore","add","objectIdToFind","entries","taskService","update","dispatch","Model","CheckList","fields","attachments","getters","services","fileService","_services$key","key","replace","tempId","oldKey","newKey","_services$key2","Service","Event","UI","Uploader","Disk","Const","Lib"],"sources":["file-service.bundle.js"],"mappings":"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","ignoreList":[]}