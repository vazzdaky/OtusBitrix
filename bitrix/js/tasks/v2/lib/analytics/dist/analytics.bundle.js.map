{"version":3,"file":"analytics.bundle.js","sources":["../src/analytics.js"],"sourcesContent":["import { sendData, type AnalyticsOptions } from 'ui.analytics';\nimport { FileOrigin } from 'ui.uploader.core';\n\nimport { Core } from 'tasks.v2.core';\nimport { Analytics, CardType } from 'tasks.v2.const';\nimport type { AnalyticsParams } from 'tasks.v2.application.task-card';\n\nexport const analytics = new class\n{\n\tsendOpenCard(params: AnalyticsParams, options: {\n\t\tcollabId: number,\n\t}): void\n\t{\n\t\tthis.#sendData({\n\t\t\tevent: Analytics.Event.ClickCreate,\n\t\t\ttype: Analytics.Type.TaskMini,\n\t\t\tc_section: params.context,\n\t\t\tc_sub_section: params.additionalContext,\n\t\t\tc_element: params.element,\n\t\t\tstatus: Analytics.Status.Success,\n\t\t\tp2: Core.getParams().analytics.userType,\n\t\t\t...(options.collabId ? { p4: Analytics.Params.CollabId(options.collabId) } : {}),\n\t\t});\n\t}\n\n\tsendOpenFullCard(params: AnalyticsParams): void\n\t{\n\t\tthis.#sendData({\n\t\t\tevent: Analytics.Event.FillTaskFormView,\n\t\t\ttype: Analytics.Type.TaskMini,\n\t\t\tc_section: params.context,\n\t\t\tc_sub_section: Analytics.SubSection.Full,\n\t\t\tc_element: Analytics.Element.FullFormButton,\n\t\t\tstatus: Analytics.Status.Success,\n\t\t});\n\t}\n\n\tsendAddTask(params: AnalyticsParams, options: {\n\t\tisSuccess: boolean,\n\t\tcollabId: number,\n\t\tviewersCount: number,\n\t\tcoexecutorsCount: number,\n\t}): void\n\t{\n\t\tthis.#sendData({\n\t\t\tevent: Analytics.Event.TaskCreate,\n\t\t\ttype: Analytics.Type.TaskMini,\n\t\t\tc_section: params.context,\n\t\t\tc_sub_section: params.additionalContext,\n\t\t\tc_element: params.element,\n\t\t\tstatus: options.isSuccess ? Analytics.Status.Success : Analytics.Status.Error,\n\t\t\tp2: Core.getParams().analytics.userType,\n\t\t\tp3: Analytics.Params.ViewersCount(options.viewersCount),\n\t\t\t...(options.collabId ? { p4: Analytics.Params.CollabId(options.collabId) } : {}),\n\t\t\tp5: Analytics.Params.CoexecutorsCount(options.coexecutorsCount),\n\t\t});\n\t}\n\n\tsendAddTaskWithCheckList(params: AnalyticsParams, options: {\n\t\tisSuccess: boolean,\n\t\tcollabId: number,\n\t\tviewersCount: number,\n\t\tchecklistCount: number,\n\t\tchecklistItemsCount: number,\n\t}): void\n\t{\n\t\tthis.#sendData({\n\t\t\tevent: Analytics.Event.TaskCreateWithChecklist,\n\t\t\ttype: Analytics.Type.TaskMini,\n\t\t\tc_section: params.context,\n\t\t\tc_sub_section: params.additionalContext,\n\t\t\tc_element: params.element,\n\t\t\tstatus: Analytics.Status.Success,\n\t\t\tp2: Core.getParams().analytics.userType,\n\t\t\tp3: Analytics.Params.ViewersCount(options.viewersCount),\n\t\t\t...(options.collabId ? { p4: Analytics.Params.CollabId(options.collabId) } : {}),\n\t\t\tp5: Analytics.Params.ChecklistCount(options.checklistCount, options.checklistItemsCount),\n\t\t});\n\t}\n\n\tsendDescription(params: AnalyticsParams, options: {\n\t\thasDescription: boolean,\n\t\thasScroll: boolean,\n\t}): void\n\t{\n\t\tthis.#sendData({\n\t\t\tevent: Analytics.Event.DescriptionTask,\n\t\t\ttype: Analytics.Type.TaskMini,\n\t\t\tc_section: params.context,\n\t\t\tc_sub_section: Analytics.SubSection.TaskCard,\n\t\t\tstatus: Analytics.Status.Success,\n\t\t\tp2: Analytics.Params.HasDescription(options.hasDescription),\n\t\t\tp3: Analytics.Params.HasScroll(options.hasScroll),\n\t\t});\n\t}\n\n\tsendAddProject(params: AnalyticsParams, options: {\n\t\tcardType: string,\n\t\tviewersCount: number,\n\t\tcoexecutorsCount: number,\n\t}): void\n\t{\n\t\tthis.#sendData({\n\t\t\tevent: Analytics.Event.AddProject,\n\t\t\ttype: this.#getTypeFromCardType(options.cardType),\n\t\t\tc_section: params.context,\n\t\t\tc_element: Analytics.Element.ProjectButton,\n\t\t\tstatus: Analytics.Status.Success,\n\t\t\tp3: Analytics.Params.ViewersCount(options.viewersCount),\n\t\t\tp5: Analytics.Params.CoexecutorsCount(options.coexecutorsCount),\n\t\t});\n\t}\n\n\tsendDeadlineSet(params: AnalyticsParams, options: {\n\t\tcardType: string,\n\t\telement: string,\n\t}): void\n\t{\n\t\tthis.#sendData({\n\t\t\tevent: Analytics.Event.DeadlineSet,\n\t\t\ttype: this.#getTypeFromCardType(options.cardType),\n\t\t\tc_section: params.context,\n\t\t\tc_sub_section: Analytics.SubSection.TaskCard,\n\t\t\tc_element: options.element,\n\t\t\tstatus: Analytics.Status.Success,\n\t\t});\n\t}\n\n\tsendAssigneeChange(params: AnalyticsParams, options: {\n\t\tcardType: string,\n\t}): void\n\t{\n\t\tthis.#sendData({\n\t\t\tevent: Analytics.Event.AssigneeChange,\n\t\t\ttype: this.#getTypeFromCardType(options.cardType),\n\t\t\tc_section: params.context,\n\t\t\tc_sub_section: Analytics.SubSection.TaskCard,\n\t\t\tc_element: Analytics.Element.ChangeButton,\n\t\t\tstatus: Analytics.Status.Success,\n\t\t});\n\t}\n\n\tsendAttachFile(params: AnalyticsParams, options: {\n\t\tcardType: string,\n\t\tcollabId: number,\n\t\tfileOrigin: string,\n\t\tfileSize: number,\n\t\tfileExtension: string,\n\t\tfilesCount: number,\n\t}): void\n\t{\n\t\tconst subSection = {\n\t\t\t[FileOrigin.CLIENT]: Analytics.SubSection.MyFiles,\n\t\t}[options.fileOrigin] ?? Analytics.SubSection.Bitrix24Files;\n\n\t\tthis.#sendData({\n\t\t\tevent: Analytics.Event.AttachFile,\n\t\t\ttype: this.#getTypeFromCardType(options.cardType),\n\t\t\tc_section: params.context,\n\t\t\tc_sub_section: subSection,\n\t\t\tc_element: Analytics.Element.UploadButton,\n\t\t\tstatus: Analytics.Status.Success,\n\t\t\tp1: Analytics.Params.FileSize(options.fileSize),\n\t\t\tp2: Core.getParams().analytics.userType,\n\t\t\tp3: Analytics.Params.FilesCount(options.filesCount),\n\t\t\t...(options.collabId ? { p4: Analytics.Params.CollabId(options.collabId) } : {}),\n\t\t\tp5: Analytics.Params.FileExtension(options.fileExtension),\n\t\t});\n\t}\n\n\tsendAddChecklist(params: AnalyticsParams, options: {\n\t\tcardType: string,\n\t\tisNewTask: boolean,\n\t\tviewersCount: number,\n\t\tchecklistPointsCount: number,\n\t\tcoexecutorsCount: number,\n\t}): void\n\t{\n\t\tthis.#sendData({\n\t\t\tevent: Analytics.Event.AddChecklist,\n\t\t\ttype: this.#getTypeFromCardType(options.cardType),\n\t\t\tc_section: params.context,\n\t\t\tc_sub_section: options.isNewTask ? Analytics.TaskState.New : Analytics.TaskState.Existing,\n\t\t\tc_element: Analytics.Element.CheckListButton,\n\t\t\tstatus: Analytics.Status.Success,\n\t\t\tp3: Analytics.Params.ViewersCount(options.viewersCount),\n\t\t\tp4: Analytics.Params.ChecklistPointsCount(options.checklistPointsCount),\n\t\t\tp5: Analytics.Params.CoexecutorsCount(options.coexecutorsCount),\n\t\t});\n\t}\n\n\t#sendData(data: AnalyticsOptions): void\n\t{\n\t\tsendData({\n\t\t\ttool: Analytics.Tool.Tasks,\n\t\t\tcategory: Analytics.Category.TaskOperations,\n\t\t\t...data,\n\t\t});\n\t}\n\n\t#getTypeFromCardType(cardType: string): string\n\t{\n\t\treturn {\n\t\t\t[CardType.Compact]: Analytics.Type.TaskMini,\n\t\t\t[CardType.Full]: Analytics.Type.Task,\n\t\t}[cardType];\n\t}\n}();\n"],"names":["analytics","sendOpenCard","params","options","event","Analytics","Event","ClickCreate","type","Type","TaskMini","c_section","context","c_sub_section","additionalContext","c_element","element","status","Status","Success","p2","Core","getParams","userType","collabId","p4","Params","CollabId","sendOpenFullCard","FillTaskFormView","SubSection","Full","Element","FullFormButton","sendAddTask","TaskCreate","isSuccess","Error","p3","ViewersCount","viewersCount","p5","CoexecutorsCount","coexecutorsCount","sendAddTaskWithCheckList","TaskCreateWithChecklist","ChecklistCount","checklistCount","checklistItemsCount","sendDescription","DescriptionTask","TaskCard","HasDescription","hasDescription","HasScroll","hasScroll","sendAddProject","AddProject","cardType","ProjectButton","sendDeadlineSet","DeadlineSet","sendAssigneeChange","AssigneeChange","ChangeButton","sendAttachFile","subSection","FileOrigin","CLIENT","MyFiles","fileOrigin","Bitrix24Files","AttachFile","UploadButton","p1","FileSize","fileSize","FilesCount","filesCount","FileExtension","fileExtension","sendAddChecklist","AddChecklist","isNewTask","TaskState","New","Existing","CheckListButton","ChecklistPointsCount","checklistPointsCount","data","sendData","tool","Tool","Tasks","category","Category","TaskOperations","CardType","Compact","Task"],"mappings":"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"}