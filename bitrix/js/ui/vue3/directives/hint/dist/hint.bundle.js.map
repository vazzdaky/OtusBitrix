{"version":3,"file":"hint.bundle.js","sources":["../src/tooltip.js","../src/directive.js"],"sourcesContent":["import { Tag, Text, Type } from 'main.core';\nimport { Popup, type PopupOptions } from 'main.popup';\n\nexport type HintParams = {\n\ttext: string,\n\thtml: string,\n\tpopupOptions: PopupOptions,\n\tposition: 'top',\n\ttimeout: number,\n};\n\nclass Tooltip\n{\n\tconstructor(): void\n\t{\n\t\tthis.popup = null;\n\t}\n\n\tshow(element: HTMLElement, params: HintParams): void\n\t{\n\t\tthis.hide();\n\n\t\tconst popupOptions: PopupOptions = {\n\t\t\tid: 'bx-vue-hint',\n\t\t\tbindElement: element,\n\t\t\tbindOptions: {\n\t\t\t\tposition: (params.position === 'top') ? 'top' : 'bottom',\n\t\t\t},\n\t\t\tcontent: Tag.render`\n\t\t\t\t<span class='ui-hint-content'>${this.#getText(element, params)}</span>\n\t\t\t`,\n\t\t\tdarkMode: true,\n\t\t\tautoHide: true,\n\t\t\tcacheable: false,\n\t\t\t...(params.popupOptions ?? null),\n\t\t};\n\n\t\tthis.popup = new Popup(popupOptions);\n\t\tthis.popup.show();\n\t}\n\n\thide(): void\n\t{\n\t\tthis.popup?.close();\n\t}\n\n\t#getText(element: HTMLElement, params: HintParams): string\n\t{\n\t\tif (Type.isStringFilled(params) && Type.isUndefined(element.dataset.hintHtml))\n\t\t{\n\t\t\treturn Text.encode(params);\n\t\t}\n\n\t\treturn params.html || Text.encode(params.text) || params;\n\t}\n}\n\nexport const tooltip = new Tooltip();\n","/**\n * Hint Vue directive\n *\n * @package bitrix\n * @subpackage ui\n * @copyright 2001-2025 Bitrix\n */\n\n/*\n\t<span v-hint=\"$Bitrix.Loc.getMessage('HINT_HTML')\" data-hint-html>Html code</span>\n\t<span v-hint=\"{text: 'Text node'}\">Plain text</span>\n\t<span v-hint=\"{html: '<b>Html</b> code'}\">Html code</span>\n\t<span v-hint=\"{text: 'Custom position top and light mode', position: 'top', popupOptions: {darkMode: false}}\">\n\t\tText top on light panel\n\t</span>\n*/\n\nimport { Event, Type } from 'main.core';\nimport 'ui.hint';\n\nimport { tooltip, type HintParams } from './tooltip';\nexport type { HintParams };\n\nexport const hint = {\n\tasync mounted(element: HTMLElement, { value }: { value: HintParams | Function }): Promise<void>\n\t{\n\t\tif (!value)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tEvent.bind(element, 'mouseenter', () => onMouseEnter(element, getParams(value)));\n\t\tEvent.bind(element, 'mouseleave', () => hideTooltip());\n\t\tEvent.bind(element, 'click', () => hideTooltip());\n\t},\n};\n\nlet showTimeout = null;\n\nfunction onMouseEnter(element: HTMLElement, params: HintParams): void\n{\n\tclearTimeouts();\n\tshowTimeout = setTimeout(() => showTooltip(element, params), params.timeout ?? 0);\n}\n\nfunction showTooltip(element: HTMLElement, params: HintParams): void\n{\n\tclearTimeouts();\n\ttooltip.show(element, params);\n}\n\nfunction hideTooltip(): void\n{\n\tclearTimeouts();\n\ttooltip.hide();\n}\n\nfunction clearTimeouts(): void\n{\n\tclearTimeout(showTimeout);\n}\n\nfunction getParams(value: HintParams | Function): HintParams\n{\n\treturn Type.isFunction(value) ? value() : value;\n}\n"],"names":["Tooltip","constructor","popup","show","element","params","hide","popupOptions","id","bindElement","bindOptions","position","content","Tag","render","darkMode","autoHide","cacheable","Popup","close","Type","isStringFilled","isUndefined","dataset","hintHtml","Text","encode","html","text","tooltip","hint","mounted","value","Event","bind","onMouseEnter","getParams","hideTooltip","showTimeout","clearTimeouts","setTimeout","showTooltip","timeout","clearTimeout","isFunction"],"mappings":"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"}