{"version":3,"file":"script.js","sources":["src/options.js","src/stress-level.js","src/theme-picker.js","src/ustat.js","src/user-login-history.js","src/hcmlink-salary-vacation.js","src/sign-document.js","src/otp.js","src/widget.js"],"sourcesContent":["export default class Options {\n\tstatic eventNameSpace = 'BX.Intranet.Userprofile:';\n}","import {Type, Tag, Loc, ajax, Text} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport Options from \"./options\";\n\ntype StressLevelResponse = {\n\tid: number,\n\tdate: string,\n\tvalue: number,\n\ttype: string,\n\ttypeDescription: string,\n\tcomment: string,\n\thash: string,\n\turl: {\n\t\tcheck: string,\n\t\tresult: string\n\t}\n};\nexport class StressLevel {\n\tconstructor() {\n\t}\n\n\tstatic getOpenSliderFunction(url)\n\t{\n\t\tif (Type.isStringFilled(url))\n\t\t{\n\t\t\treturn () => {\n\t\t\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, Options.eventNameSpace + 'onNeedToHide');\n\t\t\t\tBX.SidePanel.Instance.open(url, {\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\tdata: {},\n\t\t\t\t\twidth: 500\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn () => {};\n\t}\n\n\tstatic showData(data: StressLevelResponse): Element\n\t{\n\t\tdata.value = parseInt(data.value || 0);\n\n\t\tconst result = Tag.render`\n\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --vertical\" id=\"user-indicator-pulse\">\n\t\t\t\t<div class=\"system-auth-form__item-block --margin-bottom\">\n\t\t\t\t\t<div class=\"system-auth-form__stress-widget\">\n\t\t\t\t\t\t<div data-role=\"value-degree\" class=\"system-auth-form__stress-widget--arrow\" style=\"transform: rotate(90deg);\"></div>\n\t\t\t\t\t\t<div class=\"system-auth-form__stress-widget--content\">\n\t\t\t\t\t\t\t<div class=\"system-auth-form__stress-widget--content-title\">${Loc.getMessage('INTRANET_USER_PROFILE_STRESSLEVEL_NORESULT_INDICATOR_TEXT')}</div>\n\t\t\t\t\t\t\t<div data-role=\"value\" class=\"system-auth-form__stress-widget--content-progress ${data.value > 0 ? '' : '--empty'}\">0</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container --stress-widget-sp\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-block --center --width-100\">\n\t\t\t\t\t\t\t<span class=\"system-auth-form__stress-widget--status  --flex --${Text.encode(data.type)}\">${Text.encode(data.typeDescription)}</span>\n\t\t\t\t\t\t\t<span class=\"system-auth-form__icon-help\" onclick=\"${this.getOpenSliderFunction(data.url.result)}\"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"system-auth-form__item-title --link-dotted\" onclick=\"${this.getOpenSliderFunction(data.url.check)}\">${Loc.getMessage('INTRANET_USER_PROFILE_STRESSLEVEL_NORESULT_BUTTON')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"system-auth-form__item-block --flex --center\">\n\t\t\t\t\t<div class=\"system-auth-form__stress-widget--message\">${Text.encode(data.comment)}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\tsetTimeout(() => {\n\t\t\tconst intervalId = setInterval((value) => {\n\t\t\t\tvalue.current++;\n\t\t\t\tvalue.node.innerHTML = value.current;\n\t\t\t\tif (value.current >= value.end)\n\t\t\t\t{\n\t\t\t\t\tclearInterval(intervalId);\n\t\t\t\t}\n\t\t\t}, 600 / data.value, {\n\t\t\t\tcurrent: 0,\n\t\t\t\tend: data.value,\n\t\t\t\tnode: result.querySelector('[data-role=\"value\"]')\n\t\t\t});\n\t\t\tresult.querySelector('[data-role=\"value-degree\"]').style.transform = 'rotate(' + (1.8 * data.value) + 'deg)'\n\t\t}, 1000);\n\t\treturn result;\n\t}\n\n\tstatic showEmpty({url: {check}}): Element\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --vertical --empty-stress --clickable\" onclick=\"${this.getOpenSliderFunction(check)}\">\n\t\t\t\t<div class=\"system-auth-form__item-block --margin-bottom\">\n\t\t\t\t\t<div class=\"system-auth-form__stress-widget\">\n\t\t\t\t\t\t<div data-role=\"value-degree\" class=\"system-auth-form__stress-widget--arrow\" style=\"transform: rotate(90deg);\"></div>\n\t\t\t\t\t\t<div class=\"system-auth-form__stress-widget--content\">\n\t\t\t\t\t\t\t<div class=\"system-auth-form__stress-widget--content-title\">${Loc.getMessage('INTRANET_USER_PROFILE_STRESSLEVEL_NORESULT_INDICATOR_TEXT')}</div>\n\t\t\t\t\t\t\t<div data-role=\"value\" class=\"system-auth-form__stress-widget--content-progress --empty\">?</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container --stress-widget-sp\">\n\t\t\t\t\t\t<div class=\"system-auth-form__stress-widget--message\">${Loc.getMessage('INTRANET_USER_PROFILE_STRESSLEVEL_NORESULT_TITLE')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"system-auth-form__item-block --flex --center\">\n\t\t\t\t\t<div class=\"system-auth-form__item-title --link-dotted\">${Loc.getMessage('INTRANET_USER_PROFILE_STRESSLEVEL_NORESULT_BUTTON')}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"system-auth-form__item-new\">\n\t\t\t\t\t<div class=\"system-auth-form__item-new--title\">${Loc.getMessage('INTRANET_USER_PROFILE_STRESSLEVEL_RESULT_COME_ON')}</div>\n\t\t\t\t</div>\n\t\t\t</div>`;\n\t}\n\n\tstatic getPromise({signedParameters, componentName, userId, data}): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst promise = data ? Promise.resolve({data}) :\n\t\t\t\tajax.runAction('socialnetwork.api.user.stresslevel.get', {\n\t\t\t\t\tsignedParameters: signedParameters,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tc: componentName,\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tuserId: userId\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tpromise.then(({data}) => {\n\t\t\t\t\tif (data && data.id !== undefined && data.value !== undefined)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn resolve(this.showData(data));\n\t\t\t\t\t}\n\n\t\t\t\t\tconst node = Loc.getMessage('USER_ID') === userId ?\n\t\t\t\t\t\tthis.showEmpty(data) : document.createElement('DIV');\n\n\t\t\t\t\treturn resolve(node);\n\t\t\t\t})\n\t\t\t\t.catch((error: Error) => {\n\t\t\t\t\tresolve(this.showData({\n\t\t\t\t\t\tid: undefined,\n\t\t\t\t\t\tvalue: undefined,\n\t\t\t\t\t\turls: {\n\t\t\t\t\t\t\tcheck: undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t})\n\t\t\t})\n\t\t;\n\t}\n}","import {Tag, Loc, Type, Dom, ajax} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport Options from './options';\n\ntype ThemePickerData = {\n\tid: string,\n\tlightning: ?string,\n\ttitle: string,\n\tpreviewImage: string,\n\tpreviewColor: string\n};\n\nexport default class ThemePicker extends EventEmitter {\n\t#params: ThemePickerData;\n\n\t#container;\n\n\tconstructor(data: ThemePickerData)\n\t{\n\t\tsuper();\n\t\tthis.#params = Object.assign({}, data);\n\t\tthis.#params.lightning = String(data.id).indexOf('light:') === 0 ? 'light' : (\n\t\t\tString(data.id).indexOf('dark:') === 0 ? 'dark' : null\n\t\t);\n\t\tthis.applyTheme = this.applyTheme.bind(this);\n\t\tthis.setEventNamespace(Options.eventNameSpace);\n\t\tEventEmitter.subscribe(\n\t\t\t'BX.Intranet.Bitrix24:ThemePicker:onThemeApply',\n\t\t\t({data: {id, theme}}) =>\n\t\t\t{\n\t\t\t\tthis.#params.id =  id;\n\t\t\t\tthis.#params.lightning = String(id).indexOf('light:') === 0 ? 'light' : (\n\t\t\t\t\tString(id).indexOf('dark:') === 0 ? 'dark' : null\n\t\t\t\t);\n\t\t\t\tthis.#params.title = theme.title;\n\t\t\t\tthis.#params.previewImage = theme.previewImage;\n\t\t\t\tthis.#params.previewColor = theme.previewColor;\n\t\t\t\tthis.applyTheme();\n\t\t\t}\n\t\t)\n\t}\n\n\tapplyTheme()\n\t{\n\t\tconst container = this.getContainer();\n\n\t\tif (Type.isStringFilled(this.#params.previewImage) && this.#params.lightning)\n\t\t{\n\t\t\tcontainer.style.removeProperty('backgroundImage');\n\t\t\tcontainer.style.removeProperty('backgroundSize');\n\t\t\tcontainer.style.backgroundImage = 'url(\"' + this.#params.previewImage + '\")';\n\t\t\tcontainer.style.backgroundSize = 'cover';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcontainer.style.background = 'none';\n\t\t}\n\n\t\tif (Type.isStringFilled(this.#params.previewColor))\n\t\t{\n\t\t\tthis.getContainer().style.backgroundColor = this.#params.previewColor;\n\t\t}\n\n\t\tif (!this.#params.lightning)\n\t\t{\n\t\t\tcontainer.style.backgroundColor = 'rgba(255,255,255,1)';\n\t\t}\n\n\t\tDom.removeClass(container, '--light --dark');\n\t\tDom.addClass(container, '--' + this.#params.lightning);\n\t}\n\n\tgetContainer()\n\t{\n\t\tif (this.#container)\n\t\t{\n\t\t\treturn this.#container;\n\t\t}\n\n\t\tconst onclick = () => {\n\t\t\tBX.Intranet.Bitrix24.ThemePicker.Singleton.showDialog(false);\n\t\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, Options.eventNameSpace + ':onOpen');\n\t\t};\n\t\tthis.#container = Tag.render`\n\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --border ${this.#params.lightning ? '--' + this.#params.lightning : ''} --padding-sm\">\n\t\t\t\t<div class=\"system-auth-form__item-logo\">\n\t\t\t\t\t<div data-role=\"preview-color\" class=\"system-auth-form__item-logo--image --theme\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"system-auth-form__item-container --flex --column\">\n\t\t\t\t\t<div class=\"system-auth-form__item-title --white-space --block\">\n\t\t\t\t\t\t<span data-role=\"title\">${Loc.getMessage('AUTH_THEME_DIALOG')}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-content --margin-top-auto --center --center-force\">\n\t\t\t\t\t\t<div class=\"ui-qr-popupcomponentmaker__btn\" onclick=\"${onclick}\">${Loc.getMessage('INTRANET_USER_PROFILE_CHANGE')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>`;\n\t\tsetTimeout(this.applyTheme, 0);\n\t\treturn this.#container;\n\t}\n\n\tstatic getPromise()\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runComponentAction('bitrix:intranet.user.profile.button', 'getThemePickerData', {\n\t\t\t\tmode: 'class'\n\t\t\t}).then((response) => {\n\t\t\t\tconst themePicker = new this(response.data);\n\t\t\t\tresolve(themePicker.getContainer())\n\t\t\t}).catch((reject));\n\t\t});\n\t}\n}","import {Text, Type, Tag, Loc, ajax} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport Options from \"./options\";\ntype userPulseUserData = {\n\tFULL_NAME: string,\n\tAVATAR_SRC: string,\n\tID: string\n};\ntype userPulseData = {\n\tUSERS_RATING: {\n\t\tposition: number,\n\t\trange: number,\n\t\ttop: [\n\t\t\t{\n\t\t\t\tUSER_ID: string,\n\t\t\t\tACTIVITY: number\n\t\t\t}\n\t\t]\n\t},\n\tUSERS_INFO: userPulseUserData[]\n};\n\nexport default class Ustat {\n\tdata: userPulseData;\n\tconstructor(data) {\n\t\tthis.data = data;\n\t\tthis.onclickHandle = this.onclickHandle.bind(this);\n\t}\n\n\t#renderUsers()\n\t{\n\t\tconst userList = document.createDocumentFragment();\n\t\tlet myPosition = parseInt(this.data['USERS_RATING']['position']);\n\n\t\tlet myActivity = 0;\n\t\tconst usersData = Type.isPlainObject(this.data['USERS_RATING']['top'])\n\t\t\t? Object.values(this.data['USERS_RATING']['top']) : (\n\t\t\t\tType.isArray(this.data['USERS_RATING']['top']) && this.data['USERS_RATING']['top'].length > 0\n\t\t\t\t\t? [...this.data['USERS_RATING']['top']] : [{'USER_ID': Loc.getMessage('USER_ID'), ACTIVITY: 0}]);\n\t\tconst dataResult = myPosition > 5 ?\n\t\t\t[...usersData.slice(0, 3), ...usersData.slice(-1), null]\n\t\t\t: usersData\n\t\t;\n\t\tdataResult\n\t\t\t.forEach((userRating, index) => {\n\t\t\t\tif (userRating === null)\n\t\t\t\t{\n\t\t\t\t\tuserList.appendChild(Tag.render`<div class=\"system-auth-form__userlist-item --list\"></div>`);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet fullName = userRating['ACTIVITY'];\n\t\t\t\tlet avatarSrc = '';\n\t\t\t\tif (this.data['USERS_INFO'][userRating['USER_ID']])\n\t\t\t\t{\n\t\t\t\t\tfullName = [this.data['USERS_INFO'][userRating['USER_ID']]['FULL_NAME'], ': ', userRating['ACTIVITY']].join('');\n\t\t\t\t\tavatarSrc = String(this.data['USERS_INFO'][userRating['USER_ID']]['AVATAR_SRC']).length > 0\n\t\t\t\t\t\t? this.data['USERS_INFO'][userRating['USER_ID']]['AVATAR_SRC'] : null;\n\t\t\t\t}\n\t\t\t\tconst isCurrentUser = String(userRating['USER_ID']) === String(Loc.getMessage('USER_ID'));\n\t\t\t\tif (isCurrentUser)\n\t\t\t\t{\n\t\t\t\t\tmyActivity = userRating['ACTIVITY'];\n\t\t\t\t}\n\t\t\t\tuserList.appendChild(\n\t\t\t\t\tTag.render`\n\t\t\t\t\t\t<div title=\"${Text.encode(fullName)}\" class=\"system-auth-form__userlist-item ui-icon ui-icon ui-icon-common-user\">\n\t\t\t\t\t\t\t<i ${avatarSrc ? `style=\"background-image: url('${encodeURI(avatarSrc)}');background-size: cover;\"` : ''}></i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`\n\t\t\t\t);\n\t\t\t})\n\t\t;\n\t\treturn {\n\t\t\tuserList,\n\t\t\tmyPosition,\n\t\t\trange: parseInt(this.data['USERS_RATING']['range']),\n\t\t\tmyActivity\n\t\t};\n\t}\n\n\tshowData(): Element\n\t{\n\t\tconst {myPosition, userList, range} = this.#renderUsers();\n\t\tlet div;\n\t\tif (!this.data['ENABLED'])\n\t\t{\n\t\t\tdiv = Tag.render`\n\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --without-stat\">\n\t\t\t\t<div class=\"system-auth-form__item-container --flex --column\">\n\t\t\t\t\t<div class=\"system-auth-form__item-title\">${Loc.getMessage('INTRANET_USER_PROFILE_PULSE_TITLE')}</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container --center\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-title --lighter\" data-role=\"empty-info\">${Loc.getMessage('INTRANET_USER_PROFILE_DISABLED')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\t} else if (range > 0 && myPosition > 0)\n\t\t{\n\t\t\tdiv = Tag.render`\n\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --clickable\" onclick=\"${this.onclickHandle}\">\n\t\t\t\t<div class=\"system-auth-form__item-container\">\n\t\t\t\t\t<div class=\"system-auth-form__item-title --without-margin\">${Loc.getMessage('INTRANET_USER_PROFILE_PULSE_TITLE')}</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-title --link-light --margin-s\">\n\t\t\t\t\t\t<span>${Loc.getMessage('INTRANET_USER_PROFILE_PULSE_MY_RATING')}</span>\n\t\t\t\t\t\t<span class=\"system-auth-form__icon-help\" data-hint=\"${Loc.getMessage('INTRANET_USTAT_COMPANY_HELP_RATING')}\" data-hint-no-icon></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-title --link-light\" data-role=\"empty-info\">${Loc.getMessage('INTRANET_USER_PROFILE_PULSE_MY_IS_EMPTY')}</div>\n\n\t\t\t\t\t<div class=\"system-auth-form__item-title --white-space --margin-xl\">\n\t\t\t\t\t\t<span>${Loc.getMessage('INTRANET_USER_PROFILE_PULSE_MY_POSITION',\n\t\t\t\t{'#POSITION#': myPosition, '#AMONG#': range})}</span>\n\t\t\t\t\t\t<span class=\"system-auth-form__ustat-icon --up\"></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__userlist\">\n\t\t\t\t\t\t${userList}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst onclick = range > 0 ? this.onclickHandle : () => {};\n\t\t\tdiv = Tag.render`\n\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --without-stat ${range > 0 ? '--clickable' : ''}\" onclick=\"${onclick}\">\n\t\t\t\t<div class=\"system-auth-form__item-container --flex --column\">\n\t\t\t\t\t<div class=\"system-auth-form__item-title\">${Loc.getMessage('INTRANET_USER_PROFILE_PULSE_TITLE')}</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container --center\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-title --lighter\" data-role=\"empty-info\">${Loc.getMessage('INTRANET_USER_PROFILE_PULSE_MY_IS_EMPTY_BRIEF')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\t}\n\n\t\tBX.UI.Hint.init(div);\n\t\treturn div;\n\t}\n\n\tonclickHandle(event)\n\t{\n\t\tEventEmitter.emit(Options.eventNameSpace + 'onNeedToHide');\n\t\tif (window['openIntranetUStat'])\n\t\t{\n\t\t\topenIntranetUStat(event);\n\t\t}\n\t}\n\n\tshowWideData()\n\t{\n\t\tconst {myPosition, userList, range} = this.#renderUsers();\n\t\tconst div =  Tag.render`\n\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --center --padding-ustat ${range > 0 ? '--clickable' : '--without-stat'}\">\n\t\t\t\t<div class=\"system-auth-form__item-image\">\n\t\t\t\t\t<div class=\"system-auth-form__item-image--src --ustat\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"system-auth-form__item-container --overflow\">\n\t\t\t\t\t<div class=\"system-auth-form__item-title --xl --without-margin\">${Loc.getMessage('INTRANET_USER_PROFILE_PULSE_TITLE')}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"system-auth-form__item-container --block\">\n\t\t\t\t\t<div class=\"system-auth-form__item-title --link-light\" data-role=\"empty-info\">${Loc.getMessage('INTRANET_USER_PROFILE_PULSE_MY_IS_EMPTY')}</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container--inline\" data-role=\"my-position\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-title --link-light --without-margin --margin-right\">\n\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_USER_PROFILE_PULSE_MY_RATING')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"system-auth-form__item-title --white-space --margin-xl\">\n\t\t\t\t\t\t\t<span>${Loc.getMessage('INTRANET_USER_PROFILE_PULSE_MY_POSITION',\n\t\t\t{'#POSITION#': myPosition, '#AMONG#': range})}</span>\n\t\t\t\t\t\t\t<span class=\"system-auth-form__ustat-icon --up\"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__userlist\" data-role=\"user-list\">\n\t\t\t\t\t\t${userList}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"system-auth-form__icon-help --absolute-right-bottom\" data-hint=\"${Loc.getMessage('INTRANET_USTAT_COMPANY_HELP_RATING')}\" data-hint-no-icon></div>\n\t\t\t</div>\n\t\t`;\n\t\tif (range > 0)\n\t\t{\n\t\t\tdiv.addEventListener('click', this.onclickHandle);\n\t\t}\n\t\treturn div;\n\t}\n\n\tstatic getPromise({userId, isNarrow, data}): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t(data ?\n\t\t\t\tPromise.resolve({data}) :\n\t\t\t\tajax.runComponentAction(\n\t\t\t\t\t'bitrix:intranet.ustat.department',\n\t\t\t\t\t'getJson',\n\t\t\t\t\t{mode: 'class', data: {}}\n\t\t\t\t))\n\t\t\t\t.then(({data}) => {\n\t\t\t\t\tconst ustat = new this(data);\n\t\t\t\t\tresolve(isNarrow ? ustat.showData() : ustat.showWideData());\n\t\t\t\t})\n\t\t\t\t.catch((errors) => {\n\t\t\t\t\terrors = Type.isArray(errors) ? errors : [errors];\n\t\t\t\t\tconst node = document.createElement('ul');\n\t\t\t\t\terrors.forEach(({message}) => {\n\t\t\t\t\t\tconst errorNode = document.createElement('li');\n\t\t\t\t\t\terrorNode.innerHTML = message;\n\t\t\t\t\t\terrorNode.className = 'ui-alert-message';\n\t\t\t\t\t\tnode.appendChild(errorNode);\n\t\t\t\t\t});\n\t\t\t\t\tresolve(Tag.render`\n\t\t\t\t\t\t<div class=\"ui-alert ui-alert-danger\">\n\t\t\t\t\t\t\t${node}\n\t\t\t\t\t\t</div>`)\n\t\t\t\t});\n\n\t\t});\n\t}\n}\n","import { ajax, Dom, Loc, Tag } from 'main.core';\nimport { Loader } from 'main.loader';\nimport Widget from './widget';\n\nexport default class UserLoginHistory\n{\n\t#config: Object;\n\t#widget: Widget;\n\n\tconstructor(config: Object, widget: Widget)\n\t{\n\t\tthis.#config = config;\n\t\tthis.#widget = widget;\n\t}\n\n\t#isActive(): boolean\n\t{\n\t\treturn this.#config.isAvailableUserLoginHistory && this.#config.isConfiguredUserLoginHistory;\n\t}\n\n\t#isAvailable(): boolean\n\t{\n\t\treturn this.#config.isAvailableUserLoginHistory;\n\t}\n\n\t#isConfigured(): boolean\n\t{\n\t\treturn this.#config.isConfiguredUserLoginHistory;\n\t}\n\n\thandlerLogoutButton()\n\t{\n\t\tif (this.#isActive())\n\t\t{\n\t\t\tthis.#showLogoutPopup();\n\t\t}\n\t}\n\n\t#getMainButton(): ?HTMLElement\n\t{\n\t\tconst handlerLogoutButton = () => {\n\t\t\tthis.#showLogoutPopup();\n\t\t};\n\n\t\tconst showConfigureSlider = () => {\n\t\t\tthis.#widget.getPopup().close();\n\t\t\tBX.Helper.show('redirect=detail&code=16615982');\n\t\t};\n\n\t\tif (this.#isActive())\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-qr-popupcomponentmaker__btn\" onclick=\\\"${handlerLogoutButton}\\\">${Loc.getMessage('INTRANET_USER_PROFILE_HISTORY_BUTTON_LOGOUT_ALL_DEVICE')}</div>\n\t\t\t`;\n\t\t}\n\t\telse if(!this.#isConfigured())\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class='system-auth-form__settings' onclick=\"${showConfigureSlider}\">${Loc.getMessage('INTRANET_USER_PROFILE_CONFIGURE')}</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t#getBottomButton(handler: function): ?HTMLElement\n\t{\n\t\tif (this.#isActive())\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"system-auth-form__item-container\">\n\t\t\t\t\t<div class=\"system-auth-form__show-history\" onclick=\"${handler}\">\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_USER_PROFILE_HISTORY_BUTTON_SHOW_FULL_LIST')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t#getLockIcon(): ?HTMLElement\n\t{\n\t\tconst showInfoSlider = () => {\n\t\t\tthis.#widget.getPopup().close();\n\t\t\tBX.UI.InfoHelper.show(\"limit_office_login_history\");\n\t\t};\n\n\t\tif (!this.#isAvailable())\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"system-auth-form__item-title-logo --lock\" onclick=\"${showInfoSlider}\">\n\t\t\t\t\t<i></i>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetContainer(): Element\n\t{\n\t\tconst showSliderLoginHistory = () => {\n\t\t\tif (this.#isActive())\n\t\t\t{\n\t\t\t\tthis.#widget.getPopup().close();\n\t\t\t\tBX.SidePanel.Instance.open(this.#config.url, {\n\t\t\t\t\tallowChangeHistory: false,\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (!this.#isAvailable())\n\t\t\t{\n\t\t\t\tthis.#widget.getPopup().close();\n\t\t\t\tBX.UI.InfoHelper.show(\"limit_office_login_history\");\n\t\t\t}\n\t\t};\n\n\t\tlet loginHistoryWidget = Tag.render`\n\t\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --vertical --padding-sm\">\n\t\t\t\t\t<div class=\"system-auth-form__item-container --center ${this.#isActive() ? '--border' : ''}\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-logo\">\n\t\t\t\t\t\t\t<div class=\"system-auth-form__item-logo--image ${this.#isActive() ? '--history' : '--history-gray'}\" onclick=\"${showSliderLoginHistory}\">\n\t\t\t\t\t\t\t\t<i></i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"system-auth-form__item-container --center\">\n\t\t\t\t\t\t\t<div class=\"system-auth-form__item-title ${this.#isActive() ? '--sm --link' : '--light'}\" onclick=\"${showSliderLoginHistory}\">${Loc.getMessage('INTRANET_USER_PROFILE_HISTORY_TITLE')}</div>\n\t\t\t\t\t\t\t${this.#getLockIcon()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"system-auth-form__item-content\">\n\t\t\t\t\t\t\t${this.#getMainButton()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__visited\">\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.#getBottomButton(showSliderLoginHistory)}\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\tconst container = loginHistoryWidget.querySelector('.system-auth-form__visited');\n\n\t\tif (this.#isActive())\n\t\t{\n\t\t\tconst loader = UserLoginHistory.#getLoader();\n\t\t\tloader.show(container);\n\n\t\t\tajax.runComponentAction('bitrix:intranet.user.login.history', 'getListLastLogin', {\n\t\t\t\tmode: 'class',\n\t\t\t\tdata: {\n\t\t\t\t\tlimit: 1,\n\t\t\t\t},\n\t\t\t}).then((response) => {\n\t\t\t\tloader.hide();\n\t\t\t\tconst devices = response.data;\n\t\t\t\tconst keys = Object.keys(devices);\n\t\t\t\tkeys.forEach((key) => {\n\t\t\t\t\tconst description = UserLoginHistory.#prepareDescriptionLoginHistory(devices[key]['DEVICE_PLATFORM'],\n\t\t\t\t\t\tdevices[key]['GEOLOCATION'], devices[key]['BROWSER']);\n\t\t\t\t\tconst time = UserLoginHistory.#prepareDateTimeForLoginHistory(devices[key]['LOGIN_DATE']);\n\t\t\t\t\tconst device = Tag.render`\n\t\t\t\t\t\t<div class=\"system-auth-form__visited-item\">\n\t\t\t\t\t\t\t<div data-hint='${Loc.getMessage('INTRANET_USER_PROFILE_HISTORY_BUTTON_LOGOUT_THIS_DEVICE_DESCRIPTION')}' class=\"system-auth-form__visited-icon --${devices[key]['DEVICE_TYPE']}\" onclick=\"${showSliderLoginHistory}\" data-hint-no-icon></div>\n\t\t\t\t\t\t\t<script>\n\t\t\t\t\t\t\t\tBX.ready(() => {\n\t\t\t\t\t\t\t\t\tBX.UI.Hint.init(document.querySelector(\".system-auth-form__visited-icon --${devices[key]['DEVICE_TYPE']}\"));\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t</script>\n\t\t\t\t\t\t\t<div class=\"system-auth-form__visited-text\" onclick=\"${showSliderLoginHistory}\">${description}</div>\n\t\t\t\t\t\t\t<div class=\"system-auth-form__visited-time\" onclick=\"${showSliderLoginHistory}\">${time}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`;\n\t\t\t\t\tDom.append(device, container);\n\t\t\t\t});\n\t\t\t}).catch(() => {\n\t\t\t\tloader.hide();\n\t\t\t});\n\t\t}\n\n\t\treturn loginHistoryWidget;\n\t}\n\n\t#showLogoutPopup(): void\n\t{\n\t\tBX.UI.Dialogs.MessageBox.show({\n\t\t\tmessage: Loc.getMessage('INTRANET_USER_PROFILE_HISTORY_BUTTON_LOGOUT_ALL_DEVICE_WITHOUT_THIS_MESSAGE'),\n\t\t\ttitle: Loc.getMessage('INTRANET_USER_PROFILE_HISTORY_BUTTON_LOGOUT_ALL_DEVICE_TITLE'),\n\t\t\tbuttons: BX.UI.Dialogs.MessageBoxButtons.YES_CANCEL,\n\t\t\tminWidth: 400,\n\t\t\tpopupOptions: {\n\t\t\t\tcontentBackground: 'transparent',\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tpadding: 0,\n\t\t\t\tbackground: '',\n\t\t\t\tevents: {\n\t\t\t\t\tonShow: () => {\n\t\t\t\t\t\tthis.#widget.getPopup().getPopup().setAutoHide(false);\n\t\t\t\t\t},\n\t\t\t\t\tonPopupClose: () => {\n\t\t\t\t\t\tthis.#widget.getPopup().getPopup().setAutoHide(true);\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t},\n\t\t\tonYes: (messageBox) => {\n\t\t\t\tajax.runComponentAction('bitrix:intranet.user.profile.password', 'logout', {\n\t\t\t\t\tmode: 'ajax',\n\t\t\t\t}).then(() => {\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\t\tcontent: Loc.getMessage('INTRANET_USER_PROFILE_HISTORY_BUTTON_LOGOUT_ALL_DEVICE_WITHOUT_THIS_RESULT'),\n\t\t\t\t\t\tautoHideDelay: 1800,\n\t\t\t\t\t});\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\t\tcontent: Loc.getMessage('INTRANET_USER_PROFILE_HISTORY_BUTTON_LOGOUT_ALL_DEVICE_ERROR'),\n\t\t\t\t\t\tautoHideDelay: 3600,\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\tstatic #prepareDescriptionLoginHistory(deviceType: string, geolocation: string, browser: string): string\n\t{\n\t\tconst arrayDescription = [];\n\n\t\tif(browser)\n\t\t{\n\t\t\tarrayDescription.push(browser);\n\t\t}\n\n\t\tif(geolocation)\n\t\t{\n\t\t\tarrayDescription.push(geolocation);\n\t\t}\n\n\t\tif(deviceType)\n\t\t{\n\t\t\tarrayDescription.push(deviceType);\n\t\t}\n\n\t\treturn arrayDescription.join(', ');\n\t}\n\n\tstatic #getLoader(): Loader\n\t{\n\t\treturn new Loader({\n\t\t\tsize: 20,\n\t\t\tmode: 'inline',\n\t\t});\n\t}\n\n\tstatic #prepareDateTimeForLoginHistory(dateTime: string): string\n\t{\n\t\tconst format = [\n\t\t\t['-', 'd.m.Y H:i:s'],\n\t\t\t['s', 'sago'],\n\t\t\t['i', 'iago'],\n\t\t\t['H', 'Hago'],\n\t\t\t['d', 'dago'],\n\t\t\t['m', 'mago'],\n\t\t];\n\t\treturn ' - ' + BX.date.format(format, new Date(dateTime), new Date());\n\t}\n}","import { Loc, Tag, Dom, Event, Runtime } from 'main.core';\nimport { BaseCache, MemoryCache } from 'main.core.cache';\nimport { Widget } from './index';\n\nexport class HcmLinkSalaryVacation\n{\n\tstatic #hidden: boolean = true;\n\tstatic #disabled: boolean = false;\n\n\tstatic #cache: BaseCache<any> = new MemoryCache();\n\n\tstatic #salaryVacationMenu: Object | null;\n\n\tstatic async load(): Promise<void>\n\t{\n\t\ttry\n\t\t{\n\t\t\tconst { SalaryVacationMenu } = await Runtime.loadExtension('humanresources.hcmlink.salary-vacation-menu');\n\t\t\tthis.#salaryVacationMenu = new SalaryVacationMenu();\n\n\t\t\tawait this.#salaryVacationMenu.load();\n\n\t\t\tthis.#hidden = this.#salaryVacationMenu.isHidden();\n\t\t\tthis.#disabled = this.#salaryVacationMenu.isDisabled();\n\n\t\t}\n\t\tcatch (e) {}\n\t}\n\n\tstatic getLayout(): ?HTMLElement\n\t{\n\t\tif (this.#hidden)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst disabled = this.#disabled;\n\n\t\treturn this.#cache.remember('hcmLinkSalaryVacationLayout', () => {\n\t\t\tconst layout = Tag.render`\n\t\t\t\t<div class=\"system-auth-form__scope system-auth-form__hcmlink ${disabled ? '--disabled' : ''}\"\n\t\t\t\t\t${disabled ? `data-hint=\"${this.#getDisabledHintHtml()}\"`: ''}\n\t\t\t\t\tdata-hint-no-icon\n\t\t\t\t\tdata-hint-html\n\t\t\t\t\tdata-hint-interactivity\n\t\t\t\t>\n\t\t\t\t\t<div class=\"system-auth-form__item-container --flex\" style=\"flex-direction:row;\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-logo\">\n\t\t\t\t\t\t\t<div class=\"system-auth-form__item-logo--image --hcmlink\">\n\t\t\t\t\t\t\t\t<i></i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"system-auth-form__item-title\">\n\t\t\t\t\t\t\t<span>${Loc.getMessage('INTRANET_USER_PROFILE_SIGNDOCUMENT_HCMLINK_SALARY_VACATION')}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${HcmLinkSalaryVacation.#getMenuButton()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tif (!disabled)\n\t\t\t{\n\t\t\t\tDom.addClass(layout, '--clickable');\n\t\t\t\tEvent.bind(layout, 'click', () => {\n\t\t\t\t\tthis.#salaryVacationMenu?.show(this.#getMenuButton());\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn layout;\n\t\t});\n\t}\n\n\tstatic #getMenuButton(): HTMLElement\n\t{\n\t\treturn this.#cache.remember('hcmLinkSalaryVacationMenuButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"system-auth-form__btn--hcmlink ui-icon-set --chevron-right\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tstatic #getDisabledHintHtml(): string\n\t{\n\t\treturn Loc.getMessage('INTRANET_USER_PROFILE_SIGNDOCUMENT_HCMLINK_SALARY_VACATION_DISABLED', {\n\t\t\t'[LINK]': `\n\t\t\t\t<a target='_self'\n\t\t\t\t\tonclick='(() => {\n\t\t\t\t\t\tBX.Intranet.UserProfile.Widget.getInstance()?.hide();\n\t\t\t\t\t\tBX.Helper.show(\\`redirect=detail&code=23343028\\`);\n\t\t\t\t\t})()'\n\t\t\t\t\tstyle='cursor:pointer;'\n\t\t\t\t>\n\t\t\t`,\n\t\t\t'[/LINK]': '</a>',\n\t\t});\n\t}\n\n\tstatic closeWidget(): void\n\t{\n\t\tWidget.getInstance()?.hide();\n\t}\n}","import { Loc, Runtime, Tag } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { BaseCache, MemoryCache } from 'main.core.cache';\nimport { type AnalyticsOptions } from 'sign.v2.analytics';\nimport type { B2EEmployeeSignSettings } from 'sign.v2.b2e.sign-settings-employee';\n\nimport 'ui.hint';\nimport { HcmLinkSalaryVacation } from './hcmlink-salary-vacation';\n\nconst analyticsContext: Partial<AnalyticsOptions> = {\n\tcategory: 'documents',\n\tc_section: 'ava_menu',\n\ttype: 'from_employee',\n};\n\nexport class SignDocument\n{\n\tstatic events: Record<string, string> = {\n\t\tonDocumentCreateBtnClick: 'onDocumentCreateBtnClick',\n\t};\n\n\tstatic #b2eEmployeeSignSettings: B2EEmployeeSignSettings;\n\n\tstatic #container = Tag.render`<div id=\"sign-b2e-employee-settings-container\"></div>`;\n\tstatic #cache: BaseCache<any> = new MemoryCache();\n\n\tstatic async getPromise(isLocked: boolean): Promise<HTMLElement>\n\t{\n\t\tconst { B2EEmployeeSignSettings } = await Runtime.loadExtension('sign.v2.b2e.sign-settings-employee');\n\t\tSignDocument.#b2eEmployeeSignSettings = new B2EEmployeeSignSettings(SignDocument.#container.id, analyticsContext);\n\n\t\ttry\n\t\t{\n\t\t\tawait HcmLinkSalaryVacation.load();\n\t\t}\n\t\tcatch (e) {}\n\n\t\treturn SignDocument.#getLayout(isLocked);\n\t}\n\n\tstatic #getLayout(isLocked: boolean): HTMLElement\n\t{\n\t\tconst lockedClass = isLocked ? ' --lock' : '';\n\n\t\treturn this.#cache.remember('layout', () => {\n\t\t\tconst layout = Tag.render`\n\t\t\t\t<div>\n\t\t\t\t\t<div class=\"system-auth-form__scope system-auth-form__sign\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-container --flex\" style=\"flex-direction:row;\">\n\t\t\t\t\t\t\t<div class=\"system-auth-form__item-logo\">\n\t\t\t\t\t\t\t\t<div class=\"system-auth-form__item-logo--image --sign\">\n\t\t\t\t\t\t\t\t\t<i></i>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"system-auth-form__item-title\">\n\t\t\t\t\t\t\t\t<span>${Loc.getMessage('INTRANET_USER_PROFILE_SIGNDOCUMENT_TITLE')}</span>\n\t\t\t\t\t\t\t\t<span class=\"system-auth-form__item-title --link-light --margin-s\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_USER_PROFILE_SIGNDOCUMENT_TITLE_HINT')}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"system-auth-form__btn--sign ui-popupcomponentmaker__btn --medium --border${lockedClass}\" onclick=\"${() => SignDocument.#onCreateDocumentBtnClick(isLocked)}\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_USER_PROFILE_SIGNDOCUMENT_CREATE_DOCUMENT')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${HcmLinkSalaryVacation.getLayout()}\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tif (BX.UI.Hint)\n\t\t\t{\n\t\t\t\tBX.UI.Hint.init(layout);\n\t\t\t}\n\n\t\t\treturn layout;\n\t\t});\n\t}\n\n\tstatic #onCreateDocumentBtnClick(isLocked: boolean): void\n\t{\n\t\tEventEmitter.emit(SignDocument, SignDocument.events.onDocumentCreateBtnClick);\n\t\tif (isLocked)\n\t\t{\n\t\t\ttop.BX.UI.InfoHelper.show('limit_office_e_signature');\n\n\t\t\treturn;\n\t\t}\n\t\tconst container = SignDocument.#container;\n\n\t\tBX.SidePanel.Instance.open('sign-b2e-settings-init-by-employee', {\n\t\t\twidth: 750,\n\t\t\tcacheable: false,\n\t\t\tcontentCallback: () => {\n\t\t\t\tcontainer.innerHTML = '';\n\n\t\t\t\treturn container;\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonLoad: () => {\n\t\t\t\t\tSignDocument.#b2eEmployeeSignSettings.clearCache();\n\t\t\t\t\tSignDocument.#b2eEmployeeSignSettings.render();\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n}\n","import {Loc, Tag, Text, Uri} from \"main.core\";\nimport {Menu} from \"main.popup\";\nimport {BaseEvent, EventEmitter} from \"main.core.events\";\nimport Options from \"./options\";\n\nexport class Otp\n{\n\tisSingle: boolean;\n\tconfig;\n\n\tconstructor(isSingle: boolean = false, config)\n\t{\n\t\tthis.isSingle = isSingle;\n\t\tthis.config = config;\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\tconst isInstalled = this.config.IS_ACTIVE === 'Y';\n\t\tconst onclick = () => {\n\t\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, Options.eventNameSpace + ':onOpen');\n\t\t\tif (String(this.config.URL).length > 0)\n\t\t\t{\n\t\t\t\tUri.addParam(this.config.URL, {page: 'otpConnected'});\n\t\t\t\tBX.SidePanel.Instance.open(Uri.addParam(this.config.URL, {page: 'otpConnected'}), {width: 1100});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconsole.error('Otp page is not defined. Check the component params');\n\t\t\t}\n\t\t};\n\t\tconst button = isInstalled ?\n\t\t\tTag.render`<div class=\"ui-qr-popupcomponentmaker__btn\" style=\"margin-top: auto\" onclick=\"${onclick}\">${Loc.getMessage('INTRANET_USER_PROFILE_TURNED_ON')}</div>`\n\t\t\t:\n\t\t\tTag.render`<div class=\"ui-qr-popupcomponentmaker__btn\" style=\"margin-top: auto\" onclick=\"${onclick}\">${Loc.getMessage('INTRANET_USER_PROFILE_TURN_ON')}</div>`;\n\t\tconst onclickHelp = () => {\n\t\t\ttop.BX.Helper.show('redirect=detail&code=17728602');\n\t\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, Options.eventNameSpace + ':onOpen');\n\t\t};\n\t\tif (this.isSingle !== true)\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --padding-bottom-10 ${isInstalled ? ' --active' : ''}\">\n\t\t\t\t\t<div class=\"system-auth-form__item-logo\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-logo--image --authentication\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container --flex --column --flex-start\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-title --without-margin --block\">\n\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_USER_PROFILE_OTP_MESSAGE')}\n\t\t\t\t\t\t\t<span class=\"system-auth-form__icon-help --inline\" onclick=\"${onclickHelp}\"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${isInstalled ?\n\t\t\t\t\t\t\tTag.render`\n\t\t\t\t\t\t\t\t<div class=\"system-auth-form__item-title --link-dotted\" onclick=\"${onclick}\">${Loc.getMessage('INTRANET_USER_PROFILE_CONFIGURE')}</div>\n\t\t\t\t\t\t\t` : ''\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<div class=\"system-auth-form__item-content --margin-top-auto --center --center-force\">\n\t\t\t\t\t\t\t${button}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${isInstalled ? '' : `\n\t\t\t\t\t\t<div class=\"system-auth-form__item-new\">\n\t\t\t\t\t\t\t<div class=\"system-auth-form__item-new--title\">${Loc.getMessage('INTRANET_USER_PROFILE_OTP_TITLE')}</div>\n\t\t\t\t\t\t</div>`\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\tlet menuPopup = null;\n\t\tconst popupClick = (event: MouseEvent) => {\n\t\t\tevent.stopPropagation();\n\t\t\tconst items = [\n\t\t\t\t{\n\t\t\t\t\ttext: Loc.getMessage('INTRANET_USER_PROFILE_CONFIGURE'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tmenuPopup.close();\n\t\t\t\t\t\tonclick();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t];\n\t\t\tmenuPopup = (menuPopup || (new Menu(`menu-otp-${Text.getRandom()}`, event.target, items, {\n\t\t\t\tclassName: 'system-auth-form__popup',\n\t\t\t\tangle: true,\n\t\t\t\toffsetLeft: 10,\n\t\t\t\tautoHide: true,\n\t\t\t\tevents: {\n\t\t\t\t\tonShow: (popup) => {\n\t\t\t\t\t\tEventEmitter.emit(\n\t\t\t\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\t\t\t\tOptions.eventNameSpace + ':showOtpMenu',\n\t\t\t\t\t\t\tnew BaseEvent({\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tpopup: popup.target,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t})));\n\t\t\tmenuPopup.toggle();\n\t\t};\n\t\treturn Tag.render`\n\t\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --padding-sm-all ${isInstalled ? ' --active' : ''} --vertical --center\">\n\t\t\t\t\t<div class=\"system-auth-form__item-logo --margin-bottom --center system-auth-form__item-container --flex\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-logo--image --authentication\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container --flex\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-title --light --center --s\">\n\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_USER_PROFILE_OTP_MESSAGE')}\n\t\t\t\t\t\t\t <span class=\"system-auth-form__icon-help\" onclick=\"${onclickHelp}\"></span> \n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${isInstalled ? Tag.render`<div class=\"system-auth-form__config --absolute\" onclick=\"${popupClick}\"></div>` : ''}\n\t\t\t\t\t<div class=\"system-auth-form__item-container --flex --column --space-around\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-content --flex --display-flex\">\n\t\t\t\t\t\t\t${button}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${isInstalled ? '' : `\n\t\t\t\t\t\t<div class=\"system-auth-form__item-new system-auth-form__item-new-icon --ssl\">\n\t\t\t\t\t\t\t<div class=\"system-auth-form__item-new--title\">${Loc.getMessage('INTRANET_USER_PROFILE_OTP_TITLE')}</div>\n\t\t\t\t\t\t</div>`\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t`;\n\t}\n}","import {Uri, Type, Tag, Cache, Loc, Browser, Text, Dom, ajax, Event} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport { AvatarRoundGuest } from 'ui.avatar';\nimport {PopupComponentsMaker} from 'ui.popupcomponentsmaker';\nimport {StressLevel} from './stress-level';\nimport ThemePicker from './theme-picker';\nimport {Menu} from 'main.popup';\nimport 'main.qrcode';\nimport Options from \"./options\";\nimport Ustat from \"./ustat\";\nimport UserLoginHistory from './user-login-history';\nimport { SignDocument } from './sign-document';\nimport {QrAuthorization} from \"ui.qrauthorization\";\nimport {Otp} from \"./otp\";\nimport {DesktopApi} from 'im.v2.lib.desktop-api';\n\nconst widgetMarker = Symbol('user.widget');\nexport default class Widget extends EventEmitter\n{\n\t#container: Element;\n\t#popup: ?PopupComponentsMaker;\n\t#profile = null;\n\t#features = {};\n\t#cache = new Cache.MemoryCache();\n\t#desktopDownloadLinks: {\n\t\twindows: string,\n\t\tmacos: string,\n\t\tlinuxDeb: string,\n\t\tlinuxRpm: string,\n\t};\n\t#networkProfileUrl;\n\n\tconstructor(container, {\n\t\tprofile: {ID, FULL_NAME, PHOTO, MASK, STATUS, STATUS_CODE, URL, WORK_POSITION},\n\t\tcomponent: {componentName, signedParameters},\n\t\tfeatures,\n\t\tdesktopDownloadLinks,\n\t\tnetworkProfileUrl,\n\t})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace(Options.eventNameSpace);\n\t\tthis.#setEventHandlers();\n\t\tthis.#container = container;\n\t\tthis.#profile = {ID, FULL_NAME, PHOTO, MASK, STATUS, STATUS_CODE, URL, WORK_POSITION};\n\t\tthis.#features = features;\n\t\tif (!Type.isStringFilled(this.#features.browser))\n\t\t{\n\t\t\tthis.#features.browser =\n\t\t\t\t(Browser.isLinux() ? 'Linux'\n\t\t\t\t: (Browser.isWin() ? 'Windows' : 'MacOs')\n\t\t\t\t)\n\t\t\t;\n\t\t}\n\t\tthis.#desktopDownloadLinks = desktopDownloadLinks;\n\t\tthis.#networkProfileUrl = networkProfileUrl;\n\n\t\tthis.#cache.set('componentParams', {componentName, signedParameters});\n\t\tthis.hide = this.hide.bind(this);\n\t}\n\n\ttoggle()\n\t{\n\t\tif (this.getPopup().isShown())\n\t\t{\n\t\t\tthis.hide();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.show();\n\t\t}\n\t}\n\n\thide()\n\t{\n\t\tthis.getPopup().close();\n\t}\n\n\tshow()\n\t{\n\t\tthis.getPopup().show();\n\t}\n\n\tgetPopup(): PopupComponentsMaker\n\t{\n\t\tif (this.#popup)\n\t\t{\n\t\t\treturn this.#popup;\n\t\t}\n\t\tthis.emit('init');\n\t\tlet signDocument = Type.isNull(this.#getSignDocument())\n\t\t\t? null\n\t\t\t: {\n\t\t\t\thtml: this.#getSignDocument(),\n\t\t\t}\n\t\t;\n\t\tlet content = [\n\t\t\tthis.#getProfileContainer(),\n\t\t\t(this.#getAdminPanelContainer() ? {\n\t\t\t\thtml: this.#getAdminPanelContainer(),\n\t\t\t\tbackgroundColor: '#fafafa'\n\t\t\t} : null),\n\t\t\tsignDocument,\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\thtml: this.#getThemeContainer(),\n\t\t\t\t\tmarginBottom: 24,\n\t\t\t\t\toverflow: true,\n\t\t\t\t\tminHeight: '63px',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\thtml: this.#getMaskContainer(),\n\t\t\t\t\tbackgroundColor: '#fafafa',\n\t\t\t\t}\n\t\t\t],\n\t\t\tthis.#getCompanyPulse(!!this.#getStressLevel()) ?\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\thtml: this.#getCompanyPulse(!!this.#getStressLevel()),\n\t\t\t\t\toverflow: true,\n\t\t\t\t\tmarginBottom: 24,\n\t\t\t\t\tflex: this.#getStressLevel() ? 0.5 : 1,\n\t\t\t\t\tminHeight: this.#getStressLevel() ? '115px' : '56px',\n\t\t\t\t},\n\t\t\t\tthis.#getStressLevel(),\n\t\t\t] : null,\n\t\t\tthis.#getOTPContainer(this.#getDeskTopContainer() === null) && this.#getDeskTopContainer() ?\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tflex: 0.5,\n\t\t\t\t\thtml: this.#getQrContainer(0.7),\n\t\t\t\t\tminHeight: '190px',\n\t\t\t\t},\n\t\t\t\t[\n\t\t\t\t\t{\n\t\t\t\t\t\thtml: this.#getDeskTopContainer(),\n\t\t\t\t\t\tdisplayBlock: true\n\t\t\t\t\t},\n\t\t\t\t\tthis.#getOTPContainer(false)\n\t\t\t\t]\n\t\t\t] : this.#getDeskTopContainer() || this.#getOTPContainer(true) ? [\n\t\t\t\t\t{\n\t\t\t\t\t\thtml: this.#getQrContainer(2),\n\t\t\t\t\t\tflex: 2\n\t\t\t\t\t},\n\t\t\t\t\tthis.#getDeskTopContainer() ?? this.#getOTPContainer(true)\n\t\t\t] : this.#getQrContainer(0),\n\t\t\tthis.#getLoginHistoryContainer(),\n\t\t\t{\n\t\t\t\thtml: this.#getBindings(),\n\t\t\t\tbackgroundColor: '#fafafa'\n\t\t\t},\n\t\t\t(this.#getb24NetPanelContainer() ? {\n\t\t\t\thtml: this.#getb24NetPanelContainer(),\n\t\t\t\tmarginBottom: 24,\n\t\t\t\tbackgroundColor: '#fafafa'\n\t\t\t} : null),\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\thtml: this.#getNotificationContainer() ?? null,\n\t\t\t\t\tbackgroundColor: '#fafafa'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\thtml: this.#getLogoutContainer(),\n\t\t\t\t\tbackgroundColor: '#fafafa'\n\t\t\t\t}\n\t\t\t]\n\t\t];\n\n\t\tconst filterFunc = (data): ?Array => {\n\t\t\tconst result = [];\n\t\t\tif (Type.isArray(data))\n\t\t\t{\n\t\t\t\tfor (let i = 0; i < data.length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (Type.isArray(data[i]))\n\t\t\t\t\t{\n\t\t\t\t\t\tconst buff = filterFunc(data[i]);\n\t\t\t\t\t\tif (buff !== null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (Type.isArray(buff) && buff.length === 1)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tresult.push(buff[0]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tresult.push(buff);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (data[i] !== null)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.push(data[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result.length <= 0 ? null : (\n\t\t\t\tresult.length === 1 ? result[0] : result\n\t\t\t)\n\t\t};\n\t\tcontent = filterFunc(content);\n\n\t\tconst prepareFunc = (item, index, array) => {\n\t\t\tif (Type.isArray(item))\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\thtml:  item.map(prepareFunc)\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tflex: item['flex'] || 0,\n\t\t\t\thtml: item['html'] || item,\n\t\t\t\tbackgroundColor: item['backgroundColor'] || null,\n\t\t\t\tdisabled: item['disabled'] || null,\n\t\t\t\toverflow: item['overflow'] || null,\n\t\t\t\tmarginBottom: item['marginBottom'] || null,\n\t\t\t\tdisplayBlock: item['displayBlock'] || null,\n\t\t\t\tminHeight: item['minHeight'] || null,\n\t\t\t\tsecondary: item['secondary'] || false,\n\t\t\t};\n\t\t}\n\n\t\tthis.#popup = new PopupComponentsMaker({\n\t\t\ttarget: this.#container,\n\t\t\tcontent: content.map(prepareFunc),\n\t\t\twidth: 400,\n\t\t\toffsetTop: -14,\n\t\t});\n\t\tEventEmitter.subscribe('BX.Main.InterfaceButtons:onMenuShow', this.hide);\n\t\tEventEmitter.subscribe(Options.eventNameSpace + 'onNeedToHide', this.hide);\n\t\treturn this.#popup;\n\t}\n\n\t#getProfileContainer(): Element\n\t{\n\t\treturn this.#cache.remember('profile', () => {\n\t\t\tconst onclick = (event) => {\n\t\t\t\tthis.hide();\n\t\t\t\treturn BX.SidePanel.Instance.open(this.#profile.URL);\n\t\t\t};\n\n\t\t\tlet avatar = null;\n\t\t\tlet avatarNode = null;\n\n\t\t\tif (this.#profile.STATUS_CODE === 'collaber')\n\t\t\t{\n\t\t\t\tavatar = new AvatarRoundGuest({\n\t\t\t\t\tsize: 36,\n\t\t\t\t\tuserpicPath: encodeURI(this.#profile.PHOTO),\n\t\t\t\t\tbaseColor: '#19cc45',\n\t\t\t\t});\n\t\t\t\tavatarNode = avatar.getContainer();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tavatarNode = Tag.render`\n\t\t\t\t\t<span class=\"system-auth-form__profile-avatar--image\"\n\t\t\t\t\t\t${this.#profile.PHOTO ? `\n\t\t\t\t\t\t\tstyle=\"background-size: cover; background-image: url('${encodeURI(this.#profile.PHOTO)}')\"` : ''}>\n\t\t\t\t\t</span>\n\t\t\t\t`;\n\t\t\t}\n\n\t\t\tconst nameNode = Tag.render`\n\t\t\t\t<div class=\"system-auth-form__profile-name\">${this.#profile.FULL_NAME}</div>\n\t\t\t`;\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\t'BX.Intranet.UserProfile:Avatar:changed',\n\t\t\t\t({data: [{url, userId}]}) => {\n\t\t\t\t\tif (this.#profile.ID > 0 && userId && this.#profile.ID.toString() === userId.toString())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#profile.PHOTO = url;\n\n\t\t\t\t\t\tif (avatar)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tavatar.setUserPic(url);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t;\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\t'BX.Intranet.UserProfile:Name:changed',\n\t\t\t\t({data: [{fullName}]}) => {\n\t\t\t\t\tthis.#profile.FULL_NAME = fullName;\n\t\t\t\t\tnameNode.innerHTML = fullName;\n\t\t\t\t\tthis.#container.querySelector('#user-name').innerHTML = fullName;\n\t\t\t\t})\n\t\t\t;\n\t\t\tlet workPosition = (Type.isStringFilled(this.#profile.WORK_POSITION) ? Text.encode(this.#profile.WORK_POSITION) : '');\n\t\t\tif (\n\t\t\t\tthis.#profile.STATUS\n\t\t\t\t&& (this.#profile.STATUS !== 'collaber' || workPosition === '')\n\t\t\t\t&& Loc.hasMessage('INTRANET_USER_PROFILE_' + this.#profile.STATUS)\n\t\t\t)\n\t\t\t{\n\t\t\t\tworkPosition = Loc.getMessage('INTRANET_USER_PROFILE_' + this.#profile.STATUS)\n\t\t\t}\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --clickable\" onclick=\"${onclick}\">\n\t\t\t\t\t<div class=\"system-auth-form__profile\">\n\t\t\t\t\t\t<div class=\"system-auth-form__profile-avatar\">\n\t\t\t\t\t\t\t${avatarNode}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"system-auth-form__profile-content --margin--right\">\n\t\t\t\t\t\t\t${nameNode}\n\t\t\t\t\t\t\t<div class=\"system-auth-form__profile-position\">${workPosition}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"system-auth-form__profile-controls\">\n\t\t\t\t\t\t\t<span class=\"ui-qr-popupcomponentmaker__btn --large --border\" >\n\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_USER_PROFILE_PROFILE')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t \t\t<!-- <span class=\"ui-qr-popupcomponentmaker__btn --large --success\">any text</span> -->\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getPopupContainer(): HTMLElement\n\t{\n\t\treturn this.#cache.remember('popup-container', () => {\n\t\t\treturn this.getPopup().getPopup().getPopupContainer();\n\t\t});\n\t}\n\n\t#setEventHandlers()\n\t{\n\t\tconst autoHideHandler = (event) => {\n\t\t\tconsole.log(event)\n\t\t\tif (event.data.popup)\n\t\t\t{\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tEvent.bind(this.#getPopupContainer(), 'click', () => {\n\t\t\t\t\t\tevent.data.popup.close();\n\t\t\t\t\t});\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t}\n\n\t\tthis.subscribe('init', () => {\n\t\t\tEventEmitter.subscribe(EventEmitter.GLOBAL_TARGET, Options.eventNameSpace + ':onOpen', this.hide);\n\t\t\tthis.subscribe('bindings:open', autoHideHandler);\n\t\t\tEventEmitter.subscribe(EventEmitter.GLOBAL_TARGET, Options.eventNameSpace + ':showOtpMenu', autoHideHandler);\n\t\t});\n\n\t}\n\n\t#getb24NetPanelContainer()\n\t{\n\t\treturn this.#cache.remember('b24netPanel', () => {\n\t\t\tif (this.#features['b24netPanel'] !== 'Y')\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn Tag.render`\n\t\t\t\t<a class=\"system-auth-form__item system-auth-form__scope --center --padding-sm --clickable\" href=\"${this.#networkProfileUrl}\">\n\t\t\t\t\t<div class=\"system-auth-form__item-logo\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-logo--image --network\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container --center\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-title --light\">${Loc.getMessage('AUTH_PROFILE_B24NET_MSGVER_1')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container --block\">\n\t\t\t\t\t\t<div class=\"ui-qr-popupcomponentmaker__btn\">${Loc.getMessage('INTRANET_USER_PROFILE_GOTO')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getAdminPanelContainer()\n\t{\n\t\treturn this.#cache.remember('adminPanel', () => {\n\t\t\tif (this.#features['adminPanel'] !== 'Y')\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn Tag.render`\n\t\t\t\t<a class=\"system-auth-form__item system-auth-form__scope --center --padding-sm --clickable\" href=\"/bitrix/admin/\">\n\t\t\t\t\t<div class=\"system-auth-form__item-logo\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-logo--image --admin-panel\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container --center\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-title --light\">${Loc.getMessage('INTRANET_USER_PROFILE_ADMIN_PANEL')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container --block\">\n\t\t\t\t\t\t<div class=\"ui-qr-popupcomponentmaker__btn\">${Loc.getMessage('INTRANET_USER_PROFILE_GOTO')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getThemeContainer(): Promise\n\t{\n\t\treturn this.#cache.remember('themePicker', () => {\n\t\t\treturn ThemePicker.getPromise();\n\t\t});\n\t}\n\n\t#getMaskContainer(): Element\n\t{\n\t\treturn this.#cache.remember('Mask', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --padding-sm\">\n\t\t\t\t\t<div class=\"system-auth-form__item-logo\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-logo--image --mask\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-title\">\n\t\t\t\t\t\t\t<span>${Loc.getMessage('INTRANET_USER_PROFILE_MASKS')}</span>\n\t\t\t\t\t\t\t<span style=\"cursor: default\" class=\"system-auth-form__icon-help\"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"system-auth-form__item-content --center --center-force\">\n\t\t\t\t\t\t\t<div class=\"ui-qr-popupcomponentmaker__btn --disabled\">${Loc.getMessage('INTRANET_USER_PROFILE_INSTALL')}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-new --soon\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-new--title\">${Loc.getMessage('INTRANET_USER_PROFILE_SOON')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getCompanyPulse(isNarrow): Element\n\t{\n\t\treturn this.#cache.remember('getCompanyPulse', () => {\n\t\t\tif (this.#features.pulse === 'Y'\n\t\t\t\t&& this.#profile.ID > 0\n\t\t\t\t&& this.#profile.ID === Loc.getMessage('USER_ID')\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn new Promise((resolve) => {\n\t\t\t\t\tajax.runComponentAction('bitrix:intranet.user.profile.button', 'getUserStatComponent', {\n\t\t\t\t\t\tmode: 'class'\n\t\t\t\t\t}).then((response) => {\n\t\t\t\t\t\tBX.Runtime.html(null, response.data.html).then(() => {\n\t\t\t\t\t\t\tresolve(Ustat.getPromise({\n\t\t\t\t\t\t\t\tuserId: this.#profile.ID,\n\t\t\t\t\t\t\t\tisNarrow,\n\t\t\t\t\t\t\t\tdata: this.#features['pulseData'] ?? null\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn null;\n\t\t});\n\t}\n\n\t#savePhoto(dataObj)\n\t{\n\t\tajax.runComponentAction(\n\t\t\tthis.#cache.get('componentParams').componentName,\n\t\t\t'loadPhoto',\n\t\t\t{\n\t\t\t\tsignedParameters: this.#cache.get('componentParams').signedParameters,\n\t\t\t\tmode: 'ajax',\n\t\t\t\tdata: dataObj\n\t\t\t}\n\t\t).then(function (response) {\n\t\t\tif (response.data)\n\t\t\t{\n\t\t\t\t(top || window).BX.onCustomEvent('BX.Intranet.UserProfile:Avatar:changed', [{\n\t\t\t\t\turl: response.data,\n\t\t\t\t\tuserId: this.#profile.ID,\n\t\t\t\t}]);\n\t\t\t}\n\t\t}.bind(this), function (response) {\n\t\t\tconsole.log('response: ', response);\n\t\t}.bind(this));\n\t}\n\n\t#getSignDocument(): Promise<HTMLElement> | null\n\t{\n\t\tif (this.#features['signDocument']['available'] !== 'Y')\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst isLocked = this.#features['signDocument']['locked'] === 'Y';\n\n\t\treturn this.#cache.remember('getSignDocument', (): Promise<HTMLElement> => {\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tSignDocument,\n\t\t\t\tSignDocument.events.onDocumentCreateBtnClick,\n\t\t\t\t() => this.hide(),\n\t\t\t);\n\n\t\t\treturn SignDocument.getPromise(isLocked);\n\t\t});\n\t}\n\n\t#getStressLevel(): Promise\n\t{\n\t\tif (this.#features['stressLevel'] !== 'Y')\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\treturn this.#cache.remember('getStressLevel', () => {\n\t\t\treturn StressLevel.getPromise({\n\t\t\t\tsignedParameters: this.#cache.get('componentParams').signedParameters,\n\t\t\t\tcomponentName: this.#cache.get('componentParams').componentName,\n\t\t\t\tuserId: this.#profile.ID,\n\t\t\t\tdata: this.#features['stressLevelData'] ?? null\n\t\t\t});\n\t\t});\n\t}\n\n\t#getQrContainer(flex): Element\n\t{\n\t\treturn this.#cache.remember('getQrContainer', () => {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tBX.loadExt(['ui.qrauthorization', 'qrcode']).then(() => {\n\t\t\t\t\tconst onclick = () => {\n\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t\t(new QrAuthorization({\n\t\t\t\t\t\t\ttitle: Loc.getMessage('INTRANET_USER_PROFILE_QRCODE_TITLE2'),\n\t\t\t\t\t\t\tcontent: Loc.getMessage('INTRANET_USER_PROFILE_QRCODE_BODY2'),\n\t\t\t\t\t\t\tintent: 'profile'\n\t\t\t\t\t\t})).show();\n\t\t\t\t\t}\n\t\t\t\t\tconst onclickHelp = (event: MouseEvent) => {\n\t\t\t\t\t\ttop.BX.Helper.show('redirect=detail&code=22218950');\n\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t};\n\t\t\t\t\tlet node;\n\t\t\t\t\tif (flex !== 2 && flex !== 0)\n\t\t\t\t\t{\n\t\t\t\t\t\t// for a small size\n\t\t\t\t\t\tnode = Tag.render`\n\t\t\t\t\t<div class=\"system-auth-form__item system-auth-form__scope\" style=\"padding: 10px 14px\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-container --center --column --center\">\n\t\t\t\t\t\t\t<div class=\"system-auth-form__item-title --center --margin-xl\">${Loc.getMessage('INTRANET_USER_PROFILE_MOBILE_TITLE2_SMALL')}</div>\n\t\t\t\t\t\t\t<div class=\"system-auth-form__qr\" style=\"margin-bottom: 12px\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"ui-qr-popupcomponentmaker__btn --border\" style=\"margin-top: auto\" onclick=\"${onclick}\">${Loc.getMessage('INTRANET_USER_PROFILE_MOBILE_SHOW_QR_SMALL')}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"system-auth-form__icon-help --absolute\" onclick=\"${onclickHelp}\" title=\"${Loc.getMessage('INTRANET_USER_PROFILE_MOBILE_HOW_DOES_IT_WORK')}\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t\t\t}\n\t\t\t\t\telse if (flex === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\t//full size\n\t\t\t\t\t\tnode = Tag.render`\n\t\t\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --padding-qr-xl\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-container --column --flex --flex-start\">\n\t\t\t\t\t\t\t<div class=\"system-auth-form__item-title --l\">${Loc.getMessage('INTRANET_USER_PROFILE_MOBILE_TITLE2')}</div>\n\t\t\t\t\t\t\t<div class=\"system-auth-form__item-title --link-dotted\" onclick=\"${onclickHelp}\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_USER_PROFILE_MOBILE_HOW_DOES_IT_WORK')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"ui-qr-popupcomponentmaker__btn --large --border\" style=\"margin-top: auto\" onclick=\"${onclick}\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_USER_PROFILE_MOBILE_SHOW_QR')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"system-auth-form__item-container --qr\">\n\t\t\t\t\t\t\t<div class=\"system-auth-form__qr --full-size\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t// for flex 2. It is kind of middle\n\t\t\t\t\t\tnode = Tag.render`\n\t\t\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --padding-mid-qr\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-container --column --flex --flex-start\">\n\t\t\t\t\t\t\t<div class=\"system-auth-form__item-title --block\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_USER_PROFILE_MOBILE_TITLE2_SMALL')}\n\t\t\t\t\t\t\t\t<span class=\"system-auth-form__icon-help --inline\" onclick=\"${onclickHelp}\" title=\"${Loc.getMessage('INTRANET_USER_PROFILE_MOBILE_HOW_DOES_IT_WORK')}\"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"ui-qr-popupcomponentmaker__btn --border\" style=\"margin-top: auto\" onclick=\"${onclick}\">${Loc.getMessage('INTRANET_USER_PROFILE_MOBILE_SHOW_QR')}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"system-auth-form__item-container --qr\">\n\t\t\t\t\t\t\t<div class=\"system-auth-form__qr --size-2\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn resolve(node);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t});\n\t}\n\n\t#getDeskTopContainer(): ?Element\n\t{\n\t\treturn this.#cache.remember('getDeskTopContainer', () => {\n\t\t\tlet isInstalled = this.#features['appInstalled']['APP_MAC_INSTALLED'] === 'Y';\n\t\t\tlet cssPostfix = '--apple';\n\t\t\tlet title = Loc.getMessage('INTRANET_USER_PROFILE_DESKTOP_APPLE');\n\t\t\tlet linkToDistributive = this.#desktopDownloadLinks.macos;\n\t\t\tconst typesInstallersForLinux = {\n\t\t\t\t'DEB': {\n\t\t\t\t\ttext: Loc.getMessage('INTRANET_USER_PROFILE_DOWNLOAD_LINUX_DEB'),\n\t\t\t\t\thref: this.#desktopDownloadLinks.linuxDeb,\n\t\t\t\t},\n\t\t\t\t'RPM': {\n\t\t\t\t\ttext: Loc.getMessage('INTRANET_USER_PROFILE_DOWNLOAD_LINUX_RPM'),\n\t\t\t\t\thref: this.#desktopDownloadLinks.linuxRpm,\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tif (this.#features.browser === 'Windows')\n\t\t\t{\n\t\t\t\tisInstalled = this.#features['appInstalled']['APP_WINDOWS_INSTALLED'] === 'Y';\n\t\t\t\tcssPostfix = '--windows';\n\t\t\t\ttitle = Loc.getMessage('INTRANET_USER_PROFILE_DESKTOP_WINDOWS');\n\t\t\t\tlinkToDistributive = this.#desktopDownloadLinks.windows;\n\t\t\t}\n\n\t\t\tlet onclick = isInstalled ? (event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t\treturn false;\n\t\t\t} : () => {\n\t\t\t\tthis.hide();\n\t\t\t\treturn true;\n\t\t\t};\n\n\t\t\tlet menuLinux = null;\n\t\t\tconst showMenuLinux = (event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tmenuLinux = (menuLinux || new Menu({\n\t\t\t\t\tclassName: 'system-auth-form__popup',\n\t\t\t\t\tbindElement: event.target,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: typesInstallersForLinux.DEB.text,\n\t\t\t\t\t\t\thref: typesInstallersForLinux.DEB.href,\n\t\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\t\tmenuLinux.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: typesInstallersForLinux.RPM.text,\n\t\t\t\t\t\t\thref: typesInstallersForLinux.RPM.href,\n\t\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\t\tmenuLinux.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\n\t\t\t\t\t],\n\t\t\t\t\tangle: true,\n\t\t\t\t\toffsetLeft: 10,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonShow: () => {\n\t\t\t\t\t\t\tthis.getPopup().getPopup().setAutoHide(false);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\t\tthis.getPopup().getPopup().setAutoHide(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t\tmenuLinux.toggle();\n\t\t\t}\n\n\t\t\tif (this.#features.browser === 'Linux')\n\t\t\t{\n\t\t\t\tisInstalled = this.#features['appInstalled']['APP_LINUX_INSTALLED'] === 'Y';\n\t\t\t\tcssPostfix = '--linux';\n\t\t\t\ttitle = Loc.getMessage('INTRANET_USER_PROFILE_DESKTOP_LINUX');\n\t\t\t\tlinkToDistributive = '';\n\n\t\t\t\tonclick = isInstalled ? (event) => {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\treturn false;\n\t\t\t\t} : showMenuLinux;\n\t\t\t}\n\n\t\t\tif (this.#features['otp'].IS_ENABLED !== 'Y')\n\t\t\t{\n\t\t\t\tlet menuPopup = null;\n\t\t\t\tlet menuItems = [{\n\t\t\t\t\ttext: Loc.getMessage('INTRANET_USER_PROFILE_DOWNLOAD'),\n\t\t\t\t\thref: linkToDistributive,\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tmenuPopup.close();\n\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t}\n\t\t\t\t}];\n\n\t\t\t\tif (this.#features.browser === 'Linux')\n\t\t\t\t{\n\t\t\t\t\tmenuItems = [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: typesInstallersForLinux.DEB.text,\n\t\t\t\t\t\t\thref: typesInstallersForLinux.DEB.href,\n\t\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\t\tmenuPopup.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: typesInstallersForLinux.RPM.text,\n\t\t\t\t\t\t\thref: typesInstallersForLinux.RPM.href,\n\t\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\t\tmenuPopup.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\tconst popupClick = (event: MouseEvent) => {\n\t\t\t\t\tmenuPopup = (menuPopup || (new Menu({\n\t\t\t\t\t\tclassName: 'system-auth-form__popup',\n\t\t\t\t\t\tbindElement: event.target,\n\t\t\t\t\t\titems: menuItems,\n\t\t\t\t\t\tangle: true,\n\t\t\t\t\t\toffsetLeft: 10,\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonShow: () => {\n\t\t\t\t\t\t\t\tthis.getPopup().getPopup().setAutoHide(false);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\t\t\tthis.getPopup().getPopup().setAutoHide(true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})));\n\t\t\t\t\tmenuPopup.toggle();\n\t\t\t\t};\n\t\t\t\treturn Tag.render`\n\t\t\t\t\t<div data-role=\"desktop-item\" class=\"system-auth-form__item system-auth-form__scope --padding-sm-all ${isInstalled ? ' --active' : ''} --vertical --center\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-logo --margin-bottom --center system-auth-form__item-container --flex\">\n\t\t\t\t\t\t\t<div class=\"system-auth-form__item-logo--image ${cssPostfix}\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${isInstalled ? Tag.render`<div class=\"system-auth-form__config --absolute\" onclick=\"${popupClick}\"></div>` : ''}\n\t\t\t\t\t\t<div class=\"system-auth-form__item-container --flex --center --display-flex\">\n\t\t\t\t\t\t\t<div class=\"system-auth-form__item-title --light --center --s\">${title}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"system-auth-form__item-content --flex --center --display-flex\">\n\t\t\t\t\t\t\t<a class=\"ui-qr-popupcomponentmaker__btn\" style=\"margin-top: auto\" href=\"${linkToDistributive}\" target=\"_blank\" onclick=\"${onclick}\">\n\t\t\t\t\t\t\t\t${isInstalled ? Loc.getMessage('INTRANET_USER_PROFILE_INSTALLED') : Loc.getMessage('INTRANET_USER_PROFILE_INSTALL')}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t}\n\n\t\t\tconst getLinkForHiddenState = () => {\n\t\t\t\tconst link = Tag.render`\n\t\t\t\t\t<a href=\"${linkToDistributive}\" class=\"system-auth-form__item-title --link-dotted\">${Loc.getMessage('INTRANET_USER_PROFILE_DOWNLOAD')}</a>\n\t\t\t\t`;\n\n\t\t\t\tif (this.#features.browser === 'Linux')\n\t\t\t\t{\n\t\t\t\t\tlink.addEventListener('click', showMenuLinux);\n\t\t\t\t}\n\n\t\t\t\treturn link;\n\t\t\t};\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --padding-bottom-10 ${isInstalled ? ' --active' : ''}\">\n\t\t\t\t\t<div class=\"system-auth-form__item-logo\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-logo--image ${cssPostfix}\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-title ${isInstalled ? ' --without-margin' : '--min-height'}\">${title}</div>\n\t\t\t\t\t\t${isInstalled ? getLinkForHiddenState() : ''}\n\t\t\t\t\t\t<div class=\"system-auth-form__item-content --center --center-force\">\n\t\t\t\t\t\t\t<a class=\"ui-qr-popupcomponentmaker__btn\" href=\"${linkToDistributive}\" target=\"_blank\" onclick=\"${onclick}\">\n\t\t\t\t\t\t\t\t${isInstalled ? Loc.getMessage('INTRANET_USER_PROFILE_INSTALLED') : Loc.getMessage('INTRANET_USER_PROFILE_INSTALL')}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getOTPContainer(single): ?Promise\n\t{\n\t\tif (this.#features.otp.IS_ENABLED !== 'Y')\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.#cache.remember('getOTPContainer', () => {\n\t\t\treturn (new Otp(single, this.#features.otp)).getContainer();\n\t\t});\n\t}\n\n\t#getLoginHistoryContainer(): ?Element\n\t{\n\t\tif (this.#features.loginHistory.isHide)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.#cache.remember('getLoginHistoryContainer', () => {\n\t\t\tconst history = new UserLoginHistory(this.#features.loginHistory, this);\n\t\t\treturn {\n\t\t\t\thtml: history.getContainer(),\n\t\t\t\tbackgroundColor: '#fafafa',\n\t\t\t};\n\t\t});\n\t}\n\n\t#getBindings(): ?Element\n\t{\n\t\tif (!(Type.isPlainObject(this.#features['bindings'])\n\t\t\t&& Type.isStringFilled(this.#features['bindings']['text'])\n\t\t\t&& Type.isArray(this.#features['bindings']['items'])\n\t\t\t&& this.#features['bindings']['items'].length > 0\n\t\t))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.#cache.remember('getBindingsContainer', () => {\n\t\t\tconst div = Tag.render`\n\t\t\t\t<div class=\"system-auth-form__item --hover system-auth-form__scope --center --padding-sm\">\n\t\t\t\t\t<div class=\"system-auth-form__item-logo\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-logo--image --binding\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container --center\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-title --light\">${Text.encode(this.#features['bindings']['text'])}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div data-role=\"arrow\" class=\"system-auth-form__item-icon --arrow-right\"></div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t\tdiv.addEventListener('click', () => {\n\t\t\t\tthis.__bindingsMenu = (this.__bindingsMenu || (new Menu({\n\t\t\t\t\tclassName: 'system-auth-form__popup',\n\t\t\t\t\tbindElement: div.querySelector('[data-role=\"arrow\"]'),\n\t\t\t\t\titems: this.#features['bindings']['items'],\n\t\t\t\t\tangle: true,\n\t\t\t\t\tcachable: false,\n\t\t\t\t\toffsetLeft: 10,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonShow: () => {\n\t\t\t\t\t\t\tthis.emit('bindings:open');\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t})));\n\t\t\t\tthis.__bindingsMenu.toggle();\n\t\t\t});\n\t\t\treturn div;\n\t\t});\n\t}\n\n\t#getNotificationContainer(): Element\n\t{\n\t\tif (this.#features['im'] !== 'Y')\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\treturn this.#cache.remember('getNotificationContainer', () => {\n\t\t\tconst div = Tag.render`\n\t\t\t\t<div class=\"system-auth-form__item --hover system-auth-form__scope --padding-sm\">\n\t\t\t\t\t<div class=\"system-auth-form__item-logo\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-logo--image --notification\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container --center\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-title --light\">${Loc.getMessage('AUTH_NOTIFICATION')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t\tdiv.addEventListener('click', () => {\n\t\t\t\tthis.hide();\n\t\t\t\tBXIM.openSettings({'onlyPanel':'notify'});\n\t\t\t});\n\t\t\treturn div;\n\t\t});\n\t}\n\n\t#getLogoutContainer(): Element\n\t{\n\t\treturn this.#cache.remember('getLogoutContainer', () => {\n\t\t\tconst onclickLogout = () => {\n\t\t\t\tif (DesktopApi.isDesktop())\n\t\t\t\t{\n\t\t\t\t\tDesktopApi.logout();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconst backUrl = new Uri(window.location.pathname);\n\t\t\t\t\tbackUrl.removeQueryParam(['logout', 'login', 'back_url_pub', 'user_lang']);\n\t\t\t\t\tconst newUrl = new Uri('/auth/?logout=yes');\n\t\t\t\t\tnewUrl.setQueryParam('sessid', BX.bitrix_sessid());\n\t\t\t\t\tnewUrl.setQueryParam('backurl', encodeURIComponent(backUrl.toString()));\n\t\t\t\t\tdocument.location.href = newUrl;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t//TODO\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"system-auth-form__item system-auth-form__scope --padding-sm\">\n\t\t\t\t\t<div class=\"system-auth-form__item-logo\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-logo--image --logout\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"system-auth-form__item-container --center\">\n\t\t\t\t\t\t<div class=\"system-auth-form__item-title --light\">${Loc.getMessage('AUTH_LOGOUT')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<a onclick=\"${onclickLogout}\" class=\"system-auth-form__item-link-all\"></a>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tstatic init(node, options)\n\t{\n\t\tif (node[widgetMarker])\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst onclick = () => {\n\t\t\tif (!node['popupSymbol'])\n\t\t\t{\n\t\t\t\tnode['popupSymbol'] = new this(node, options);\n\t\t\t}\n\t\t\tnode['popupSymbol'].toggle();\n\t\t\tthis.instance = node['popupSymbol'];\n\t\t};\n\t\tnode[widgetMarker] = true;\n\t\tnode.addEventListener('click', onclick);\n\t}\n\n\tstatic instance = null;\n\n\tstatic getInstance():? this\n\t{\n\t\treturn this.instance;\n\t}\n}\n"],"names":["Options","eventNameSpace","StressLevel","constructor","getOpenSliderFunction","url","Type","isStringFilled","EventEmitter","emit","GLOBAL_TARGET","BX","SidePanel","Instance","open","cacheable","data","width","showData","value","parseInt","result","Tag","render","Loc","getMessage","Text","encode","type","typeDescription","check","comment","setTimeout","intervalId","setInterval","current","node","innerHTML","end","clearInterval","querySelector","style","transform","showEmpty","getPromise","signedParameters","componentName","userId","Promise","resolve","reject","promise","ajax","runAction","c","fields","then","id","undefined","document","createElement","catch","error","urls","ThemePicker","Object","assign","lightning","String","indexOf","applyTheme","bind","setEventNamespace","subscribe","theme","title","previewImage","previewColor","container","getContainer","removeProperty","backgroundImage","backgroundSize","background","backgroundColor","Dom","removeClass","addClass","onclick","Intranet","Bitrix24","Singleton","showDialog","runComponentAction","mode","response","themePicker","Ustat","onclickHandle","myPosition","userList","range","div","UI","Hint","init","event","window","openIntranetUStat","showWideData","addEventListener","isNarrow","ustat","errors","isArray","forEach","message","errorNode","className","appendChild","createDocumentFragment","myActivity","usersData","isPlainObject","values","length","ACTIVITY","dataResult","slice","userRating","index","fullName","avatarSrc","join","isCurrentUser","encodeURI","UserLoginHistory","config","widget","handlerLogoutButton","showSliderLoginHistory","getPopup","close","allowChangeHistory","InfoHelper","show","loginHistoryWidget","loader","limit","hide","devices","keys","key","description","time","device","append","isAvailableUserLoginHistory","isConfiguredUserLoginHistory","showConfigureSlider","Helper","handler","showInfoSlider","Dialogs","MessageBox","buttons","MessageBoxButtons","YES_CANCEL","minWidth","popupOptions","contentBackground","autoHide","closeByEsc","padding","events","onShow","setAutoHide","onPopupClose","onYes","messageBox","Notification","Center","notify","content","autoHideDelay","deviceType","geolocation","browser","arrayDescription","push","Loader","size","dateTime","format","date","Date","HcmLinkSalaryVacation","load","SalaryVacationMenu","Runtime","loadExtension","isHidden","isDisabled","e","getLayout","disabled","remember","layout","Event","closeWidget","Widget","getInstance","MemoryCache","analyticsContext","category","c_section","SignDocument","isLocked","B2EEmployeeSignSettings","lockedClass","onDocumentCreateBtnClick","top","contentCallback","onLoad","clearCache","Otp","isSingle","isInstalled","IS_ACTIVE","URL","Uri","addParam","page","console","button","onclickHelp","menuPopup","popupClick","stopPropagation","items","text","Menu","getRandom","target","angle","offsetLeft","popup","BaseEvent","toggle","widgetMarker","Symbol","profile","ID","FULL_NAME","PHOTO","MASK","STATUS","STATUS_CODE","WORK_POSITION","component","features","desktopDownloadLinks","networkProfileUrl","Cache","Browser","isLinux","isWin","set","isShown","signDocument","isNull","html","marginBottom","overflow","minHeight","flex","displayBlock","filterFunc","i","buff","prepareFunc","item","array","map","secondary","PopupComponentsMaker","offsetTop","options","instance","avatar","avatarNode","AvatarRoundGuest","userpicPath","baseColor","nameNode","toString","setUserPic","workPosition","hasMessage","getPopupContainer","autoHideHandler","log","pulse","dataObj","get","onCustomEvent","loadExt","QrAuthorization","intent","preventDefault","cssPostfix","linkToDistributive","macos","typesInstallersForLinux","href","linuxDeb","linuxRpm","windows","menuLinux","showMenuLinux","bindElement","DEB","RPM","onClose","IS_ENABLED","menuItems","getLinkForHiddenState","link","single","otp","loginHistory","isHide","history","__bindingsMenu","cachable","BXIM","openSettings","onclickLogout","DesktopApi","isDesktop","logout","backUrl","location","pathname","removeQueryParam","newUrl","setQueryParam","bitrix_sessid","encodeURIComponent"],"mappings":"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"}