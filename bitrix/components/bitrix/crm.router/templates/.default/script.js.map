{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import { Reflection, Runtime, Type } from 'main.core';\n\nconst namespace = Reflection.namespace('BX.Crm.Component');\n\n/**\n * @memberOf BX.Crm.Component\n */\nclass Router\n{\n\t/**\n\t * @public\n\t * @param roots\n\t * @param rules\n\t */\n\tstatic bindAnchors(roots: string[], rules: BX.SidePanel.Rule[]): void\n\t{\n\t\tconst preparedRules: BX.SidePanel.Rule[] = [];\n\n\t\trules.forEach(rule => {\n\t\t\tpreparedRules.push(this.prependRootsToRuleConditions(roots, rule));\n\t\t});\n\n\t\tBX.SidePanel.Instance.bindAnchors({rules: preparedRules});\n\t}\n\n\tstatic bindAnchor(roots: string[], rule: BX.SidePanel.Rule): void\n\t{\n\t\tconst rules = [\n\t\t\tthis.prependRootsToRuleConditions(roots, rule),\n\t\t];\n\n\t\tBX.SidePanel.Instance.bindAnchors({ rules });\n\t}\n\n\t/**\n\t * @protected\n\t * @param roots\n\t * @param rule\n\t * @return {BX.SidePanel.Rule}\n\t */\n\tstatic prependRootsToRuleConditions(roots: string[], rule: BX.SidePanel.Rule): BX.SidePanel.Rule\n\t{\n\t\t// Don't change the received object to avoid problems\n\t\tconst localRule: BX.SidePanel.Rule = Runtime.clone(rule);\n\n\t\tif (!Type.isArrayFilled(localRule.condition))\n\t\t{\n\t\t\treturn localRule;\n\t\t}\n\n\t\tconst modifiedConditions = [];\n\t\tlocalRule.condition.forEach((condition: string|RegExp) => {\n\t\t\tif (Type.isRegExp(condition))\n\t\t\t{\n\t\t\t\tcondition = condition.toString();\n\t\t\t}\n\n\t\t\troots.forEach(root => {\n\t\t\t\tmodifiedConditions.push(root + condition);\n\t\t\t});\n\t\t});\n\n\t\tlocalRule.condition = modifiedConditions;\n\n\t\treturn localRule;\n\t}\n}\n\nnamespace.Router = Router;\n"],"names":["namespace","Reflection","Router","roots","rules","preparedRules","forEach","rule","push","prependRootsToRuleConditions","BX","SidePanel","Instance","bindAnchors","localRule","Runtime","clone","Type","isArrayFilled","condition","modifiedConditions","isRegExp","toString","root"],"mappings":";;;;CAEA,IAAMA,SAAS,GAAGC,oBAAU,CAACD,SAAS,CAAC,kBAAkB,CAAC;;CAE1D;CACA;CACA;CAFA,IAGME,MAAM;GAAA;KAAA;;GAAA;KAAA;;CAGZ;CACA;CACA;CACA;KAJC,4BAKmBC,KAAe,EAAEC,KAA0B,EAC9D;OAAA;OACC,IAAMC,aAAkC,GAAG,EAAE;OAE7CD,KAAK,CAACE,OAAO,CAAC,UAAAC,IAAI,EAAI;SACrBF,aAAa,CAACG,IAAI,CAAC,KAAI,CAACC,4BAA4B,CAACN,KAAK,EAAEI,IAAI,CAAC,CAAC;QAClE,CAAC;OAEFG,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACC,WAAW,CAAC;SAACT,KAAK,EAAEC;QAAc,CAAC;;;KACzD;KAAA,2BAEiBF,KAAe,EAAEI,IAAuB,EAC1D;OACC,IAAMH,KAAK,GAAG,CACb,IAAI,CAACK,4BAA4B,CAACN,KAAK,EAAEI,IAAI,CAAC,CAC9C;OAEDG,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACC,WAAW,CAAC;SAAET,KAAK,EAALA;QAAO,CAAC;;;CAI9C;CACA;CACA;CACA;CACA;;KALC;KAAA,6CAMoCD,KAAe,EAAEI,IAAuB,EAC5E;;OAEC,IAAMO,SAA4B,GAAGC,iBAAO,CAACC,KAAK,CAACT,IAAI,CAAC;OAExD,IAAI,CAACU,cAAI,CAACC,aAAa,CAACJ,SAAS,CAACK,SAAS,CAAC,EAC5C;SACC,OAAOL,SAAS;;OAGjB,IAAMM,kBAAkB,GAAG,EAAE;OAC7BN,SAAS,CAACK,SAAS,CAACb,OAAO,CAAC,UAACa,SAAwB,EAAK;SACzD,IAAIF,cAAI,CAACI,QAAQ,CAACF,SAAS,CAAC,EAC5B;WACCA,SAAS,GAAGA,SAAS,CAACG,QAAQ,EAAE;;SAGjCnB,KAAK,CAACG,OAAO,CAAC,UAAAiB,IAAI,EAAI;WACrBH,kBAAkB,CAACZ,IAAI,CAACe,IAAI,GAAGJ,SAAS,CAAC;UACzC,CAAC;QACF,CAAC;OAEFL,SAAS,CAACK,SAAS,GAAGC,kBAAkB;OAExC,OAAON,SAAS;;;GAChB;CAAA;CAGFd,SAAS,CAACE,MAAM,GAAGA,MAAM;;;;"}