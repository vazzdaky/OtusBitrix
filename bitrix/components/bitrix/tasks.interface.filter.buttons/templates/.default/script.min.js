"use strict";BX.namespace("BX.Tasks");BX.Tasks.InterfaceFilterButtons=function(t){this.section=t.section;this.entityId=t.entityId;this.muted=t.muted;this.checklistShowCompleted=t.checklistShowCompleted;this.initButtons();this.bindControls()};BX.Tasks.InterfaceFilterButtons.prototype={constructor:BX.Tasks.InterfaceFilterButtons,initButtons:function(){this.muteButton=this.getMuteButton();this.optionsMenuButton=this.getOptionsMenuButton()},getMuteButton:function(){var t="";switch(this.section){case"VIEW_TASK":t="taskViewMute";break;default:break}return BX(t)},getOptionsMenuButton:function(){var t="";switch(this.section){case"EDIT_TASK":t="taskEditPopupMenuOptions";break;case"VIEW_TASK":t="taskViewPopupMenuOptions";break;default:break}return BX(t)},bindControls:function(){var t=[{control:this.muteButton,action:"click",method:this.onMuteButtonClick.bind(this)},{control:this.optionsMenuButton,action:"click",method:this.onOptionsMenuButtonClick.bind(this)}];t.forEach((function(t){if(t.control){BX.bind(t.control,t.action,t.method)}}))},onMuteButtonClick:function(){if(this.muteInProgress){return}this.muteInProgress=true;var t="tasks.task."+(this.muted?"unmute":"mute");var e={data:{taskId:this.entityId}};BX.ajax.runAction(t,e).then(function(){var t=this.muted?"ui-btn-icon-unfollow":"ui-btn-icon-follow";var e=this.muted?"ui-btn-icon-follow":"ui-btn-icon-unfollow";var n=this.muted?BX.message("MUTE_BUTTON_HINT_MUTE"):BX.message("MUTE_BUTTON_HINT_UNMUTE");BX.removeClass(this.muteButton,t);BX.addClass(this.muteButton,e);this.muteButton.setAttribute("data-hint",n);this.muteButton.removeAttribute("data-hint-init");BX.UI.Hint.init();BX.UI.Hint.hide();BX.UI.Hint.show(this.muteButton,n);this.muted=!this.muted;this.muteInProgress=false}.bind(this))},onOptionsMenuButtonClick:function(){const t=new BX.Tasks.Deadline.Menu;const e=[...t.menuItems,{delimiter:true,text:BX.Loc.getMessage("POPUP_MENU_CHECKLIST_SECTION")},{tabId:"showCompleted",text:BX.Loc.getMessage("POPUP_MENU_SHOW_COMPLETED"),className:this.checklistShowCompleted?"menu-popup-item-accept":"menu-popup-item",onclick:this.onShowCompletedItemClick.bind(this)},{tabId:"showOnlyMine",text:BX.Loc.getMessage("POPUP_MENU_SHOW_ONLY_MINE"),className:"menu-popup-item",onclick:this.onShowOnlyMineItemClick.bind(this)}];const n=BX.PopupMenu.create("taskPopupMenuOptions",this.optionsMenuButton,e,{closeByEsc:true,offsetLeft:this.optionsMenuButton.getBoundingClientRect().width/2,angle:true,events:{onPopupFirstShow:function(t){BX.UI.Hint.init(t.getContentContainer())}}});n.popupWindow.show()},onShowCompletedItemClick:function(t,e){e.getMenuWindow().close();if(!BX.Type.isUndefined(BX.Tasks.CheckListInstance)){BX.toggleClass(e.layout.item,"menu-popup-item-accept");const t=BX.Tasks.CheckListInstance.getTreeStructure();const n=t.optionManager;n.setShowCompleted(!n.getShowCompleted());t.handleTaskOptions()}},onShowOnlyMineItemClick:function(t,e){e.getMenuWindow().close();if(!BX.Type.isUndefined(BX.Tasks.CheckListInstance)){BX.toggleClass(e.layout.item,"menu-popup-item-accept");const t=BX.Tasks.CheckListInstance.getTreeStructure();const n=t.optionManager;n.setShowOnlyMine(!n.getShowOnlyMine());t.handleTaskOptions()}}};
//# sourceMappingURL=script.map.js