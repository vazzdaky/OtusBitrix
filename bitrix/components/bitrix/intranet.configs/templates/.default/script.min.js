this.BX=this.BX||{};this.BX.Intranet=this.BX.Intranet||{};(function(e,t){"use strict";class o{constructor(e){this.ajaxPath=e.ajaxPath;if(BX("configLogoPostForm")&&BX("configLogoPostForm").client_logo){BX.bind(BX("configLogoPostForm").client_logo,"change",(()=>{this.LogoChange()}))}if(BX("configDeleteLogo")){BX.bind(BX("configDeleteLogo"),"click",(()=>{this.LogoDelete(BX("configDeleteLogo"))}))}if(BX("configLogoRetinaPostForm")&&BX("configLogoRetinaPostForm").client_logo_retina){BX.bind(BX("configLogoRetinaPostForm").client_logo_retina,"change",(()=>{this.LogoChange("retina")}))}if(BX("configDeleteLogoretina")){BX.bind(BX("configDeleteLogoretina"),"click",(()=>{this.LogoDelete(BX("configDeleteLogoretina"),"retina")}))}}LogoChange(e){e=e=="retina"?"retina":"";BX("configWaitLogo"+e).style.display="inline-block";BX.ajax.submit(BX(e=="retina"?"configLogoRetinaPostForm":"configLogoPostForm"),(function(t){try{var o=JSON.parse(t);if(o.error){BX("config_logo_error_block").style.display="block";var i=BX.findChild(BX("config_logo_error_block"),{class:"content-edit-form-notice-text"},true,false);i.innerHTML="<span class='content-edit-form-notice-icon'></span>"+o.error}else if(o.path){BX("config_logo_error_block").style.display="none";BX("configImgLogo"+e).src=o.path;BX("configBlockLogo"+e).style.display="inline-block";BX("configDeleteLogo"+e).style.display="inline-block"}BX("configWaitLogo"+e).style.display="none"}catch(t){BX("configWaitLogo"+e).style.display="none";return false}}))}LogoDelete(e,t){t=t=="retina"?"retina":"";if(confirm(BX.message("LogoDeleteConfirm"))){BX("configWaitLogo"+t).style.display="inline-block";BX.ajax.post(this.ajaxPath,{client_delete_logo:"Y",sessid:BX.bitrix_sessid(),mode:t},(function(){BX("configBlockLogo"+t).style.display="none";e.style.display="none";BX("config_error_block").style.display="none";BX("configWaitLogo"+t).style.display="none"}))}}}class i{constructor(e){this.cultureList=e.cultureList;this.selectorNode=document.querySelector("[data-role='culture-selector']");this.shortDateNode=document.querySelector("[data-role='culture-short-date-format']");this.longDateNode=document.querySelector("[data-role='culture-long-date-format']");if(t.Type.isDomNode(this.selectorNode)){t.Event.bind(this.selectorNode,"change",(()=>{this.changeFormatExample(this.selectorNode.value)}))}}changeFormatExample(e){if(!t.Type.isDomNode(this.shortDateNode)||!t.Type.isDomNode(this.longDateNode)){return}this.shortDateNode.textContent=this.cultureList[e].SHORT_DATE_FORMAT;this.longDateNode.textContent=this.cultureList[e].LONG_DATE_FORMAT}}let s=e=>e,a,n;const r=t.Reflection.namespace("BX.Intranet.Configs");class l{constructor(e){this.arCurIpRights=e;var t=document.querySelectorAll("[data-role='ip-right-delete']");t.forEach(function(e){BX.bind(e,"click",function(){this.DeleteIpAccessRow(e)}.bind(this))}.bind(this))}DeleteIpAccessRow(e){var t=e.parentNode.parentNode;BX.remove(e.parentNode);var o=BX.findChildren(t,{tagName:"div"},true);if(o.length<=0){var i=t.parentNode.getAttribute("data-bx-right");var s=[];for(var a=0;a<this.arCurIpRights.length;a++)if(this.arCurIpRights[a]!=i)s.push(this.arCurIpRights[a]);this.arCurIpRights=s;BX.remove(t.parentNode)}}ShowIpAccessPopup(e){e=e||[];BX.Access.Init({other:{disabled:false,disabled_g2:true,disabled_cr:true},groups:{disabled:true},socnetgroups:{disabled:true}});var o={};for(var i=0;i<e.length;i++)o[e[i]]=true;BX.Access.SetSelected(o);BX.Access.ShowForm({callback:e=>{var o=false;for(var i in e){o=BX.Access.GetProviderName(i);for(var r in e[i]){const l=e=>{this.addInputForIp(c)};const c=t.Tag.render(a||(a=s`
							<input type="text" name="ip_access_rights_${0}[]" size="30"
								onclick="${0}"
							>	
						`),r,l);const d=e=>{this.DeleteIpAccessRow(g)};const g=t.Tag.render(n||(n=s`
							<a 
								class="access-delete" 
								title="${0}" 
								href="javascript:void(0);"
								onclick="${0}"
							></a>		
						`),BX.message("SLToAllDel"),d);const h=BX.create("tr",{attrs:{"data-bx-right":r},children:[BX.create("td",{html:(o.length>0?o+": ":"")+BX.util.htmlspecialchars(e[i][r].name)+"&nbsp;",props:{className:"content-edit-form-field-name"}}),BX.create("td",{props:{className:"content-edit-form-field-input",colspan:2},children:[BX.create("div",{children:[c,g]})]})]});BX("ip_add_right_button").parentNode.insertBefore(h,BX("ip_add_right_button"));this.arCurIpRights.push(r)}}}})}addInputForIp(e){var t=e.parentNode;if(BX.nextSibling(t))return;var o=BX.clone(t);var i=BX.firstChild(o);i.value="";i.onclick=()=>{this.addInputForIp(i)};const s=BX.nextSibling(i);s.onclick=()=>{this.DeleteIpAccessRow(s)};t.parentNode.appendChild(o)}}r.IpSettingsClass=l;class c{constructor(e){this.ajaxPath=e.ajaxPath||"";this.addressFormatList=e.addressFormatList||{};this.cultureList=e.cultureList||{};new o(this);new i(this);var t=BX("allow_livefeed_toall");var s=BX("DEFAULT_all");if(t&&s){BX.bind(t,"click",BX.delegate((function(e){s.style.display=this.checked?"":"none"}),t))}var a=BX("RIGHTS_all");if(t&&a){BX.bind(t,"click",BX.delegate((function(e){a.style.display=this.checked?"":"none"}),t))}var n=BX("allow_general_chat_toall");var r=BX("chat_rights_all");if(n&&r){BX.bind(n,"click",(function(){r.style.display=this.checked?"":"none"}))}var l=BX("mp_allow_user_install");var c=BX("mp_user_install");if(l&&c){BX.bind(l,"click",(function(){c.style.display=this.checked?"":"none"}))}var d=BX("location_address_format_select");if(d){BX.bind(d,"change",(()=>{var e=BX("location_address_format_description");e.innerHTML=this.addressFormatList[d.value]}))}if(BX.type.isDomNode(BX("smtp_use_auth"))){BX.bind(BX("smtp_use_auth"),"change",BX.proxy((function(){this.showHideSmtpAuth()}),this))}}submitForm(e){BX.addClass(e,"webform-button-wait webform-button-active");BX.submit(BX("configPostForm"))}otpSwitchOffInfo(e){if(!e.checked){BX.PopupWindowManager.create("otpSwitchOffInfo",e,{autoHide:true,offsetLeft:-100,offsetTop:15,overlay:false,draggable:{restrict:true},closeByEsc:true,closeIcon:{right:"12px",top:"10px"},content:'<div style="padding: 15px; width: 300px; font-size: 13px">'+BX.message("CONFIG_OTP_SECURITY_SWITCH_OFF_INFO")+"</div>"}).show()}}onGdprChange(e){var t=document.querySelectorAll("[data-role='gdpr-data']");for(var o=0;o<t.length;o++){t[o].style.visibility=e.checked?"visible":"collapse"}}adminOtpIsRequiredInfo(e){BX.PopupWindowManager.create("adminOtpIsRequiredInfo",e,{autoHide:true,offsetLeft:-100,offsetTop:15,overlay:false,draggable:{restrict:true},closeByEsc:true,closeIcon:{right:"12px",top:"10px"},content:'<div style="padding: 15px; width: 300px; font-size: 13px">'+BX.message("CONFIG_OTP_ADMIN_IS_REQUIRED_INFO")+"</div>"}).show()}showDiskExtendedFullTextInfo(e,t){e.stopPropagation;e.preventDefault();BX.PopupWindowManager.create("diskExtendedFullTextInfo",t,{autoHide:true,offsetLeft:-100,offsetTop:15,overlay:false,draggable:{restrict:true},closeByEsc:true,closeIcon:{right:"12px",top:"10px"},content:'<div style="padding: 15px; width: 300px; font-size: 13px">'+BX.message("CONFIG_DISK_EXTENDED_FULLTEXT_INFO")+"</div>"}).show()}geoDataSwitch(e){if(e.checked){e.checked=false;BX.UI.Dialogs.MessageBox.show({modal:true,minWidth:BX.message("CONFIG_COLLECT_GEO_DATA_CONFIRM").length>400?640:480,title:BX.message("CONFIG_COLLECT_GEO_DATA"),message:BX.message("CONFIG_COLLECT_GEO_DATA_CONFIRM"),buttons:BX.UI.Dialogs.MessageBoxButtons.OK_CANCEL,okCaption:BX.message("CONFIG_COLLECT_GEO_DATA_OK"),onOk:function(){e.checked=true;return true}})}}}r.Functions=c})(this.BX.Intranet.Configs=this.BX.Intranet.Configs||{},BX);
//# sourceMappingURL=script.map.js