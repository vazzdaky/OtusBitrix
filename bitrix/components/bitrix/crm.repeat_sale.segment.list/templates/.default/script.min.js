(function(e,t,a,l,i,n){"use strict";var s=i.Reflection.namespace("BX.Crm.RepeatSale.SegmentList");var r=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,[{key:"execute",value:function e(){if(!t.SidePanel.Instance){console.error("SidePanel.Instance not found");return}t.SidePanel.Instance.open("/crm/repeat-sale-segment/details/0/",{cacheable:false,width:700,allowChangeHistory:false})}}]);return e}();s.ActionButton=r;var o,c;function d(e,t){u(e,t);t.add(e)}function v(e,t,a){u(e,t);t.set(e,a)}function u(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function p(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var b=i.Reflection.namespace("BX.Crm.RepeatSale.SegmentList");var h=new WeakMap;var f=new WeakMap;var m=new WeakMap;var g=new WeakMap;var w=new WeakMap;var S=new WeakSet;var _=new WeakSet;var E=new WeakSet;var C=function(){function e(t){var a=t.id,l=t.targetNodeId,i=t.checked,n=t.readOnly,s=t.isFlowDisabled;babelHelpers.classCallCheck(this,e);d(this,E);d(this,_);d(this,S);v(this,h,{writable:true,value:void 0});v(this,f,{writable:true,value:void 0});v(this,m,{writable:true,value:void 0});v(this,g,{writable:true,value:void 0});v(this,w,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,h,a);babelHelpers.classPrivateFieldSet(this,f,document.getElementById(l));babelHelpers.classPrivateFieldSet(this,m,i);babelHelpers.classPrivateFieldSet(this,g,n);babelHelpers.classPrivateFieldSet(this,w,s)}babelHelpers.createClass(e,[{key:"init",value:function e(){var t=this;void i.Runtime.loadExtension("ui.switcher").then((function(e){var a=e.Switcher;var l=new a({checked:babelHelpers.classPrivateFieldGet(t,m),disabled:babelHelpers.classPrivateFieldGet(t,g),handlers:{checked:function e(a){a.stopPropagation();p(t,S,H).call(t,(function(){p(t,E,P).call(t,false)}),(function(){l.check(true,false)}))},unchecked:function e(a){a.stopPropagation();if(babelHelpers.classPrivateFieldGet(t,w)){p(t,_,F).call(t,(function(){p(t,E,P).call(t,true);babelHelpers.classPrivateFieldSet(t,w,false)}),(function(){l.check(true,false)}))}else{p(t,E,P).call(t,true)}}}});i.Dom.clean(babelHelpers.classPrivateFieldGet(t,f));l.renderTo(babelHelpers.classPrivateFieldGet(t,f))}))}}]);return e}();function H(e,t){var l=i.Tag.render(o||(o=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="crm-repeat-sale-segment-list-confirm-container">\n\t\t\t\t<div class="crm-repeat-sale-segment-list-confirm-message">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),i.Loc.getMessage("CRM_REPEAT_SALE_SEGMENT_LIST_COLUMN_IS_ENABLED_CONFIRM_DIALOG_MESSAGE"));a.MessageBox.show({modal:true,minHeight:100,minWidth:400,popupOptions:{content:l,closeIcon:false},buttons:a.MessageBoxButtons.OK_CANCEL,okCaption:i.Loc.getMessage("CRM_REPEAT_SALE_SEGMENT_LIST_COLUMN_IS_ENABLED_CONFIRM_DIALOG_OK_BTN"),onOk:function t(a){a.close();e()},onCancel:function e(a){t();a.close()}})}function F(e,t){var l=i.Tag.render(c||(c=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="crm-repeat-sale-segment-list-confirm-container">\n\t\t\t\t<div class="crm-repeat-sale-segment-list-confirm-message">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),i.Loc.getMessage("CRM_REPEAT_SALE_SEGMENT_LIST_COLUMN_IS_ENABLED_RS_CONFIRM_DIALOG_MESSAGE"));a.MessageBox.show({modal:true,minHeight:100,minWidth:400,popupOptions:{content:l,closeIcon:false},buttons:a.MessageBoxButtons.OK_CANCEL,okCaption:i.Loc.getMessage("CRM_REPEAT_SALE_SEGMENT_LIST_COLUMN_IS_ENABLED_RS_CONFIRM_DIALOG_OK_BTN"),onOk:function t(a){a.close();e()},onCancel:function e(a){t();a.close()}})}function P(e){var t=this;i.Runtime.throttle((function(){i.ajax.runAction("crm.repeatsale.segment.active",{json:{id:babelHelpers.classPrivateFieldGet(t,h),isEnabled:e?"Y":"N"}})["catch"]((function(e){l.UI.Notification.Center.notify({content:i.Text.encode(e.errors[0].message),autoHideDelay:6e3});throw e}))}),100)()}b.ActiveField=C;var M,k;function L(e,t){B(e,t);t.add(e)}function T(e,t,a){B(e,t);t.set(e,a)}function B(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function I(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var R=i.Reflection.namespace("BX.Crm.RepeatSale.SegmentList");var A="default";var G="lowBorder";var N="highBorder";var O=new WeakMap;var W=new WeakMap;var y=new WeakMap;var D=new WeakMap;var x=new WeakMap;var U=new WeakSet;var X=new WeakSet;var j=function(){function e(t){var a=t.id,l=t.targetNodeId,i=t.borders,n=t.value;babelHelpers.classCallCheck(this,e);L(this,X);L(this,U);T(this,O,{writable:true,value:void 0});T(this,W,{writable:true,value:void 0});T(this,y,{writable:true,value:void 0});T(this,D,{writable:true,value:void 0});T(this,x,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,O,a);babelHelpers.classPrivateFieldSet(this,W,document.getElementById(l));babelHelpers.classPrivateFieldSet(this,y,i!==null&&i!==void 0?i:null);babelHelpers.classPrivateFieldSet(this,D,n)}babelHelpers.createClass(e,[{key:"init",value:function e(){if(babelHelpers.classPrivateFieldGet(this,D)===null){return}babelHelpers.classPrivateFieldSet(this,x,i.Tag.render(M||(M=babelHelpers.taggedTemplateLiteral(["<div></div>"]))));var t=i.Tag.render(k||(k=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="crm-repeat-sale-segment-list-client-percent">\n\t\t\t\t','\n\t\t\t\t<div class="crm-repeat-sale-segment-list-client-percent-value">\n\t\t\t\t\t','\n\t\t\t\t\t<span class="crm-repeat-sale-segment-list-client-percent-percent">%</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'])),babelHelpers.classPrivateFieldGet(this,x),babelHelpers.classPrivateFieldGet(this,D));i.Dom.append(t,babelHelpers.classPrivateFieldGet(this,W));var a=new n.ProgressRound({width:28,lineSize:8,colorBar:I(this,U,K).call(this),colorTrack:"#EBF1F6",rotation:false,value:babelHelpers.classPrivateFieldGet(this,D),color:n.ProgressRound.Color.SUCCESS});a.renderTo(babelHelpers.classPrivateFieldGet(this,x))}}]);return e}();function K(){var e=I(this,X,z).call(this,N);if(e&&babelHelpers.classPrivateFieldGet(this,D)>=(e===null||e===void 0?void 0:e.value)){return e.color}var t=I(this,X,z).call(this,G);if(t&&babelHelpers.classPrivateFieldGet(this,D)<=(t===null||t===void 0?void 0:t.value)){return t.color}var a=I(this,X,z).call(this,A);if(a){return a.color}throw new RangeError("unknown track color")}function z(e){var t;return(t=babelHelpers.classPrivateFieldGet(this,y).find((function(t){return t.id===e})))!==null&&t!==void 0?t:null}R.RoundChartField=j;e.ActiveField=C;e.ActionButton=r;e.RoundChartField=j})(this.window=this.window||{},BX,BX.UI.Dialogs,BX,BX,BX.UI);
//# sourceMappingURL=script.map.js