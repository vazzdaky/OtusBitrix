{"version":3,"file":"script.js","sources":["src/analytic.js","src/fields/site-title-24-field.js","src/fields/site-title-field.js","src/navigation.js","src/pages/tools-page.js","src/pages/employee-page.js","src/requisite/button-bar.js","src/requisite/landing-button.js","src/requisite/landing-card.js","src/requisite/landing-button-factory.js","src/requisite/card.js","src/pages/requisite-page.js","src/pages/communication-page.js","src/fields/site-domain-field.js","src/fields/site-utils.js","src/fields/site-theme-picker-field.js","src/fields/site-logo-field.js","src/fields/site-title-preview-widget.js","src/pages/portal-page.js","src/configuration/portal-delete-form.js","src/configuration/portal-delete-form-employee.js","src/configuration/portal-delete-form-mail.js","src/configuration/portal-delete-form-not-admin.js","src/configuration/portal-delete-form-bound.js","src/configuration/portal-delete-form-network.js","src/configuration/portal-delete-section.js","src/pages/configuration-page.js","src/pages/schedule-page.js","src/pages/gdpr-page.js","src/pages/security-page.js","src/pages/mainpage-page.js","src/pages/external-temporary-page.js","src/page-manager.js","src/search-engine/data-source.js","src/search-engine/searcher.js","src/search-engine/renderer.js","src/search-engine/server-data-source.js","src/permission.js","src/settings.js"],"sourcesContent":["import { ajax, Http } from 'main.core';\nimport { sendData } from 'ui.analytics';\nimport type { AnalyticsOptions } from 'ui.analytics';\n\nexport type AnalyticContext = {\n\tisAdmin: ?boolean,\n\tlocationName: ?string,\n\tisBitrix24: boolean,\n\tanalyticContext: ?string,\n}\n\nexport class Analytic\n{\n\t#eventList: Array = [];\n\t#tool: string = 'settings';\n\t#context: ?AnalyticContext = null;\n\n\tconstructor(context: ?AnalyticContext = null)\n\t{\n\t\tthis.#context = context;\n\t}\n\n\taddEvent(eventType: string, eventData: AnalyticsOptions): void\n\t{\n\t\tif (this.#context.isBitrix24)\n\t\t{\n\t\t\tthis.#eventList[eventType] = eventData;\n\t\t}\n\t}\n\n\tsend(): void\n\t{\n\t\tif (!this.#context.isBitrix24)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (Object.keys(this.#eventList).length > 0)\n\t\t{\n\t\t\tajax.runComponentAction(\n\t\t\t\t'bitrix:intranet.settings',\n\t\t\t\t'analytic',\n\t\t\t\t{\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tdata: {data: this.#eventList},\n\t\t\t\t},\n\t\t\t).then(()=>{});\n\t\t}\n\n\t\tthis.#eventList = [];\n\t}\n\n\taddEventOpenSettings(): void\n\t{\n\t\tconst options = {\n\t\t\tevent: AnalyticSettingsEvent.OPEN,\n\t\t\ttool: this.#tool,\n\t\t\tcategory: 'slider',\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t\tc_section: this.#context?.analyticContext ?? '',\n\t\t\tc_element: this.#context?.locationName,\n\t\t};\n\n\t\tsendData(options);\n\t\t//this.addEvent(AnalyticSettingsEvent.OPEN, options);\n\t}\n\n\taddEventOpenTariffSelector(fieldName: string): void\n\t{\n\t\tconst options = {\n\t\t\tevent: 'open_tariff',\n\t\t\ttool: this.#tool,\n\t\t\tcategory: fieldName,\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t};\n\n\t\tthis.addEvent(fieldName + '_open_tariff', options);\n\t}\n\n\taddEventOpenHint(fieldName: string): void\n\t{\n\t\tconst options = {\n\t\t\tevent: 'open_hint',\n\t\t\ttool: this.#tool,\n\t\t\tcategory: fieldName,\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t};\n\n\t\tthis.addEvent(fieldName + '_open_hint', options);\n\t}\n\n\taddEventStartPagePage(page: string): void\n\t{\n\t\tconst options = {\n\t\t\tevent: AnalyticSettingsEvent.START_PAGE,\n\t\t\ttool: this.#tool,\n\t\t\tcategory: page,\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t};\n\n\t\tsendData(options);\n\t}\n\n\taddEventChangePage(page: string): void\n\t{\n\t\tconst options = {\n\t\t\tevent: AnalyticSettingsEvent.VIEW,\n\t\t\ttool: this.#tool,\n\t\t\tcategory: page,\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t};\n\n\t\tsendData(options);\n\t}\n\n\taddEventToggleTools(toolName: string, state: boolean): void\n\t{\n\t\tconst event = 'onoff_tools';\n\n\t\tconst options = {\n\t\t\tevent: event,\n\t\t\ttool: this.#tool,\n\t\t\tcategory: 'tools',\n\t\t\ttype: toolName,\n\t\t\tc_element: this.#context?.locationName,\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t\tp2: state ? AnalyticSettingsTurnState.ON : AnalyticSettingsTurnState.OFF,\n\t\t};\n\n\t\tthis.addEvent('tools' + toolName + '_' + event, options);\n\t}\n\n\taddEventToggle2fa(state: boolean): void\n\t{\n\t\tconst event = '2fa_onoff';\n\n\t\tconst options = {\n\t\t\tevent: event,\n\t\t\ttool: this.#tool,\n\t\t\tcategory: 'security',\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t\tp2: state ? AnalyticSettingsTurnState.ON : AnalyticSettingsTurnState.OFF,\n\t\t};\n\n\t\tthis.addEvent('security_' + event, options);\n\t}\n\n\taddEventConfigPortal(event: string): void\n\t{\n\t\tconst options = {\n\t\t\tevent: event,\n\t\t\ttool: this.#tool,\n\t\t\tcategory: AnalyticSettingsCategory.PORTAL,\n\t\t};\n\n\t\tthis.addEvent('portal_' + event, options);\n\t}\n\n\taddEventChangeTheme(themeId: string): void\n\t{\n\t\tconst regex = /custom_\\d+/;\n\t\tconst preparedThemeId = regex.test(themeId) ? 'themeName_custom' : 'themeName_' + themeId;\n\t\tconst options = {\n\t\t\tevent: AnalyticSettingsEvent.CHANGE_PORTAL_THEME,\n\t\t\ttool: this.#tool,\n\t\t\tcategory: AnalyticSettingsCategory.PORTAL,\n\t\t\ttype: AnalyticSettingsType.COMMON,\n\t\t\tc_section: AnalyticSettingsSection.SETTINGS,\n\t\t\tp1: preparedThemeId,\n\t\t};\n\n\t\tthis.addEvent('portal_' + AnalyticSettingsEvent.CHANGE_PORTAL_THEME, options);\n\t}\n\n\taddEventConfigEmployee(event: string, state: boolean): void\n\t{\n\t\tconst options = {\n\t\t\tevent: event,\n\t\t\ttool: this.#tool,\n\t\t\tcategory: 'employee',\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t\tp2: state ? AnalyticSettingsTurnState.ON : AnalyticSettingsTurnState.OFF,\n\t\t};\n\n\t\tthis.addEvent('employee_' + event, options);\n\t}\n\n\taddEventConfigConfiguration(event: string, state: boolean): void\n\t{\n\t\tconst options = {\n\t\t\tevent: event,\n\t\t\ttool: this.#tool,\n\t\t\tcategory: 'configuration',\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t\tp2: state ? AnalyticSettingsTurnState.ON : AnalyticSettingsTurnState.OFF,\n\t\t};\n\n\t\tthis.addEvent('configuration_' + event, options);\n\t}\n\n\taddEventConfigRequisite(event: string): void\n\t{\n\t\tconst options = {\n\t\t\tevent: event,\n\t\t\ttool: this.#tool,\n\t\t\tcategory: 'requisite',\n\t\t\tc_element: this.#context?.locationName,\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t};\n\n\t\tsendData(options);\n\t}\n}\n\nexport class AnalyticSettingsCategory\n{\n\tstatic TOOLS = 'tools';\n\tstatic SECURITY = 'security';\n\tstatic AI = 'ai';\n\tstatic PORTAL = 'portal';\n\tstatic EMPLOYEE = 'employee';\n\tstatic COMMUNICATION = 'communication';\n\tstatic REQUISITE = 'requisite';\n\tstatic SCHEDULE = 'schedule';\n\tstatic CONFIGURATION = 'configuration';\n}\n\nexport class AnalyticSettingsEvent\n{\n\tstatic OPEN = 'open_setting';\n\tstatic START_PAGE = 'start_page';\n\tstatic VIEW = 'view';\n\tstatic TFA = '2fa_onoff';\n\tstatic CHANGE_PORTAL_NAME = 'change_portal_name';\n\tstatic CHANGE_PORTAL_LOGO = 'change_portal_logo';\n\tstatic CHANGE_PORTAL_SITE = 'change_portal_site';\n\tstatic CHANGE_PORTAL_THEME = 'change_portal_theme';\n\tstatic CHANGE_MARKET = 'change_market';\n\tstatic CHANGE_PAY_TARIFF = 'change_pay_tariff';\n\tstatic CREATE_CARD = 'create_vizitka';\n\tstatic EDIT_CARD = 'edit_vizitka';\n\tstatic COPY_LINK_CARD = 'copylink_vizitka';\n\tstatic OPEN_ADD_COMPANY = 'open_add_company';\n\tstatic CHANGE_QUICK_REG = 'change_quick_reg';\n\tstatic CHANGE_REG_ALL = 'change_reg_all';\n\tstatic CHANGE_COLLABERS_INVITATION = 'change_collabers_invitation';\n\tstatic CHANGE_EXTRANET_INVITE = 'change_extranet_invite';\n}\n\nexport class AnalyticSettingsSection\n{\n\tstatic SETTINGS = 'settings';\n}\n\nexport class AnalyticSettingsType\n{\n\tstatic COMMON = 'common';\n}\n\nexport class AnalyticSettingsUserRole\n{\n\tstatic ADMIN = 'isAdmin_Y';\n\tstatic NOT_ADMIN = 'isAdmin_N';\n}\n\nexport class AnalyticSettingsTurnState\n{\n\tstatic ON = 'turn_on';\n\tstatic OFF = 'turn_off';\n}","import {BaseSettingsElement} from \"ui.form-elements.field\";\nimport {Checker} from \"ui.form-elements.view\";\nimport {Loc, Tag} from \"main.core\";\n\nexport class SiteTitle24Field extends BaseSettingsElement\n{\n\t#checker: Checker;\n\t#content: HTMLElement;\n\tconstructor(params)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Intranet.Settings');\n\n\t\tthis.#checker = new Checker({\n\t\t\tid: 'siteLogo24',\n\t\t\tinputName: 'logo24',\n\t\t\ttitle: params.title ?? Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_SITE_LOGO24'),\n\t\t\tsize: 'extra-small',\n\t\t\t// hintOn: '',\n\t\t\t// hintOff: '',\n\t\t\tisEnable: params.isEnable,\n\t\t\tchecked: params.checked !== '',\n\t\t\tvalue: 'Y',\n\t\t\tbannerCode: 'limit_admin_logo24',\n\t\t\thideSeparator: true,\n\t\t});\n\t}\n\n\tgetFieldView()\n\t{\n\t\treturn this.#checker;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#content)\n\t\t{\n\t\t\treturn this.#content;\n\t\t}\n\n\t\tthis.#content = Tag.render`\n\t\t\t<div class=\"ui-section__field-selector --align-center\">\n\t\t\t\t<div class=\"ui-section__hint\">\n\t\t\t\t\t${this.#checker.render()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.#content;\n\t}\n}","import { Event, Loc, Tag } from 'main.core';\nimport { BaseSettingsElement } from \"ui.form-elements.field\";\nimport { HelpMessage } from 'ui.section';\nimport { Checker, TextInput } from 'ui.form-elements.view';\nimport { EventEmitter, BaseEvent } from \"main.core.events\";\nimport { SiteTitle24Field } from './site-title-24-field';\n\nexport type SiteTitleFieldType = {\n\tparent: BaseSettingsElement,\n\tsiteTitleOptions: SiteTitleInputType,\n\tsiteTitleLabels: SiteTitleLabelType,\n};\nexport type SiteTitleInputType = {\n\tname: string,\n\tcanUserEditName: boolean,\n\ttitle: string,\n\tcanUserEditTitle: boolean,\n\tlogo24: string,\n\tcanUserEditLogo24: boolean,\n\tlogo: ?Array\n};\nexport type SiteTitleLabelType = {\n\ttitle: ?string,\n\tlogo24: ?string,\n}\n\nexport class SiteTitleField extends BaseSettingsElement\n{\n\toptions: SiteTitleInputType;\n\tlabels: SiteTitleLabelType;\n\n\t#content: HTMLElement;\n\t#contentLogo24: HTMLElement;\n\t#title: TextInput;\n\t#logo24: SiteTitle24Field;\n\n\t#inputMonitoringIntervalId: ?number;\n\t#inputMonitoringCountdown: number = 10;\n\t#inputMonitoringPrevState: ?string;\n\n\tconstructor(params: SiteTitleFieldType)\n\t{\n\t\tsuper(params);\n\t\tthis.setParentElement(params.parent);\n\t\tthis.setEventNamespace('BX.Intranet.Settings');\n\n\t\tconst options = params.siteTitleOptions;\n\t\tthis.options = {\n\t\t\ttitle: options.title,\n\t\t\tcanUserEditTitle: options.canUserEditTitle,\n\t\t\tlogo24: options.logo24,\n\t\t\tcanUserEditLogo24: options.canUserEditLogo24,\n\t\t};\n\t\tconst labels = params.siteTitleLabels;\n\t\tthis.labels = {\n\t\t\ttitle: labels.title,\n\t\t\tlogo24: labels.logo24,\n\t\t}\n\n\t\tthis.#initTitle(options, labels);\n\t\tthis.#initLogo24(options, labels);\n\t}\n\n\t#initTitle(options: SiteTitleInputType, labels: SiteTitleLabelType)\n\t{\n\t\tthis.#title = new TextInput({\n\t\t\tvalue: options.title,\n\t\t\tplaceholder: options.title,\n\t\t\tlabel: labels.title ?? Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_SITE_TITLE_INPUT_LABEL'),\n\t\t\tid: 'siteTitle',\n\t\t\tinputName: 'title',\n\t\t\tisEnable: true,\n\t\t\t// bannerCode: '123',\n\t\t\t// helpDeskCode: '234',\n\t\t\t// helpMessageProvider: () => {}\n\t\t});\n\n\t\tthis.#title.setEventNamespace(\n\t\t\tthis.getEventNamespace()\n\t\t);\n\t}\n\n\t#initLogo24(options: SiteTitleInputType, labels: SiteTitleLabelType)\n\t{\n\t\tthis.#logo24 = new SiteTitle24Field({\n\t\t\ttitle: labels.logo24,\n\t\t\tisEnable: options.canUserEditLogo24,\n\t\t\tchecked: options.logo24,\n\t\t});\n\t}\n\n\tgetFieldView()\n\t{\n\t\treturn this.#title;\n\t}\n\n\tcancel(): void\n\t{\n\t}\n\n\tstartInputMonitoring(): void\n\t{\n\t\tif (this.#inputMonitoringIntervalId > 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.#inputMonitoringIntervalId = setInterval(this.monitorInput.bind(this), 500);\n\t}\n\n\tstopInputMonitoring()\n\t{\n\t\tif (this.#inputMonitoringIntervalId > 0)\n\t\t{\n\t\t\tclearInterval(this.#inputMonitoringIntervalId);\n\t\t\tthis.#inputMonitoringIntervalId = null;\n\t\t}\n\t}\n\n\tmonitorInput()\n\t{\n\t\tconst value = this.#title.getInputNode().value;\n\t\tif (this.#inputMonitoringPrevState !== value)\n\t\t{\n\t\t\tthis.#inputMonitoringCountdown = 10;\n\t\t\tthis.#inputMonitoringPrevState = value;\n\t\t\tEventEmitter.emit(\n\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\tthis.getEventNamespace() + ':Portal:Change',\n\t\t\t\tnew BaseEvent({data: { title:  value } } )\n\t\t\t);\n\t\t}\n\t\telse if (--this.#inputMonitoringCountdown <= 0)\n\t\t{\n\t\t\tthis.stopInputMonitoring();\n\t\t}\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#content)\n\t\t{\n\t\t\treturn this.#content;\n\t\t}\n\n\t\tEvent.bind(this.#title.getInputNode(), 'focus', this.startInputMonitoring.bind(this));\n\t\tEvent.bind(this.#title.getInputNode(), 'keydown', this.startInputMonitoring.bind(this));\n\t\tEvent.bind(this.#title.getInputNode(), 'click', this.startInputMonitoring.bind(this));\n\t\tEvent.bind(this.#title.getInputNode(), 'blur', this.stopInputMonitoring.bind(this));\n\t\tEvent.bind(this.#title.getInputNode(), 'blur', this.stopInputMonitoring.bind(this));\n\n\t\tthis.#logo24.getFieldView().subscribe('change', (event: BaseEvent) => {\n\t\t\tEventEmitter.emit(\n\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\tthis.getEventNamespace() + ':Portal:Change',\n\t\t\t\tnew BaseEvent({ data: { logo24:  event.getData() === true ? '24' : '' } })\n\t\t\t);\n\t\t});\n\n\t\tthis.#content = Tag.render`\n\t\t<div id=\"${this.#title.getId()}\" class=\"ui-section__field-selector --no-border --no-margin --align-center\">\n\t\t\t<div class=\"ui-section__field-container\">\n\t\t\t\t<div class=\"ui-section__field-label_box\">\n\t\t\t\t\t<label class=\"ui-section__field-label\" for=\"${this.#title.getName()}\">\n\t\t\t\t\t\t${this.#title.getLabel()}\n\t\t\t\t\t</label> \n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-section__field-inner\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-block\">\n\t\t\t\t\t\t${this.#title.getInputNode()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t`;\n\n\t\treturn this.#content;\n\t}\n\n\tgetLogo24Field()\n\t{\n\t\treturn this.#logo24;\n\t}\n}\n","import { EventEmitter } from 'main.core.events';\nimport {Dom, Type} from 'main.core';\nimport {\n\tAscendingOpeningVisitor,\n\tBaseSettingsElement,\n\tBaseSettingsPage,\n\tRecursiveFilteringVisitor,\n\tSettingsField,\n\tSettingsRow,\n\tSettingsSection,\n\tTabField,\n\tTabsField,\n} from 'ui.form-elements.field';\nimport { SiteTitleField } from './fields/site-title-field';\nimport { Settings } from './settings';\nimport {SiteTitle24Field} from \"./fields/site-title-24-field\";\n\nexport class Navigation\n{\n\t#settings: Settings;\n\t#currentPage: ?BaseSettingsPage;\n\t#prevPage: ?BaseSettingsPage;\n\n\tconstructor(settings: Settings)\n\t{\n\t\tthis.#settings = settings;\n\t\tEventEmitter.subscribe('BX.Intranet.SettingsNavigation:onMove', (event) => {\n\t\t\tconst {page, fieldName} = event.data;\n\t\t\tif (this.getCurrentPage()?.getType() === page)\n\t\t\t{\n\t\t\t\tthis.moveTo(this.getCurrentPage(), fieldName);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst pageObj = this.getPageByType(page);\n\n\t\t\tif (!pageObj?.hasData())\n\t\t\t{\n\t\t\t\tEventEmitter.subscribeOnce('BX.Intranet.Settings:onPageComplete',(event) => {\n\t\t\t\t\tif (event.data.page.hasContent())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.moveTo(event.data.page, fieldName);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\n\t\t\tEventEmitter.subscribeOnce('BX.Intranet.Settings:onAfterShowPage',(event) => {\n\t\t\t\tif (event.data.page.hasContent())\n\t\t\t\t{\n\t\t\t\t\tthis.moveTo(event.data.page, fieldName);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.#settings.show(page);\n\t\t});\n\t}\n\n\tgetPageByType(type: string): ?BaseSettingsPage\n\t{\n\t\treturn this.getPages().find((page: BaseSettingsPage) => {\n\t\t\treturn page.getType() === type;\n\t\t});\n\t}\n\n\tgetCurrentPage(): ?BaseSettingsPage\n\t{\n\t\treturn this.#currentPage;\n\t}\n\n\tgetPrevPage(): ?BaseSettingsPage\n\t{\n\t\treturn this.#prevPage;\n\t}\n\n\tchangePage(page: BaseSettingsPage)\n\t{\n\t\tif (!(page instanceof BaseSettingsPage))\n\t\t{\n\t\t\tconsole.log('Not found \"' + type + '\" page');\n\t\t\treturn;\n\t\t}\n\n\t\tif (page === this.#currentPage)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#prevPage = this.#currentPage;\n\t\tthis.#currentPage = page;\n\t}\n\n\tgetPages(): [BaseSettingsPage]\n\t{\n\t\treturn this.#settings.getChildrenElements();\n\t}\n\n\tupdateAddressBar()\n\t{\n\t\tlet url = new URL(window.location.href);\n\t\turl.searchParams.set('page', this.getCurrentPage()?.getType());\n\t\turl.searchParams.delete('IFRAME');\n\t\turl.searchParams.delete('IFRAME_TYPE');\n\t\ttop.window.history.replaceState(null, '', url.toString());\n\t}\n\n\n\tfindByFieldName(rootNode: BaseSettingsElement, fieldName: string): ?SettingsField\n\t{\n\t\tconst node = RecursiveFilteringVisitor.startFrom(rootNode, (node) => {\n\t\t\tif (\n\t\t\t\tnode instanceof SettingsSection\n\t\t\t\t&& node.getSectionView().getId() === fieldName\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tnode instanceof TabField\n\t\t\t\t&& node.getFieldView().getId() === fieldName\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn ((node instanceof SettingsField\n\t\t\t\t|| node instanceof SiteTitleField\n\t\t\t\t\t|| node instanceof SiteTitle24Field)\n\t\t\t&& (node.getFieldView().getName() === fieldName || node.getFieldView().getId() === fieldName))\n\t\t});\n\n\t\treturn node.shift() ?? null;\n\t}\n\n\tscrollToNode(node: SettingsField): void\n\t{\n\t\tconst element = node.render();\n\t\tconst headerOffset = 45;\n\t\tconst elementPosition = element.getBoundingClientRect().top;\n\t\tconst offsetPosition = elementPosition + window.pageYOffset - headerOffset;\n\n\t\tscrollTo({\n\t\t\ttop: offsetPosition,\n\t\t\tbehavior: \"smooth\"\n\t\t});\n\t}\n\n\tmoveTo(element: BaseSettingsPage, fieldName: string): void\n\t{\n\t\tconst fieldNode = this.findByFieldName(element, fieldName);\n\t\tif (Type.isNil(fieldNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet isColored = false;\n\t\tAscendingOpeningVisitor.startFrom(fieldNode, (element) => {\n\t\t\tif (element instanceof SettingsRow)\n\t\t\t{\n\t\t\t\telement.getRowView().show();\n\t\t\t}\n\t\t\telse if (element instanceof SettingsSection)\n\t\t\t{\n\t\t\t\telement.getSectionView().toggle(true, false);\n\t\t\t}\n\t\t\telse if (element instanceof TabField)\n\t\t\t{\n\t\t\t\tconst tabs = element.getParentElement();\n\n\t\t\t\tif (tabs instanceof TabsField)\n\t\t\t\t{\n\t\t\t\t\ttabs.activateTab(element, false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!isColored)\n\t\t\t{\n\t\t\t\tisColored = element.highlight();\n\t\t\t}\n\t\t});\n\t\tthis.scrollToNode(fieldNode);\n\t}\n}","import { EventEmitter } from 'main.core.events';\nimport { Draggable } from 'ui.draganddrop.draggable';\nimport { Section, Row } from 'ui.section';\nimport { SwitcherNestedItem, SwitcherNested } from 'ui.switcher-nested';\nimport { Loc, Type, Event as EventBX, Dom, Tag } from 'main.core';\nimport { SettingsSection, SettingsRow, BaseSettingsPage } from 'ui.form-elements.field';\n\nexport class ToolsPage extends BaseSettingsPage\n{\n\t#inputForSaveSortTools: HTMLElement;\n\t#toolsWrapperRow: Row;\n\t#draggable: Draggable;\n\t#mainSection: Section;\n\t#settingsSection: SettingsSection;\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.titlePage = Loc.getMessage('INTRANET_SETTINGS_TITLE_PAGE_TOOLS');\n\t\tthis.descriptionPage = Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_PAGE_TOOLS');\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn 'tools';\n\t}\n\n\tappendSections(contentNode: HTMLElement): void\n\t{\n\t\tconst description = new Row({\n\t\t\tcontent: this.getDescription().getContainer(),\n\t\t});\n\t\tnew SettingsRow({\n\t\t\trow: description,\n\t\t\tparent: this.#getSettingsSection(),\n\t\t});\n\n\t\tif (this.hasValue('tools'))\n\t\t{\n\t\t\tthis.#renderToolsSelectors();\n\t\t}\n\n\t\tthis.#getSettingsSection().renderTo(contentNode);\n\t}\n\n\t#renderToolsSelectors(): void\n\t{\n\t\tconst tools = this.getValue('tools');\n\t\tconst startSort = [];\n\t\tconst toolSelectors = [];\n\n\t\tObject.keys(tools).forEach((item) => {\n\t\t\tstartSort.push(tools[item].menuId)\n\t\t\tconst tool = tools[item];\n\t\t\tconst subgroups = tool.subgroups;\n\t\t\tlet toolSelectorItems = [];\n\n\t\t\tif (Object.keys(subgroups).length > 0)\n\t\t\t{\n\t\t\t\ttoolSelectorItems = this.#getToolsSelectorsItems(subgroups, tool);\n\t\t\t}\n\n\t\t\tconst toolSelector = new SwitcherNested({\n\t\t\t\tid: tool.code,\n\t\t\t\ttitle: tool.name,\n\t\t\t\tlink: this.getPermission().canEdit() ? tool['settings-path'] : null,\n\t\t\t\tinfoHelperCode: this.getPermission().canEdit() ? tool['infohelper-slider'] : null,\n\t\t\t\tlinkTitle: tool['settings-title'] ?? Loc.getMessage('INTRANET_SETTINGS_SECTION_TOOLS_LINK_SETTINGS'),\n\t\t\t\tisChecked: tool.enabled,\n\t\t\t\tmainInputName: tool.code,\n\t\t\t\tisOpen: false,\n\t\t\t\titems: toolSelectorItems,\n\t\t\t\tisDisabled: !this.getPermission().canEdit(),\n\t\t\t\tisDefault: tool.default,\n\t\t\t\thelpMessage: !this.getPermission().canEdit()\n\t\t\t\t\t? Loc.getMessage('INTRANET_SETTINGS_ELEMENT_PERMISSION_MSG')\n\t\t\t\t\t: Loc.getMessage('INTRANET_SETTINGS_FIELD_HELP_MESSAGE_DISABLED', {'#TOOL#': tool.name}),\n\t\t\t});\n\t\t\ttoolSelectors.push(toolSelector);\n\n\t\t\tconst toolSelectorSection = new SettingsSection({\n\t\t\t\tsection: toolSelector,\n\t\t\t});\n\n\t\t\tDom.style(toolSelectorSection.getSectionView().render(), 'margin-bottom', '8px');\n\t\t\tDom.attr(toolSelectorSection.getSectionView().render(), 'data-menu-id', tool.menuId);\n\t\t\tthis.#getToolsWrapperRow().append(toolSelectorSection.getSectionView().render());\n\t\t\tnew SettingsRow({\n\t\t\t\trow: this.#getToolsWrapperRow(),\n\t\t\t\tparent: this.#getSettingsSection(),\n\t\t\t\tchild: toolSelectorSection\n\t\t\t});\n\t\t});\n\t}\n\n\t#getSubToolHelpMessage(tool: Object, parentToolName: ?string): string\n\t{\n\t\tif (!this.getPermission().canEdit())\n\t\t{\n\t\t\treturn Loc.getMessage('INTRANET_SETTINGS_ELEMENT_PERMISSION_MSG');\n\t\t}\n\n\t\tif (tool.disabled)\n\t\t{\n\t\t\treturn Loc.getMessage('INTRANET_SETTINGS_FIELD_HELP_MESSAGE_DISABLED', {'#TOOL#': tool.name});\n\t\t}\n\n\t\tif (tool.default)\n\t\t{\n\t\t\treturn Loc.getMessage('INTRANET_SETTINGS_FIELD_HELP_MESSAGE_MAIN_TOOL', {'#TOOL#': parentToolName ?? ''});\n\t\t}\n\n\t\treturn '';\n\t}\n\n\t#getToolsSelectorsItems(subgroups: Object, tool: Object): Array<SwitcherNestedItem>\n\t{\n\t\tconst toolSelectorItems = [];\n\n\t\tObject.keys(subgroups).forEach((item) => {\n\t\t\tconst subgroupConfig = subgroups[item];\n\n\t\t\tif (\n\t\t\t\tType.isNull(subgroupConfig.name)\n\t\t\t\t|| Type.isNull(subgroupConfig.code)\n\t\t\t\t|| Type.isNull(subgroupConfig.enabled)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst toolSelectorItem = new SwitcherNestedItem({\n\t\t\t\ttitle: subgroupConfig.name,\n\t\t\t\tid: subgroupConfig.code,\n\t\t\t\tinputName: subgroupConfig.code,\n\t\t\t\tisChecked: subgroupConfig.enabled,\n\t\t\t\tsettingsPath: this.getPermission().canEdit() ? subgroupConfig['settings_path'] : null,\n\t\t\t\tsettingsTitle: subgroupConfig['settings_title'] ?? Loc.getMessage('INTRANET_SETTINGS_SECTION_TOOLS_LINK_SETTINGS'),\n\t\t\t\tinfoHelperCode: this.getPermission().canEdit() ? subgroupConfig['infohelper-slider'] : null,\n\t\t\t\tisDisabled: !this.getPermission().canEdit(),\n\t\t\t\tisDefault: subgroupConfig.default ?? subgroupConfig.disabled ?? false,\n\t\t\t\thelpMessage: this.#getSubToolHelpMessage(subgroupConfig, tool.name),\n\t\t\t});\n\n\t\t\tif (subgroupConfig.disabled)\n\t\t\t{\n\t\t\t\tDom.style(toolSelectorItem.getSwitcher().getNode(), {opacity: '0.4'});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tEventEmitter.subscribe(\n\t\t\t\t\ttoolSelectorItem.getSwitcher(),\n\t\t\t\t\t'toggled',\n\t\t\t\t\t() => {\n\t\t\t\t\t\tthis.getAnalytic()?.addEventToggleTools(\n\t\t\t\t\t\t\tsubgroupConfig.code,\n\t\t\t\t\t\t\ttoolSelectorItem.getSwitcher().isChecked()\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (subgroupConfig.code === 'tool_subgroup_team_work_instant_messenger')\n\t\t\t{\n\t\t\t\tEventBX.bind(\n\t\t\t\t\ttoolSelectorItem.getSwitcher().getNode(),\n\t\t\t\t\t'click',\n\t\t\t\t\t() => {\n\t\t\t\t\t\tif (!toolSelectorItem.getSwitcher().isChecked())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.#getWarningMessage(subgroupConfig.code, toolSelectorItem.getSwitcher().getNode(), Loc.getMessage('INTRANET_SETTINGS_WARNING_TOOL_INSTANT_MESSENGER')).show();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\ttoolSelectorItems.push(toolSelectorItem);\n\t\t});\n\n\t\treturn toolSelectorItems;\n\t}\n\n\t#getMainSection(): Section\n\t{\n\t\tif (this.#mainSection)\n\t\t{\n\t\t\treturn this.#mainSection;\n\t\t}\n\n\t\tthis.#mainSection = new Section(this.getValue('sectionTools'));\n\n\t\treturn this.#mainSection;\n\t}\n\n\t#getSettingsSection(): SettingsSection\n\t{\n\t\tif (this.#settingsSection)\n\t\t{\n\t\t\treturn this.#settingsSection;\n\t\t}\n\n\t\tthis.#settingsSection = new SettingsSection({\n\t\t\tsection: this.#getMainSection(),\n\t\t\tparent: this,\n\t\t});\n\n\t\treturn this.#settingsSection;\n\t}\n\n\tgetDescription(): BX.UI.Alert\n\t{\n\t\tconst descriptionText = `\n\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_TOOLS_DESCRIPTION')}\n\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=18213196')\">\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t</a>\n\t\t`;\n\n\t\treturn new BX.UI.Alert({\n\t\t\ttext: descriptionText,\n\t\t\tinline: true,\n\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\tanimated: true,\n\t\t});\n\t}\n\n\t#getInputForSaveSortTools(): HTMLElement\n\t{\n\t\tif (this.#inputForSaveSortTools)\n\t\t{\n\t\t\treturn this.#inputForSaveSortTools;\n\t\t}\n\n\t\tthis.#inputForSaveSortTools = Tag.render`\n\t\t\t<input type=\"hidden\" name=\"tools-sort\">\n\t\t`;\n\n\t\treturn this.#inputForSaveSortTools;\n\t}\n\n\t#getDraggable(): Draggable\n\t{\n\t\tif (this.#draggable)\n\t\t{\n\t\t\treturn this.#draggable;\n\t\t}\n\n\t\tthis.#draggable = new Draggable({\n\t\t\tcontainer: [this.#getToolsWrapperRow().render()],\n\t\t\tdraggable: '.--tool-selector',\n\t\t\tdragElement: '.ui-section__dragdrop-icon-wrapper',\n\t\t\ttype: Draggable.CLONE,\n\t\t});\n\n\t\treturn this.#draggable;\n\t}\n\n\t#getToolsWrapperRow(): Row\n\t{\n\t\tif (this.#toolsWrapperRow)\n\t\t{\n\t\t\treturn this.#toolsWrapperRow;\n\t\t}\n\n\t\tthis.#toolsWrapperRow = new Row({});\n\n\t\treturn this.#toolsWrapperRow;\n\t}\n\n\t#getWarningMessage(toolId, bindElement, message)\n\t{\n\t\treturn BX.PopupWindowManager.create(\n\t\t\ttoolId,\n\t\t\tbindElement,\n\t\t\t{\n\t\t\t\tcontent: message,\n\t\t\t\tdarkMode: true,\n\t\t\t\tautoHide: true,\n\t\t\t\tangle: true,\n\t\t\t\toffsetLeft: 14,\n\t\t\t\tbindOptions: {\n\t\t\t\t\tposition: 'bottom',\n\t\t\t\t},\n\t\t\t\tcloseByEsc: true,\n\t\t\t}\n\t\t);\n\t}\n}\n","import { EventEmitter } from 'main.core.events';\nimport { AnalyticSettingsEvent } from '../analytic';\nimport { Checker, Selector, TextInput, InlineChecker } from 'ui.form-elements.view';\nimport { Loc } from 'main.core';\nimport 'ui.icon-set.main';\nimport 'ui.icon-set.actions';\nimport {Section, Row, SeparatorRow} from 'ui.section';\nimport 'ui.forms';\nimport { SettingsSection, SettingsField, SettingsRow, BaseSettingsPage } from 'ui.form-elements.field';\n\nexport class EmployeePage extends BaseSettingsPage\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.titlePage = Loc.getMessage('INTRANET_SETTINGS_TITLE_PAGE_EMPLOYEE');\n\t\tthis.descriptionPage = Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_PAGE_EMPLOYEE_BOX');\n\t}\n\n\tonSuccessDataFetched(response): void\n\t{\n\t\tsuper.onSuccessDataFetched(response);\n\n\t\tif (this.hasValue('IS_BITRIX_24') && this.getValue('IS_BITRIX_24'))\n\t\t{\n\t\t\tthis.descriptionPage = Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_PAGE_EMPLOYEE');\n\t\t\tthis.render().querySelector('.intranet-settings__page-header_desc').innerText = this.descriptionPage;\n\t\t}\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn 'employee';\n\t}\n\n\tappendSections(contentNode: HTMLElement): void\n\t{\n\t\tlet profileSection = this.#buildProfileSection();\n\t\tprofileSection?.renderTo(contentNode);\n\n\t\tlet inviteSection = this.#buildInviteSection();\n\t\tinviteSection?.renderTo(contentNode);\n\n\t\tlet additionalSection = this.#buildAdditionalSection();\n\t\tadditionalSection?.renderTo(contentNode);\n\t}\n\n\t#buildAdditionalSection(): ?SettingsSection\n\t{\n\t\tif (!this.hasValue('SECTION_ADDITIONAL'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet additionalSection = new Section(this.getValue('SECTION_ADDITIONAL'));\n\n\t\tlet sectionSettings = new SettingsSection({\n\t\t\tsection: additionalSection,\n\t\t\tparent: this\n\t\t});\n\n\t\tif (this.hasValue('allow_company_pulse'))\n\t\t{\n\t\t\tlet companyPulseField = new Checker(this.getValue('allow_company_pulse'));\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tcompanyPulseField.switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() =>\n\t\t\t\t{\n\t\t\t\t\tthis.getAnalytic()?.addEventConfigEmployee(\n\t\t\t\t\t\tAnalyticSettingsEvent.CHANGE_QUICK_REG,\n\t\t\t\t\t\tcompanyPulseField.isChecked()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tEmployeePage.addToSectionHelper(companyPulseField, sectionSettings);\n\t\t}\n\n\t\treturn sectionSettings;\n\t}\n\t#buildProfileSection(): ?SettingsSection\n\t{\n\t\tif (!this.hasValue('SECTION_PROFILE'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet profileSection = new Section(this.getValue('SECTION_PROFILE'));\n\n\t\tlet sectionSettings = new SettingsSection({\n\t\t\tsection: profileSection,\n\t\t\tparent: this\n\t\t});\n\n\t\tif (this.hasValue('fieldFormatName'))\n\t\t{\n\t\t\tlet hasSelectValue = false;\n\t\t\tlet currentValue = this.getValue('fieldFormatName').current;\n\t\t\tfor (let value of this.getValue('fieldFormatName').values)\n\t\t\t{\n\t\t\t\tif (value.selected === true)\n\t\t\t\t{\n\t\t\t\t\thasSelectValue = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.getValue('fieldFormatName').values.push({\n\t\t\t\tvalue: 'other',\n\t\t\t\tname: Loc.getMessage('INTRANET_SETTINGS_FIELD_OPTION_OTHER'),\n\t\t\t\tselected: !hasSelectValue,\n\t\t\t});\n\n\t\t\tlet nameFormatField = new Selector({\n\t\t\t\tlabel: this.getValue('fieldFormatName').label ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_NAME_FORMAT'),\n\t\t\t\tname: this.getValue('fieldFormatName').name + '_selector',\n\t\t\t\titems: this.getValue('fieldFormatName').values,\n\t\t\t\thints: this.getValue('fieldFormatName').hints,\n\t\t\t\tcurrent: this.getValue('fieldFormatName').current,\n\t\t\t});\n\n\t\t\tlet settingsField = new SettingsField({\n\t\t\t\tfieldView: nameFormatField\n\t\t\t});\n\n\t\t\tnew SettingsRow({\n\t\t\t\tchild: settingsField,\n\t\t\t\tparent: sectionSettings\n\t\t\t});\n\n\t\t\tlet customFormatNameField = new TextInput({\n\t\t\t\tinputName: this.getValue('fieldFormatName').name,\n\t\t\t\tlabel: '',\n\t\t\t\tvalue: currentValue,\n\t\t\t});\n\n\t\t\tsettingsField = new SettingsField({\n\t\t\t\tfieldView: customFormatNameField,\n\t\t\t});\n\n\t\t\tlet customFormatNameRow = new Row({\n\t\t\t\tisHidden: true,\n\t\t\t});\n\n\t\t\tnew SettingsRow({\n\t\t\t\trow: customFormatNameRow,\n\t\t\t\tparent: sectionSettings,\n\t\t\t\tchild: settingsField,\n\t\t\t});\n\n\t\t\tif (!hasSelectValue)\n\t\t\t{\n\t\t\t\tcustomFormatNameRow.show();\n\t\t\t}\n\n\t\t\tnameFormatField.getInputNode()\n\t\t\t\t.addEventListener('change', (event) => {\n\t\t\t\t\tif (event.target.value === 'other')\n\t\t\t\t\t{\n\t\t\t\t\t\tcustomFormatNameRow.show();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tcustomFormatNameField.getInputNode().value = nameFormatField.getInputNode().value;\n\t\t\t\t\t\tcustomFormatNameRow.hide();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\n\t\tif (this.hasValue('fieldFormatPhoneNumber'))\n\t\t{\n\t\t\tlet formatNumberField = new Selector(this.getValue('fieldFormatPhoneNumber'));\n\n\t\t\tEmployeePage.addToSectionHelper(formatNumberField, sectionSettings);\n\t\t}\n\n\t\tif (this.hasValue('fieldFormatAddress'))\n\t\t{\n\t\t\tlet addressFormatField = new Selector(this.getValue('fieldFormatAddress'));\n\n\t\t\tlet addressFormatRow = new Row({\n\t\t\t\tseparator: this.hasValue('show_year_for_female') ? 'bottom' : null,\n\t\t\t\tclassName: '--block',\n\t\t\t});\n\n\t\t\tEmployeePage.addToSectionHelper(addressFormatField, sectionSettings, addressFormatRow);\n\t\t}\n\n\t\tif (this.hasValue('show_year_for_female'))\n\t\t{\n\t\t\tlet showBirthYearField = new InlineChecker(this.getValue('show_year_for_female'));\n\n\t\t\tEmployeePage.addToSectionHelper(showBirthYearField, sectionSettings);\n\t\t}\n\n\t\treturn sectionSettings;\n\t}\n\n\t#buildInviteSection(): ?SettingsSection\n\t{\n\t\tif (!this.hasValue('SECTION_INVITE'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet inviteSection = new Section(this.getValue('SECTION_INVITE'));\n\n\t\tlet sectionSettings = new SettingsSection({\n\t\t\tsection: inviteSection,\n\t\t\tparent: this\n\t\t});\n\n\t\tif (this.hasValue('allow_register'))\n\t\t{\n\t\t\tlet fastReqField = new Checker(this.getValue('allow_register'));\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tfastReqField.switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() =>\n\t\t\t\t{\n\t\t\t\t\tthis.getAnalytic()?.addEventConfigEmployee(\n\t\t\t\t\t\tAnalyticSettingsEvent.CHANGE_QUICK_REG,\n\t\t\t\t\t\tfastReqField.isChecked()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tEmployeePage.addToSectionHelper(fastReqField, sectionSettings);\n\t\t}\n\n\t\tif (this.hasValue('allow_invite_collabers'))\n\t\t{\n\t\t\tlet inviteCollabersField = new Checker(this.getValue('allow_invite_collabers'));\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tinviteCollabersField.switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() =>\n\t\t\t\t{\n\t\t\t\t\tthis.getAnalytic()?.addEventConfigEmployee(\n\t\t\t\t\t\tAnalyticSettingsEvent.CHANGE_COLLABERS_INVITATION,\n\t\t\t\t\t\tinviteCollabersField.isChecked()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\t\t\tEmployeePage.addToSectionHelper(inviteCollabersField, sectionSettings);\n\t\t}\n\n\t\tif (this.hasValue('show_fired_employees'))\n\t\t{\n\t\t\tlet showQuitField = new Checker(this.getValue('show_fired_employees'));\n\t\t\tEmployeePage.addToSectionHelper(showQuitField, sectionSettings);\n\t\t}\n\n\t\tif (this.hasValue('general_chat_message_join'))\n\t\t{\n\t\t\tlet newUserField = new Checker(this.getValue('general_chat_message_join'));\n\n\t\t\tEmployeePage.addToSectionHelper(newUserField, sectionSettings);\n\t\t}\n\n\t\tif (this.hasValue('allow_new_user_lf'))\n\t\t{\n\t\t\tlet newUserLfField = new Checker(this.getValue('allow_new_user_lf'));\n\t\t\tEmployeePage.addToSectionHelper(newUserLfField, sectionSettings);\n\t\t}\n\n\t\tif (this.hasValue('feature_extranet'))\n\t\t{\n\t\t\tlet extranetField = new Checker(this.getValue('feature_extranet'));\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\textranetField.switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() =>\n\t\t\t\t{\n\t\t\t\t\tthis.getAnalytic()?.addEventConfigEmployee(\n\t\t\t\t\t\tAnalyticSettingsEvent.CHANGE_EXTRANET_INVITE,\n\t\t\t\t\t\textranetField.isChecked()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tEmployeePage.addToSectionHelper(extranetField, sectionSettings);\n\t\t}\n\n\t\treturn sectionSettings;\n\t}\n\n\n}","import { Tag, Dom } from 'main.core';\nimport { Button } from 'ui.buttons';\n\nexport class ButtonBar\n{\n\t#buttonBarElement: HTMLElement;\n\t#buttons: [Button];\n\n\tconstructor(buttons: [Button] = [])\n\t{\n\t\tthis.#buttons = buttons;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#buttonBarElement)\n\t\t{\n\t\t\treturn this.#buttonBarElement;\n\t\t}\n\n\t\tthis.#buttonBarElement = Tag.render`<div class=\"intranet-settings__button_bar\"></div>`;\n\n\t\tfor (const button of this.#buttons)\n\t\t{\n\t\t\tDom.append(button.getContainer(), this.#buttonBarElement);\n\t\t}\n\n\t\treturn this.#buttonBarElement;\n\t}\n\n\tgetButtons(): [Button]\n\t{\n\t\treturn this.#buttons;\n\t}\n\n\taddButton(button: Button)\n\t{\n\t\tthis.#buttons.push(button);\n\t\tDom.append(button.getContainer(), this.render());\n\t}\n}","import { Loc } from 'main.core';\nimport { Button, ButtonState } from 'ui.buttons';\nimport { ErrorCollection } from 'ui.form-elements.field';\n\nexport class LandingButton\n{\n\t#button: Button\n\n\tconstructor()\n\t{\n\t\tthis.#button = new Button({\n\t\t\tclassName: 'landing-button-trigger',\n\t\t\tround: true,\n\t\t\tnoCaps: true,\n\t\t\tsize: BX.UI.Button.Size.MEDIUM,\n\t\t\tcolor: BX.UI.Button.Color.LIGHT_BORDER,\n\t\t});\n\t}\n\n\tsetState(state: LandingButtonState): void\n\t{\n\t\tstate.apply(this.#button);\n\t}\n\n\tgetButton(): Button\n\t{\n\t\treturn this.#button;\n\t}\n}\n\nexport class LandingButtonState\n{\n\tapply(button: Button)\n\t{\n\n\t}\n}\n\nexport type LandingOptions = {\n\tis_connected: boolean,\n\tis_public: boolean,\n\tpublic_url: string,\n\tedit_url: string\n}\n\nexport class EditState extends LandingButtonState\n{\n\t#landing: LandingOptions\n\n\tconstructor(landing: LandingOptions)\n\t{\n\t\tsuper();\n\t\tthis.#landing = landing;\n\t}\n\n\tapply(button: Button): void\n\t{\n\t\tbutton.setText(Loc.getMessage('INTRANET_SETTINGS_BUTTON_EDIT'));\n\t\tbutton.setDropdown(false);\n\t\tbutton.bindEvent('click', () => {\n\t\t\tthis.openNewTab(this.#landing.edit_url);\n\t\t});\n\t}\n\n\topenNewTab(url: string)\n\t{\n\t\twindow.open(url, '_blank').focus();\n\t}\n}\n\nexport class ShowState extends LandingButtonState\n{\n\t#landing: LandingOptions\n\t#menuRenderer: function\n\n\tconstructor(landing: LandingOptions, menuRenderer: function)\n\t{\n\t\tsuper();\n\t\tthis.#landing = landing;\n\t\tthis.#menuRenderer = menuRenderer;\n\t}\n\n\tapply(button: Button): void\n\t{\n\t\tbutton.setText(Loc.getMessage('INTRANET_SETTINGS_BUTTON_REQ_SITE'));\n\t\tbutton.setDropdown(true);\n\t\tbutton.unbindEvent('click');\n\t\tbutton.setColor(BX.UI.Button.Color.PRIMARY);\n\t\tbutton.setMenu(this.#menuRenderer(this.#landing));\n\t}\n}\n\nexport class CreateState extends LandingButtonState\n{\n\t#requestBuilder: function;\n\t#menuRenderer: function\n\n\tconstructor(request: function, menuRenderer: function)\n\t{\n\t\tsuper();\n\t\tthis.#requestBuilder = request;\n\t\tthis.#menuRenderer = menuRenderer;\n\t}\n\n\tapply(button: Button): void\n\t{\n\t\tbutton.setText(Loc.getMessage('INTRANET_SETTINGS_BUTTON_CREATE'));\n\t\tbutton.setDropdown(false);\n\t\tbutton.bindEvent('click', (event) => {\n\n\t\t\tif (button.getState() === ButtonState.WAITING)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tbutton.setState(ButtonState.WAITING);\n\n\t\t\tthis.#requestBuilder().then((response) => {\n\t\t\t\tconst landing: LandingOptions = response.data;\n\t\t\t\tbutton.setState(null);\n\t\t\t\tbutton.unbindEvent('click');\n\t\t\t\tif (landing.is_public)\n\t\t\t\t{\n\t\t\t\t\t(new ShowState(landing, this.#menuRenderer)).apply(button);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconst state = new EditState(landing);\n\t\t\t\t\tstate.apply(button);\n\t\t\t\t\tstate.openNewTab(landing.edit_url);\n\t\t\t\t}\n\n\t\t\t}, (response) => {\n\t\t\t\tbutton.setState(null);\n\t\t\t\tErrorCollection.showSystemError(response.errors[0].message)\n\t\t\t});\n\t\t});\n\t}\n\n}","import { Loc, Tag } from 'main.core';\nimport type { LandingOptions }  from './landing-button';\nimport { Button } from 'ui.buttons';\n\nexport class LandingCard\n{\n\t#landing: LandingOptions;\n\t#copyBtn: ?Button;\n\t#landingCardElement: ?HTMLElement;\n\n\tconstructor(landingOptions: LandingOptions)\n\t{\n\t\tthis.#landing = landingOptions;\n\t}\n\n\tqrRender()\n\t{\n\t\tlet qrContainer = Tag.render`<div class=\"intranet-settings__qr_image-container\"></div>`;\n\t\tnew QRCode(qrContainer, {\n\t\t\ttext: this.#landing.public_url,\n\t\t\twidth: 106,\n\t\t\theight: 106,\n\t\t});\n\n\t\treturn qrContainer;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#landingCardElement)\n\t\t{\n\t\t\treturn this.#landingCardElement;\n\t\t}\n\n\t\tconst onclickOpenEdit = () => {\n\t\t\twindow.open(this.#landing.edit_url, '_blank').focus();\n\t\t};\n\n\t\tthis.#landingCardElement = Tag.render`\n\t\t<div class=\"intranet-settings__req-info-container\">\n\t\t\t<div class=\"intranet-settings__req-info-inner\">\n\t\t\t\t<div class=\"intranet-settings__qr_container\">${this.qrRender()}</div>\n\t\t\t\t<div class=\"intranet-settings__qr_description-block\">\n\t\t\t\t\t<div class=\"intranet-settings__qr_help-text\">\n\t\t\t\t\t\t<h4 class=\"intranet-settings__qr_title\">${Loc.getMessage('INTRANET_SETTINGS_BUTTON_REQ_SITE')}</h4>\n\t\t\t\t\t\t<p class=\"intranet-settings__qr_text\">\n\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_BUTTON_REQ_HELP_TEXT', { '#SITE_URL#': this.#landing.public_url })}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"intranet-settings__qr_button\">\n\t\t\t\t\t\t${this.getCopyButton().getContainer()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"intranet-settings__qr_editor_box\" onclick=\"${onclickOpenEdit}\">\n\t\t\t\t<div class=\"intranet-settings__qr_editor_icon\">\n\t\t\t\t\t<div class=\"ui-icon-set --paint-1\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"intranet-settings__qr_editor_name\">${Loc.getMessage('INTRANET_SETTINGS_BUTTON_EDIT_LANDING')}</div>\n\t\t\t\t<div class=\"ui-icon-set --expand intranet-settings__qr_editor_btn\"></div>\n\t\t\t</div>\n\t\t</div>`;\n\n\t\treturn this.#landingCardElement;\n\t}\n\n\tgetCopyButton():Button\n\t{\n\t\tif (this.#copyBtn)\n\t\t{\n\t\t\treturn this.#copyBtn;\n\t\t}\n\n\t\tthis.#copyBtn = new Button({\n\t\t\ttext: Loc.getMessage('INTRANET_SETTINGS_BUTTON_REQ_COPY_LINK'),\n\t\t\tround: true,\n\t\t\tnoCaps: true,\n\t\t\tclassName: 'landing-copy-button',\n\t\t\tsize: BX.UI.Button.Size.EXTRA_SMALL,\n\t\t\tcolor: BX.UI.Button.Color.SUCCESS,\n\t\t\tevents: {\n\t\t\t\tclick: () => {\n\t\t\t\t\tif (BX.clipboard.copy(this.#landing.public_url))\n\t\t\t\t\t{\n\t\t\t\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: Loc.getMessage('INTRANET_SETTINGS_BUTTON_LINK_WAS_COPIED'),\n\t\t\t\t\t\t\tautoHide: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\treturn this.#copyBtn;\n\t}\n}","import { ajax } from 'main.core';\nimport { Button } from 'ui.buttons';\nimport type { LandingOptions } from './landing-button';\nimport { CreateState, EditState, LandingButton, LandingButtonState, ShowState } from './landing-button';\nimport { LandingCard } from './landing-card';\n\nexport class LandingButtonFactory\n{\n\t#options: LandingOptions;\n\tlandingData: Object;\n\t#menuRenderer: function;\n\n\tconstructor(options: LandingOptions, landingData)\n\t{\n\t\tthis.#options = options;\n\t\tthis.landingData = landingData;\n\t\tthis.#menuRenderer = this.#defaultMenuRenderer;\n\t}\n\n\tsetMenuRenderer(renderer: function): void\n\t{\n\t\tthis.#menuRenderer = renderer;\n\t}\n\n\tcreate(): Button\n\t{\n\t\tconst btn = new LandingButton();\n\t\tlet state: LandingButtonState;\n\t\tif (this.#options.is_connected && !this.#options.is_public)\n\t\t{\n\t\t\tstate = new EditState(this.#options);\n\t\t}\n\t\telse if (this.#options.is_connected && this.#options.is_public)\n\t\t{\n\t\t\tstate = new ShowState(this.#options, this.#menuRenderer.bind(this));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tstate = new CreateState(() => {\n\t\t\t\treturn this.#getRequestCreateLanding()\n\t\t\t}, this.#menuRenderer.bind(this));\n\t\t}\n\t\tbtn.setState(state);\n\n\t\treturn btn.getButton();\n\t}\n\n\t#defaultMenuRenderer(landingData: LandingOptions): Object\n\t{\n\t\treturn {\n\t\t\tangle: true,\n\t\t\tmaxWidth: 396,\n\t\t\tcloseByEsc: true,\n\t\t\tclassName: 'intranet-settings__qr_popup',\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\thtml: (new LandingCard(landingData)).render(),\n\t\t\t\t\tclassName: 'intranet-settings__qr_popup_item',\n\t\t\t\t},\n\t\t\t],\n\t\t}\n\t}\n\n\t#getRequestCreateLanding(): Promise\n\t{\n\t\treturn ajax.runComponentAction(\n\t\t\t'bitrix:intranet.settings',\n\t\t\t'getLanding',\n\t\t\t{\n\t\t\t\tmode: 'class',\n\t\t\t\tdata: {\n\t\t\t\t\tcompanyId: this.landingData.company_id,\n\t\t\t\t\trequisiteId: this.landingData.requisite_id,\n\t\t\t\t\tbankRequisiteId: this.landingData.bank_requisite_id,\n\t\t\t\t}\n\t\t\t},\n\t\t)\n\t}\n}","import { Dom, Loc, Tag, Type } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { Button } from 'ui.buttons';\nimport { ButtonBar } from './button-bar';\nimport { LandingButtonFactory } from './landing-button-factory';\n\ntype CardOptions = {\n\tcompany: Object,\n\tfields: Array,\n\tphone: Array,\n\temail: Array,\n\tsite: Array,\n\tlanding: Array,\n\tlandingData: Array,\n};\n\nexport class Card\n{\n\t#options: CardOptions;\n\t#cardElement: ?HTMLElement;\n\t#requisiteFieldsElement: ?HTMLElement;\n\t#buttonBar: ?ButtonBar;\n\n\tconstructor(options: CardOptions)\n\t{\n\t\tthis.#options = options;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#cardElement)\n\t\t{\n\t\t\treturn this.#cardElement;\n\t\t}\n\n\t\tthis.#cardElement = Tag.render`\n\t\t<div class=\"intranet-settings__req_background\">\n\t\t\t<div class=\"intranet-settings__req-card_wrapper\">\n\t\t\t\t<div class=\"intranet-settings__header\">\n\t\t\t\t\t<div class=\"intranet-settings__title\"> <span class=\"ui-section__title-icon ui-icon-set --city\"></span> <span>${this.#options.company.TITLE}</span></div>\n\t\t\t\t\t<div class=\"intranet-settings__contact_bar\"> \n\t\t\t\t\t\t<span class=\"intranet-settings__contact_bar_item\">\n\t\t\t\t\t\t\t${\n\t\t\tthis.#buildCompanyField(\n\t\t\t\tType.isStringFilled(this.#options.phone)\n\t\t\t\t\t? this.#options.phone\n\t\t\t\t\t: Loc.getMessage('INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB_PHONE')\n\t\t\t)\n\t\t}\n\t\t\t\t\t\t</span> \n\t\t\t\t\t\t<span class=\"intranet-settings__contact_bar_item\">\n\t\t\t\t\t\t\t${\n\t\t\tthis.#buildCompanyField(\n\t\t\t\tType.isStringFilled(this.#options.email)\n\t\t\t\t\t? this.#options.email\n\t\t\t\t\t: Loc.getMessage('INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB_EMAIL')\n\t\t\t)\n\t\t}\n\t\t\t\t\t\t</span> \n\t\t\t\t\t\t<span class=\"intranet-settings__contact_bar_item\">\n\t\t\t\t\t\t\t${\n\t\t\tthis.#buildCompanyField(\n\t\t\t\tType.isStringFilled(this.#options.site)\n\t\t\t\t\t? this.#options.site\n\t\t\t\t\t: Loc.getMessage('INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB_SITE')\n\t\t\t)\n\t\t}\n\t\t\t\t\t\t</span> \n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t${this.requisiteFieldsRender()}\n\t\t\t\t${this.getButtonsBar().render()}\n\t\t\t</div>\n\t\t</div>\n\t\t`;\n\n\t\treturn this.#cardElement;\n\t}\n\n\t#buildCompanyField(label: string): HTMLElement\n\t{\n\t\treturn Dom.create('a', {\n\t\t\ttext: label,\n\t\t\tattrs: {\n\t\t\t\thref: this.getCompanyUrl(),\n\t\t\t}\n\t\t});\n\t}\n\n\t#buildField(label: string): HTMLElement\n\t{\n\t\treturn Dom.create('a', {\n\t\t\ttext: label,\n\t\t\tattrs: {\n\t\t\t\thref: this.getRequisiteUrl(),\n\t\t\t}\n\t\t});\n\t}\n\n\tgetRequisiteUrl(): string\n\t{\n\t\tconst requisiteId = this.#options.landingData.requisite_id;\n\n\t\tif (requisiteId)\n\t\t{\n\t\t\treturn '/crm/company/requisite/' + requisiteId + '/';\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn '/crm/company/requisite/0/?itemId=' + this.#options.company.ID;\n\t\t}\n\t}\n\n\tgetCompanyUrl(): string\n\t{\n\t\tif (this.#options.company.ID === 0)\n\t\t{\n\t\t\treturn '/crm/company/details/0/?mycompany=y&TITLE=' + this.#options.company.TITLE;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn '/crm/company/details/' + this.#options.company.ID + '/';\n\t\t}\n\t}\n\n\trequisiteFieldsRender(): HTMLElement\n\t{\n\t\tif (this.#requisiteFieldsElement)\n\t\t{\n\t\t\treturn this.#requisiteFieldsElement;\n\t\t}\n\t\tconst fields = this.#options.fields;\n\t\tthis.#requisiteFieldsElement = Tag.render`<div class=\"intranet-settings__req-table_wrap\"></div>`;\n\t\tfor (let field of fields)\n\t\t{\n\t\t\tconst renderField = Tag.render`\n\t\t\t\t<div class=\"intranet-settings__req-table_row\">\n\t\t\t\t\t<div class=\"intranet-settings__table-cell\">${field.TITLE}</div>\n\t\t\t\t\t<div class=\"intranet-settings__table-cell\">\n\t\t\t\t\t\t${!this.#options.company.ID\n\t\t\t\t? this.#buildCompanyField(Loc.getMessage('INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB'))\n\t\t\t\t: Type.isStringFilled(field.VALUE)\n\t\t\t\t\t? this.#buildField(\n\t\t\t\t\t\tfield.VALUE\n\t\t\t\t\t)\n\t\t\t\t\t: this.#buildField(\n\t\t\t\t\t\tLoc.getMessage('INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB')\n\t\t\t\t\t)\n\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t\tDom.append(renderField, this.#requisiteFieldsElement);\n\t\t}\n\n\t\treturn this.#requisiteFieldsElement;\n\t}\n\n\tgetButtonsBar(): ButtonBar\n\t{\n\t\tif (this.#buttonBar)\n\t\t{\n\t\t\treturn this.#buttonBar;\n\t\t}\n\n\t\tthis.#buttonBar = new ButtonBar();\n\n\t\treturn this.#buttonBar;\n\t}\n\n\tsetButtonBar(buttonBar: ButtonBar)\n\t{\n\t\tthis.#buttonBar = buttonBar;\n\t}\n}","import { AnalyticSettingsEvent } from '../analytic';\nimport { ButtonBar } from '../requisite/button-bar';\nimport { Card } from '../requisite/card';\nimport { LandingButtonFactory } from '../requisite/landing-button-factory';\nimport { LandingCard } from '../requisite/landing-card';\nimport { Event, Dom, Loc, Tag, Type } from 'main.core';\nimport { Section, Row } from 'ui.section';\nimport {BaseSettingsPage, SettingsRow, SettingsSection} from 'ui.form-elements.field';\nimport 'ui.icon-set.crm';\n\nexport class RequisitePage extends BaseSettingsPage\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.titlePage = Loc.getMessage('INTRANET_SETTINGS_TITLE_PAGE_REQUISITE');\n\t\tthis.descriptionPage = Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_PAGE_REQUISITE');\n\n\t\ttop.BX.addCustomEvent('onLocalStorageSet', (params) => {\n\t\t\tlet eventName = params?.key ?? null;\n\t\t\tif (eventName === 'onCrmEntityUpdate' || eventName === 'onCrmEntityCreate' || eventName === 'BX.Crm.RequisiteSliderDetails:onSave')\n\t\t\t{\n\t\t\t\tthis.reload();\n\t\t\t}\n\t\t});\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn 'requisite';\n\t}\n\n\tappendSections(contentNode: HTMLElement): void\n\t{\n\t\tif (!this.hasValue('sectionRequisite'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet reqSection = new Section(this.getValue('sectionRequisite'));\n\t\tconst sectionField = new SettingsSection({\n\t\t\tparent: this,\n\t\t\tsection: reqSection,\n\t\t});\n\n\t\tconst description = new BX.UI.Alert({\n\t\t\ttext: `\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_REQUISITE_DESCRIPTION')}\n\t\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=18213326')\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t\t</a>\n\t\t\t`,\n\t\t\tinline: true,\n\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\tanimated: true,\n\t\t});\n\n\t\tconst descriptionRow = new Row({\n\t\t\tcontent: description.getContainer(),\n\t\t});\n\n\t\treqSection.append(descriptionRow.render());\n\n\t\tif (this.hasValue('COMPANY'))\n\t\t{\n\t\t\tlet companies = this.getValue('COMPANY');\n\t\t\tconst requisites = this.getValue('REQUISITES');\n\t\t\tconst phones = this.getValue('PHONES');\n\t\t\tconst sites = this.getValue('SITES');\n\t\t\tconst emails = this.getValue('EMAILS');\n\t\t\tconst landings = this.getValue('LANDINGS');\n\t\t\tconst landingsData = this.getValue('LANDINGS_DATA');\n\n\t\t\tif (!Type.isArray(companies) || companies.length <= 0)\n\t\t\t{\n\t\t\t\tconst defaultCompanyRow = new Row({\n\t\t\t\t\tcontent: this.cardRender({\n\t\t\t\t\t\tcompany: { ID: 0, TITLE: this.getValue('BITRIX_TITLE') },\n\t\t\t\t\t\tfields: this.getValue('EMPTY_REQUISITE'),\n\t\t\t\t\t\tphone: [],\n\t\t\t\t\t\temail: [],\n\t\t\t\t\t\tsite: [],\n\t\t\t\t\t}),\n\t\t\t\t});\n\n\t\t\t\treqSection.append(defaultCompanyRow.render());\n\t\t\t}\n\n\t\t\tfor (let company of companies)\n\t\t\t{\n\t\t\t\tconst fields = !Type.isNil(requisites[company.ID])\n\t\t\t\t\t? requisites[company.ID]\n\t\t\t\t\t: this.getValue('EMPTY_REQUISITE');\n\t\t\t\tconst cardRow = new Row({\n\t\t\t\t\tcontent: this.cardRender({\n\t\t\t\t\t\tcompany: company,\n\t\t\t\t\t\tfields: fields,\n\t\t\t\t\t\tphone: !Type.isNil(phones[company.ID]) ? phones[company.ID] : [],\n\t\t\t\t\t\temail: !Type.isNil(emails[company.ID]) ? emails[company.ID] : [],\n\t\t\t\t\t\tsite: !Type.isNil(sites[company.ID]) ? sites[company.ID] : [],\n\t\t\t\t\t\tlanding: !Type.isNil(landings[company.ID]) ? landings[company.ID] : [],\n\t\t\t\t\t\tlandingData: !Type.isNil(landingsData[company.ID]) ? landingsData[company.ID] : [],\n\t\t\t\t\t}),\n\t\t\t\t});\n\n\t\t\t\treqSection.append(cardRow.render());\n\t\t\t}\n\t\t}\n\n\t\tnew SettingsRow({\n\t\t\trow: new Row({\n\t\t\t\tcontent: this.addCompanyLinkRender(),\n\t\t\t}),\n\t\t\tparent: sectionField,\n\t\t});\n\n\t\tsectionField.renderTo(contentNode);\n\t}\n\n\taddCompanyLinkRender(): HTMLElement\n\t{\n\t\tconst link = Tag.render`\n\t\t\t\t<a class=\"ui-section__link\" \n\t\t\t\t\thref=\"/crm/company/details/0/?mycompany=y\" target=\"_blank\">\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_BUTTON_REQ_ADD_COMPANY')}\n\t\t\t\t</a>\n\t\t`;\n\n\t\tEvent.bind(link, 'click', (event) => {\n\t\t\tthis.getAnalytic()?.addEventConfigRequisite(AnalyticSettingsEvent.OPEN_ADD_COMPANY);\n\t\t});\n\n\t\treturn Tag.render`<div class=\"ui-section__link_box\">${link}</div>`;\n\t}\n\n\tcardRender(params): HTMLElement\n\t{\n\t\tconst card = new Card(params);\n\n\t\tconst buttonBar = new ButtonBar();\n\t\tif (params.company.ID > 0)\n\t\t{\n\t\t\tconst factory = new LandingButtonFactory(params.landing, params.landingData);\n\n\t\t\tfactory.setMenuRenderer((landingData) => {\n\t\t\t\tconst landingCard = new LandingCard(landingData);\n\t\t\t\tEvent.bind(landingCard.getCopyButton().getContainer(), 'click', (event) => {\n\t\t\t\t\tthis.getAnalytic()?.addEventConfigRequisite(AnalyticSettingsEvent.COPY_LINK_CARD);\n\t\t\t\t});\n\n\t\t\t\treturn {\n\t\t\t\t\tangle: true,\n\t\t\t\t\tmaxWidth: 396,\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tclassName: 'intranet-settings__qr_popup',\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: landingCard.render(),\n\t\t\t\t\t\t\tclassName: 'intranet-settings__qr_popup_item',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst landingBtn = factory.create();\n\n\t\t\tif (Dom.hasClass(landingBtn.getContainer(), 'landing-button-trigger'))\n\t\t\t{\n\t\t\t\tEvent.bind(landingBtn.getContainer(), 'click', (event) => {\n\t\t\t\t\tif (params.landing.is_connected && !params.landing.is_public)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getAnalytic()?.addEventConfigRequisite(AnalyticSettingsEvent.EDIT_CARD);\n\t\t\t\t\t}\n\t\t\t\t\telse if (!params.landing.is_connected && !params.landing.is_public)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getAnalytic()?.addEventConfigRequisite(AnalyticSettingsEvent.CREATE_CARD);\n\t\t\t\t\t}\n\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tbuttonBar.addButton(landingBtn);\n\t\t}\n\n\t\tcard.setButtonBar(buttonBar);\n\n\t\treturn card.render();\n\t}\n}\n","import {TextInputInline, Checker, Selector, UserSelector} from 'ui.form-elements.view';\nimport {Loc, Event, Tag, Type} from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport 'ui.icon-set.main';\nimport 'ui.icon-set.actions';\nimport {Section, Row, SeparatorRow} from 'ui.section';\nimport 'ui.forms';\nimport { SettingsSection, SettingsField, SettingsRow, BaseSettingsPage } from 'ui.form-elements.field';\nimport { AnalyticSettingsEvent } from '../analytic';\n\nexport class CommunicationPage extends BaseSettingsPage\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.titlePage = Loc.getMessage('INTRANET_SETTINGS_TITLE_PAGE_COMMUNICATION');\n\t\tthis.descriptionPage = Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_PAGE_COMMUNICATION');\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn 'communication';\n\t}\n\n\tappendSections(contentNode: HTMLElement)\n\t{\n\t\tlet profileSection = this.#buildNewsFeedSection();\n\t\tprofileSection.renderTo(contentNode);\n\n\t\tlet chatSection = this.#buildChatSection();\n\t\tchatSection.renderTo(contentNode);\n\n\t\tif (this.hasValue('availableGeneralChannel'))\n\t\t{\n\t\t\tlet channelSection = this.#buildChannelSection();\n\t\t\tchannelSection.renderTo(contentNode);\n\t\t}\n\n\t\tlet diskSection = this.#buildDiskSection();\n\t\tdiskSection.renderTo(contentNode);\n\t}\n\n\t#buildNewsFeedSection(): SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionFeed'))\n\t\t{\n\t\t\treturn ;\n\t\t}\n\t\tlet newsFeedSection = new Section(this.getValue('sectionFeed'));\n\n\t\tlet settingsSection = new SettingsSection({\n\t\t\tsection: newsFeedSection,\n\t\t\tparent: this,\n\t\t});\n\n\t\tif (this.hasValue('allow_livefeed_toall'))\n\t\t{\n\t\t\tlet allowPostFeedField = new Checker(this.getValue('allow_livefeed_toall'));\n\t\t\tallowPostFeedField.hideSeparator = true;\n\n\t\t\tlet settingsField = new SettingsField({\n\t\t\t\tfieldView: allowPostFeedField,\n\t\t\t});\n\t\t\tconst settingsRow = new SettingsRow({\n\t\t\t\tparent: settingsSection,\n\t\t\t\tchild: settingsField,\n\t\t\t});\n\n\t\t\tlet userSelectorField = new UserSelector({\n\t\t\t\tinputName: 'livefeed_toall_rights[]',\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_PUBLIC_MESS'),\n\t\t\t\tvalues: Object.values(this.getValue('arToAllRights')),\n\t\t\t\tenableDepartments: true,\n\t\t\t\tencodeValue: (value) => {\n\t\t\t\t\tif (!Type.isNil(value.id))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn value.id === 'all-users' ? 'AU' : value.type + value.id.toString().split(':')[0];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn null;\n\t\t\t\t},\n\t\t\t\tdecodeValue: (value: string) => {\n\t\t\t\t\tif (value === 'UA')\n\t\t\t\t\t{\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: 'AU',\n\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst arr = value.match(/^(U|DR|D)(\\d+)/);\n\n\t\t\t\t\tif (!Type.isArray(arr))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: null,\n\t\t\t\t\t\t\tid: null,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: arr[1],\n\t\t\t\t\t\tid: arr[2],\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t\tsettingsField = new SettingsField({\n\t\t\t\tfieldView: userSelectorField,\n\t\t\t});\n\n\t\t\tconst userSelectorRow = new Row({\n\t\t\t\tisHidden: !allowPostFeedField.isChecked(),\n\t\t\t\tclassName: 'ui-section__subrow',\n\t\t\t});\n\n\t\t\tnew SettingsRow({\n\t\t\t\trow: userSelectorRow,\n\t\t\t\tparent: settingsRow,\n\t\t\t\tchild: settingsField,\n\t\t\t});\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tallowPostFeedField.switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() => {\n\t\t\t\t\tif (allowPostFeedField.isChecked())\n\t\t\t\t\t{\n\t\t\t\t\t\tuserSelectorRow.show();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tuserSelectorRow.hide();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\tif (this.hasValue('default_livefeed_toall'))\n\t\t{\n\t\t\tlet allowPostToAllField = new Checker(this.getValue('default_livefeed_toall'));\n\n\t\t\tCommunicationPage.addToSectionHelper(allowPostToAllField, settingsSection);\n\t\t}\n\n\t\tif (this.hasValue('ratingTextLikeY'))\n\t\t{\n\t\t\tconst likeBtnNameField = new TextInputInline({\n\t\t\t\tinputName: this.getValue('ratingTextLikeY')?.name,\n\t\t\t\tlabel: this.getValue('ratingTextLikeY').label ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_LIKE_INPUT'),\n\t\t\t\thintTitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_TITLE_LIKE'),\n\t\t\t\tvalue: this.getValue('ratingTextLikeY')?.current,\n\t\t\t\tvalueColor: this.hasValue('ratingTextLikeY'),\n\t\t\t\thintDesc: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_DESC_LIKE'),\n\t\t\t});\n\t\t\tCommunicationPage.addToSectionHelper(likeBtnNameField, settingsSection);\n\t\t}\n\n\t\treturn settingsSection;\n\t}\n\n\t#buildChatSection(): Section\n\t{\n\t\tif (!this.hasValue('sectionChats'))\n\t\t{\n\t\t\treturn ;\n\t\t}\n\n\t\tlet chatSection = new Section(this.getValue('sectionChats'));\n\n\t\tlet settingsSection = new SettingsSection({\n\t\t\tsection: chatSection,\n\t\t\tparent: this,\n\t\t});\n\n\t\tif (this.hasValue('general_chat_can_post'))\n\t\t{\n\t\t\tlet canPostGeneralChatField = new Checker(this.getValue('allow_post_general_chat'));\n\n\t\t\tlet settingsField = new SettingsField({\n\t\t\t\tfieldView: canPostGeneralChatField,\n\t\t\t});\n\t\t\tlet settingsRow = new SettingsRow({\n\t\t\t\tparent: settingsSection,\n\t\t\t\tchild: settingsField,\n\t\t\t});\n\n\t\t\tlet canPostGeneralChatListField = new Selector(this.getValue('general_chat_can_post'));\n\t\t\tsettingsField = new SettingsField({\n\t\t\t\tfieldView: canPostGeneralChatListField,\n\t\t\t});\n\n\t\t\tlet canPostGeneralChatListRow = new Row({\n\t\t\t\tisHidden: !canPostGeneralChatField.isChecked(),\n\t\t\t\tclassName: 'ui-section__subrow --no-border',\n\t\t\t});\n\n\t\t\tCommunicationPage.addToSectionHelper(canPostGeneralChatListField, settingsRow, canPostGeneralChatListRow);\n\n\t\t\tlet managerSelectorField = new UserSelector({\n\t\t\t\tinputName: 'imchat_toall_rights[]',\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_PUBLIC_MESS'),\n\t\t\t\tenableAll: false,\n\t\t\t\tvalues: Object.values(this.getValue('generalChatManagersList') ?? []),\n\t\t\t\tencodeValue: (value) => {\n\t\t\t\t\tif (!Type.isNil(value.id))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn value.id === 'all-users' ? 'AU' : 'U' + value.id;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn null;\n\t\t\t\t},\n\t\t\t\tdecodeValue: (value) => {\n\t\t\t\t\tif (value === 'UA')\n\t\t\t\t\t{\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: 'AU',\n\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst arr = value.match(/^(U)(\\d+)/);\n\n\t\t\t\t\tif (!Type.isArray(arr))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: null,\n\t\t\t\t\t\t\tid: null,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: arr[1],\n\t\t\t\t\t\tid: arr[2],\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tlet managerSelectorRow = new Row({\n\t\t\t\tcontent: managerSelectorField.render(),\n\t\t\t\tisHidden: this.getValue('general_chat_can_post').current !== 'MANAGER',\n\t\t\t\tclassName: 'ui-section__subrow --no-border',\n\t\t\t});\n\n\t\t\tCommunicationPage.addToSectionHelper(managerSelectorField, settingsRow, managerSelectorRow);\n\n\t\t\tconst separatorRow = new SeparatorRow({\n\t\t\t\tisHidden: this.getValue('general_chat_can_post').current !== 'MANAGER',\n\t\t\t});\n\t\t\tnew SettingsRow({\n\t\t\t\trow: separatorRow,\n\t\t\t\tparent: settingsRow,\n\t\t\t});\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tcanPostGeneralChatField.switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() => {\n\t\t\t\t\tif (canPostGeneralChatField.isChecked())\n\t\t\t\t\t{\n\t\t\t\t\t\tcanPostGeneralChatListRow.show();\n\t\t\t\t\t\tif (canPostGeneralChatListField.getInputNode().value === 'MANAGER')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmanagerSelectorRow.show();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tseparatorRow.show();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tcanPostGeneralChatListRow.hide();\n\t\t\t\t\t\tmanagerSelectorRow.hide();\n\t\t\t\t\t\tseparatorRow.hide();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\n\t\t\tcanPostGeneralChatListField.getInputNode()\n\t\t\t\t.addEventListener('change', (event) => {\n\t\t\t\t\tif (event.target.value === 'MANAGER')\n\t\t\t\t\t{\n\t\t\t\t\t\tmanagerSelectorRow.show();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tmanagerSelectorRow.hide();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\n\t\tif (this.hasValue('general_chat_message_leave'))\n\t\t{\n\t\t\tlet leaveMessageField = new Checker(this.getValue('general_chat_message_leave'));\n\t\t\tCommunicationPage.addToSectionHelper(leaveMessageField, settingsSection);\n\t\t}\n\n\t\tif (this.hasValue('general_chat_message_admin_rights'))\n\t\t{\n\t\t\tlet adminMessageField = new Checker(this.getValue('general_chat_message_admin_rights'));\n\t\t\tCommunicationPage.addToSectionHelper(adminMessageField, settingsSection);\n\t\t}\n\n\t\tif (this.hasValue('url_preview_enable'))\n\t\t{\n\t\t\tlet allowUrlPreviewField = new Checker(this.getValue('url_preview_enable'));\n\t\t\tCommunicationPage.addToSectionHelper(allowUrlPreviewField, settingsSection);\n\t\t}\n\n\t\tif (this.hasValue('isAutoDeleteMessagesEnabled'))\n\t\t{\n\t\t\tconst allowAutoDeleteField = new Checker(this.getValue('isAutoDeleteMessagesEnabled'));\n\t\t\tCommunicationPage.addToSectionHelper(allowAutoDeleteField, settingsSection);\n\t\t}\n\n\t\tif (this.hasValue('create_overdue_chats'))\n\t\t{\n\t\t\tlet overdueChatsField = new Checker(this.getValue('create_overdue_chats'));\n\t\t\tCommunicationPage.addToSectionHelper(overdueChatsField, settingsSection);\n\t\t}\n\n\t\treturn settingsSection;\n\t}\n\n\t#buildChannelSection(): Section\n\t{\n\t\tif (!this.hasValue('sectionChannels'))\n\t\t{\n\t\t\treturn ;\n\t\t}\n\n\t\tlet chatSection = new Section(this.getValue('sectionChannels'));\n\n\t\tlet settingsSection = new SettingsSection({\n\t\t\tsection: chatSection,\n\t\t\tparent: this,\n\t\t});\n\n\t\tif (this.hasValue('general_channel_can_post'))\n\t\t{\n\t\t\tlet canPostGeneralChannelField = new Checker(this.getValue('allow_post_general_channel'));\n\n\t\t\tlet settingsField = new SettingsField({\n\t\t\t\tfieldView: canPostGeneralChannelField,\n\t\t\t});\n\t\t\tlet settingsRow = new SettingsRow({\n\t\t\t\tparent: settingsSection,\n\t\t\t\tchild: settingsField,\n\t\t\t});\n\n\t\t\tlet canPostGeneralChannelListField = new Selector(this.getValue('general_channel_can_post'));\n\t\t\tsettingsField = new SettingsField({\n\t\t\t\tfieldView: canPostGeneralChannelListField,\n\t\t\t});\n\n\t\t\tlet canPostGeneralChannelListRow = new Row({\n\t\t\t\tisHidden: !canPostGeneralChannelField.isChecked(),\n\t\t\t\tclassName: 'ui-section__subrow --no-border',\n\t\t\t});\n\n\t\t\tCommunicationPage.addToSectionHelper(canPostGeneralChannelListField, settingsRow, canPostGeneralChannelListRow);\n\n\t\t\tlet managerSelectorField = new UserSelector({\n\t\t\t\tinputName: 'imchannel_toall_rights[]',\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_PUBLIC_MESS_CHANNEL') ?? '',\n\t\t\t\tenableAll: false,\n\t\t\t\tvalues: Object.values(this.getValue('generalChannelManagersList') ?? []),\n\t\t\t\tencodeValue: (value) => {\n\t\t\t\t\tif (!Type.isNil(value.id))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn value.id === 'all-users' ? 'AU' : 'U' + value.id;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn null;\n\t\t\t\t},\n\t\t\t\tdecodeValue: (value) => {\n\t\t\t\t\tif (value === 'UA')\n\t\t\t\t\t{\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: 'AU',\n\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst arr = value.match(/^(U)(\\d+)/);\n\n\t\t\t\t\tif (!Type.isArray(arr))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: null,\n\t\t\t\t\t\t\tid: null,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: arr[1],\n\t\t\t\t\t\tid: arr[2],\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tlet managerSelectorRow = new Row({\n\t\t\t\tcontent: managerSelectorField.render(),\n\t\t\t\tisHidden: this.getValue('general_channel_can_post').current !== 'MANAGER',\n\t\t\t\tclassName: 'ui-section__subrow --no-border',\n\t\t\t});\n\n\t\t\tCommunicationPage.addToSectionHelper(managerSelectorField, settingsRow, managerSelectorRow);\n\n\t\t\tconst separatorRow = new SeparatorRow({\n\t\t\t\tisHidden: this.getValue('general_channel_can_post').current !== 'MANAGER',\n\t\t\t});\n\t\t\tnew SettingsRow({\n\t\t\t\trow: separatorRow,\n\t\t\t\tparent: settingsRow,\n\t\t\t});\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tcanPostGeneralChannelField.switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() => {\n\t\t\t\t\tif (canPostGeneralChannelField.isChecked())\n\t\t\t\t\t{\n\t\t\t\t\t\tcanPostGeneralChannelListRow.show();\n\t\t\t\t\t\tif (canPostGeneralChannelListField.getInputNode().value === 'MANAGER')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmanagerSelectorRow.show();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tseparatorRow.show();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tcanPostGeneralChannelListRow.hide();\n\t\t\t\t\t\tmanagerSelectorRow.hide();\n\t\t\t\t\t\tseparatorRow.hide();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\n\t\t\tcanPostGeneralChannelListField.getInputNode()\n\t\t\t\t.addEventListener('change', (event) => {\n\t\t\t\t\tif (event.target.value === 'MANAGER')\n\t\t\t\t\t{\n\t\t\t\t\t\tmanagerSelectorRow.show();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tmanagerSelectorRow.hide();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\n\t\treturn settingsSection;\n\t}\n\n\t#buildDiskSection(): SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionDisk'))\n\t\t{\n\t\t\treturn ;\n\t\t}\n\n\t\tlet diskSection = new Section(this.getValue('sectionDisk'));\n\n\t\tlet settingsSection = new SettingsSection({\n\t\t\tsection: diskSection,\n\t\t\tparent: this,\n\t\t});\n\n\t\tif (this.hasValue('DISK_VIEWER_SERVICE'))\n\t\t{\n\t\t\tlet fileViewerField = new Selector(this.getValue('DISK_VIEWER_SERVICE'));\n\t\t\tCommunicationPage.addToSectionHelper(fileViewerField, settingsSection);\n\t\t}\n\n\t\tif (this.hasValue('DISK_LIMIT_PER_FILE'))\n\t\t{\n\t\t\tconst messageNode = Tag.render`<span>${Loc.getMessage(\n\t\t\t\t'INTRANET_SETTINGS_FIELD_HELP_MESSAGE'\n\t\t\t)}</span>`;\n\t\t\tlet fileLimitField = new Selector({\n\t\t\t\tlabel: this.getValue('DISK_LIMIT_PER_FILE').label ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_MAX_FILE_LIMIT'),\n\t\t\t\thintTitle: this.getValue('DISK_LIMIT_PER_FILE').hintTitle,\n\t\t\t\tname: this.getValue('DISK_LIMIT_PER_FILE').name,\n\t\t\t\titems: this.getValue('DISK_LIMIT_PER_FILE').values,\n\t\t\t\thints: this.getValue('DISK_LIMIT_PER_FILE').hints,\n\t\t\t\tcurrent: this.getValue('DISK_LIMIT_PER_FILE').current,\n\t\t\t\tisEnable: this.getValue('DISK_LIMIT_PER_FILE').isEnable,\n\t\t\t\tbannerCode: 'limit_max_entries_in_document_history',\n\t\t\t\thelpDesk: 'redirect=detail&code=18869612',\n\t\t\t\thelpMessageProvider: this.helpMessageProviderFactory(messageNode),\n\t\t\t});\n\n\t\t\tlet fileLimitRow = new Row({\n\t\t\t\tseparator: 'bottom',\n\t\t\t\tclassName: '--block',\n\t\t\t});\n\t\t\tif (!this.getValue('DISK_LIMIT_PER_FILE').isEnable)\n\t\t\t{\n\t\t\t\tEvent.bind(\n\t\t\t\t\tfileLimitField.getInputNode(),\n\t\t\t\t\t'click',\n\t\t\t\t\t() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getAnalytic()?.addEventOpenHint(this.getValue('DISK_LIMIT_PER_FILE').name);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tEvent.bind(\n\t\t\t\t\tmessageNode.querySelector('a'),\n\t\t\t\t\t'click',\n\t\t\t\t\t() => this.getAnalytic()?.addEventOpenTariffSelector(this.getValue('DISK_LIMIT_PER_FILE').name)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tCommunicationPage.addToSectionHelper(fileLimitField, settingsSection, fileLimitRow);\n\t\t}\n\n\t\tnew SettingsRow({\n\t\t\trow: new SeparatorRow(),\n\t\t\tparent: settingsSection,\n\t\t});\n\n\t\tif (this.hasValue('disk_allow_edit_object_in_uf'))\n\t\t{\n\t\t\tlet allowEditDocField = new Checker(this.getValue('disk_allow_edit_object_in_uf'));\n\t\t\tlet allowEditDocRow = new Row({\n\t\t\t\tseparator: 'top',\n\t\t\t\tclassName: '--block',\n\t\t\t});\n\t\t\tCommunicationPage.addToSectionHelper(allowEditDocField, settingsSection, allowEditDocRow);\n\t\t}\n\n\t\tif (this.hasValue('disk_allow_autoconnect_shared_objects'))\n\t\t{\n\t\t\tlet connectDiskField = new Checker(this.getValue('disk_allow_autoconnect_shared_objects'));\n\t\t\tCommunicationPage.addToSectionHelper(connectDiskField, settingsSection);\n\t\t}\n\n\t\tif (this.hasValue('disk_allow_use_external_link'))\n\t\t{\n\t\t\tconst messageNode = Tag.render`<span>${Loc.getMessage(\n\t\t\t\t'INTRANET_SETTINGS_FIELD_HELP_MESSAGE'\n\t\t\t)}</span>`;\n\t\t\tlet publicLinkField = new Checker({\n\t\t\t\tinputName: this.getValue('disk_allow_use_external_link').inputName,\n\t\t\t\ttitle: this.getValue('disk_allow_use_external_link').label ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_ALLOW_PUBLIC_LINK'),\n\t\t\t\thintOn: this.getValue('disk_allow_use_external_link').hintOn,\n\t\t\t\tchecked: this.getValue('disk_allow_use_external_link').checked,\n\t\t\t\tisEnable: this.getValue('disk_allow_use_external_link').isEnable,\n\t\t\t\tbannerCode: 'limit_admin_share_link',\n\t\t\t\thelpDesk: this.getValue('disk_allow_use_external_link').helpDesk,\n\t\t\t\thelpMessageProvider: this.helpMessageProviderFactory(messageNode),\n\t\t\t});\n\t\t\tif (!this.getValue('disk_allow_use_external_link').isEnable)\n\t\t\t{\n\t\t\t\tEventEmitter.subscribe(\n\t\t\t\t\tpublicLinkField.switcher,\n\t\t\t\t\t'toggled',\n\t\t\t\t\t() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getAnalytic()?.addEventOpenHint('disk_allow_use_external_link');\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tEvent.bind(\n\t\t\t\t\tmessageNode.querySelector('a'),\n\t\t\t\t\t'click',\n\t\t\t\t\t() => this.getAnalytic()?.addEventOpenTariffSelector('enable_pub_link')\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tCommunicationPage.addToSectionHelper(publicLinkField, settingsSection);\n\t\t}\n\n\t\tif (this.hasValue('disk_object_lock_enabled'))\n\t\t{\n\t\t\tconst messageNode = Tag.render`<span>${Loc.getMessage(\n\t\t\t\t'INTRANET_SETTINGS_FIELD_HELP_MESSAGE'\n\t\t\t)}</span>`;\n\t\t\tlet enableBlockDocField = new Checker({\n\t\t\t\tinputName: this.getValue('disk_object_lock_enabled').inputName,\n\t\t\t\ttitle: this.getValue('disk_object_lock_enabled').label ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_ALLOW_BLOCK_DOC'),\n\t\t\t\thintOn: this.getValue('disk_object_lock_enabled').hintOn,\n\t\t\t\tchecked: this.getValue('disk_object_lock_enabled').checked,\n\t\t\t\tisEnable: this.getValue('disk_object_lock_enabled').isEnable,\n\t\t\t\tbannerCode: 'limit_document_lock',\n\t\t\t\thelpMessageProvider: this.helpMessageProviderFactory(messageNode),\n\t\t\t\thelpDesk: this.getValue('disk_object_lock_enabled').helpDesk,\n\t\t\t});\n\t\t\tif (!this.getValue('disk_object_lock_enabled').isEnable)\n\t\t\t{\n\t\t\t\tEventEmitter.subscribe(\n\t\t\t\t\tenableBlockDocField.switcher,\n\t\t\t\t\t'toggled',\n\t\t\t\t\t() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getAnalytic()?.addEventOpenHint('disk_object_lock_enabled');\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tEvent.bind(\n\t\t\t\t\tmessageNode.querySelector('a'),\n\t\t\t\t\t'click',\n\t\t\t\t\t() => this.getAnalytic()?.addEventOpenTariffSelector('disk_object_lock_enabled')\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tCommunicationPage.addToSectionHelper(enableBlockDocField, settingsSection);\n\t\t}\n\n\t\tif (this.hasValue('disk_allow_use_extended_fulltext'))\n\t\t{\n\t\t\tconst messageNode = Tag.render`<span>${Loc.getMessage(\n\t\t\t\t'INTRANET_SETTINGS_FIELD_HELP_MESSAGE_ENT',\n\t\t\t\t{ '#TARIFF#': 'ent250'},\n\t\t\t)}</span>`;\n\t\t\tlet enableFindField = new Checker({\n\t\t\t\tinputName: this.getValue('disk_allow_use_extended_fulltext').inputName,\n\t\t\t\ttitle: this.getValue('disk_allow_use_extended_fulltext').label ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_ALLOW_SEARCH_DOC'),\n\t\t\t\thintOn: this.getValue('disk_allow_use_extended_fulltext').hintOn,\n\t\t\t\tchecked: this.getValue('disk_allow_use_extended_fulltext').checked,\n\t\t\t\tisEnable: this.getValue('disk_allow_use_extended_fulltext').isEnable,\n\t\t\t\tbannerCode: 'limit_in_text_search',\n\t\t\t\thelpDesk: this.getValue('disk_allow_use_extended_fulltext').helpDesk,\n\t\t\t\thelpMessageProvider: this.helpMessageProviderFactory(messageNode),\n\t\t\t});\n\t\t\tif (!this.getValue('disk_allow_use_extended_fulltext').isEnable)\n\t\t\t{\n\t\t\t\tEventEmitter.subscribe(\n\t\t\t\t\tenableFindField.switcher,\n\t\t\t\t\t'toggled',\n\t\t\t\t\t() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getAnalytic()?.addEventOpenHint('disk_allow_use_extended_fulltext');\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tEvent.bind(\n\t\t\t\t\tmessageNode.querySelector('a'),\n\t\t\t\t\t'click',\n\t\t\t\t\t() => this.getAnalytic()?.addEventOpenTariffSelector('disk_allow_use_extended_fulltext')\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tCommunicationPage.addToSectionHelper(enableFindField, settingsSection);\n\t\t}\n\n\t\treturn settingsSection;\n\t}\n}\n","import { Loc, Tag, Text, Event } from 'main.core';\nimport { BaseSettingsElement } from \"ui.form-elements.field\";\nimport { TextInput } from 'ui.form-elements.view';\nimport { SettingsField } from 'ui.form-elements.field';\n\nexport type SiteTitleFieldType = {\n\tparent: BaseSettingsElement,\n\tsiteDomainOptions: SiteDomainType,\n};\n\nexport type SiteDomainType = {\n\thostname: string,\n\tsubDomainName: string,\n\tmainDomainName: string,\n\tisRenameable: boolean,\n\toccupiedDomains: Object,\n\tlabel: ?string,\n\texampleDns: Object,\n};\n\nexport class SiteDomainField extends SettingsField\n{\n\toptions: SiteDomainType;\n\n\t#content: HTMLElement;\n\t#title: TextInput;\n\n\tconstructor(params: SiteTitleFieldType)\n\t{\n\t\tconst options = params.siteDomainOptions;\n\t\tparams.fieldView = new TextInput({\n\t\t\tvalue: options.subDomainName,\n\t\t\tplaceholder: options.subDomainName,\n\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_SECTION_DOMAIN_NAME3'),\n\t\t\tid: 'subDomainName',\n\t\t\tinputName: 'subDomainName',\n\t\t\tisEnable: true,\n\t\t});\n\n\t\tsuper(params);\n\t\tthis.setParentElement(params.parent);\n\n\t\tthis.getFieldView().setEventNamespace(\n\t\t\tthis.getEventNamespace()\n\t\t);\n\t\tthis.getFieldView().getInputNode().setAttribute('autocomplete', 'off');\n\n\t\tlet timeout = null;\n\n\t\tEvent.bind(this.getFieldView().getInputNode(), 'input', () => {\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = setTimeout(() => {\n\t\t\t\tthis.validateInput();\n\t\t\t}, 1000);\n\t\t});\n\n\t\tthis.options = {\n\t\t\thostname: options.hostname,\n\t\t\tsubDomainName: options.subDomainName,\n\t\t\tmainDomainName: options.mainDomainName,\n\t\t\tisRenameable: options.isRenameable,\n\t\t\toccupiedDomains: options.occupiedDomains,\n\t\t};\n\t\tthis.options.mainDomainName = ['.', this.options.mainDomainName].join('').replace('..', '.');\n\t}\n\n\tvalidateInput()\n\t{\n\t\tlet newDomain = this.getFieldView().getInputNode().value;\n\t\tnewDomain = newDomain.trim();\n\n\t\tif (newDomain.length < 3 || newDomain.length > 60)\n\t\t{\n\t\t\tthis.getFieldView().setErrors([Loc.getMessage('INTRANET_SETTINGS_DOMAIN_RENAMING_LENGTH_ERROR')]);\n\t\t}\n\t\telse if (!/^([a-zA-Z0-9]([a-zA-Z0-9\\\\-]{0,58})[a-zA-Z0-9])$/.test(newDomain))\n\t\t{\n\t\t\tthis.getFieldView().setErrors([Loc.getMessage('INTRANET_SETTINGS_DOMAIN_RENAMING_FORMAT_ERROR')]);\n\t\t}\n\t\telse if (this.options.occupiedDomains.includes(newDomain))\n\t\t{\n\t\t\tthis.getFieldView().setErrors([Loc.getMessage('INTRANET_SETTINGS_DOMAIN_RENAMING_DOMAIN_EXISTS_ERROR')]);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getFieldView().cleanError();\n\t\t}\n\t}\n\n\tcancel(): void\n\t{\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#content)\n\t\t{\n\t\t\treturn this.#content;\n\t\t}\n\n\t\tif (this.options.isRenameable !== true)\n\t\t{\n\t\t\tconst copyButton = Tag.render`<div class=\"settings-tools-description-link\">${Loc.getMessage('INTRANET_SETTINGS_COPY')}</div>`;\n\t\t\tBX.clipboard.bindCopyClick(copyButton, {text: () => {\n\t\t\t\t\treturn this.options.hostname;\n\t\t\t\t}})\n\t\t\t;\n\t\t\tthis.#content = Tag.render`\n\t\t\t\t<div>\n\t\t\t\t\t<div class=\"ui-section__field-label_box\">\n\t\t\t\t\t\t<div class=\"ui-section__field-label\">${Loc.getMessage('INTRANET_SETTINGS_SECTION_DOMAIN_NAME4')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"intranet-settings__domain_box\">\n\t\t\t\t\t\t<div class=\"intranet-settings__domain_name\">${Text.encode(this.options.hostname)}</div>\n\t\t\t\t\t\t${copyButton}\n\t\t\t\t\t</div>\n\t\t\t\t</div>`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#content = Tag.render`<div id=\"${this.getFieldView().getId()}\" class=\"ui-section__field-selector --no-border\">\n\t\t\t\t<div class=\"ui-section__field-container\">\n\t\t\t\t\t<div class=\"ui-section__field-label_box\">\n\t\t\t\t\t\t<label class=\"ui-section__field-label\" for=\"${this.getFieldView().getName()}\">\n\t\t\t\t\t\t\t${this.getFieldView().getLabel()}\n\t\t\t\t\t\t</label> \n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-section__field-inner\">\n\t\t\t\t\t\t<div class=\"intarnet-settings__domain_inline-field\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-block\">\n\t\t\t\t\t\t\t\t${this.getFieldView().getInputNode()}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"intarnet-settings__domain_name\">${Text.encode(this.options.mainDomainName)}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${this.getFieldView().renderErrors()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>`;\n\t\t}\n\n\t\treturn this.#content;\n\t}\n}\n","import { Event, Loc, Tag, Dom, Type, Text } from 'main.core';\nimport type { SiteThemeOptions } from './site-theme-picker-field';\nimport type { SiteTitleInputType } from './site-title-field';\n\nexport function setPortalSettings(container: HTMLElement, portalSettings: SiteTitleInputType): void\n{\n\tconst logoNode = container.querySelector('[data-role=\"logo\"]');\n\tconst titleNode =  container.querySelector('[data-role=\"title\"]');\n\tconst logo24Node = container.querySelector('[data-role=\"logo24\"]');\n\n\tif (!logoNode.hasAttribute('data-prev-display'))\n\t{\n\t\tlogoNode.dataset.prevDisplay = logoNode.style.display;\n\t\ttitleNode.dataset.prevDisplay = titleNode.style.display;\n\t\tlogo24Node.dataset.prevDisplay = logo24Node.style.display;\n\t}\n\n\tif (Type.isUndefined(portalSettings.title) !== true)\n\t{\n\t\ttitleNode.innerHTML = Text.encode(Type.isStringFilled(portalSettings.title) ?\n\t\t\tportalSettings.title : 'Bitrix')\n\t\t;\n\t}\n\n\tif (Type.isUndefined(portalSettings.logo24) !== true)\n\t{\n\t\tif (Type.isStringFilled(portalSettings.logo24))\n\t\t{\n\t\t\tdelete logo24Node.dataset.visibility;\n\t\t\tif (logoNode.style.display === 'none')\n\t\t\t{\n\t\t\t\tlogo24Node.style.removeProperty('display');\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlogo24Node.dataset.visibility = 'hidden';\n\t\t\tlogo24Node.style.display = 'none';\n\t\t}\n\t}\n\n\tif (Type.isUndefined(portalSettings.logo) !== true)\n\t{\n\t\tif (Type.isPlainObject(portalSettings.logo))\n\t\t{\n\t\t\tlogoNode.style.backgroundImage = 'url(\"' + encodeURI(portalSettings.logo.src) + '\")';\n\t\t\tlogoNode.style.removeProperty('display');\n\t\t\ttitleNode.style.display = 'none';\n\t\t\tlogo24Node.style.display = 'none';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlogoNode.style.display = 'none';\n\t\t\ttitleNode.style.removeProperty('display');\n\n\t\t\tif (logo24Node.dataset.visibility !== 'hidden')\n\t\t\t{\n\t\t\t\tlogo24Node.style.removeProperty('display');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlogo24Node.style.display = 'none';\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function setPortalThemeSettings(container: HTMLElement, themeSettings: SiteThemeOptions): void\n{\n\tconst theme = Type.isPlainObject(themeSettings) ? themeSettings : {};\n\n\tconst lightning = String(theme.id).indexOf('dark:') === 0 ? 'dark' : 'light';\n\n\tDom.removeClass(container, '--light --dark');\n\tDom.addClass(container, '--' + lightning);\n\n\tif (Type.isStringFilled(theme.previewImage))\n\t{\n\t\tcontainer.style.backgroundImage = 'url(\"' + theme.previewImage + '\")';\n\t\tcontainer.style.backgroundSize = 'cover';\n\t}\n\telse\n\t{\n\t\tcontainer.style.removeProperty('backgroundImage');\n\t\tcontainer.style.removeProperty('backgroundSize');\n\t\tcontainer.style.background = 'none';\n\t}\n\n\tif (Type.isStringFilled(theme.previewColor))\n\t{\n\t\tcontainer.style.backgroundColor = theme.previewColor;\n\t}\n}\n","import { Event, Loc, Tag, Dom, Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { SettingsField } from \"ui.form-elements.field\";\nimport { BaseField } from 'ui.form-elements.view';\nimport { Ears } from 'ui.ears'\nimport { setPortalSettings, setPortalThemeSettings } from './site-utils';\n\n\nexport type SiteThemeOptions = {\n\tid: string, //light:custom_123,\n\tcss: ?Array,\n\tprefetchImages: ?Array,\n\tpreviewImage:  ?string,\n\twidth:  number,\n\theight:  number,\n\tpreviewColor: string, // \"#004982\",\n\tstyle: string,\n\n\tdefault: ?boolean,\n\tresizable: boolean,\n\tremovable: boolean,\n};\n\nexport type SiteThemePickerOptions = {\n\ttheme: SiteThemeOptions,\n\tthemes: SiteThemeOptions[],\n\tbaseThemes: Object,\n\tajaxHandlerPath: string,\n\tallowSetDefaultTheme: boolean,\n\tisVideo: boolean,\n\tlabel: ?string\n};\n\nclass ThemePickerElement extends BaseField\n{\n\t#themePicker: BX.Intranet.Bitrix24.ThemePicker;\n\n\tconstructor(themePickerSettings: SiteThemePickerOptions)\n\t{\n\t\tsuper({\n\t\t\tinputName: 'themeId',\n\t\t\tisEnable: themePickerSettings.allowSetDefaultTheme,\n\t\t\tbannerCode: 'limit_office_background_to_all',\n\t\t});\n\t\tthis.#initThemePicker(themePickerSettings);\n\n\t\tthis.applyTheme();\n\t}\n\n\t#initThemePicker(themePickerSettings: SiteThemePickerOptions)\n\t{\n\t\tthis.#themePicker = new BX.Intranet.Bitrix24.ThemePicker(themePickerSettings);\n\t\tthis.#themePicker.setThemes(themePickerSettings.themes);\n\t\tthis.#themePicker.setBaseThemes(themePickerSettings.baseThemes);\n\t\tthis.#themePicker.applyThemeAssets = () => {};\n\t\tthis.#themePicker.getContentContainer = () => {\n\t\t\treturn this.render().querySelector('div[data-role=\"theme-container\"]');\n\t\t};\n\n\t\tconst closure = this.#themePicker.handleRemoveBtnClick.bind(this.#themePicker);\n\t\tthis.#themePicker.handleRemoveBtnClick = (event: Event) => {\n\t\t\tconst item = this.#themePicker.getItemNode(event);\n\t\t\tif (!item)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tclosure(event);\n\t\t\tthis.applyPortalThemePreview(this.#themePicker.getTheme(this.#themePicker.getThemeId()));\n\t\t\tthis.showSaveButton();\n\t\t\t//TODO Shift all <td>\n\t\t};\n\n\t\tconst handleItemClick = this.#themePicker.handleItemClick.bind(this.#themePicker);\n\t\tthis.#themePicker.handleItemClick = (event: Event) => {\n\t\t\thandleItemClick(event);\n\t\t\tthis.applyTheme(event);\n\t\t};\n\n\t\tconst addItem = this.#themePicker.addItem.bind(this.#themePicker);\n\t\tthis.#themePicker.addItem = (theme) => {\n\t\t\taddItem(theme);\n\t\t\tthis.applyPortalThemePreview(theme);\n\t\t\tthis.showSaveButton();\n\t\t}\n\t}\n\n\tapplyTheme(event: ?Event)\n\t{\n\t\tconst themeNode = event ? this.#themePicker.getItemNode(event) : null;\n\t\tlet themeSettings = themeNode ?\n\t\t\tthis.#themePicker.getTheme(themeNode.dataset.themeId)\n\t\t\t: this.#themePicker.getAppliedTheme()\n\t\t;\n\t\tthis.applyPortalThemePreview(themeSettings);\n\n\t\tif (event)\n\t\t{\n\t\t\tEventEmitter.emit(\n\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\t'BX.Intranet.Settings:ThemePicker:Change',\n\t\t\t\tthemeSettings\n\t\t\t);\n\n\t\t\tthis.showSaveButton();\n\t\t}\n\t}\n\n\tapplyPortalThemePreview(theme)\n\t{\n\t\tconst container = this.render().querySelector('[data-role=\"preview\"]');\n\t\tsetPortalThemeSettings(container, theme);\n\t\tthis.getInputNode().value = Type.isPlainObject(theme) ? theme['id'] : '';\n\t}\n\n\tshowSaveButton()\n\t{\n\t\tthis.getInputNode().disabled = false;\n\t\tthis.getInputNode().form.dispatchEvent(new window.Event('change'));\n\t}\n\n\tgetValue(): string\n\t{\n\t\treturn this.getInputNode().value;\n\t}\n\n\tgetInputNode(): HTMLInputElement\n\t{\n\t\treturn this.render().querySelector('input[name=\"themeId\"]');\n\t}\n\n\tapplyPortalSettings()\n\t{\n\n\t}\n\n\trenderContentField(): HTMLElement\n\t{\n\t\tdocument.querySelector('.ui-side-panel-content').style.overflow = 'hidden';\n\n\t\tconst container = Tag.render`\n\t\t<div class=\"intranet-theme-settings ui-section__row\">\n\t\t\t<div class=\"ui-section__row theme-dialog-preview\">\n\t\t\t\t<section data-role=\"preview\" style=\"background-color: #0a51ae;\" class=\"intranet-settings__main-widget_section --preview\">\n\t\t\t\t\t<div class=\"intranet-settings__main-widget__bang\"></div>\n\t\t\t\t\t<aside class=\"intranet-settings__main-widget__aside\">\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item --active\"></div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t</aside>\n\t\t\t\t\t<main class=\"intranet-settings__main-widget_main\">\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_header --with-logo\">\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_header_left\">\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_logo\" data-role=\"logo\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_name\" data-role=\"title\">Bitrix</div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_logo24\" data-role=\"logo24\">24</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_header_right\">\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_box\">\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_inline --space-between\">\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --sm\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --square\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_inner\">\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</main>\n\t\t\t\t\t<aside class=\"intranet-settings__main-widget__aside --right-side\">\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item --active\"></div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t</aside>\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t\t<div class=\"ui-section__row theme-dialog-content\" data-role=\"theme-container\"></div>\n\t\t\t<input type=\"hidden\" name=\"themeId\" value=\"\" disabled>\n\t\t</div>\n\t\t`;\n\t\tconst uploadBtn = Tag.render`\n\t\t\t<div class=\"intranet-settings__theme-btn_box\">\n\t\t\t\t<div class=\"intranet-settings__theme-btn\" onclick=\"${this.handleNewThemeButtonClick.bind(this)}\">${Loc.getMessage('INTRANET_SETTINGS_THEME_UPLOAD_BTN')}</div>\n\t\t\t</div>\n\t\t`;\n\t\tconst themeContainer = container.querySelector('div[data-role=\"theme-container\"]');\n\t\tArray.from(this.#themePicker.getThemes()).forEach((theme) => {\n\t\t\tconst itemNode = this.#themePicker.createItem(theme);\n\t\t\tif (this.#themePicker.canSetDefaultTheme() !== true)\n\t\t\t{\n\t\t\t\tEvent.unbindAll(itemNode, 'click');\n\t\t\t\tif (theme['default'] !== true)\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(itemNode, '--restricted');\n\t\t\t\t\titemNode.appendChild(\n\t\t\t\t\t\tTag.render `<div class=\"intranet-settings__theme_lock_box\">${this.renderLockElement()}</div>`\n\t\t\t\t\t);\n\t\t\t\t\tEvent.bind(itemNode, 'click', this.showBanner.bind(this));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (theme['default'] === true)\n\t\t\t{\n\t\t\t\titemNode.setAttribute('data-role', 'ui-ears-active');\n\t\t\t}\n\t\t\tthemeContainer.appendChild(itemNode);\n\t\t});\n\t\t(new Ears({\n\t\t\tcontainer: themeContainer,\n\t\t\tnoScrollbar: false\n\t\t})).init();\n\n\t\tcontainer.appendChild(uploadBtn);\n\n\t\treturn container;\n\t}\n\n\thandleNewThemeButtonClick(event)\n\t{\n\t\tif (this.#themePicker.canSetDefaultTheme() !== true)\n\t\t{\n\t\t\treturn this.showBanner();\n\t\t}\n\t\tthis.#themePicker.getNewThemeDialog().show();\n\t}\n\n\thandleLockButtonClick()\n\t{\n\t\tif (BX.getClass(\"BX.UI.InfoHelper\"))\n\t\t{\n\t\t\tBX.UI.InfoHelper.show(\"limit_office_background_to_all\");\n\t\t}\n\t}\n}\n\nexport class SiteThemePickerField extends SettingsField\n{\n\t#fieldView: ThemePickerElement;\n\n\tconstructor(params)\n\t{\n\t\tparams.fieldView = new ThemePickerElement(params.themePickerSettings);\n\t\tsuper(params);\n\n\t\tif (params.portalSettings)\n\t\t{\n\t\t\tthis.setEventNamespace('BX.Intranet.Settings');\n\n\n\t\t\tsetPortalSettings(this.getFieldView().render(), params.portalSettings);\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\tthis.getEventNamespace() + ':Portal:Change',\n\t\t\t\t(baseEvent: BaseEvent) => {\n\t\t\t\t\tsetPortalSettings(this.getFieldView().render(), baseEvent.getData());\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n}\n","import {Dom, Event, Loc, Runtime, Tag} from 'main.core';\nimport { SettingsField, BaseSettingsElement } from \"ui.form-elements.field\";\nimport { TextInput } from \"ui.form-elements.view\";\n\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { StackWidget } from 'ui.uploader.stack-widget';\nimport { SiteThemePickerOptions } from './site-theme-picker-field';\nimport {Loader} from \"main.loader\";\n\nexport type SiteLogoOptions = {\n\tid: string,\n\tsrc: string,\n\twidth: number,\n\theight: number\n};\n\nexport type SiteLogoFieldType = {\n\tparent: BaseSettingsElement,\n\tsiteLogoLabel: ?string,\n\tsiteLogoOptions: ?SiteLogoOptions,\n\tcanUserEditLogo: boolean\n};\n\n\nclass HiddenInput extends TextInput\n{\n\tconstructor(params)\n\t{\n\t\tsuper({\n\t\t\tinputName: 'logo',\n\t\t\tisEnable: params.isEnable,\n\t\t\tdefaultValue: 'default',\n\t\t\tbannerCode: 'limit_admin_logo',\n\t\t\thelpDeskCode: 123,\n\t\t\thelpMessageProvider: () => {}\n\t\t});\n\t\tthis.getInputNode().type = 'hidden';\n\t\tthis.getInputNode().disabled = true;\n\t}\n\n\trenderContentField(): HTMLElement\n\t{\n\t\treturn this.getInputNode();\n\t}\n}\n\nexport class SiteLogoField extends SettingsField\n{\n\t#content: HTMLElement;\n\t#uploader: StackWidget;\n\t#siteLogo: ?SiteLogoOptions;\n\n\t#hiddenContainer: HTMLElement;\n\t#hiddenRemoveInput: HTMLElement;\n\n\t#loader: Loader;\n\n\tconstructor(params: SiteLogoFieldType)\n\t{\n\t\tparams.fieldView = new HiddenInput({\n\t\t\tisEnable: params.canUserEditLogo,\n\t\t});\n\t\tsuper(params);\n\t\tthis.#siteLogo = params.siteLogoOptions;\n\t\tthis.siteLogoLabel = params.siteLogoLabel;\n\n\t\tthis.setEventNamespace('BX.Intranet.Settings');\n\t}\n\n\tinitUploader({TileWidget, StackWidget, StackWidgetSize}): this\n\t{\n\t\tconst defaultOptions = {\n\t\t\tmaxFileCount: 1,\n\t\t\tacceptOnlyImages: true,\n\t\t\tmultiple: false,\n\t\t\tacceptedFileTypes: ['image/png'],\n\t\t\tevents: {\n\t\t\t\t'onError': function(event) {\n\t\t\t\t\tconsole.error('File Uploader onError', event.getData().error);\n\t\t\t\t},\n\t\t\t\t'File:onError': this.onFileError.bind(this),\n\t\t\t\t'File:onAdd': this.onLogoAdd.bind(this),\n\t\t\t\t'File:onRemove': this.onLogoRemove.bind(this),\n\t\t\t\t'onBeforeFilesAdd': this.getFieldView().isEnable() ? () => {\n\t\t\t\t} : (event: BaseEvent) => {\n\t\t\t\t\tthis.getFieldView().showBanner();\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tallowReplaceSingle: true,\n\t\t\thiddenFieldName: 'logo_file',\n\t\t\thiddenFieldsContainer: this.#getFileContainer(),\n\t\t\tassignAsFile: true,\n\n\t\t\t// imageMaxWidth: 444,\n\t\t\t// imageMaxHeight: 110,\n\n\t\t\t// imageMaxFileSize?: number,\n\t\t\t// imageMinFileSize?: number,\n\n\t\t\timageResizeWidth: 444,\n\t\t\timageResizeHeight: 110,\n\t\t\timageResizeMode: 'contain',\n\t\t\timageResizeMimeType: 'image/png',\n\n\t\t\timagePreviewWidth: 444,\n\t\t\timagePreviewHeight: 110,\n\t\t\timagePreviewResizeMode: 'contain',\n\n\t\t\t// serverOptions: ServerOptions,\n\t\t\t// filters?: Array<{ type: FilterType, filter: Filter | Function | string, options: { [key: string]: any } }>,\n\t\t\tfiles: this.#siteLogo ? [\n\t\t\t\t[1, {\n\t\t\t\t\tserverFileId: this.#siteLogo.id,\n\t\t\t\t\tserverId: this.#siteLogo.id,\n\t\t\t\t\ttype: 'image/png',\n\n\t\t\t\t\twidth: this.#siteLogo.width,\n\t\t\t\t\theight: this.#siteLogo.height,\n\t\t\t\t\ttreatImageAsFile: true,\n\t\t\t\t\tdownloadUrl: this.#siteLogo.src,\n\n\t\t\t\t\tserverPreviewUrl: this.#siteLogo.src,\n\t\t\t\t\tserverPreviewWidth: this.#siteLogo.width,\n\t\t\t\t\tserverPreviewHeight: this.#siteLogo.height,\n\n\t\t\t\t\tsrc: this.#siteLogo.src,\n\t\t\t\t\tpreload: true\n\t\t\t\t}]\n\t\t\t] : null,\n\t\t};\n\t\tthis.#uploader = new StackWidget(defaultOptions, {size: StackWidgetSize.LARGE });\n\t\treturn this;\n\t}\n\n\tonFileError(event): void\n\t{\n\t\tconsole.error('File Error', event.getData().error);\n\t\tEventEmitter.subscribeOnce(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\tthis.getEventNamespace() + ':onAfterShowPage',\n\t\t\tthis.removeFailedLogo.bind(this),\n\t\t);\n\n\t\tconst tabField = this.getParentElement();\n\n\t\tif (tabField)\n\t\t{\n\t\t\tEventEmitter.subscribeOnce(\n\t\t\t\ttabField.getFieldView(),\n\t\t\t\t'onActive',\n\t\t\t\tthis.removeFailedLogo.bind(this),\n\t\t\t);\n\t\t}\n\t}\n\n\tremoveFailedLogo(): void\n\t{\n\t\tconst logo = this.#uploader.getUploader().getFiles()[0];\n\n\t\tif (logo && logo.isLoadFailed())\n\t\t{\n\t\t\tthis.#uploader.getUploader().removeFiles();\n\t\t}\n\t}\n\n\tonLogoAdd(event: BaseEvent)\n\t{\n\t\tEventEmitter.emit(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\tthis.getEventNamespace() + ':Portal:Change',\n\t\t\tnew BaseEvent({ data: { logo: { src: event.getData().file.getClientPreviewUrl() } } })\n\t\t);\n\n\t\tthis.getFieldView().getInputNode().disabled = false;\n\t\tthis.getFieldView().getInputNode().value = 'add';\n\t\tthis.getFieldView().getInputNode().form.dispatchEvent(new window.Event('change'));\n\t}\n\n\tonLogoRemove(event: BaseEvent)\n\t{\n\t\tEventEmitter.emit(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\tthis.getEventNamespace() + ':Portal:Change',\n\t\t\tnew BaseEvent({ data: { logo: null } })\n\t\t);\n\t\tthis.getFieldView().getInputNode().disabled = false;\n\t\tthis.getFieldView().getInputNode().value = 'remove';\n\t\tthis.getFieldView().getInputNode().form.dispatchEvent(new window.Event('change'));\n\t}\n\n\tgetName(): string\n\t{\n\t\treturn 'logo';\n\t}\n\n\tcancel(): void\n\t{\n\t}\n\n\t#getFileContainer(): HTMLElement\n\t{\n\t\tif (!this.#hiddenContainer)\n\t\t{\n\t\t\tthis.#hiddenContainer = document.createElement('div');\n\t\t}\n\t\treturn this.#hiddenContainer;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#content)\n\t\t{\n\t\t\treturn this.#content;\n\t\t}\n\n\t\tthis.#content = Tag.render`<div></div>`;\n\t\tthis.#showLoader();\n\n\t\tRuntime\n\t\t\t.loadExtension('ui.uploader.stack-widget')\n\t\t\t.then((exports) => {\n\t\t\t\tthis.initUploader(exports);\n\t\t\t\tthis.#renderAfterLoad();\n\t\t\t\tthis.#removeLoader();\n\t\t\t});\n\n\t\treturn this.#content;\n\t}\n\n\t#renderAfterLoad(): void\n\t{\n\t\tconst uploaderContent = Tag.render`<div></div>`;\n\t\tconst content = Tag.render`<div>\n\t\t\t\t<div class=\"ui-section__field-label\">${this.siteLogoLabel ?? Loc.getMessage('INTRANET_SETTINGS_SECTION_TAB_TITLE_WIDGET_LOGO_TITLE1')}</div>\n\t\t\t\t${uploaderContent}\n\t\t\t\t<div class=\"ui-section__field-label\">${Loc.getMessage('INTRANET_SETTINGS_SECTION_TAB_TITLE_WIDGET_LOGO_TITLE2')}</div>\n\t\t\t\t${this.getFieldView().getInputNode()}\n\t\t\t\t${this.#getFileContainer()}\n\t\t\t\t${this.getFieldView().renderErrors()}\n\t\t\t</div>`\n\t\t;\n\t\tthis.#uploader.renderTo(uploaderContent);\n\t\tDom.replace(this.#content, content);\n\t}\n\n\t#showLoader()\n\t{\n\t\tthis.#loader = new Loader({\n\t\t\ttarget: this.#content,\n\t\t\tcolor: 'rgba(82, 92, 105, 0.9)',\n\t\t\tmode: 'inline'\n\t\t});\n\t\tthis\n\t\t\t.#loader\n\t\t\t.show()\n\t\t\t.then(() => {\n\t\t\t\tconsole.log('The loader is shown')\n\t\t\t})\n\t\t;\n\t}\n\n\t#removeLoader()\n\t{\n\t\tif (this.#loader)\n\t\t{\n\t\t\tthis.#loader.destroy();\n\t\t\tthis.#loader = null;\n\t\t}\n\t}\n}\n","import { Tag } from 'main.core';\nimport {EventEmitter, BaseEvent} from \"main.core.events\";\nimport { setPortalSettings, setPortalThemeSettings } from './site-utils';\n\nexport class SiteTitlePreviewWidget extends EventEmitter\n{\n\t#container: HTMLElement\n\n\tconstructor(portalSettings, portalThemeSettings)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Intranet.Settings');\n\n\t\tsetPortalSettings(this.render(), portalSettings);\n\n\t\tEventEmitter.subscribe(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\tthis.getEventNamespace() + ':Portal:Change',\n\t\t\tthis.onChange.bind(this)\n\t\t);\n\n\t\tif (portalThemeSettings)\n\t\t{\n\t\t\tsetPortalThemeSettings(this.render(), portalThemeSettings?.theme);\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\tthis.getEventNamespace() + ':ThemePicker:Change',\n\t\t\t\tthis.onSetTheme.bind(this)\n\t\t\t);\n\t\t}\n\t}\n\n\tonChange(event: BaseEvent)\n\t{\n\t\tsetPortalSettings(this.render(), event.getData());\n\t}\n\n\tonSetTheme(baseEvent: BaseEvent)\n\t{\n\t\tsetPortalThemeSettings(this.render(), baseEvent.getData())\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (!this.#container)\n\t\t{\n\t\t\tthis.#container = Tag.render`\n\t\t\t<section class=\"intranet-settings__main-widget_section\">\n\t\t\t\t<div class=\"intranet-settings__main-widget__bang\"></div>\n\t\t\t\t\t<div class=\"intranet-settings__main-widget_bg\"></div>\n\t\t\t\t\t<div class=\"intranet-settings__main-widget_pos-box\">\n\t\t\t\t\t\t<aside class=\"intranet-settings__main-widget__aside\">\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item --active\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t</aside>\n\t\t\t\t\t\t<main class=\"intranet-settings__main-widget_main\">\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_header\"> \n\t\t\t\t\t\t<!-- statement class. depends of content --with-logo -->\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_logo\" data-role=\"logo\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_name\" data-role=\"title\">Bitrix</div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_logo24\" data-role=\"logo24\">24</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_box\">\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_inline\">\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --sm\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_inner\">\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</main>\n\t\t\t\t\t</div>\t\t\t\t\n\t\t\t</section>`;\n\t\t}\n\n\t\treturn this.#container;\n\t}\n}\n","import { BaseEvent, EventEmitter } from 'main.core.events';\nimport { AnalyticSettingsEvent } from '../analytic';\nimport { SiteTitleField } from '../fields/site-title-field';\nimport { SiteDomainField } from '../fields/site-domain-field';\nimport { SiteLogoField } from '../fields/site-logo-field';\nimport { SettingsSection, SettingsRow, TabsField, TabField, SettingsField, BaseSettingsPage } from 'ui.form-elements.field';\nimport { TextInput } from 'ui.form-elements.view';\nimport { SiteTitlePreviewWidget } from '../fields/site-title-preview-widget';\nimport { SiteThemePickerField } from '../fields/site-theme-picker-field';\nimport { setPortalSettings, setPortalThemeSettings } from '../fields/site-utils';\n\nimport { Tag, Loc, Runtime, Text, Dom, Type, Event } from 'main.core';\nimport 'ui.icon-set.main';\nimport 'ui.icon-set.actions';\n\nimport 'ui.icon-set.social';\nimport {Section, Row, SeparatorRow} from 'ui.section';\nimport 'ui.forms';\nimport { Alert, AlertColor, AlertSize } from 'ui.alerts';\n\nimport type { SiteDomainType } from '../fields/site-domain-field';\nimport type {SiteTitleInputType, SiteTitleLabelType} from '../fields/site-title-field';\nimport type { SiteThemeOptions, SiteThemePickerOptions } from '../fields/site-theme-picker-field';\n\nexport class PortalPage extends BaseSettingsPage\n{\n\tconstructor() {\n\t\tsuper();\n\t\tthis.titlePage = Loc.getMessage('INTRANET_SETTINGS_TITLE_PAGE_PORTAL');\n\t\tthis.descriptionPage = Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_PAGE_PORTAL');\n\n\t\tEventEmitter.subscribe(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\tthis.getEventNamespace() + ':Portal:Change',\n\t\t\t(baseEvent: BaseEvent) => {\n\t\t\t\tif (!Type.isNil(baseEvent.data.title))\n\t\t\t\t{\n\t\t\t\t\tthis.getAnalytic()?.addEventConfigPortal(AnalyticSettingsEvent.CHANGE_PORTAL_NAME);\n\t\t\t\t}\n\t\t\t\telse if (!Type.isNil(baseEvent.data.logo))\n\t\t\t\t{\n\t\t\t\t\tthis.getAnalytic()?.addEventConfigPortal(AnalyticSettingsEvent.CHANGE_PORTAL_LOGO);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\t//BX.Intranet.Settings:ThemePicker:Change\n\t\tEventEmitter.subscribe(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\tthis.getEventNamespace() + ':ThemePicker:Change',\n\t\t\t(baseEvent: BaseEvent) => {\n\t\t\t\tthis.getAnalytic()?.addEventChangeTheme(baseEvent.data?.id);\n\t\t\t}\n\t\t);\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn 'portal';\n\t}\n\n\theaderWidgetRender()\n\t{\n\t\treturn '';\n\t\t// It is used to return #headerWidgetRenderAlternative;\n\t}\n\n\t//TODO delete after autumn 2023\n\t#headerWidgetRenderAlternative()\n\t{\n\t\tif (!this.hasValue('portalSettings'))\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\tconst portalSettings = this.getValue('portalSettings');\n\t\tconst portalThemeSettings = this.getValue('portalThemeSettings');\n\t\tconst portalDomainSettings = this.getValue('portalDomainSettings');\n\n\t\tconst container = Tag.render`\n\t\t<div class=\"intranet-settings__header-widget_box\">\n\t\t\t<div class=\"intranet-settings__header-widget_main\">\n\t\t\t\t<div class=\"intranet-settings__header-widget_icon\" data-role=\"logo\"></div>\n\t\t\t\t<div class=\"intranet-settings__header-widget_name\" data-role=\"title\">Bitrix</div>\n\t\t\t\t<div class=\"intranet-settings__header-widget_logo24\" data-role=\"logo24\">24</div>\n\t\t\t</div>\n\t\t\t<div class=\"intranet-settings__header-widget__link_box\">\n\t\t\t\t<div class=\"intranet-settings__header-widget__link_value\">${Text.encode(portalDomainSettings.hostname)}</div>\n\t\t\t\t<div data-role=\"copy\" class=\"ui-icon-set --link-3 intranet-settings__header-widget__link_btn\"></div>\n\t\t\t</div>\n\t\t</div>`;\n\n\t\tsetPortalSettings(container, portalSettings);\n\t\tsetPortalThemeSettings(container, portalThemeSettings?.theme);\n\n\t\tconst copyButton = container.querySelector('[data-role=\"copy\"]');\n\t\tBX.clipboard.bindCopyClick(copyButton, {text: () => {\n\t\t\t\treturn portalDomainSettings.hostname;\n\t\t\t}})\n\t\t;\n\n\t\treturn container;\n\t}\n\n\tgetSections(): SettingsSection[]\n\t{\n\t\treturn [\n\t\t\tthis.buildSiteTitleSection(\n\t\t\t\tthis.getValue('portalSettings'), this.getValue('portalThemeSettings'), this.getValue('portalSettingsLabels')\n\t\t\t),\n\t\t\tthis.getValue('portalDomainSettings') ?\n\t\t\t\tthis.buildDomainSection(this.getValue('portalDomainSettings')) : null,\n\t\t\tthis.buildThemeSection(this.getValue('portalThemeSettings'), this.getValue('portalSettings'))\n\t\t].filter((section) => section instanceof SettingsSection);\n\t}\n\n\tbuildSiteTitleSection(portalSettings: SiteTitleInputType, portalThemeSettings: SiteThemePickerOptions, portalSettingsLabels: SiteTitleLabelType): SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionCompanyTitle'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst sectionView = new Section(this.getValue('sectionCompanyTitle'));\n\n\t\tconst sectionField = new SettingsSection({\n\t\t\tparent: this,\n\t\t\tsection: sectionView,\n\t\t});\n\t\t// 1. This is a description on blue box\n\t\tsectionView.append(\n\t\t\t(new Row({\n\t\t\t\tcontent: (new Alert({\n\t\t\t\t\ttext: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_SITE_TITLE_DESCRIPTION'),\n\t\t\t\t\tinline: true,\n\t\t\t\t\tsize: AlertSize.SMALL,\n\t\t\t\t\tcolor: AlertColor.PRIMARY,\n\t\t\t\t})).getContainer(),\n\t\t\t})).render())\n\t\t;\n\n\t\t//region 2. Tabs\n\t\tconst siteLogoRow = new SettingsRow({\n\t\t\trow: new Row({\n\t\t\t\tclassName: 'intranet-settings__grid_box',\n\t\t\t}),\n\t\t\tparent: sectionField,\n\t\t});\n\n\t\tconst previewWidget = new SiteTitlePreviewWidget(portalSettings, portalThemeSettings);\n\t\tconst tabsRow = new SettingsRow({\n\t\t\trow: new Row({\n\t\t\t\tclassName: 'intranet-settings__site-logo_subrow --no-padding --bottom-separator --block',\n\t\t\t}),\n\t\t\tparent: siteLogoRow,\n\t\t});\n\n\t\tconst tabsField = new TabsField({parent: tabsRow});\n\t\t// 2.1 Tab Site name\n\t\tconst siteTitleTab = new TabField({\n\t\t\tparent: tabsField,\n\t\t\ttabsOptions: this.getValue('tabCompanyTitle')\n\t\t});\n\n\t\tconst siteTitleRow = new Row({});\n\n\t\tconst siteTitleField = new SiteTitleField({\n\t\t\tparent: siteTitleRow,\n\t\t\tsiteTitleOptions: portalSettings,\n\t\t\tsiteTitleLabels: portalSettingsLabels,\n\t\t\thelpMessages: {\n\t\t\t\tsite: this.helpMessageProviderFactory(),\n\t\t\t}\n\t\t});\n\n\t\tnew SettingsRow({\n\t\t\trow: siteTitleRow,\n\t\t\tparent: siteTitleTab,\n\t\t\tchild: siteTitleField,\n\t\t});\n\n\t\tnew SettingsRow({\n\t\t\tparent: siteTitleTab,\n\t\t\tchild: siteTitleField.getLogo24Field(),\n\t\t});\n\n\t\tconst siteLogoTab = new TabField({\n\t\t\tparent: tabsField,\n\t\t\ttabsOptions: this.getValue('tabCompanyLogo')\n\t\t});\n\n\t\tconst siteLogoField = new SiteLogoField({\n\t\t\tsiteLogoLabel: this.getValue('portalSettingsLabels').logo,\n\t\t\tsiteLogoOptions: this.getValue('portalSettings').logo,\n\t\t\tcanUserEditLogo: this.getValue('portalSettings').canUserEditLogo,\n\t\t});\n\n\t\tnew SettingsRow({\n\t\t\tparent: siteLogoTab,\n\t\t\tchild: siteLogoField,\n\t\t});\n\n\t\ttabsField.activateTab(siteTitleTab);\n\t\t// 2.2 Widget\n\n\t\tnew SettingsRow({\n\t\t\trow: new Row({\n\t\t\t\tcontent: previewWidget.render(),\n\t\t\t\tclassName: 'intranet-settings__site-logo_subrow --no-padding',\n\t\t\t}),\n\t\t\tparent: siteLogoRow,\n\t\t});\n\n\t\t// 2.3 site_name\n\n\t\tnew SettingsRow({\n\t\t\trow: new SeparatorRow(),\n\t\t\tparent: sectionField,\n\t\t});\n\n\t\tnew SettingsRow({\n\t\t\tparent: sectionField,\n\t\t\tchild: new SettingsField({\n\t\t\t\tfieldView: (new TextInput({\n\t\t\t\t\tinputName: 'name',\n\t\t\t\t\tlabel: this.getValue('portalSettingsLabels').name,\n\t\t\t\t\tvalue: this.getValue('portalSettings').name,\n\t\t\t\t\tplaceholder: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_COMPANY_TITLE'),\n\t\t\t\t\tinputDefaultWidth: true,\n\t\t\t\t})),\n\t\t\t}),\n\t\t});\n\n\t\t//endregion\n\t\treturn sectionField;\n\t}\n\n\t#getOwnDomainTabBody(domainSettings): HTMLElement\n\t{\n\t\tconst copyButton = Tag.render`<div class=\"ui-icon-set --copy-plates intranet-settings__domain__list_btn\"></div>`;\n\t\tconst exampleDns = domainSettings.exampleDns.join('<br>');\n\n\t\tBX.clipboard.bindCopyClick(copyButton, {text: () => {\n\t\t\t\treturn exampleDns.replaceAll('<br>', \"\\n\");\n\t\t\t}});\n\n\t\tconst res = Tag.render\n\t\t\t`<div class=\"intranet-settings__domain__list_box\">\n\t\t\t\t\t\t<ul class=\"intranet-settings__domain__list\">\n\t\t\t\t\t\t\t<li class=\"intranet-settings__domain__list_item\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_OWN_DOMAIN_HELP1')}\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__domain_box\">\n\t\t\t\t\t\t\t\t\t${exampleDns}\n\t\t\t\t\t\t\t\t\t${copyButton}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"intranet-settings__domain__list_item\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_OWN_DOMAIN_HELP2')}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"intranet-settings__domain__list_item\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_OWN_DOMAIN_HELP3')}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<a target=\"_blank\" href=\"/settings/support.php\" class=\"settings-tools-description-link\">${Loc.getMessage('INTRANET_SETTINGS_WRITE_TO_SUPPORT')}</a>\n\t\t\t\t\t</div>`;\n\n\t\tif (domainSettings.isCustomizable !== true)\n\t\t{\n\t\t\tEvent.bind(res.querySelector('a.settings-tools-description-link'), 'click', (event) => {\n\t\t\t\tBX.UI.InfoHelper.show('limit_office_own_domain');\n\t\t\t\tevent.preventDefault();\n\t\t\t\treturn false;\n\t\t\t})\n\t\t}\n\t\treturn res;\n\t}\n\n\tbuildDomainSection(domainSettings: SiteDomainType): SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionSiteDomain'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst sectionView = new Section(this.getValue('sectionSiteDomain'));\n\n\t\tconst sectionField = new SettingsSection({\n\t\t\tparent: this,\n\t\t\tsection: sectionView\n\t\t});\n\t\t// 1. This is a description on blue box\n\t\tsectionView.append(\n\t\t\t(new Row({\n\t\t\t\tcontent: (new Alert({\n\t\t\t\t\ttext: `\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_SITE_DOMAIN_DESCRIPTION')}\n\t\t\t\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=18213298')\">\n\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t`,\n\t\t\t\t\tinline: true,\n\t\t\t\t\tsize: AlertSize.SMALL,\n\t\t\t\t\tcolor: AlertColor.PRIMARY,\n\t\t\t\t})).getContainer(),\n\t\t\t})).render())\n\t\t;\n\n\t\tconst tabsRow = new SettingsRow({\n\t\t\tparent: sectionField,\n\t\t});\n\n\t\t//region 2. Tabs\n\t\tconst tabsField = new TabsField({parent: tabsRow});\n\t\t// 2.1 Tab Site name\n\t\tconst firstTab = new TabField({\n\t\t\tparent: tabsField,\n\t\t\ttabsOptions: this.getValue('tabDomainPrefix')\n\t\t});\n\n\t\tconst siteDomainField = new SiteDomainField({\n\t\t\tsiteDomainOptions: domainSettings,\n\t\t\thelpMessages: {\n\t\t\t\tsite: this.helpMessageProviderFactory(),\n\t\t\t}\n\t\t});\n\t\tEvent.bind(siteDomainField.getFieldView().getInputNode(), 'keydown', () => {\n\t\t\tthis.getAnalytic()?.addEventConfigPortal(AnalyticSettingsEvent.CHANGE_PORTAL_SITE);\n\t\t});\n\n\t\tconst firstTabRow = new Row({\n\t\t\tcontent: siteDomainField.render(),\n\t\t});\n\n\t\tnew SettingsRow({\n\t\t\trow: firstTabRow,\n\t\t\tparent: firstTab,\n\t\t\tchild: siteDomainField,\n\t\t});\n\n\t\tconst secondTab = new TabField({\n\t\t\tparent: tabsField,\n\t\t\ttabsOptions: this.getValue('tabDomain')\n\t\t});\n\n\t\tconst descriptionRow = new Row({\n\t\t\tcontent: this.#getOwnDomainTabBody(domainSettings),\n\t\t});\n\n\t\tnew SettingsRow({\n\t\t\trow: descriptionRow,\n\t\t\tparent: secondTab\n\t\t});\n\n\t\ttabsField.activateTab(firstTab);\n\t\t//endregion\n\n\t\treturn sectionField;\n\t}\n\n\tbuildThemeSection(themePickerSettings: SiteThemePickerOptions, portalSettings: ?SiteTitleInputType): SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionSiteTheme'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst sectionView = new Section(this.getValue('sectionSiteTheme'));\n\n\t\tconst sectionField = new SettingsSection({\n\t\t\tsection: sectionView,\n\t\t\tparent: this,\n\t\t});\n\n\t\t// 1. This is a description on blue box\n\t\tnew SettingsRow({\n\t\t\trow: new Row({\n\t\t\t\tcontent: (new Alert({\n\t\t\t\t\ttext: `\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_PORTAL_THEME_DESCRIPTION')}\n\t\t\t\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=18325288')\">\n\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t`,\n\t\t\t\t\tinline: true,\n\t\t\t\t\tsize: AlertSize.SMALL,\n\t\t\t\t\tcolor: AlertColor.PRIMARY,\n\t\t\t\t})).getContainer(),\n\t\t\t}),\n\t\t\tparent: sectionField\n\t\t});\n\n\t\t// 2. This is a theme picker\n\t\tnew SiteThemePickerField({\n\t\t\tparent: sectionField,\n\t\t\tportalSettings,\n\t\t\tthemePickerSettings\n\t\t});\n\n\t\treturn sectionField;\n\t}\n}\n","import { BaseEvent, EventEmitter } from 'main.core.events';\nimport { Loc, Tag } from 'main.core';\nimport { Button } from 'ui.buttons';\n\nexport default class PortalDeleteFormType\n{\n\tstatic NOT_ADMIN = 'not_admin';\n\tstatic BOUND = 'bound';\n\tstatic MAIL = 'mail';\n\tstatic EMPLOYEE = 'employee';\n\tstatic NETWORK = 'network';\n\tstatic DEFAULT = 'default';\n}\n\nexport class PortalDeleteForm extends EventEmitter\n{\n\t#container: ?HTMLElement;\n\tconfirmButton;\n\tbodyClass: string;\n\t#verificationOptions: Object;\n\n\tconstructor(verificationOptions: Object) {\n\t\tsuper();\n\t\tthis.#verificationOptions = verificationOptions;\n\t\tthis.setEventNamespace('BX.Intranet.Settings:PortalDeleteForm');\n\t}\n\n\tgetDescription(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_CONFIGURATION_DESCRIPTION_DELETE_PORTAL_MSGVER_1', {\n\t\t\t\t'#MORE_DETAILS#': this.getMoreDetails(),\n\t\t\t})}\n\t\t`;\n\t}\n\n\tgetMoreDetails(): string\n\t{\n\t\treturn `\n\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=19566456')\">\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t</a>\n\t\t`;\n\t}\n\n\tgetBodyClass(): string\n\t{\n\t\treturn '--warning';\n\t}\n\n\tgetConfirmButtonText(): ?string\n\t{\n\t\treturn Loc.getMessage('INTRANET_SETTINGS_CONFIRM_ACTION_DELETE_PORTAL');\n\t}\n\n\tgetInputContainer() {}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\tif (!this.#container)\n\t\t{\n\t\t\tthis.#container = Tag.render`\n\t\t\t\t<div class=\"intranet-settings__portal-delete-form_wrapper ${this.getBodyClass()}\">\n\t\t\t\t\t<div class=\"intranet-settings__portal-delete-form_body\">\n\t\t\t\t\t\t<div class=\"intranet-settings__portal-delete-icon-wrapper\">\n\t\t\t\t\t\t\t<div class=\"ui-icon-set --warning\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"intranet-settings__portal-delete-form_description-wrapper\">\n\t\t\t\t\t\t\t<span class=\"intranet-settings__portal-delete-form_description\">\n\t\t\t\t\t\t\t\t${this.getDescription()}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t${this.getInputContainer()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.getButtonContainer()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.#container;\n\t}\n\n\tonConfirmEventHandler(): void\n\t{\n\t\tthis.getConfirmButton().setWaiting(true);\n\t\ttop.BX.Runtime.loadExtension('bitrix24.portal-delete')\n\t\t\t.then((exports) => {\n\t\t\t\tconst { PortalDelete } = exports;\n\t\t\t\tconst portalDelete = new PortalDelete(this.#verificationOptions);\n\t\t\t\tportalDelete.showCheckwordPopup();\n\t\t\t\tthis.getConfirmButton().setWaiting(false);\n\t\t\t});\n\t}\n\n\tgetButtonContainer(): ?HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<span class=\"intranet-settings__portal-delete-form_buttons-wrapper\">\n\t\t\t\t${this.getConfirmButton().getContainer()}\n\t\t\t</span>\n\t\t`;\n\t}\n\n\tgetConfirmButton(): Button\n\t{\n\t\tif (!this.confirmButton)\n\t\t{\n\t\t\tthis.confirmButton = new Button({\n\t\t\t\ttext: this.getConfirmButtonText() ?? '',\n\t\t\t\tnoCaps: true,\n\t\t\t\tround: true,\n\t\t\t\tclassName: '--confirm',\n\t\t\t\tevents: {\n\t\t\t\t\tclick: () => {\n\t\t\t\t\t\tthis.onConfirmEventHandler();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tprops: {\n\t\t\t\t\t'data-bx-role': 'delete-portal-confirm',\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\treturn this.confirmButton;\n\t}\n\n\tsendChangeFormEvent(type: ?PortalDeleteFormType): void\n\t{\n\t\tthis.emit(\n\t\t\t'updateForm',\n\t\t\tnew BaseEvent({data: { type: type ?? null } })\n\t\t);\n\t}\n}\n","import PortalDeleteFormType, { PortalDeleteForm } from './portal-delete-form';\nimport {ajax, Loc, Tag} from 'main.core';\n\nexport class PortalDeleteFormEmployee extends PortalDeleteForm\n{\n\t#isFreeLicense: boolean;\n\n\tconstructor(isFreeLicense: boolean) {\n\t\tsuper();\n\t\tthis.#isFreeLicense = isFreeLicense;\n\t}\n\n\tgetDescription(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_CONFIGURATION_DESCRIPTION_DELETE_PORTAL_EMPLOYEE', {\n\t\t\t\t'#MORE_DETAILS#': this.getMoreDetails(),\n\t\t\t})}\n\t\t`;\n\t}\n\n\tgetConfirmButtonText(): ?string\n\t{\n\t\treturn Loc.getMessage('INTRANET_SETTINGS_CONFIRM_ACTION_DELETE_PORTAL_FIRE_EMPLOYEE');\n\t}\n\n\tonConfirmEventHandler(): void\n\t{\n\t\tthis.getConfirmButton().setWaiting(true);\n\n\t\tBX.SidePanel.Instance.open('/company/?apply_filter=Y&FIRED=N',{\n\t\t\tevents: {\n\t\t\t\tonCloseComplete: () => {\n\t\t\t\t\tajax.runAction('bitrix24.portal.getActiveUserCount')\n\t\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t\tthis.getConfirmButton().setWaiting(false);\n\n\t\t\t\t\t\t\tif (response.data <= 1)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.sendChangeFormEvent(this.#isFreeLicense ? PortalDeleteFormType.DEFAULT : PortalDeleteFormType.MAIL);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((reject) => {\n\t\t\t\t\t\t\tthis.getConfirmButton().setWaiting(false);\n\t\t\t\t\t\t\treject.errors.forEach((error) => {\n\t\t\t\t\t\t\t\tconsole.log(error.message);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}","import { PortalDeleteForm } from './portal-delete-form';\nimport { Loc, Tag } from 'main.core';\n\nexport class PortalDeleteFormMail extends PortalDeleteForm\n{\n\t#mailForRequest: string;\n\t#portalUrl: string;\n\t#mailLink: ?string;\n\tconstructor(mailForRequest: string, portalUrl: string) {\n\t\tsuper();\n\n\t\tthis.#mailForRequest = mailForRequest;\n\t\tthis.#portalUrl = portalUrl;\n\t}\n\n\tgetConfirmButtonText(): ?string\n\t{\n\t\treturn Loc.getMessage('INTRANET_SETTINGS_CONFIRM_ACTION_DELETE_PORTAL_MAIL', {\n\t\t\t'#MAIL#': this.#mailForRequest\n\t\t});\n\t}\n\n\tonConfirmEventHandler(): void\n\t{\n\t\ttop.window.location.href = this.#getMailLink();\n\t}\n\n\t#getMailLink(): string\n\t{\n\t\tif (!this.#mailLink)\n\t\t{\n\t\t\tconst mailBody = Loc.getMessage('INTRANET_SETTINGS_PORTAL_DELETE_MAIL_BODY', {'#PORTAL_URL#': this.#portalUrl});\n\t\t\tconst mailSubject = Loc.getMessage('INTRANET_SETTINGS_PORTAL_DELETE_MAIL_SUBJECT', {'#PORTAL_URL#':  this.#portalUrl});\n\t\t\tthis.#mailLink = `mailto:${this.#mailForRequest}?body=${mailBody}&subject=${mailSubject}`;\n\t\t}\n\n\t\treturn this.#mailLink;\n\t}\n\n\tgetDescription(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_CONFIGURATION_DESCRIPTION_DELETE_PORTAL_MAIL', {\n\t\t\t\t'#MAIL#': this.#mailForRequest, \n\t\t\t\t'#MAIL_LINK#': this.#getMailLink(),\n\t\t\t\t'#MORE_DETAILS#': this.getMoreDetails(),\n\t\t\t})}\n\t\t`;\n\t}\n}","import {PortalDeleteForm} from \"./portal-delete-form\";\nimport {Loc, Tag} from \"main.core\";\n\nexport class PortalDeleteFormNotAdmin extends PortalDeleteForm\n{\n\tgetButtonContainer() {}\n\n\tgetDescription(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_CONFIGURATION_DESCRIPTION_DELETE_PORTAL_NOT_ADMIN')}\n\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=19566456')\">\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t</a>\n\t\t`;\n\t}\n}","import {PortalDeleteForm} from \"./portal-delete-form\";\nimport {Loc, Tag} from \"main.core\";\n\nexport class PortalDeleteFormBound extends PortalDeleteForm\n{\n\tgetButtonContainer() {}\n\n\tgetDescription(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_CONFIGURATION_DESCRIPTION_DELETE_PORTAL_BOUND', {\n\t\t\t\t'#MORE_DETAILS#': this.getMoreDetails(),\n\t\t\t})}\n\t\t`;\n\t}\n}","import { PortalDeleteForm } from './portal-delete-form';\nimport { Loc, Tag, Type } from 'main.core';\nimport { Button } from 'ui.buttons';\n\nexport class PortalDeleteFormNetwork extends PortalDeleteForm\n{\n\t#networkUrl: ?string;\n\n\tconstructor(networkUrl: ?string) {\n\t\tsuper();\n\t\tthis.#networkUrl = networkUrl;\n\t}\n\n\tgetButtonContainer(): ?HTMLElement\n\t{\n\t\tif ((Type.isStringFilled(this.#networkUrl)))\n\t\t{\n\t\t\treturn super.getButtonContainer();\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetConfirmButton(): Button\n\t{\n\t\tif (!this.confirmButton)\n\t\t{\n\t\t\tthis.confirmButton = new Button({\n\t\t\t\ttag: Button.Tag.LINK,\n\t\t\t\tlink: this.#networkUrl,\n\t\t\t\ttext: Loc.getMessage('INTRANET_SETTINGS_CONFIRM_ACTION_DELETE_PORTAL_NETWORK_LINK'),\n\t\t\t\tnoCaps: true,\n\t\t\t\tround: true,\n\t\t\t\tclassName: '--confirm',\n\t\t\t\tprops: {\n\t\t\t\t\t'data-bx-role': 'delete-portal-confirm',\n\t\t\t\t\t'target': '_top',\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\treturn this.confirmButton;\n\t}\n\n\tgetDescription(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_CONFIGURATION_DESCRIPTION_DELETE_PORTAL_NETWORK', {\n\t\t\t\t'#MORE_DETAILS#': this.getMoreDetails(),\n\t\t\t})}\n\t\t`;\n\t}\n}","import { SettingsSection } from 'ui.form-elements.field';\nimport { BaseSettingsElement, SettingsRow } from 'ui.form-elements.field';\nimport { Dom } from 'main.core';\nimport { Row } from 'ui.section';\nimport 'ui.form';\nimport PortalDeleteFormType, { PortalDeleteForm } from './portal-delete-form';\nimport { PortalDeleteFormEmployee } from './portal-delete-form-employee';\nimport { PortalDeleteFormMail } from './portal-delete-form-mail';\nimport { PortalDeleteFormNotAdmin } from './portal-delete-form-not-admin';\nimport { PortalDeleteFormBound } from './portal-delete-form-bound';\nimport { PortalDeleteFormNetwork } from './portal-delete-form-network';\n\nexport type PortalDeleteSectionType = {\n\tparent: BaseSettingsElement,\n\toptions: PortalDeleteOptionsType,\n};\n\nexport type PortalDeleteOptionsType = {\n\tisFreeLicense: boolean,\n\tisEmployeesLeft: boolean,\n\tmailForRequest: string,\n\tportalUrl: string,\n\tverificationOptions: ?Object,\n\tisAdmin: boolean,\n\tisBound: boolean,\n\tnetworkUrl: ?string,\n}\n\nexport class PortalDeleteSection extends SettingsSection\n{\n\t#options: PortalDeleteOptionsType;\n\t#settingsRow: ?SettingsRow;\n\t#form: PortalDeleteForm;\n\t#defaultBodyClass: string\n\t#bodyClass: string;\n\n\tconstructor(params: PortalDeleteSectionType) {\n\t\tsuper(params);\n\n\t\tthis.#defaultBodyClass = this.getSectionView().className.bodyActive;\n\t\tthis.#options = params.options;\n\t\tlet type;\n\n\t\tif (!this.#options.isAdmin)\n\t\t{\n\t\t\ttype = PortalDeleteFormType.NOT_ADMIN;\n\t\t}\n\t\telse if (!this.#options.isFreeLicense)\n\t\t{\n\t\t\ttype = PortalDeleteFormType.MAIL;\n\t\t}\n\t\telse if (this.#options.isBound)\n\t\t{\n\t\t\ttype = PortalDeleteFormType.BOUND;\n\t\t}\n\t\telse if (this.#options.isEmployeesLeft)\n\t\t{\n\t\t\ttype = PortalDeleteFormType.EMPLOYEE;\n\t\t}\n\t\telse if (!this.#options.verificationOptions)\n\t\t{\n\t\t\ttype = PortalDeleteFormType.NETWORK;\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttype = PortalDeleteFormType.DEFAULT;\n\t\t}\n\n\t\tthis.#renderFormRow(type);\n\t}\n\n\t#renderFormRow(type: PortalDeleteFormType): void\n\t{\n\t\tif (this.#settingsRow)\n\t\t{\n\t\t\tthis.removeChild(this.#settingsRow);\n\t\t\tDom.remove(this.#settingsRow.render());\n\t\t}\n\n\t\tswitch (type)\n\t\t{\n\t\t\tcase PortalDeleteFormType.MAIL:\n\t\t\t\tthis.#form = new PortalDeleteFormMail(this.#options.mailForRequest, this.#options.portalUrl);\n\t\t\t\tbreak;\n\n\t\t\tcase PortalDeleteFormType.EMPLOYEE:\n\t\t\t\tthis.#form = new PortalDeleteFormEmployee(this.#options.isFreeLicense);\n\t\t\t\tbreak;\n\n\t\t\tcase PortalDeleteFormType.NOT_ADMIN:\n\t\t\t\tthis.#form = new PortalDeleteFormNotAdmin();\n\t\t\t\tbreak;\n\n\t\t\tcase PortalDeleteFormType.BOUND:\n\t\t\t\tthis.#form = new PortalDeleteFormBound();\n\t\t\t\tbreak;\n\n\t\t\tcase PortalDeleteFormType.NETWORK:\n\t\t\t\tthis.#form = new PortalDeleteFormNetwork(this.#options.networkUrl);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthis.#form = new PortalDeleteForm(this.#options.verificationOptions);\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.#updateSectionBodyClass();\n\t\tthis.#bindFormEvents();\n\n\t\tconst formRow = new Row({\n\t\t\tcontent: this.#form.getContainer(),\n\t\t});\n\t\tthis.#settingsRow = new SettingsRow({\n\t\t\trow: formRow,\n\t\t});\n\n\t\tthis.addChild(this.#settingsRow);\n\t\tthis.render();\n\t}\n\n\t#bindFormEvents(): void\n\t{\n\t\tthis.#form.subscribe('closeForm', () => {\n\t\t\tthis.getSectionView().toggle(false);\n\t\t});\n\n\t\tthis.#form.subscribe('updateForm', (event) => {\n\t\t\tif (event.data.type)\n\t\t\t{\n\t\t\t\tthis.#renderFormRow(event.data.type);\n\t\t\t}\n\t\t})\n\t}\n\n\t#updateSectionBodyClass(): void\n\t{\n\t\tDom.removeClass(this.getSectionView().getContent(), this.#bodyClass);\n\t\tthis.#bodyClass = this.#form.getBodyClass();\n\t\tthis.getSectionView().className.bodyActive = this.#defaultBodyClass + ' ' + this.#bodyClass;\n\n\t\tif (this.getSectionView().isOpen)\n\t\t{\n\t\t\tDom.addClass(this.getSectionView().getContent(), this.#bodyClass);\n\t\t}\n\t}\n}\n","import { Event, Loc, Tag } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { BaseSettingsPage, SettingsRow, SettingsSection } from 'ui.form-elements.field';\nimport { Checker, InlineChecker, Selector, TextInput, TextInputInline } from 'ui.form-elements.view';\nimport { Row, Section, SeparatorRow } from 'ui.section';\nimport { AnalyticSettingsEvent } from '../analytic';\nimport { PortalDeleteSection } from  '../configuration/portal-delete-section';\n\nexport class ConfigurationPage extends BaseSettingsPage\n{\n\t#header;\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.titlePage = Loc.getMessage('INTRANET_SETTINGS_TITLE_PAGE_CONFIGURATION');\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn 'configuration';\n\t}\n\n\theaderWidgetRender(): HTMLElement\n\t{\n\t\tlet timeFormat = '';\n\t\tif (this.getValue('isFormat24Hour')?.current === 'Y')\n\t\t{\n\t\t\ttimeFormat = this.getValue('format24HourTime');\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttimeFormat = this.getValue('format12HourTime');\n\t\t}\n\n\t\tthis.#header = Tag.render`\n\t\t<div class=\"intranet-settings__date-widget_box\">\n\t\t\t<span class=\"ui-icon-set --earth-language\"></span>\n\t\t\t<div class=\"intranet-settings__date-widget_content\">\n\t\t\t\t<div class=\"intranet-settings__date-widget_inner\">\n\t\t\t\t\t<span data-role=\"time\" class=\"intranet-settings__date-widget_title\">${timeFormat}</span>\n\t\t\t\t\t<span class=\"intranet-settings__date-widget_subtitle\">${this.getValue('offsetUTC')}</span>\n\t\t\t\t</div>\n\t\t\t\t<div data-role=\"date\" class=\"intranet-settings__date-widget_subtitle\">${this.getValue('currentDate')}</div>\n\t\t\t</div>\n\t\t</div>`;\n\n\t\treturn this.#header;\n\t}\n\n\tappendSections(contentNode: HTMLElement): void\n\t{\n\t\tlet dateTimeSection = this.#buildDateTimeSection();\n\t\tdateTimeSection?.renderTo(contentNode);\n\n\t\tlet mailsSection = this.#buildMailsSection();\n\t\tmailsSection?.renderTo(contentNode);\n\n\t\tif (this.hasValue('mapsProviderCRM') && this.getValue('mapsProviderCRM'))\n\t\t{\n\t\t\tlet mapsSection = this.#buildCRMMapsSection();\n\t\t\tmapsSection?.renderTo(contentNode);\n\t\t}\n\n\t\tlet cardsProductPropertiesSection = this.#buildCardsProductPropertiesSection();\n\t\tcardsProductPropertiesSection?.renderTo(contentNode);\n\n\t\tlet additionalSettingsSection = this.#buildAdditionalSettingsSection();\n\t\tadditionalSettingsSection?.renderTo(contentNode);\n\n\t\tif (this.hasValue('deletePortalOptions') && this.hasValue('sectionDeletePortal'))\n\t\t{\n\t\t\tconst deletePortalSection = new Section(this.getValue('sectionDeletePortal'));\n\n\t\t\tconst settingsSection = new PortalDeleteSection({\n\t\t\t\tsection: deletePortalSection,\n\t\t\t\tparent: this,\n\t\t\t\toptions: this.getValue('deletePortalOptions'),\n\t\t\t});\n\t\t\tsettingsSection.renderTo(contentNode);\n\t\t}\n\t}\n\n\t#buildDateTimeSection(): ?SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionDateFormat'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tlet dateTimeSection = new Section(this.getValue('sectionDateFormat'));\n\n\t\tconst settingsSection = new SettingsSection({\n\t\t\tsection: dateTimeSection,\n\t\t\tparent: this\n\t\t});\n\n\t\tif (this.hasValue('culture'))\n\t\t{\n\t\t\tlet regionField = new Selector(this.getValue('culture'));\n\t\t\tConfigurationPage.addToSectionHelper(regionField, settingsSection, new Row( { className: '--intranet-settings__mb-20' } ));\n\n\t\t\tEvent.bind(regionField.getInputNode(), 'change', (event) => {\n\t\t\t\tthis.#header.querySelector('[data-role=\"date\"]').innerHTML = this.getValue('longDates')[event.target.value];\n\t\t\t});\n\t\t}\n\n\t\tif (this.hasValue('isFormat24Hour'))\n\t\t{\n\t\t\tlet format24Time = new InlineChecker(this.getValue('isFormat24Hour'));\n\t\t\tConfigurationPage.addToSectionHelper(format24Time, settingsSection);\n\n\t\t\tEventEmitter.subscribe(format24Time, 'change', (event) => {\n\t\t\t\tthis.#header.querySelector('[data-role=\"time\"]').innerHTML = format24Time.isChecked()\n\t\t\t\t\t? this.getValue('format24HourTime')\n\t\t\t\t\t: this.getValue('format12HourTime');\n\t\t\t});\n\t\t}\n\n\t\treturn settingsSection;\n\t}\n\n\t#buildMailsSection(): ?SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionLetters'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet mailsSection = new Section(this.getValue('sectionLetters'));\n\n\t\tconst settingsSection = new SettingsSection({\n\t\t\tsection: mailsSection,\n\t\t\tparent: this\n\t\t});\n\n\t\tif (this.hasValue('trackOutMailsRead'))\n\t\t{\n\t\t\tlet trackOutLettersRead = new Checker(this.getValue('trackOutMailsRead'));\n\t\t\tlet showQuitRow = new Row({});\n\t\t\tConfigurationPage.addToSectionHelper(trackOutLettersRead, settingsSection, showQuitRow);\n\t\t}\n\n\t\tif (this.hasValue('trackOutMailsClick'))\n\t\t{\n\t\t\tlet trackOutMailsClick = new Checker(this.getValue('trackOutMailsClick'));\n\t\t\tlet showQuitRow = new Row({});\n\n\t\t\tConfigurationPage.addToSectionHelper(trackOutMailsClick, settingsSection, showQuitRow);\n\t\t}\n\n\t\tif (this.hasValue('defaultEmailFrom'))\n\t\t{\n\t\t\tlet defaultEmailFrom = new TextInput(this.getValue('defaultEmailFrom'));\n\t\t\tlet showQuitRow = new Row({});\n\n\t\t\tConfigurationPage.addToSectionHelper(defaultEmailFrom, settingsSection, showQuitRow);\n\t\t}\n\n\t\treturn settingsSection;\n\t}\n\n\t#buildCRMMapsSection(): ?SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionMapsInCrm'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tlet mapsSection = new Section(this.getValue('sectionMapsInCrm'));\n\n\t\tconst settingsSection = new SettingsSection({\n\t\t\tsection: mapsSection,\n\t\t\tparent: this\n\t\t});\n\n\t\tlet cardsProvider = new Selector({\n\t\t\tlabel: this.getValue('mapsProviderCRM').label ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_CHOOSE_REGION_CRM_MAPS'),\n\t\t\tname: this.getValue('mapsProviderCRM').name,\n\t\t\titems: this.getValue('mapsProviderCRM').values,\n\t\t\tcurrent: this.getValue('mapsProviderCRM').current,\n\t\t});\n\t\tlet cardsProviderRow = new Row({\n\t\t\tseparator: 'bottom',\n\t\t\tclassName: '--block',\n\t\t});\n\t\tConfigurationPage.addToSectionHelper(cardsProvider, settingsSection, cardsProviderRow);\n\n\t\tconst separatorRow = new SeparatorRow({\n\t\t\tisHidden: this.getValue('mapsProviderCRM').current === 'OSM',\n\t\t});\n\t\tnew SettingsRow({\n\t\t\trow: separatorRow,\n\t\t\tparent: settingsSection,\n\t\t});\n\n\t\tconst description = new BX.UI.Alert({\n\t\t\ttext: Loc.getMessage('INTRANET_SETTINGS_SECTION_CRM_MAPS_DESCRIPTION', {'#GOOGLE_API_URL#': this.getValue('googleApiUrl')}),\n\t\t\tinline: true,\n\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\tanimated: true,\n\t\t});\n\n\t\tconst descriptionRow = new Row({\n\t\t\tseparator: 'top',\n\t\t\tcontent: description.getContainer(),\n\t\t\tisHidden: this.getValue('mapsProviderCRM').current === 'OSM',\n\t\t});\n\t\tnew SettingsRow({\n\t\t\trow: descriptionRow,\n\t\t\tparent: settingsSection\n\t\t});\n\n\t\tconst googleKeyFrontend = new TextInputInline({\n\t\t\tinputName: 'API_KEY_FRONTEND',\n\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_PUBLIC'),\n\t\t\thintTitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_PUBLIC_HINT'),\n\t\t\tvalue: this.getValue('API_KEY_FRONTEND').value,\n\t\t\tplaceholder: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER'),\n\t\t});\n\t\tconst googleKeyFrontendRow = new Row({\n\t\t\tisHidden: this.getValue('mapsProviderCRM').current === 'OSM',\n\t\t});\n\n\t\tConfigurationPage.addToSectionHelper(googleKeyFrontend, settingsSection, googleKeyFrontendRow);\n\n\t\tconst mapApiKeyBackend = new TextInputInline({\n\t\t\tinputName: 'API_KEY_BACKEND',\n\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_SERVER'),\n\t\t\thintTitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_SERVER_HINT'),\n\t\t\tvalue: this.getValue('API_KEY_BACKEND').value,\n\t\t\tplaceholder: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER'),\n\t\t});\n\n\t\tconst googleKeyBackendRow = new Row({\n\t\t\tcontent: mapApiKeyBackend.render(),\n\t\t\tisHidden: this.getValue('mapsProviderCRM').current === 'OSM',\n\t\t\tseparator: 'bottom',\n\t\t\tclassName: '--block',\n\t\t});\n\t\tConfigurationPage.addToSectionHelper(mapApiKeyBackend, settingsSection, googleKeyBackendRow);\n\n\t\tconst separatorRow1 = new SeparatorRow({\n\n\t\t});\n\t\tnew SettingsRow({\n\t\t\trow: separatorRow1,\n\t\t\tparent: settingsSection,\n\t\t});\n\n\t\tlet showPhotoPlacesMaps = new Checker({\n\t\t\tinputName: 'SHOW_PHOTOS_ON_MAP',\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SHOW_PHOTO_PLACES_MAPS'),\n\t\t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON'),\n\t\t\thintOff: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON'),\n\t\t\tchecked: this.getValue('SHOW_PHOTOS_ON_MAP').value === '1'\n\t\t});\n\t\tlet showPhotoPlacesMapsRow = new Row({\n\t\t\tseparator: 'top',\n\t\t\tclassName: '--block',\n\t\t\tcontent: showPhotoPlacesMaps.render(),\n\t\t\tisHidden: this.getValue('mapsProviderCRM').current === 'OSM',\n\t\t});\n\t\tConfigurationPage.addToSectionHelper(showPhotoPlacesMaps, settingsSection, showPhotoPlacesMapsRow);\n\n\t\tlet useGeocodingService = new Checker({\n\t\t\tinputName: 'USE_GEOCODING_SERVICE',\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SHOW_GEOCODING_SERVICE'),\n\t\t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON'),\n\t\t\thintOff: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON'),\n\t\t\tchecked: this.getValue('USE_GEOCODING_SERVICE').value === '1',\n\t\t});\n\t\tlet useGeocodingServiceRow = new Row({\n\t\t\tcontent: useGeocodingService.render(),\n\t\t\tisHidden: this.getValue('mapsProviderCRM').current === 'OSM',\n\t\t});\n\n\t\tConfigurationPage.addToSectionHelper(useGeocodingService, settingsSection, useGeocodingServiceRow);\n\n\t\tcardsProvider.getInputNode()\n\t\t\t.addEventListener('change', (event) => {\n\t\t\t\tif (event.target.value === 'OSM')\n\t\t\t\t{\n\t\t\t\t\tseparatorRow.hide();\n\t\t\t\t\tdescriptionRow.hide();\n\t\t\t\t\tgoogleKeyFrontendRow.hide();\n\t\t\t\t\tgoogleKeyBackendRow.hide();\n\t\t\t\t\tuseGeocodingServiceRow.hide();\n\t\t\t\t\tshowPhotoPlacesMapsRow.hide();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tseparatorRow.show();\n\t\t\t\t\tdescriptionRow.show();\n\t\t\t\t\tgoogleKeyFrontendRow.show();\n\t\t\t\t\tgoogleKeyBackendRow.show();\n\t\t\t\t\tuseGeocodingServiceRow.show();\n\t\t\t\t\tshowPhotoPlacesMapsRow.show();\n\t\t\t\t}\n\t\t\t});\n\n\t\treturn settingsSection;\n\t}\n\n\t#buildCardsProductPropertiesSection(): ?SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionMapsInProduct'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tlet productPropertiesSection = new Section(this.getValue('sectionMapsInProduct'));\n\n\t\tconst settingsSection = new SettingsSection({\n\t\t\tsection: productPropertiesSection,\n\t\t\tparent: this\n\t\t})\n\n\t\tif (this.hasValue('cardsProviderProductProperties'))\n\t\t{\n\t\t\tlet cardsProviderProductProperties = new Selector({\n\t\t\t\tlabel: this.getValue('cardsProviderProductProperties').label ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_CHOOSE_REGION_CRM_MAPS'),\n\t\t\t\tname: this.getValue('cardsProviderProductProperties').name,\n\t\t\t\titems: this.getValue('cardsProviderProductProperties').values,\n\t\t\t\tcurrent: this.getValue('cardsProviderProductProperties').current,\n\t\t\t});\n\t\t\tlet cardsProviderProductPropertiesRow = new Row({\n\t\t\t\tseparator: 'bottom'\n\t\t\t});\n\t\t\tConfigurationPage.addToSectionHelper(cardsProviderProductProperties, settingsSection, cardsProviderProductPropertiesRow);\n\n\t\t\tnew SettingsRow({\n\t\t\t\trow: new SeparatorRow(),\n\t\t\t\tparent: settingsSection,\n\t\t\t});\n\n\t\t\tconst descriptionYandex = new BX.UI.Alert({\n\t\t\t\ttext: Loc.getMessage('INTRANET_SETTINGS_SECTION_CRM_MAPS_YANDEX_DESCRIPTION', {'#YANDEX_API_URL#': this.getValue('yandexApiUrl')}),\n\t\t\t\tinline: true,\n\t\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\t\tanimated: true,\n\t\t\t});\n\t\t\tconst descriptionYandexRow = new Row({\n\t\t\t\tcontent: descriptionYandex.getContainer(),\n\t\t\t\tisHidden: this.getValue('cardsProviderProductProperties').current !== 'yandex',\n\t\t\t});\n\t\t\tnew SettingsRow({\n\t\t\t\trow: descriptionYandexRow,\n\t\t\t\tparent: settingsSection\n\t\t\t});\n\n\t\t\tconst yandexKeyProductProperties = new TextInput({\n\t\t\t\tinputName: 'yandexKeyProductProperties',\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_MAP_PRODUCT_PROPERTIES_YANDEX_KEY'),\n\t\t\t\tvalue: this.getValue('yandexKeyProductProperties'),\n\t\t\t\tplaceholder: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER'),\n\t\t\t});\n\t\t\tconst yandexKeyProductPropertiesRow = new Row({\n\t\t\t\tseparator: 'bottom',\n\t\t\t\tclassName: '--block',\n\t\t\t\tcontent: yandexKeyProductProperties.render(),\n\t\t\t\tisHidden: this.getValue('cardsProviderProductProperties').current !== 'yandex',\n\t\t\t});\n\n\t\t\tConfigurationPage.addToSectionHelper(yandexKeyProductProperties, settingsSection, yandexKeyProductPropertiesRow);\n\n\t\t\tconst descriptionGoogle = new BX.UI.Alert({\n\t\t\t\ttext: Loc.getMessage('INTRANET_SETTINGS_SECTION_CRM_MAPS_DESCRIPTION', {'#GOOGLE_API_URL#': this.getValue('googleApiUrl')}),\n\t\t\t\tinline: true,\n\t\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\t\tanimated: true,\n\t\t\t});\n\n\t\t\tconst descriptionGoogleRow = new Row({\n\t\t\t\tcontent: descriptionGoogle.getContainer(),\n\t\t\t\tisHidden: this.getValue('cardsProviderProductProperties').current !== 'google',\n\t\t\t});\n\n\t\t\tnew SettingsRow({\n\t\t\t\trow: descriptionGoogleRow,\n\t\t\t\tparent: settingsSection\n\t\t\t});\n\n\t\t\tconst googleKeyProductProperties = new TextInput({\n\t\t\t\tinputName: 'googleKeyProductProperties',\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_MAP_PRODUCT_PROPERTIES_GOOGLE_KEY'),\n\t\t\t\tvalue: this.getValue('googleKeyProductProperties'),\n\t\t\t\tplaceholder: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER'),\n\t\t\t});\n\t\t\tconst googleKeyProductPropertiesRow = new Row({\n\t\t\t\tcontent: googleKeyProductProperties.render(),\n\t\t\t\tisHidden: this.getValue('cardsProviderProductProperties').current !== 'google',\n\t\t\t});\n\t\t\tConfigurationPage.addToSectionHelper(googleKeyProductProperties, settingsSection, googleKeyProductPropertiesRow);\n\n\t\t\tcardsProviderProductProperties.getInputNode()\n\t\t\t\t.addEventListener('change', (event) => {\n\t\t\t\t\tif (event.target.value === 'yandex')\n\t\t\t\t\t{\n\t\t\t\t\t\tdescriptionYandexRow.show();\n\t\t\t\t\t\tyandexKeyProductPropertiesRow.show();\n\t\t\t\t\t\tdescriptionGoogleRow.hide();\n\t\t\t\t\t\tgoogleKeyProductPropertiesRow.hide();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tdescriptionYandexRow.hide();\n\t\t\t\t\t\tyandexKeyProductPropertiesRow.hide();\n\t\t\t\t\t\tdescriptionGoogleRow.show();\n\t\t\t\t\t\tgoogleKeyProductPropertiesRow.show();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\n\t\treturn settingsSection;\n\t}\n\n\t#buildAdditionalSettingsSection(): ?SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionOther'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tlet additionalSettingsSection = new Section(this.getValue('sectionOther'));\n\n\t\tconst settingsSection = new SettingsSection({\n\t\t\tsection: additionalSettingsSection,\n\t\t\tparent: this\n\t\t});\n\n\t\tif (this.hasValue('allowUserInstallApplication'))\n\t\t{\n\t\t\tlet allInstallMarketApplication = new Checker(this.getValue('allowUserInstallApplication'));\n\t\t\tlet allInstallMarketApplicationRow = new Row({});\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tallInstallMarketApplication.switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() =>\n\t\t\t\t{\n\t\t\t\t\tthis.getAnalytic()?.addEventConfigConfiguration(\n\t\t\t\t\t\tAnalyticSettingsEvent.CHANGE_MARKET,\n\t\t\t\t\t\tallInstallMarketApplication.isChecked()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tConfigurationPage.addToSectionHelper(allInstallMarketApplication, settingsSection, allInstallMarketApplicationRow);\n\t\t}\n\n\t\tif (this.hasValue('allCanBuyTariff'))\n\t\t{\n\t\t\tconst messageNode = Tag.render`<span>${Loc.getMessage(\n\t\t\t\t'INTRANET_SETTINGS_FIELD_HELP_MESSAGE'\n\t\t\t)}</span>`;\n\t\t\tlet allCanBuyTariff = new Checker({\n\t\t\t\tinputName: this.getValue('allCanBuyTariff').inputName,\n\t\t\t\ttitle: this.getValue('allCanBuyTariff').title ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_ALL_CAN_BUY_TARIFF'),\n\t\t\t\thintOn: this.getValue('allCanBuyTariff').hintOn,\n\t\t\t\tchecked: this.getValue('allCanBuyTariff').checked,\n\t\t\t\tisEnable: this.getValue('allCanBuyTariff').isEnable,\n\t\t\t\tbannerCode: 'limit_why_pay_tariff_everyone',\n\t\t\t\thelpMessageProvider: this.helpMessageProviderFactory(messageNode),\n\t\t\t});\n\t\t\tlet allCanBuyTariffRow = new Row({});\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tallCanBuyTariff.switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() =>\n\t\t\t\t{\n\t\t\t\t\tthis.getAnalytic()?.addEventConfigConfiguration(\n\t\t\t\t\t\tAnalyticSettingsEvent.CHANGE_PAY_TARIFF,\n\t\t\t\t\t\tallCanBuyTariff.isChecked()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tConfigurationPage.addToSectionHelper(allCanBuyTariff, settingsSection, allCanBuyTariffRow);\n\t\t}\n\n\t\tif (this.hasValue('allowMeasureStressLevel'))\n\t\t{\n\t\t\tlet allowMeasureStressLevel = new Checker(this.getValue('allowMeasureStressLevel'));\n\t\t\tlet allowMeasureStressLevelRow = new Row({});\n\t\t\tConfigurationPage.addToSectionHelper(allowMeasureStressLevel, settingsSection, allowMeasureStressLevelRow);\n\t\t}\n\n\t\tif (this.hasValue('collectGeoData'))\n\t\t{\n\t\t\tlet collectGeoData = new Checker(this.getValue('collectGeoData'));\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tcollectGeoData.switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() =>\n\t\t\t\t{\n\t\t\t\t\tthis.#geoDataSwitch(collectGeoData);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tConfigurationPage.addToSectionHelper(collectGeoData, settingsSection);\n\t\t}\n\n\t\t// This is hidden\n\t\t// if (this.hasValue('showSettingsAllUsers'))\n\t\t// {\n\t\t// \tlet showSettingsAllUsers = new Checker({\n\t\t// \t\tinputName: 'showSettingsAllUsers',\n\t\t// \t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SHOW_SETTINGS_ALL_USER'),\n\t\t// \t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_SHOW_SETTINGS_ALL_USER_CLICK_ON'),\n\t\t// \t\tchecked: this.getValue('showSettingsAllUsers') === 'Y'\n\t\t// \t});\n\t\t// \tlet showSettingsAllUsersRow = new Row({\n\t\t// \t\tcontent: showSettingsAllUsers.render(),\n\t\t// \t\tisHidden: true\n\t\t// \t});\n\t\t// \tConfigurationPage.addToSectionHelper(showSettingsAllUsers, settingsSection, showSettingsAllUsersRow);\n\t\t// }\n\n\t\treturn settingsSection;\n\t}\n\n\t#geoDataSwitch(element)\n\t{\n\t\tif (element.isChecked())\n\t\t{\n\t\t\tBX.UI.Dialogs.MessageBox.show({\n\t\t\t\t'modal': true,\n\t\t\t\t'minWidth': 640,\n\t\t\t\t'title': Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_COLLECT_GEO_DATA'),\n\t\t\t\t'message': Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_COLLECT_GEO_DATA_CONFIRM'),\n\t\t\t\t'buttons': BX.UI.Dialogs.MessageBoxButtons.OK_CANCEL,\n\t\t\t\t'okCaption': Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_COLLECT_GEO_DATA_OK'),\n\t\t\t\t'onCancel': function ()\n\t\t\t\t{\n\t\t\t\t\telement.switcher.check(false);\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\t'onOk': function ()\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t});\n\t\t}\n\t}\n}\n","import { Loc, Tag, Dom, Event } from 'main.core';\nimport { Section, Row } from 'ui.section';\nimport { ItemPicker, TextInput, Selector } from 'ui.form-elements.view';\nimport {\n\tSettingsSection,\n\tSettingsRow,\n\tTabField,\n\tTabsField,\n\tBaseSettingsPage,\n\tSettingsField,\n} from 'ui.form-elements.field';\n\nexport class SchedulePage extends BaseSettingsPage\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.titlePage = Loc.getMessage('INTRANET_SETTINGS_TITLE_PAGE_SCHEDULE');\n\t\tthis.descriptionPage = Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_PAGE_SCHEDULE');\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn 'schedule';\n\t}\n\n\tappendSections(contentNode: HTMLElement): void\n\t{\n\t\tconst scheduleSection = this.#buildScheduleSection();\n\t\tscheduleSection.renderTo(contentNode);\n\n\t\tconst holidaysSection = this.#buildHolidaysSection();\n\t\tholidaysSection.renderTo(contentNode);\n\t}\n\n\t#buildScheduleTab(parent)\n\t{\n\t\tlet workTimeRow = new Row({\n\t\t\tclassName: 'intranet-settings__work-time_container --no-padding',\n\t\t});\n\t\tlet settingsRow = new SettingsRow({\n\t\t\trow: workTimeRow,\n\t\t\tparent: parent,\n\t\t});\n\t\tif (this.hasValue('WORK_TIME_START'))\n\t\t{\n\t\t\tconst workTimeStartField = new Selector(this.getValue('WORK_TIME_START'));\n\n\t\t\tnew SettingsRow({\n\t\t\t\tchild: new SettingsField({\n\t\t\t\t\tfieldView: workTimeStartField,\n\t\t\t\t}),\n\t\t\t\tparent: settingsRow,\n\t\t\t\trow: new Row({\n\t\t\t\t\tclassName: 'intranet-settings__work-time_row',\n\t\t\t\t}),\n\t\t\t});\n\t\t}\n\n\t\tnew SettingsRow({\n\t\t\trow: new Row({\n\t\t\t\tclassName: 'ui-section__field-inline-separator',\n\t\t\t}),\n\t\t\tparent: settingsRow,\n\t\t});\n\n\t\tif (this.hasValue('WORK_TIME_END'))\n\t\t{\n\t\t\tconst workTimeEndField = new Selector(this.getValue('WORK_TIME_END'));\n\n\t\t\tnew SettingsRow({\n\t\t\t\tchild: new SettingsField({\n\t\t\t\t\tfieldView: workTimeEndField,\n\t\t\t\t}),\n\t\t\t\tparent: settingsRow,\n\t\t\t\trow: new Row({\n\t\t\t\t\tclassName: 'intranet-settings__work-time_row',\n\t\t\t\t}),\n\t\t\t});\n\t\t}\n\n\t\tlet containerTab = Tag.render`<div><div>`;\n\t\tDom.append(workTimeRow.render(), containerTab);\n\n\t\tif (this.hasValue('WEEK_DAYS'))\n\t\t{\n\t\t\tconst itemPickerField = new ItemPicker({\n\t\t\t\tinputName: this.getValue('WEEK_DAYS').inputName,\n\t\t\t\tisMulti: true,\n\t\t\t\tlabel: this.getValue('WEEK_DAYS').label ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_WEEKEND'),\n\t\t\t\titems: this.getValue('WEEK_DAYS').values,\n\t\t\t\tcurrent: this.getValue('WEEK_DAYS').multiValue,\n\t\t\t});\n\t\t\tlet settingsField = new SettingsField({\n\t\t\t\tfieldView: itemPickerField,\n\t\t\t});\n\t\t\tconst itemPickerRow = new Row({\n\t\t\t\tcontent: itemPickerField.render(),\n\t\t\t});\n\t\t\tnew SettingsRow({\n\t\t\t\trow: itemPickerRow,\n\t\t\t\tchild: settingsField,\n\t\t\t\tparent: parent\n\t\t\t});\n\t\t\tDom.append(itemPickerRow.render(), containerTab);\n\t\t}\n\n\t\tif (this.hasValue('WEEK_START'))\n\t\t{\n\t\t\tconst weekStartField = new ItemPicker(this.getValue('WEEK_START'));\n\t\t\tlet settingsField = new SettingsField({\n\t\t\t\tfieldView: weekStartField,\n\t\t\t});\n\t\t\tDom.addClass(weekStartField.render(), '--row-frame_gray');\n\t\t\tconst weekStartRow = new Row({\n\t\t\t\tcontent: weekStartField.render(),\n\t\t\t});\n\t\t\tnew SettingsRow({\n\t\t\t\trow: weekStartRow,\n\t\t\t\tchild: settingsField,\n\t\t\t\tparent: parent,\n\t\t\t});\n\n\t\t\tDom.append(weekStartRow.render(), containerTab);\n\t\t}\n\n\t\treturn containerTab;\n\t}\n\n\t#buildScheduleSection(): SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionSchedule'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tlet scheduleSection = new Section(this.getValue('sectionSchedule'));\n\n\t\tconst settingsSection = new SettingsSection({\n\t\t\tparent: this,\n\t\t\tsection: scheduleSection\n\t\t})\n\n\t\tconst tabsRow = new SettingsRow({\n\t\t\tparent: settingsSection,\n\t\t});\n\n\t\tconst tabsField = new TabsField({\n\t\t\tparent: tabsRow,\n\t\t});\n\n\t\tconst forCompanyTab = new TabField({\n\t\t\tparent: tabsField,\n\t\t\ttabsOptions: this.getValue('tabForCompany')\n\t\t});\n\n\t\tthis.#buildScheduleTab(forCompanyTab)\n\n\t\tif (this.getValue('TIMEMAN').enabled)\n\t\t{\n\t\t\tconst forDepartmentTab = new TabField({\n\t\t\t\tparent: tabsField,\n\t\t\t\ttabsOptions: this.getValue('tabForDepartment')\n\t\t\t});\n\n\t\t\tconst forDepartmentRow = new Row({\n\t\t\t\tcontent: this.#forDepartmentsRender(),\n\t\t\t});\n\n\t\t\tnew SettingsRow({\n\t\t\t\trow: forDepartmentRow,\n\t\t\t\tparent: forDepartmentTab,\n\t\t\t});\n\t\t}\n\n\t\ttabsField.activateTab(forCompanyTab);\n\t\t//endregion\n\n\t\treturn settingsSection;\n\t}\n\n\t#buildHolidaysSection(): SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionHoliday'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet holidaysSection = new Section(this.getValue('sectionHoliday'));\n\n\t\tconst settingsSection = new SettingsSection({\n\t\t\tparent: this,\n\t\t\tsection: holidaysSection\n\t\t})\n\n\t\tconst countDays = this.getValue('year_holidays')?.value?.match(/\\d{1,2}.\\d{1,2}/gm)?.length ?? 0;\n\t\tlet countDaysNode = Tag.render`<div class=\"ui-section__field-label\">${Loc.getMessage('INTRANET_SETTINGS_FIELD_INFO', { '#COUNT_DAYS#': countDays })}</div>`;\n\t\tconst holidaysRow = new Row({\n\t\t\tcontent: countDaysNode,\n\t\t});\n\t\tholidaysSection.append(holidaysRow.render());\n\n\t\tif (this.hasValue('year_holidays'))\n\t\t{\n\t\t\tconst holidaysField = new TextInput(this.getValue('year_holidays'));\n\t\t\tSchedulePage.addToSectionHelper(holidaysField, settingsSection);\n\n\t\t\tEvent.bind(holidaysField.getInputNode(), 'keyup', () => {\n\t\t\t\tconst count = holidaysField?.getInputNode().value?.match(/\\d{1,2}.\\d{1,2}/gm)?.length ?? 0;\n\t\t\t\tcountDaysNode.innerHTML = Loc.getMessage('INTRANET_SETTINGS_FIELD_INFO', { '#COUNT_DAYS#': count });\n\t\t\t});\n\t\t}\n\n\t\treturn settingsSection;\n\t}\n\n\t#forDepartmentsRender(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"intranet-settings__tab-info_container\">\n\t\t\t\t<div class=\"intranet-settings__tab-info_text\">${Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_FOR_DEPARTMENTS')}</div>\n\t\t\t\t<a href=\"/timeman/schedules/\" class=\"ui-section__link\" target=\"_blank\">${Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_FOR_DEPARTMENTS_CONFIG')}</a>\n\t\t\t</div>\n\t\t`;\n\t}\n}\n","import { Dom, Loc, Tag } from 'main.core';\nimport 'ui.icon-set.main';\nimport { Section, Row } from 'ui.section';\nimport { TextInput } from 'ui.form-elements.view';\nimport { SettingsSection, SettingsField, SettingsRow, BaseSettingsPage } from 'ui.form-elements.field';\n\nexport class GdprPage extends BaseSettingsPage\n{\n\tconstructor() {\n\t\tsuper();\n\t\tthis.titlePage = Loc.getMessage('INTRANET_SETTINGS_TITLE_PAGE_GDPR');\n\t\tthis.descriptionPage = Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_PAGE_GDPR');\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn 'gdpr';\n\t}\n\n\tappendSections(contentNode: HTMLElement)\n\t{\n\t\tlet gdprSection = this.#buildGdprSection();\n\t\tgdprSection?.renderTo(contentNode);\n\t}\n\n\t#buildGdprSection(): SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionGdpr'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tlet gdprSection = new Section(this.getValue('sectionGdpr'));\n\n\t\tlet sectionSettings = new SettingsSection({\n\t\t\tsection: gdprSection,\n\t\t\tparent: this\n\t\t});\n\n\t\tconst description = new BX.UI.Alert({\n\t\t\ttext: `\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_GDPR_DESCRIPTION')}\n\t\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=7608199')\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t\t</a>\n\t\t\t\t</br>\n\t\t\t\t<a class=\"ui-section__link\" href=\"${this.getValue('dpaLink')}\" target=\"_blank\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_BUTTON_GDPR_AGREEMENT')}\n\t\t\t\t</a>\n\t\t\t`,\n\t\t\tinline: true,\n\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\tanimated: true,\n\t\t});\n\n\t\tconst descriptionRow = new Row({\n\t\t\tcontent: description.getContainer(),\n\t\t});\n\n\t\tnew SettingsRow({\n\t\t\trow: descriptionRow,\n\t\t\tparent: sectionSettings\n\t\t});\n\n\t\tif (this.hasValue('companyTitle'))\n\t\t{\n\t\t\tconst titleField = new TextInput({\n\t\t\t\tinputName: 'companyTitle',\n\t\t\t\tlabel: this.getValue('companyTitle').label ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_COMPANY_TITLE'),\n\t\t\t\tvalue: this.getValue('companyTitle').value,\n\t\t\t\tplaceholder: Loc.getMessage('INTRANET_SETTINGS_FIELD_PLACEHOLDER_COMPANY_TITLE'),\n\t\t\t});\n\n\t\t\tlet settingsField = new SettingsField({\n\t\t\t\tfieldView: titleField\n\t\t\t});\n\t\t\tnew SettingsRow({\n\t\t\t\tparent: sectionSettings,\n\t\t\t\tchild: settingsField\n\t\t\t});\n\t\t}\n\n\t\tif (this.hasValue('contactName'))\n\t\t{\n\t\t\tconst contactNameField = new TextInput({\n\t\t\t\tinputName: 'contactName',\n\t\t\t\tlabel: this.getValue('contactName').label ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_CONTACT_NAME'),\n\t\t\t\tvalue: this.getValue('contactName').value,\n\t\t\t\tplaceholder: Loc.getMessage('INTRANET_SETTINGS_FIELD_PLACEHOLDER_CONTACT_NAME'),\n\t\t\t});\n\n\t\t\tlet settingsField = new SettingsField({\n\t\t\t\tfieldView: contactNameField\n\t\t\t});\n\t\t\tnew SettingsRow({\n\t\t\t\tparent: sectionSettings,\n\t\t\t\tchild: settingsField\n\t\t\t});\n\t\t}\n\n\t\tif (this.hasValue('notificationEmail'))\n\t\t{\n\t\t\tconst emailField = new TextInput({\n\t\t\t\tinputName: 'notificationEmail',\n\t\t\t\tlabel: this.getValue('notificationEmail').label ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_NOTIFICATION_EMAIL'),\n\t\t\t\tvalue: this.getValue('notificationEmail').value,\n\t\t\t\tplaceholder: Loc.getMessage('INTRANET_SETTINGS_FIELD_PLACEHOLDER_NOTIFICATION_EMAIL'),\n\t\t\t});\n\n\t\t\tlet settingsField = new SettingsField({\n\t\t\t\tfieldView: emailField,\n\t\t\t});\n\n\t\t\tnew SettingsRow({\n\t\t\t\tparent: sectionSettings,\n\t\t\t\tchild: settingsField\n\t\t\t});\n\t\t}\n\n\t\tif (this.hasValue('date'))\n\t\t{\n\t\t\tconst dateField = new TextInput({\n\t\t\t\tinputName: 'date',\n\t\t\t\tlabel: this.getValue('date').label ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_DATE'),\n\t\t\t\tvalue: this.getValue('date').value,\n\t\t\t});\n\n\t\t\tDom.adjust(dateField.render(), {\n\t\t\t\tevents: {\n\t\t\t\t\tclick: (event) => {\n\t\t\t\t\t\tBX.calendar({\n\t\t\t\t\t\t\tnode: event.target,\n\t\t\t\t\t\t\tfield: 'date',\n\t\t\t\t\t\t\tform: '',\n\t\t\t\t\t\t\tbTime: false,\n\t\t\t\t\t\t\tbHideTime: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tlet settingsField = new SettingsField({\n\t\t\t\tfieldView: dateField,\n\t\t\t});\n\n\t\t\tnew SettingsRow({\n\t\t\t\tparent: sectionSettings,\n\t\t\t\tchild: settingsField\n\t\t\t});\n\t\t}\n\n\t\tnew SettingsRow({\n\t\t\trow: new Row({\n\t\t\t\tcontent: this.addApplicationsRender()\n\t\t\t}),\n\t\t\tparent: sectionSettings,\n\t\t});\n\n\t\treturn sectionSettings;\n\t}\n\n\taddApplicationsRender(): HTMLElement\n\t{\n\t\tif (this.hasValue('marketDirectory'))\n\t\t{\n\t\t\tconst marketDirectory = this.getValue('marketDirectory');\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-text-right\">\n\t\t\t\t\t<a class=\"ui-section__link\" href=\"${marketDirectory}detail/integrations24.gdprstaff/\">\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_BUTTON_GDPR_APPLICATION_EMPLOYEE')}\n\t\t\t\t\t</a>\n\t\t\t\t\t<a class=\"ui-section__link\" style=\"margin-left: 12px;\" href=\"${marketDirectory}detail/integrations24.gdpr/\">\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_BUTTON_GDPR_APPLICATION_CRM')}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn null;\n\t}\n}","import { Loc, Tag, Event, Dom, Type} from 'main.core';\nimport 'ui.forms';\nimport 'ui.icon-set.actions';\nimport 'ui.icon-set.main';\nimport { EventEmitter } from 'main.core.events';\nimport { Section, Row } from 'ui.section';\nimport { Checker, Selector, SingleChecker, UserSelector, TextInput} from 'ui.form-elements.view';\nimport { Switcher, SwitcherSize } from 'ui.switcher';\nimport { Popup } from 'main.popup';\nimport { SettingsSection, SettingsField, SettingsRow, BaseSettingsPage } from 'ui.form-elements.field';\nimport {TagSelector} from \"ui.entity-selector\";\nimport { AnalyticSettingsEvent } from '../analytic';\n\nexport class SecurityPage extends BaseSettingsPage\n{\n\t#otpChecker: ?Checker;\n\t#otpSelector: ?Selector;\n\t#otpPopup: ?Popup;\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.titlePage = Loc.getMessage('INTRANET_SETTINGS_TITLE_PAGE_SECURITY');\n\t\tthis.descriptionPage = Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_PAGE_SECURITY');\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn 'security';\n\t}\n\n\tappendSections(contentNode: HTMLElement): void\n\t{\n\t\tconst isBitrix24 = this.hasValue('IS_BITRIX_24') && this.getValue('IS_BITRIX_24');\n\t\tif (this.hasValue('SECURITY_OTP_ENABLED') && this.getValue('SECURITY_OTP_ENABLED'))\n\t\t{\n\t\t\tthis.#buildOTPSection()?.renderTo(contentNode);\n\t\t}\n\n\t\t// if (isBitrix24)\n\t\t// {\n\t\t// \tthis.#buildPasswordRecoverySection().renderTo(contentNode);\n\t\t// }\n\t\tthis.#buildDevicesHistorySection()?.renderTo(contentNode);\n\t\tthis.#buildEventLogSection()?.renderTo(contentNode);\n\t\tthis.#buildMobileAppSection()?.renderTo(contentNode);\n\t\tif (isBitrix24)\n\t\t{\n\t\t\tthis.#buildAccessIPSection()?.renderTo(contentNode);\n\t\t\tthis.#buildBlackListSection()?.renderTo(contentNode);\n\t\t}\n\t}\n\n\t#buildOTPSection(): ?SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionOtp'))\n\t\t{\n\t\t\treturn ;\n\t\t}\n\t\tconst otpSection = new Section(this.getValue('sectionOtp'));\n\n\t\tconst section = new SettingsSection({\n\t\t\tsection: otpSection,\n\t\t\tparent: this,\n\t\t});\n\n\t\tconst descriptionRow = new Row({\n\t\t\tcontent: this.#getOTPDescription().getContainer(),\n\t\t});\n\t\tnew SettingsRow({\n\t\t\trow: descriptionRow,\n\t\t\tparent: section,\n\t\t});\n\n\t\tif (this.hasValue('SECURITY_OTP') && this.hasValue('SEND_OTP_PUSH'))\n\t\t{\n\t\t\tconst securityOtpCheckerRow = new Row({\n\t\t\t\tcontent: this.#getOTPChecker().render(),\n\t\t\t\tseparator: this.#getOTPChecker().isChecked() ? '' : 'bottom',\n\t\t\t\tclassName: this.#getOTPChecker().isChecked() ? '' : '--block',\n\t\t\t});\n\t\t\tnew SettingsRow({\n\t\t\t\trow: securityOtpCheckerRow,\n\t\t\t\tparent: section,\n\t\t\t});\n\n\t\t\tconst securityOtpPeriodSelectorRow = new Row({\n\t\t\t\tcontent: this.#getOTPPeriodSelector().render(),\n\t\t\t\tisHidden: !this.#getOTPChecker().isChecked(),\n\t\t\t});\n\t\t\tnew SettingsRow({\n\t\t\t\trow: securityOtpPeriodSelectorRow,\n\t\t\t\tparent: section,\n\t\t\t});\n\n\t\t\tconst switcherWrapper = Tag.render`\n\t\t\t\t<div class=\"settings-switcher-wrapper\">\n\t\t\t\t\t<div class=\"settings-security-message-switcher\"/>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t\tnew SingleChecker({\n\t\t\t\tswitcher: new Switcher({\n\t\t\t\t\tnode: switcherWrapper.querySelector('.settings-security-message-switcher'),\n\t\t\t\t\tinputName: 'SEND_OTP_PUSH',\n\t\t\t\t\tchecked: this.getValue('SEND_OTP_PUSH'),\n\t\t\t\t\tsize: SwitcherSize.small,\n\t\t\t\t}),\n\t\t\t});\n\t\t\tconst securityOtpMessageChatCheckerRow = new Row({\n\t\t\t\tcontent: switcherWrapper,\n\t\t\t\tisHidden: !this.#getOTPChecker().isChecked(),\n\t\t\t});\n\t\t\tswitcherWrapper.append(Tag.render`<span class=\"settings-switcher-title\">${\n\t\t\t\tLoc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_OTP_SWITCHING_MESSAGE_CHAT')\n\t\t\t}</span>`);\n\t\t\tnew SettingsRow({\n\t\t\t\trow: securityOtpMessageChatCheckerRow,\n\t\t\t\tparent: section,\n\t\t\t});\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tthis.#getOTPChecker().switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() => {\n\t\t\t\t\tif (this.getValue('SECURITY_IS_USER_OTP_ACTIVE') !== true && this.#getOTPChecker().isChecked())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#getOTPPopup().show();\n\t\t\t\t\t\tthis.#getOTPChecker().cancel();\n\t\t\t\t\t\tthis.#getOTPChecker().switcher.check(false);\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.hasValue('SECURITY_OTP_ENABLED') && this.getValue('SECURITY_OTP_ENABLED'))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getAnalytic()?.addEventToggle2fa(this.#getOTPChecker().isChecked());\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.#getOTPChecker().isChecked())\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.removeClass(securityOtpCheckerRow.render(), '--bottom-separator --block');\n\t\t\t\t\t\tsecurityOtpPeriodSelectorRow.show();\n\t\t\t\t\t\tsecurityOtpMessageChatCheckerRow.show();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.addClass(securityOtpCheckerRow.render(), '--bottom-separator --block');\n\t\t\t\t\t\tsecurityOtpPeriodSelectorRow.hide();\n\t\t\t\t\t\tsecurityOtpMessageChatCheckerRow.hide();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\treturn section;\n\t}\n\n\t#getOTPChecker(): Checker\n\t{\n\t\tif (this.#otpChecker instanceof Checker)\n\t\t{\n\t\t\treturn this.#otpChecker;\n\t\t}\n\n\t\tif (this.hasValue('fieldSecurityOtp'))\n\t\t{\n\t\t\tthis.#otpChecker = new Checker({\n\t\t\t\tinputName: this.getValue('fieldSecurityOtp').inputName,\n\t\t\t\tchecked: this.getValue('fieldSecurityOtp').checked,\n\t\t\t\ttitle: this.getValue('fieldSecurityOtp').title,\n\t\t\t\tisEnable: this.getValue('fieldSecurityOtp').isEnable,\n\t\t\t\thideSeparator: true,\n\t\t\t\talignCenter: true,\n\t\t\t\tnoMarginBottom: true,\n\t\t\t});\n\t\t}\n\n\t\tthis.#otpChecker.renderLockElement = () => {\n\t\t\treturn null;\n\t\t};\n\n\t\treturn this.#otpChecker;\n\t}\n\n\t#getOTPPopup(): Popup\n\t{\n\t\tif (this.#otpPopup instanceof Popup)\n\t\t{\n\t\t\treturn this.#otpPopup;\n\t\t}\n\n\t\tconst popupDescription = Tag.render`\n\t\t\t<div class=\"intranet-settings__security_popup_info\">\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_POPUP_OTP_ENABLE')}\n\t\t\t</div>\t\n\t\t`;\n\n\t\tconst popupButton = new BX.UI.Button({\n\t\t\ttext: Loc.getMessage('INTRANET_SETTINGS_POPUP_OTP_ENABLE_BUTTON'),\n\t\t\tcolor: BX.UI.Button.Color.PRIMARY,\n\t\t\tevents: {\n\t\t\t\tclick: () => {\n\t\t\t\t\tthis.#getOTPPopup().close();\n\t\t\t\t\tBX.SidePanel.Instance.open(this.getValue('SECURITY_OTP_PATH'));\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tconst popupContent = Tag.render`\n\t\t\t<div class=\"intranet-settings__security_popup_container\">\n\t\t\t\t${popupDescription}\n\t\t\t\t<div class=\"ui-btn-container ui-btn-container-center\">\n\t\t\t\t\t${popupButton.getContainer()}\n\t\t\t\t</div>\t\t\t\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.#otpPopup = new Popup({\n\t\t\tbindElement: this.#otpChecker.getInputNode(),\n\t\t\tcontent: popupContent,\n\t\t\tautoHide: true,\n\t\t\twidth: 337,\n\t\t\tangle: {\n\t\t\t\toffset: 200 - 15,\n\t\t\t},\n\t\t\toffsetLeft: this.#otpChecker.getInputNode().offsetWidth - 200 + 15,\n\t\t\tcloseByEsc: true,\n\t\t\tborderRadius: 18,\n\t\t});\n\n\t\treturn this.#otpPopup;\n\t}\n\n\t#getOTPPeriodSelector(): Selector\n\t{\n\t\tif (this.#otpSelector instanceof Selector)\n\t\t{\n\t\t\treturn this.#otpSelector;\n\t\t}\n\n\t\tthis.#otpSelector = new Selector({\n\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_OTP_SWITCHING_PERIOD'),\n\t\t\tname: 'SECURITY_OTP_DAYS',\n\t\t\titems: this.getValue('SECURITY_OTP_DAYS').ITEMS,\n\t\t\tcurrent: this.getValue('SECURITY_OTP_DAYS').CURRENT,\n\t\t});\n\n\t\treturn this.#otpSelector;\n\t}\n\n\t#getOTPDescription(): BX.UI.Alert\n\t{\n\t\treturn new BX.UI.Alert({\n\t\t\ttext: this.#getOTPDescriptionText(),\n\t\t\tinline: true,\n\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\tanimated: true,\n\t\t});\n\t}\n\n\t#getOTPDescriptionText(): string\n\t{\n\t\treturn `\n\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_FIRST')}\n\t\t</br></br>\n\t\t<span class=\"settings-section-description-focus-text --security-info\">\n\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_SECOND')}\n\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=17728602')\">\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t</a>\n\t\t</span>`;\n\t}\n\n\t#buildAccessIPSection(): ?SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionAccessIp'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst accessIpSection = new Section(this.getValue('sectionAccessIp'));\n\n\t\tconst section = new SettingsSection({\n\t\t\tsection: accessIpSection,\n\t\t\tparent: this,\n\t\t});\n\n\t\tconst descriptionRow = new Row({\n\t\t\tcontent: this.#getIpAccessDescription().getContainer(),\n\t\t});\n\t\tnew SettingsRow({\n\t\t\trow: descriptionRow,\n\t\t\tparent: section,\n\t\t});\n\n\t\tlet fieldsCount = 0;\n\t\tif (this.hasValue('IP_ACCESS_RIGHTS'))\n\t\t{\n\t\t\tfor (const ipUsersList of this.getValue('IP_ACCESS_RIGHTS'))\n\t\t\t{\n\t\t\t\tfieldsCount++;\n\t\t\t\tnew SettingsRow({\n\t\t\t\t\tparent: section,\n\t\t\t\t\tchild: this.#getUserSelectorRow(ipUsersList),\n\t\t\t\t});\n\t\t\t\tnew SettingsRow({\n\t\t\t\t\tparent: section,\n\t\t\t\t\tchild: this.#getAccessIpRow(ipUsersList),\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (fieldsCount === 0)\n\t\t{\n\t\t\tfieldsCount++;\n\t\t\tnew SettingsRow({\n\t\t\t\tparent: section,\n\t\t\t\tchild: this.#getEmptyUserSelectorRow(fieldsCount),\n\t\t\t});\n\t\t\tnew SettingsRow({\n\t\t\t\tparent: section,\n\t\t\t\tchild: this.#getEmptyAccessIpRow(fieldsCount),\n\t\t\t});\n\t\t}\n\n\t\tconst onclickAddField = () => {\n\t\t\tif (this.getValue('IP_ACCESS_RIGHTS_ENABLED'))\n\t\t\t{\n\t\t\t\tfieldsCount++;\n\n\t\t\t\tconst emptyUserSelectorRow = new Row({\n\t\t\t\t\tcontent: this.#getEmptyUserSelectorRow(fieldsCount).render(),\n\t\t\t\t});\n\t\t\t\tDom.insertBefore(emptyUserSelectorRow.render(), additionalUsersAccessIpButton.parentElement);\n\n\t\t\t\tconst emptyAccessIpRow = new Row({\n\t\t\t\t\tcontent: this.#getEmptyAccessIpRow(fieldsCount).render(),\n\t\t\t\t});\n\t\t\t\tDom.insertBefore(emptyAccessIpRow.render(), additionalUsersAccessIpButton.parentElement);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBX.UI.InfoHelper.show('limit_admin_ip');\n\t\t\t}\n\t\t};\n\n\t\tconst additionalUsersAccessIpButton = Tag.render`\n\t\t\t<div class=\"ui-text-right\">\n\t\t\t\t<a class=\"ui-section__link\" href=\"javascript:void(0)\" onclick=\"${onclickAddField}\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_ADDITIONAL_USER_ACCESS_IP')}\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t`;\n\n\t\tnew SettingsRow({\n\t\t\trow: new Row({\n\t\t\t\tcontent: additionalUsersAccessIpButton,\n\t\t\t}),\n\t\t\tparent: section,\n\t\t});\n\n\t\treturn section;\n\t}\n\n\t#getEmptyUserSelectorRow(fieldNumber): SettingsRow\n\t{\n\t\tconst userSelector = new UserSelector({\n\t\t\tinputName: `SECURITY_IP_ACCESS_${fieldNumber}_USERS[]`,\n\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_ACCESS_IP'),\n\t\t\tenableDepartments: true,\n\t\t\tencodeValue: (value) => {\n\t\t\t\tif (!Type.isNil(value.id))\n\t\t\t\t{\n\t\t\t\t\treturn value.id === 'all-users' ? 'AU' : value.type + value.id.toString().split(':')[0];\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\tisEnable: this.getValue('IP_ACCESS_RIGHTS_ENABLED'),\n\t\t\thelpMessageProvider: this.helpMessageProviderFactory(Loc.getMessage('INTRANET_SETTINGS_FIELD_HELP_MESSAGE_PRO')),\n\t\t});\n\n\t\treturn new SettingsField({\n\t\t\tfieldView: userSelector,\n\t\t});\n\t}\n\n\t#getEmptyAccessIpRow(fieldNumber): SettingsRow\n\t{\n\t\tconst inputName = `SECURITY_IP_ACCESS_${fieldNumber}_IP`;\n\t\tconst accessIp = new TextInput({\n\t\t\tinputName,\n\t\t\tlabel: this.getValue('IP_ACCESS_RIGHTS_ENABLED_LABEL') ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SELECT_ACCEPTED_IP'),\n\t\t\tisEnable: this.getValue('IP_ACCESS_RIGHTS_ENABLED'),\n\t\t\thelpMessageProvider: this.helpMessageProviderFactory(Loc.getMessage('INTRANET_SETTINGS_FIELD_HELP_MESSAGE_PRO')),\n\t\t});\n\n\t\treturn new SettingsField({\n\t\t\tfieldView: accessIp,\n\t\t});\n\t}\n\n\t#getUserSelectorRow(ipUsersList): SettingsRow\n\t{\n\t\tconst userSelector = new UserSelector({\n\t\t\tinputName: `SECURITY_IP_ACCESS_${ipUsersList.fieldNumber}_USERS[]`,\n\t\t\tlabel: this.getValue('IP_ACCESS_RIGHTS_ENABLED_LABEL') ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_ACCESS_IP'),\n\t\t\tvalues: Object.values(ipUsersList.users),\n\t\t\tenableDepartments: true,\n\t\t\tencodeValue: (value) => {\n\t\t\t\tif (!Type.isNil(value.id))\n\t\t\t\t{\n\t\t\t\t\treturn value.id === 'all-users' ? 'AU' : value.type + value.id.toString().split(':')[0];\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\tdecodeValue: (value: string) => {\n\t\t\t\tif (value === 'AU')\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: value,\n\t\t\t\t\t\tid: '',\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst arr = value.match(/^(U|DR|D)(\\d+)/);\n\n\t\t\t\tif (!Type.isArray(arr))\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: null,\n\t\t\t\t\t\tid: null,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\ttype: arr[1],\n\t\t\t\t\tid: arr[2],\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\n\t\treturn new SettingsField({\n\t\t\tfieldView: userSelector,\n\t\t});\n\t}\n\n\t#getAccessIpRow(ipUsersList): SettingsRow\n\t{\n\t\tconst inputName = `SECURITY_IP_ACCESS_${ipUsersList.fieldNumber}_IP`;\n\t\tconst accessIp = new TextInput({\n\t\t\tinputName,\n\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SELECT_ACCEPTED_IP'),\n\t\t\tvalue: ipUsersList.ip,\n\t\t});\n\n\t\treturn new SettingsField({\n\t\t\tfieldView: accessIp,\n\t\t});\n\t}\n\n\t#getIpAccessDescription(): BX.UI.Alert\n\t{\n\t\treturn new BX.UI.Alert({\n\t\t\ttext: `\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_IP_ACCESS', {'#ARTICLE_CODE#': 'redirect=detail&code=17300230'})}\n\t\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=17300230')\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t\t</a>\n\t\t\t`,\n\t\t\tinline: true,\n\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\tanimated: true,\n\t\t});\n\t}\n\n\t#buildPasswordRecoverySection(): ?SettingsSection\n\t{\n\t\treturn new Section({\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_PASSWORD_RECOVERY'),\n\t\t\ttitleIconClasses: 'ui-icon-set',\n\t\t\tisOpen: false,\n\t\t\tcanCollapse: false,\n\t\t});\n\t}\n\n\t#buildDevicesHistorySection(): ?SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionHistory'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst devicesHistorySection = new Section(this.getValue('sectionHistory'));\n\n\t\tconst settingsSection = new SettingsSection({\n\t\t\tsection: devicesHistorySection,\n\t\t\tparent: this,\n\t\t});\n\n\t\tconst devicesHistoryDescription = new BX.UI.Alert({\n\t\t\ttext: `\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_DEVICE_HISTORY')}\n\t\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=16623484')\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t\t</a>\n\t\t\t`,\n\t\t\tinline: true,\n\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\tanimated: true,\n\t\t})\n\n\t\tconst descriptionRow = new Row({\n\t\t\tcontent: devicesHistoryDescription.getContainer(),\n\t\t});\n\t\tnew SettingsRow({\n\t\t\trow: descriptionRow,\n\t\t\tparent: settingsSection,\n\t\t});\n\n\t\tif (this.hasValue('DEVICE_HISTORY_SETTINGS'))\n\t\t{\n\t\t\tconst messageNode = Tag.render`<span>${Loc.getMessage(\n\t\t\t\t'INTRANET_SETTINGS_FIELD_HELP_MESSAGE_ENT', { '#TARIFF#': 'ent250' }\n\t\t\t)}</span>`;\n\t\t\tconst cleanupDaysField = new Selector({\n\t\t\t\tlabel: this.getValue('DEVICE_HISTORY_SETTINGS').label,\n\t\t\t\tname: this.getValue('DEVICE_HISTORY_SETTINGS').name,\n\t\t\t\titems: this.getValue('DEVICE_HISTORY_SETTINGS').values,\n\t\t\t\tcurrent: this.getValue('DEVICE_HISTORY_SETTINGS').current,\n\t\t\t\tisEnable: this.getValue('DEVICE_HISTORY_SETTINGS').isEnable,\n\t\t\t\tbannerCode: 'limit_office_login_history',\n\t\t\t\thelpMessageProvider: this.helpMessageProviderFactory(messageNode),\n\t\t\t});\n\t\t\tif (!this.getValue('DEVICE_HISTORY_SETTINGS').isEnable)\n\t\t\t{\n\t\t\t\tEvent.bind(\n\t\t\t\t\tcleanupDaysField.getInputNode(),\n\t\t\t\t\t'click',\n\t\t\t\t\t() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getAnalytic()?.addEventOpenHint(this.getValue('DEVICE_HISTORY_SETTINGS').name);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tEvent.bind(\n\t\t\t\t\tmessageNode.querySelector('a'),\n\t\t\t\t\t'click',\n\t\t\t\t\t() => this.getAnalytic()?.addEventOpenTariffSelector(this.getValue('DEVICE_HISTORY_SETTINGS').name)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tSecurityPage.addToSectionHelper(cleanupDaysField, settingsSection);\n\t\t}\n\n\t\tconst goToUserListButton = Tag.render`\n\t\t\t<div class=\"ui-text-right\">\n\t\t\t\t<a class=\"ui-section__link\" href=\"/company/\" target=\"_blank\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_GO_TO_USER_LIST_LINK')}\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t`;\n\n\t\tnew SettingsRow({\n\t\t\trow: new Row({\n\t\t\t\tcontent: goToUserListButton,\n\t\t\t}),\n\t\t\tparent: settingsSection,\n\t\t});\n\n\t\treturn settingsSection;\n\t}\n\n\t#buildEventLogSection(): ?SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionEventLog'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst eventLogSection = new Section(this.getValue('sectionEventLog'));\n\n\t\tconst settingsSection = new SettingsSection({\n\t\t\tsection: eventLogSection,\n\t\t\tparent: this,\n\t\t});\n\n\t\tconst eventLogDescription = new BX.UI.Alert({\n\t\t\ttext: `\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_EVENT_LOG')}\n\t\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=17296266')\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t\t</a>\n\t\t\t`,\n\t\t\tinline: true,\n\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\tanimated: true,\n\t\t})\n\n\t\tconst descriptionRow = new Row({\n\t\t\tcontent: eventLogDescription.getContainer(),\n\t\t});\n\t\tnew SettingsRow({\n\t\t\trow: descriptionRow,\n\t\t\tparent: settingsSection,\n\t\t});\n\n\t\tconst goToUserListButton = this.hasValue('EVENT_LOG')\n\t\t\t? Tag.render`\n\t\t\t\t<div class=\"ui-text-right\">\n\t\t\t\t\t<a class=\"ui-section__link\" href=\"${this.getValue('EVENT_LOG')}\" target=\"_blank\">\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_GO_TO_EVENT_LOG_LINK')}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`\n\t\t\t: Tag.render`\n\t\t\t\t<div class=\"ui-text-right\">\n\t\t\t\t\t<a class=\"ui-section__link\" href=\"javascript:void(0)\" onclick=\"BX.UI.InfoHelper.show('limit_office_login_log')\">\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_GO_TO_EVENT_LOG_LINK')}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\tnew SettingsRow({\n\t\t\trow: new Row({\n\t\t\t\tcontent: goToUserListButton,\n\t\t\t}),\n\t\t\tparent: settingsSection,\n\t\t});\n\n\t\treturn settingsSection;\n\t}\n\n\t#buildBlackListSection(): ?SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionBlackList'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tlet params = this.getValue('sectionBlackList');\n\t\tparams['singleLink'] = {\n\t\t\thref: '/settings/configs/mail_blacklist.php',\n\t\t};\n\n\t\treturn new Section(params);\n\t}\n\n\t#buildMobileAppSection(): ?SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionMobileApp'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst mobileAppSection = new Section(this.getValue('sectionMobileApp'));\n\n\t\tconst settingsSection = new SettingsSection({\n\t\t\tsection: mobileAppSection,\n\t\t\tparent: this,\n\t\t});\n\n\t\tif (this.hasValue('switcherDisableCopy'))\n\t\t{\n\t\t\tlet disableCopyField = new Checker(this.getValue('switcherDisableCopy'));\n\t\t\tSecurityPage.addToSectionHelper(disableCopyField, settingsSection);\n\t\t}\n\n\t\tif (this.hasValue('switcherDisableScreenshot'))\n\t\t{\n\t\t\tlet disableCopyScreenshotField = new Checker(this.getValue('switcherDisableScreenshot'));\n\t\t\tSecurityPage.addToSectionHelper(disableCopyScreenshotField, settingsSection);\n\t\t}\n\n\t\treturn settingsSection;\n\t}\n}\n","import { ajax as Ajax, Dom, Event, Loc, Runtime, Tag } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Menu, Popup } from 'main.popup';\nimport { Button } from 'ui.buttons';\nimport 'ui.buttons';\nimport 'ui.icon.set';\nimport { BaseSettingsPage, SettingsSection } from 'ui.form-elements.field';\nimport { Row } from 'ui.section';\nimport 'sidepanel';\n\nexport type MainpageOptions = {\n\turlCreate: ?string,\n\turlEdit: ?string,\n\turlPublic: ?string,\n\turlPartners: ?string,\n\turlImport: ?string,\n\turlExport: ?string,\n\tpreviewImg: ?string,\n\tisPageExists: ?boolean,\n\tisPublished: ?boolean,\n\tcanEdit: ?boolean;\n\tfeedbackParams: ?{};\n};\n\nexport class MainpagePage extends BaseSettingsPage\n{\n\ttitlePage: string = '';\n\tdescriptionPage: string = '';\n\n\t#urlCreate: ?string = null;\n\t#urlEdit: ?string = null;\n\t#urlPublic: ?string = null;\n\t#urlPartners: ?string = null;\n\t#urlImport: ?string = null;\n\t#urlExport: ?string = null;\n\n\t#previewImg: ?string = null;\n\t#title: ?string = null;\n\n\t#feedbackParams: ?{} = null;\n\n\t#buttonEdit: ?HTMLElement = null;\n\t#buttonPartners: ?HTMLElement = null;\n\t#buttonMarket: ?HTMLElement = null;\n\t#buttonWithdraw: ?HTMLElement = null;\n\t#buttonPublish: ?HTMLElement = null;\n\t#mainTemplate: ?HTMLElement = null;\n\t#secondaryTemplate: ?HTMLElement = null;\n\n\t#buttonMainSettings: ?HTMLElement = null;\n\t#buttonSecondarySettings: ?HTMLElement = null;\n\n\t#importPopup: ?Menu = null;\n\t#exportPopup: ?Menu = null;\n\t#popupShare: ?Popup = null;\n\t#popupWithdraw: ?Popup = null;\n\n\t#isPageExists: boolean = false;\n\t#isPublished: boolean = false;\n\t#canEdit: boolean = true;\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.titlePage = Loc.getMessage('INTRANET_SETTINGS_TITLE_PAGE_MAINPAGE');\n\t\tthis.descriptionPage = Loc.getMessage('INTRANET_SETTINGS_TITLE_DESCRIPTION_PAGE_MAINPAGE');\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn 'mainpage';\n\t}\n\n\tappendSections(contentNode: HTMLElement): void\n\t{\n\t\tconst options: MainpageOptions = this.getValue('main-page');\n\t\tthis.#urlCreate = options.urlCreate || null;\n\t\tthis.#urlEdit = options.urlEdit || null;\n\t\tthis.#urlPublic = options.urlPublic || null;\n\t\tthis.#urlPartners = options.urlPartners || null;\n\t\tthis.#urlImport = options.urlImport || null;\n\t\tthis.#urlExport = options.urlExport || null;\n\t\tthis.#previewImg = options.previewImg || null;\n\t\tthis.#feedbackParams = options.feedbackParams || null;\n\t\tthis.#isPageExists = options.isPageExists ?? false;\n\t\tthis.#isPublished = options.isPublished ?? false;\n\t\tthis.#title = options.title ?? null;\n\t\tthis.#canEdit = options.canEdit ?? false;\n\t\tconst section = new SettingsSection({\n\t\t\tparent: this,\n\t\t\tsection: {\n\t\t\t\tcanCollapse: false,\n\t\t\t\tisOpen: true,\n\t\t\t},\n\t\t});\n\n\t\tconst secondarySection = new SettingsSection({\n\t\t\tparent: this,\n\t\t\tsection: {\n\t\t\t\tcanCollapse: false,\n\t\t\t\tisOpen: true,\n\t\t\t},\n\t\t});\n\n\t\tconst content = Tag.render`<div>\t\t\n\t\t\t${this.#getMainTemplate()}\t\t\n\t\t</div>`;\n\t\tsection.getSectionView().append(\n\t\t\t(new Row({\n\t\t\t\tcontent: content,\n\t\t\t})).render())\n\t\t;\n\n\t\tif (this.#isPageExists)\n\t\t{\n\t\t\tconst secondaryContent = Tag.render`<div>\n\t\t\t\t${this.#getSecondaryTemplate()}\t\t\t\n\t\t\t</div>`;\n\t\t\tsecondarySection.getSectionView().append(\n\t\t\t\t(new Row({\n\t\t\t\t\tcontent: secondaryContent,\n\t\t\t\t})).render())\n\t\t\t;\n\t\t}\n\n\t\tthis.#bindButtonEvents();\n\t\tthis.#bindSliderCloseEvent();\n\n\t\tsecondarySection.renderTo(contentNode);\n\t\tsection.renderTo(contentNode);\n\t}\n\n\t#getMainTemplate(): HTMLElement\n\t{\n\t\tif (!this.#mainTemplate)\n\t\t{\n\t\t\tthis.#mainTemplate = Tag.render`\n\t\t\t\t<div class=\"intranet-settings__main-page-template\">\n\t\t\t\t\t<div class=\"intranet-settings__main-page-icon-box\">\n\t\t\t\t\t\t<div class=\"intranet-settings__main-page-icon\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"intranet-settings__main-page-content\">\n\t\t\t\t\t\t<ul class=\"intranet-settings__main-page-list\">\n\t\t\t\t\t\t\t<li class=\"intranet-settings__main-page-list-item\">\n\t\t\t\t\t\t\t\t<div class=\"ui-icon-set --check intranet-settings__main-page-list-icon\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-page-list-name\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_LIST_ITEM_1')}\n\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"intranet-settings__main-page-list-item\">\n\t\t\t\t\t\t\t\t<div class=\"ui-icon-set --check intranet-settings__main-page-list-icon\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-page-list-name\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_LIST_ITEM_2')}\n\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"intranet-settings__main-page-list-item\">\n\t\t\t\t\t\t\t\t<div class=\"ui-icon-set --check intranet-settings__main-page-list-icon\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-page-list-name\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_LIST_ITEM_3')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-page-button-box\">\n\t\t\t\t\t\t\t${this.#getButtonCreate()}\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-page-button-box-right\">\n\t\t\t\t\t\t\t\t${this.#getButtonPartners()}\n\t\t\t\t\t\t\t\t${this.#getButtonMainSettings()}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.#mainTemplate;\n\t}\n\n\t#getSecondaryTemplate(): HTMLElement\n\t{\n\t\tif (!this.#secondaryTemplate)\n\t\t{\n\t\t\tconst previewImg = this.#previewImg\n\t\t\t\t? Tag.render`<img \n\t\t\t\t\t\tsrc=\"${this.#previewImg}\"\n\t\t\t\t\t\tclass=\"intranet-settings__main-page-preview\" \n\t\t\t\t\t/>`\n\t\t\t\t: ''\n\t\t\t;\n\t\t\tthis.#secondaryTemplate = Tag.render`\n\t\t\t\t<div class=\"intranet-settings__main-page-template --secondary-template\">\n\t\t\t\t\t<div class=\"intranet-settings__main-page-preview-box\">\n\t\t\t\t\t\t${previewImg}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"intranet-settings__main-page-content\">\n\t\t\t\t\t\t<div class=\"intranet-settings__main-page-title\">\n\t\t\t\t\t\t\t${this.#title ?? ''}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-page-info-template\">\n\t\t\t\t\t\t\t${this.#isPublished ? this.getInfoSuccessTemplate() : this.getInfoTemplate()}\n\t\t\t\t\t\t</div>\t\t\t\t\t\n\t\t\t\t\t\t<div class=\"intranet-settings__main-page-button-box\">\n\t\t\t\t\t\t\t${this.#getButtonEdit()}\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-page-button-box-right\">\n\t\t\t\t\t\t\t\t${this.#isPublished ? this.#getButtonWithdraw() : this.#getButtonPublish()}\n\t\t\t\t\t\t\t\t${this.#getButtonSecondarySettings()}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\t\t\t\n\t\t\t`;\n\t\t}\n\n\t\treturn this.#secondaryTemplate;\n\t}\n\n\tgetInfoTemplate(): HTMLElement\n\t{\n\t\tthis.infoTemplate = Tag.render`\n\t\t\t<div class=\"intranet-settings__main-page-info\">\n\t\t\t\t<div class=\"intranet-settings__main-page-info-title\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_INFO_TITLE')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"intranet-settings__main-page-info-subtitle\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_INFO_SUBTITLE')}\n\t\t\t\t\t<div class=\"ui-icon-set --help intranet-settings__main-page-info-help\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(this.infoTemplate.querySelector('.intranet-settings__main-page-info-help'), 'mouseenter', (event) => {\n\t\t\tconst width = this.infoTemplate.querySelector('.intranet-settings__main-page-info-help').offsetWidth;\n\t\t\tthis.warningHintPopup = new Popup({\n\t\t\t\tangle: true,\n\t\t\t\tautoHide: true,\n\t\t\t\tcontent: Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_HINT_WARNING'),\n\t\t\t\tcacheable: false,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t\tbindElement: event.target,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: parseInt(width/2),\n\t\t\t\tbindOptions: {\n\t\t\t\t\tposition: 'top',\n\t\t\t\t},\n\t\t\t\tdarkMode: true,\n\t\t\t});\n\n\t\t\tthis.warningHintPopup.show();\n\t\t});\n\t\tEvent.bind(this.infoTemplate.querySelector('.intranet-settings__main-page-info-help'), 'mouseleave', () => {\n\t\t\tif (this.warningHintPopup)\n\t\t\t{\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.warningHintPopup.destroy();\n\t\t\t\t\tthis.warningHintPopup = null;\n\t\t\t\t}, 300);\n\t\t\t}\n\t\t});\n\n\t\treturn this.infoTemplate;\n\t}\n\n\tgetInfoSuccessTemplate(): HTMLElement\n\t{\n\t\tthis.infoSuccessTemplate = Tag.render`\n\t\t\t<div class=\"intranet-settings__main-page-info --success\">\n\t\t\t\t<div class=\"intranet-settings__main-page-info-title\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_INFO_SUCCESS_TITLE')}\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t<div class=\"intranet-settings__main-page-info-subtitle\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_INFO_SUCCESS_SUBTITLE')}\n\t\t\t\t\t<div class=\"ui-icon-set --help intranet-settings__main-page-info-help\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(this.infoSuccessTemplate.querySelector('.intranet-settings__main-page-info-help'), 'mouseenter', (event) => {\n\t\t\tconst width = this.infoSuccessTemplate.querySelector('.intranet-settings__main-page-info-help').offsetWidth;\n\t\t\tthis.successHintPopup = new Popup({\n\t\t\t\tangle: true,\n\t\t\t\tautoHide: true,\n\t\t\t\tcontent: Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_HINT_SUCCESS'),\n\t\t\t\tcacheable: false,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t\tbindElement: event.target,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: parseInt(width/2),\n\t\t\t\tbindOptions: {\n\t\t\t\t\tposition: 'top',\n\t\t\t\t},\n\t\t\t\tdarkMode: true,\n\t\t\t});\n\n\t\t\tthis.successHintPopup.show();\n\t\t});\n\t\tEvent.bind(this.infoSuccessTemplate.querySelector('.intranet-settings__main-page-info-help'), 'mouseleave', () => {\n\t\t\tif (this.successHintPopup)\n\t\t\t{\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.successHintPopup.destroy();\n\t\t\t\t\tthis.successHintPopup = null;\n\t\t\t\t}, 300);\n\t\t\t}\n\t\t});\n\n\t\treturn this.infoSuccessTemplate;\n\t}\n\n\t#getButtonMainSettings(): HTMLElement\n\t{\n\t\tif (!this.#buttonMainSettings)\n\t\t{\n\t\t\tthis.#buttonMainSettings = Tag.render`\n\t\t\t\t<button class=\"intranet-settings-btn-settings\">\n\t\t\t\t\t<div class=\"ui-icon-set --more\"></div>\n\t\t\t\t</button>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.#buttonMainSettings;\n\t}\n\n\t#getButtonSecondarySettings(): HTMLElement\n\t{\n\t\tif (!this.#buttonSecondarySettings)\n\t\t{\n\t\t\tthis.#buttonSecondarySettings = Tag.render`\n\t\t\t<button class=\"intranet-settings-btn-settings\">\n\t\t\t\t<div class=\"ui-icon-set --more\"></div>\n\t\t\t</button>`;\n\t\t}\n\n\t\treturn this.#buttonSecondarySettings;\n\t}\n\n\t#showImportPopup(): void\n\t{\n\t\tif (!this.#importPopup)\n\t\t{\n\t\t\tconst htmlContent = this.#canEdit\n\t\t\t\t? Tag.render`<span>${Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_IMPORT_POPUP')}</span>`\n\t\t\t\t: Tag.render`<span class=\"intranet-settings-mp-popup-item\">${Loc.getMessage(\n\t\t\t\t\t'INTRANET_SETTINGS_MAINPAGE_IMPORT_POPUP')} ${this.renderLockElement()}</span>`\n\t\t\t;\n\t\t\tthis.#importPopup = new Menu({\n\t\t\t\tangle: true,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t\tbindElement: this.#buttonMainSettings,\n\t\t\t\tclassName: this.#canEdit ? '' : '--disabled',\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'importPopup',\n\t\t\t\t\t\thtml: htmlContent,\n\t\t\t\t\t\tonclick: this.#showImportSlider.bind(this),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\toffsetLeft: 20,\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: () => {\n\t\t\t\t\t},\n\t\t\t\t\tonPopupShow: () => {\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tthis.#importPopup?.show();\n\t}\n\n\t#showExportPopup(): void\n\t{\n\t\tif (!this.#exportPopup)\n\t\t{\n\t\t\tconst htmlContent = this.#canEdit\n\t\t\t\t? Tag.render`<span>${Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_EXPORT_POPUP')}</span>`\n\t\t\t\t: Tag.render`<span class=\"intranet-settings-mp-popup-item --disabled\">${Loc.getMessage(\n\t\t\t\t\t'INTRANET_SETTINGS_MAINPAGE_EXPORT_POPUP')} ${this.renderLockElement()}</span>`\n\t\t\t;\n\t\t\tthis.#exportPopup = new Menu({\n\t\t\t\tangle: true,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t\tbindElement: this.#buttonSecondarySettings,\n\t\t\t\tclassName: this.#canEdit ? '' : '--disabled',\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'exportPopup',\n\t\t\t\t\t\thtml: htmlContent,\n\t\t\t\t\t\tonclick: this.#showExportSlider.bind(this),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\toffsetLeft: 20,\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: () => {\n\t\t\t\t\t},\n\t\t\t\t\tonPopupShow: () => {\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tthis.#exportPopup?.show();\n\t}\n\n\t#showImportSlider()\n\t{\n\t\tif (!this.#canEdit)\n\t\t{\n\t\t\tBX.UI.InfoHelper.show(\"limit_office_vibe\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (typeof BX.SidePanel === 'undefined')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (typeof BX.SidePanel!== 'undefined' && this.#urlImport)\n\t\t{\n\t\t\tconst onOK = () => {\n\t\t\t\tBX.SidePanel.Instance.open(\n\t\t\t\t\tthis.#urlImport,\n\t\t\t\t\t{\n\t\t\t\t\t\twidth: 491,\n\t\t\t\t\t\tallowChangeHistory: false,\n\t\t\t\t\t\tcacheable: false,\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\trightBoundary: 0,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tif (!this.#isPageExists)\n\t\t\t{\n\t\t\t\tonOK();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tBX.Runtime.loadExtension('ui.dialogs.messagebox').then(() =>\n\t\t\t{\n\t\t\t\tconst messageBox = new BX.UI.Dialogs.MessageBox({\n\t\t\t\t\tmessage: Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_IMPORT_POPUP_MESSAGEBOX_MESSAGE'),\n\t\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_IMPORT_POPUP_MESSAGEBOX_TITLE'),\n\t\t\t\t\tbuttons: BX.UI.Dialogs.MessageBoxButtons.OK_CANCEL,\n\t\t\t\t\tokCaption: Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_IMPORT_POPUP_MESSAGEBOX_OK_BUTTON'),\n\t\t\t\t\tcancelCaption: Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_IMPORT_POPUP_MESSAGEBOX_CANCEL_BUTTON'),\n\t\t\t\t\tonOk: () => {\n\t\t\t\t\t\tonOK();\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},\n\t\t\t\t\tonCancel: () => {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tmessageBox.show();\n\t\t\t\tif (messageBox.popupWindow && messageBox.popupWindow.popupContainer)\n\t\t\t\t{\n\t\t\t\t\tmessageBox.popupWindow.popupContainer.classList.add('intranet-settings__main-page-popup');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t#showExportSlider()\n\t{\n\t\tif (!this.#canEdit)\n\t\t{\n\t\t\tBX.UI.InfoHelper.show(\"limit_office_vibe\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (typeof BX.SidePanel === 'undefined')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (\n\t\t\ttypeof BX.SidePanel!== 'undefined'\n\t\t\t&& this.#urlExport\n\t\t)\n\t\t{\n\t\t\tBX.SidePanel.Instance.open(\n\t\t\t\tthis.#urlExport,\n\t\t\t\t{\n\t\t\t\t\twidth: 491,\n\t\t\t\t\tallowChangeHistory: false,\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\trightBoundary: 0,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\t}\n\n\t#showSharePopup(): void\n\t{\n\t\tif (!this.#popupShare)\n\t\t{\n\t\t\tthis.#popupShare = new Popup({\n\t\t\t\ttitleBar: Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_SHARE_POPUP_TITLE_MSGVER_1'),\n\t\t\t\tcontent: Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_SHARE_POPUP_CONTENT'),\n\t\t\t\twidth: 350,\n\t\t\t\tcloseIcon: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t\tbuttons: [\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\ttext: Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_SHARE_POPUP_BTN_CONFIRM'),\n\t\t\t\t\t\tcolor: Button.Color.PRIMARY,\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tconst newTemplate = this.getInfoSuccessTemplate();\n\t\t\t\t\t\t\tconst wrapper = this.#secondaryTemplate.querySelector('.intranet-settings__main-page-info-template');\n\t\t\t\t\t\t\tconst innerWrapper = wrapper.querySelector('.intranet-settings__main-page-info:not(.--success)');\n\n\t\t\t\t\t\t\tDom.replace(innerWrapper, newTemplate);\n\t\t\t\t\t\t\tAjax.runAction('intranet.mainpage.publish').then(() => {\n\t\t\t\t\t\t\t\tthis.emit('publish');\n\t\t\t\t\t\t\t\tif (this.#urlPublic)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.#isPublished = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tthis.#popupShare.close();\n\t\t\t\t\t\t\tBX.UI.Analytics.sendData({\n\t\t\t\t\t\t\t\ttool: 'landing',\n\t\t\t\t\t\t\t\tcategory: 'vibe',\n\t\t\t\t\t\t\t\tevent: 'publish_page',\n\t\t\t\t\t\t\t\tc_sub_section: 'from_settings',\n\t\t\t\t\t\t\t\tstatus: 'success',\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\ttext: Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_POPUP_BTN_CANCEL'),\n\t\t\t\t\t\tcolor: Button.Color.LIGHT_BORDER,\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis.#popupShare.close();\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t],\n\t\t\t\tevents: {\n\t\t\t\t\tonClose: () => {\n\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tthis.#popupShare?.show();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#popupShare?.show();\n\t\t}\n\t}\n\n\t#showWithdrawPopup(): void\n\t{\n\t\tif (!this.#popupWithdraw)\n\t\t{\n\t\t\tconst title = this.#canEdit\n\t\t\t\t? Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_WITHDRAW_POPUP_TITLE')\n\t\t\t\t: Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_WITHDRAW_POPUP_TITLE_FREE')\n\t\t\t;\n\t\t\tconst content = this.#canEdit\n\t\t\t\t? Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_WITHDRAW_POPUP_CONTENT')\n\t\t\t\t: Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_WITHDRAW_POPUP_CONTENT_FREE')\n\t\t\t;\n\t\t\tconst okText = this.#canEdit\n\t\t\t\t? Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_WITHDRAW_POPUP_BTN_CONFIRM')\n\t\t\t\t: Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_WITHDRAW_POPUP_BTN_CONFIRM_FREE')\n\t\t\t;\n\n\t\t\tthis.#popupWithdraw = new Popup({\n\t\t\t\ttitleBar: title,\n\t\t\t\tcontent: content,\n\t\t\t\twidth: 350,\n\t\t\t\tcloseIcon: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t\tbuttons: [\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\ttext: okText,\n\t\t\t\t\t\tcolor: Button.Color.DANGER_DARK,\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tconst newTemplate = this.getInfoTemplate();\n\t\t\t\t\t\t\tconst wrapper = this.#secondaryTemplate.querySelector('.intranet-settings__main-page-info-template');\n\t\t\t\t\t\t\tconst innerWrapper = wrapper.querySelector('.intranet-settings__main-page-info');\n\n\t\t\t\t\t\t\tDom.replace(innerWrapper, newTemplate);\n\t\t\t\t\t\t\tAjax.runAction('intranet.mainpage.withdraw').then(() => {\n\t\t\t\t\t\t\t\tthis.emit('withdraw');\n\t\t\t\t\t\t\t\tthis.#isPublished = false;\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tthis.#popupWithdraw.close();\n\t\t\t\t\t\t\tBX.UI.Analytics.sendData({\n\t\t\t\t\t\t\t\ttool: 'landing',\n\t\t\t\t\t\t\t\tcategory: 'vibe',\n\t\t\t\t\t\t\t\tevent: 'unpublish_page',\n\t\t\t\t\t\t\t\tc_sub_section: 'from_settings',\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\ttext: Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_POPUP_BTN_CANCEL'),\n\t\t\t\t\t\tcolor: Button.Color.LIGHT_BORDER,\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis.#popupWithdraw.close();\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t],\n\t\t\t\tevents: {\n\t\t\t\t\tonClose: () => {\n\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tthis.#popupWithdraw?.show();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#popupWithdraw?.show();\n\t\t}\n\t}\n\n\t#getButtonEdit(): ?HTMLElement\n\t{\n\t\tif (!this.#urlEdit)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.#buttonEdit)\n\t\t{\n\t\t\tconst buttonEdit = Tag.render`\t\t\t\n\t\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-round ui-btn-no-caps --light-blue\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_BUTTON_EDIT')}\n\t\t\t\t</button>\n\t\t\t`;\n\t\t\tconst buttonEditLock = Tag.render`\n\t\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-round ui-btn-no-caps --light-blue --disabled\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_BUTTON_EDIT')}\n\t\t\t\t\t${this.renderLockElement()}\n\t\t\t\t</button>\n\t\t\t`;\n\t\t\tthis.#buttonEdit = this.#canEdit ? buttonEdit : buttonEditLock;\n\t\t}\n\n\t\treturn this.#buttonEdit;\n\t}\n\n\t#getButtonPublish(): HTMLElement\n\t{\n\t\tif (!this.#buttonPublish)\n\t\t{\n\t\t\tconst renderNode = Tag.render`\n\t\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-round ui-btn-no-caps\n\t\t\t\t\t\t${this.#isPageExists ? 'ui-btn-primary' : '--light-blue'}\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_BUTTON_PUBLIC')}\n\t\t\t\t</button>\n\t\t\t`;\n\t\t\tconst renderNodeLock = Tag.render`\n\t\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-round ui-btn-no-caps --disabled\n\t\t\t\t\t\t${this.#isPageExists ? 'ui-btn-primary' : '--light-blue'}\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_BUTTON_PUBLIC')}\n\t\t\t\t\t${this.renderLockElement()}\n\t\t\t\t</button>\n\t\t\t`;\n\t\t\tthis.#buttonPublish = this.#canEdit ? renderNode : renderNodeLock;\n\t\t}\n\n\t\treturn this.#buttonPublish;\n\t}\n\n\t#getButtonWithdraw(): HTMLElement\n\t{\n\t\tif (!this.#buttonWithdraw)\n\t\t{\n\t\t\tthis.#buttonWithdraw = Tag.render`\n\t\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-round ui-btn-no-caps\n\t\t\t\t\t\t${this.#isPageExists ? 'ui-btn-primary' : '--light-blue'}\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_BUTTON_UNPUBLIC')}\n\t\t\t\t</button>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.#buttonWithdraw;\n\t}\n\n\t#getButtonPartners(): ?HTMLElement\n\t{\n\t\tif (!this.#urlPartners)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.#buttonPartners)\n\t\t{\n\t\t\tthis.#buttonPartners = Tag.render`\n\t\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-round ui-btn-no-caps --light-gray\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_BUTTON_PARTNERS')}\n\t\t\t\t</button>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.#buttonPartners;\n\t}\n\n\t#getButtonCreate(): ?HTMLElement\n\t{\n\t\tif (!this.#urlCreate)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.#buttonMarket)\n\t\t{\n\t\t\tconst buttonColor = !this.#isPageExists ? 'ui-btn-primary' : '--light-blue';\n\t\t\tconst renderNode = Tag.render`\t\t\t\n\t\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-round ui-btn-no-caps ${buttonColor}\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_BUTTON_MARKET')}\n\t\t\t\t</button>\n\t\t\t`;\n\t\t\tconst renderNodeLock = Tag.render`\n\t\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-round ui-btn-no-caps ${buttonColor} --disabled\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_BUTTON_MARKET')}\n\t\t\t\t\t${this.renderLockElement()}\n\t\t\t\t</button>\n\t\t\t`;\n\t\t\tthis.#buttonMarket = this.#canEdit ? renderNode : renderNodeLock;\n\t\t}\n\n\t\treturn this.#buttonMarket;\n\t}\n\n\t#bindButtonEvents()\n\t{\n\t\tif (typeof BX.SidePanel === 'undefined')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tEvent.bind(this.#getButtonMainSettings(), 'click', this.#showImportPopup.bind(this));\n\t\tEvent.bind(this.#getButtonSecondarySettings(), 'click', this.#showExportPopup.bind(this));\n\n\t\tif (this.#getButtonCreate())\n\t\t{\n\t\t\tEvent.bind(this.#getButtonCreate(), 'click', () => {\n\t\t\t\tif (this.#canEdit)\n\t\t\t\t{\n\t\t\t\t\tBX.SidePanel.Instance.open(this.#urlCreate);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tBX.UI.InfoHelper.show(\"limit_office_vibe\");\n\t\t\t\t}\n\n\t\t\t\tBX.UI.Analytics.sendData({\n\t\t\t\t\ttool: 'landing',\n\t\t\t\t\tcategory: 'vibe',\n\t\t\t\t\tevent: 'open_market',\n\t\t\t\t\tstatus: this.#canEdit ? 'success' : 'error_limit',\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tif (this.#getButtonEdit())\n\t\t{\n\t\t\tEvent.bind(this.#getButtonEdit(), 'click', () => {\n\t\t\t\tif (this.#canEdit)\n\t\t\t\t{\n\t\t\t\t\tBX.SidePanel.Instance.open(\n\t\t\t\t\t\tthis.#urlEdit,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcustomLeftBoundary: 66,\n\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\tonCloseComplete: () => {\n\t\t\t\t\t\t\t\t\tif (this.#urlPublic)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\twindow.top.location = this.#urlPublic;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tBX.UI.InfoHelper.show(\"limit_office_vibe\");\n\t\t\t\t}\n\t\t\t\tBX.UI.Analytics.sendData({\n\t\t\t\t\ttool: 'landing',\n\t\t\t\t\tcategory: 'vibe',\n\t\t\t\t\tevent: 'open_editor',\n\t\t\t\t\tstatus: this.#canEdit ? 'success' : 'error_limit',\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tif (this.#getButtonPartners())\n\t\t{\n\t\t\tEvent.bind(this.#getButtonPartners(), 'click', () => {\n\t\t\t\tif (!this.#feedbackParams)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// todo: need analitycs?\n\n\t\t\t\tRuntime.loadExtension('ui.feedback.form').then(() => {\n\t\t\t\t\tthis.#feedbackParams.title = Loc.getMessage('INTRANET_SETTINGS_MAINPAGE_BUTTON_PARTNERS');\n\t\t\t\t\tBX.UI.Feedback.Form.open(this.#feedbackParams);\n\t\t\t\t});\n\t\t\t});\n\n\t\t}\n\n\t\tthis.subscribe('publish', () => {\n\t\t\tDom.replace(this.#getButtonPublish(), this.#getButtonWithdraw());\n\t\t});\n\t\tthis.subscribe('withdraw', () => {\n\t\t\tDom.replace(this.#getButtonWithdraw(), this.#getButtonPublish());\n\t\t});\n\t\tEvent.bind(this.#getButtonPublish(), 'click', () => {\n\t\t\tif (!this.#canEdit)\n\t\t\t{\n\t\t\t\tBX.UI.InfoHelper.show(\"limit_office_vibe\");\n\t\t\t\tBX.UI.Analytics.sendData({\n\t\t\t\t\ttool: 'landing',\n\t\t\t\t\tcategory: 'vibe',\n\t\t\t\t\tevent: 'publish_page',\n\t\t\t\t\tc_sub_section: 'from_settings',\n\t\t\t\t\tstatus: 'error_limit',\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.#showSharePopup()\n\t\t});\n\t\tEvent.bind(this.#getButtonWithdraw(), 'click', this.#showWithdrawPopup.bind(this));\n\t}\n\n\t#bindSliderCloseEvent()\n\t{\n\t\tconst isPublishedBefore = this.#isPublished;\n\n\t\tEventEmitter.subscribe(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t'SidePanel.Slider:onClose',\n\t\t\t() => {\n\t\t\t\tif (this.#isPublished !== isPublishedBefore)\n\t\t\t\t{\n\t\t\t\t\tconst location = this.#isPublished\n\t\t\t\t\t\t? this.#urlPublic\n\t\t\t\t\t\t: '/'\n\t\t\t\t\t;\n\t\t\t\t\twindow.top.location = location;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\trenderLockElement(): HTMLElement\n\t{\n\t\treturn Tag.render`<span class=\"intranet-settings-mp-icon ui-icon-set --lock\"></span>`;\n\t}\n}\n","import { BaseSettingsPage } from 'ui.form-elements.field';\nimport { Dom, Runtime, Type } from 'main.core';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\n\nexport class ExternalTemporaryPage extends BaseSettingsPage\n{\n\t#type: ?string;\n\t#extensions: string[] = [];\n\n\tconstructor(type: string, extensions: string[])\n\t{\n\t\tsuper();\n\t\tthis.#type = type;\n\t\tthis.#extensions = extensions;\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn this.#type;\n\t}\n\n\tonSuccessDataFetched(response)\n\t{\n\t\tRuntime\n\t\t\t.loadExtension(this.#extensions)\n\t\t\t.then((exports) => {\n\t\t\t\tlet externalPage;\n\t\t\t\tlet externalPageHasBeenFound = Object.values(exports)\n\t\t\t\t\t.some((externalPageClassOrInstance) => {\n\t\t\t\t\t\tif (Type.isObjectLike(externalPageClassOrInstance))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlet pageExemplar = null;\n\t\t\t\t\t\t\tif (externalPageClassOrInstance.prototype instanceof BaseSettingsPage)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpageExemplar = new externalPageClassOrInstance();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (externalPageClassOrInstance instanceof BaseSettingsPage)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpageExemplar = externalPageClassOrInstance;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (pageExemplar instanceof BaseSettingsPage)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\texternalPage = pageExemplar;\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t})\n\t\t\t\t;\n\t\t\t\tif (externalPageHasBeenFound === false)\n\t\t\t\t{\n\t\t\t\t\tconst event = new BaseEvent();\n\t\t\t\t\texternalPageHasBeenFound = EventEmitter.emit(\n\t\t\t\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\t\t\t\t'BX.Intranet.Settings:onExternalPageLoaded:' + this.getType(),\n\t\t\t\t\t\t\tevent\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.some((pageExemplar: BaseSettingsPage) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (pageExemplar instanceof BaseSettingsPage)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\texternalPage = pageExemplar;\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t})\n\t\t\t\t\t;\n\t\t\t\t}\n\n\t\t\t\tif (externalPage instanceof BaseSettingsPage)\n\t\t\t\t{\n\t\t\t\t\tthis.getParentElement().registerPage(externalPage);\n\t\t\t\t\texternalPage.setData(response.data);\n\t\t\t\t\tthis.getParentElement().removeChild(this);\n\n\t\t\t\t\tif (Dom.isShown(this.getPage()))\n\t\t\t\t\t{\n\t\t\t\t\t\texternalPage.getParentElement().show(externalPage.getType());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.onFailDataFetched('The external page was not found.');\n\t\t\t\t}\n\n\t\t\t}, this.onFailDataFetched.bind(this))\n\t\t;\n\t}\n}\n","import {ajax} from 'main.core';\nimport type {BaseSettingsPage} from \"./pages/base-settings-page\";\n\nexport class PageManager\n{\n\t#pages: Array<BaseSettingsPage>\n\n\n\tconstructor(pages: Array<BaseSettingsPage>)\n\t{\n\t\tthis.#pages = pages;\n\t}\n\n\tfetchPage(page: BaseSettingsPage): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst pageIsFound = this.#pages.some((savedPage: BaseSettingsPage) => {\n\t\t\t\tif (page.getType() === savedPage.getType())\n\t\t\t\t{\n\t\t\t\t\tajax.runComponentAction(\n\t\t\t\t\t\t'bitrix:intranet.settings',\n\t\t\t\t\t\t'get',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmode: 'class',\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\ttype: page.getType(),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t).then(resolve, reject);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\tif (pageIsFound !== true)\n\t\t\t{\n\t\t\t\treturn reject({error: 'The page was not found in pageManager'});\n\t\t\t}\n\t\t});\n\t}\n\n\tcollectData()\n\t{\n\t\tconst data = {};\n\t\tthis.#pages.forEach((page: BaseSettingsPage) => {\n\t\t\tif (page.hasData())\n\t\t\t{\n\t\t\t\tdata[page.getType()] = this.constructor.getFormData(page.getFormNode());\n\t\t\t}\n\t\t});\n\n\t\treturn data;\n\t}\n\n\tstatic getFormData(formNode: HTMLElement): ?Object\n\t{\n\t\treturn BX.ajax.prepareForm(formNode).data;\n\t}\n}","export class DataSource\n{\n\tfetch(query: string): Promise\n\t{\n\t\treturn new Promise();\n\t}\n}","import { Loc } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { DataSource } from './data-source';\n\nexport class Searcher\n{\n\tstatic STATE_READY = 'ready';\n\tstatic STATE_WAIT = 'wait';\n\tstatic STATE_NOT_FOUND = 'not_found';\n\n\t#query: string;\n\t#minSymbol: number;\n\t#dataSource: DataSource;\n\t#result: Array;\n\t#state: string; // ready | wait;\n\n\tconstructor(dataSource: DataSource, minSymbol: number = 3)\n\t{\n\t\tif (!(dataSource instanceof DataSource))\n\t\t{\n\t\t\tthrow new Error('Unexpected type, expect: DataSource');\n\t\t}\n\t\tthis.#dataSource = dataSource;\n\t\tthis.#minSymbol = minSymbol;\n\t\tthis.#result = [];\n\t\tthis.#state = 'ready';\n\t}\n\n\tfind(query: string)\n\t{\n\t\tif (query.length < this.#minSymbol)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.#query = query;\n\t\tthis.changeState(Searcher.STATE_WAIT);\n\t\tthis.#dataSource\n\t\t\t.fetch(this.#query)\n\t\t\t.then(\n\t\t\t\tthis.resolve.bind(this),\n\t\t\t\tthis.reject.bind(this),\n\t\t\t);\n\t}\n\n\tchangeState(state: string)\n\t{\n\t\tif (this.#state === state)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#state = state;\n\t\tEventEmitter.emit(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t'BX.Intranet.Settings:searchChangeState', {\n\t\t\t\tstate: this.#state,\n\t\t\t},\n\t\t);\n\n\t}\n\n\tgetMinSymbol(): number\n\t{\n\t\treturn this.#minSymbol;\n\t}\n\n\tresolve(response)\n\t{\n\t\tthis.#result = response.data;\n\n\t\tthis.changeState(this.#result.length > 0 ? Searcher.STATE_READY : Searcher.STATE_NOT_FOUND);\n\t}\n\n\treject(response)\n\t{\n\t\tthis.#result = [];\n\n\t\tthis.changeState(Searcher.STATE_READY);\n\t}\n\n\tgetResult(): Array\n\t{\n\t\treturn this.#result;\n\t}\n\n\tgetOthers()\n\t{\n\t\treturn [\n\t\t\t{\n\t\t\t\tlink: '/stream/',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_TITLE_TOOL_TEAMWORK'),\n\t\t\t},\n\t\t\t{\n\t\t\t\tlink: '/tasks/config/permissions/',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_TITLE_TOOL_TASKS'),\n\t\t\t},\n\t\t\t{\n\t\t\t\tlink: '/crm/configs/',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_TITLE_TOOL_CRM'),\n\t\t\t},\n\t\t\t{\n\t\t\t\tlink: '/shop/documents/?inventoryManagementSource=inventory',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_TITLE_TOOL_WAREHOUSE'),\n\t\t\t},\n\t\t\t{\n\t\t\t\tlink: '/sites/',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_TITLE_TOOL_SITES'),\n\t\t\t},\n\t\t\t{\n\t\t\t\tlink: '/company/vis_structure.php',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_TITLE_TOOL_COMPANY'),\n\t\t\t},\n\t\t];\n\t}\n}","import { EventEmitter } from 'main.core.events';\nimport { Popup } from 'main.popup';\nimport { Event, Tag, Dom, Loc, Type } from 'main.core';\nimport { Searcher } from './searcher';\nimport { Loader } from 'main.loader';\n\nexport type renderOptions = {\n\tsearcher: Searcher,\n\tinputNode: HTMLElement,\n\ticonContainer: HTMLElement,\n\ttimeout: number\n}\n\nexport class Renderer\n{\n\t#searcher: Searcher;\n\t#inputNode: HTMLElement;\n\t#iconContainer: HTMLElement;\n\t#popup: Popup;\n\t#timeoutId: number;\n\t#timeout: number;\n\t#nav: SearchNavigation;\n\n\tstatic EXTERNAL_LINK = 'EXTERNAL_LINKS';\n\n\tconstructor(options: renderOptions)\n\t{\n\t\tthis.#searcher = options.searcher;\n\t\tthis.#inputNode = options.inputNode;\n\t\tthis.#iconContainer = options.iconContainer;\n\t\tthis.#timeout = options.timeout;\n\t\tthis.#nav = new SearchNavigation();\n\n\t\tthis.#popup = new Popup('settings-search-popup', this.#inputNode, {\n\t\t\tcloseByEsc: true,\n\t\t\tangle: false,\n\t\t\toverlay: false,\n\t\t\twidth: 332,//470,//this.#inputNode.offsetWidth,\n\t\t\toffsetTop: 4,\n\t\t\tbackground: '#fff',\n\t\t\tcontentBackground: '#fff',\n\t\t\tcontentPadding: 0,\n\t\t\tautoHide: true,\n\t\t\tborderRadius: 6,\n\t\t\tautoHideHandler: (event) => {\n\t\t\t\treturn event.target !== this.#inputNode;\n\t\t\t},\n\n\t\t});\n\t\tthis.#popup.setContent(this.renderContent());\n\n\t\tEvent.bind(this.#inputNode, 'focus', () => {\n\t\t\tif (!this.#popup.isShown())\n\t\t\t{\n\t\t\t\tthis.#popup.show();\n\t\t\t}\n\t\t});\n\n\t\tEventEmitter.subscribe('BX.Intranet.Settings:searchChangeState', (event) => {\n\t\t\tconst {state} = event.data;\n\t\t\tthis.#nav.clean();\n\t\t\tthis.#popup.setContent(this.renderContent(state));\n\t\t});\n\n\t\tEvent.bind(this.#iconContainer.querySelector('#intranet-settings-icon-delete'), 'click', () => {\n\t\t\tDom.removeClass(this.#iconContainer, 'main-ui-show');\n\t\t\tthis.#inputNode.value = '';\n\t\t})\n\n\t\tEvent.bind(this.#inputNode, 'keyup', (event) => {\n\t\t\tif (\n\t\t\t\tevent.keyCode === 37\n\t\t\t\t|| event.keyCode === 39\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (event.keyCode === 13) //enter\n\t\t\t{\n\t\t\t\tthis.#nav.current().dispatchEvent(new MouseEvent('click'));\n\t\t\t\tthis.#nav.unHighlightAll();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (event.keyCode === 38) //up\n\t\t\t{\n\t\t\t\tthis.#nav.prev().highlight();\n\t\t\t\tif (!Type.isNil(this.#nav.current()))\n\t\t\t\t{\n\t\t\t\t\tthis.updateScroll(this.#nav.current());\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (event.keyCode === 40) //down\n\t\t\t{\n\t\t\t\tthis.#nav.next().highlight();\n\n\t\t\t\tif (!Type.isNil(this.#nav.current()))\n\t\t\t\t{\n\t\t\t\t\tthis.updateScroll(this.#nav.current());\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.getQuery().length > 0)\n\t\t\t{\n\t\t\t\tDom.addClass(this.#iconContainer, 'main-ui-show');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(this.#iconContainer, 'main-ui-show');\n\t\t\t}\n\n\t\t\tif (!this.#popup.isShown() && this.getQuery().length > 0)\n\t\t\t{\n\t\t\t\tthis.#popup.show();\n\t\t\t}\n\t\t\tthis.find();\n\t\t});\n\t}\n\n\tupdateScroll(element): void\n\t{\n\t\tconst rect = element.getBoundingClientRect();\n\t\tconst container = this.#popup.getContentContainer().firstElementChild;\n\t\tconst relTop = rect.top - container.getBoundingClientRect().top;\n\t\tconst relBot = rect.bottom - container.getBoundingClientRect().bottom;\n\t\tconst padding = 10;\n\t\tif (relTop < 0 && relBot <= 0) //invisible top\n\t\t{\n\t\t\tcontainer.scrollTo(0, relTop + container.scrollTop - padding);\n\t\t}\n\t\telse if (relTop >= 0 && relBot > 0) //invisible bottom\n\t\t{\n\t\t\tcontainer.scrollTo(0, relBot + container.scrollTop + padding);\n\t\t}\n\t}\n\n\trenderWait(): HTMLElement\n\t{\n\t\tconst loaderContainer = Tag.render`<span class=\"title-search-waiter-img\"></span>`;\n\t\tconst loader = new Loader({\n\t\t\ttarget: loaderContainer,\n\t\t\tsize: 20,\n\t\t\tmode: 'inline',\n\t\t});\n\t\tloader.show();\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"title-search-waiter\">\n\t\t\t\t${loaderContainer}\n\t\t\t\t<span class=\"title-search-waiter-text\">${Loc.getMessage('INTRANET_SETTINGS_TITLE_SEARCHING')}</span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tfind(): void\n\t{\n\t\tclearTimeout(this.#timeoutId);\n\t\tthis.#timeoutId = setTimeout(() => {\n\t\t\tthis.#searcher.find(this.getQuery());\n\t\t}, this.#timeout);\n\n\t}\n\n\tgetQuery(): string\n\t{\n\t\treturn BX.util.trim(this.#inputNode.value);\n\t}\n\n\tcreateLinkOption(option): HTMLElement\n\t{\n\t\tconst link =  Dom.create('a', {\n\t\t\tprops: {\n\t\t\t\tclassName: 'search-title-top-item-link',\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tmouseenter: (event) => {\n\t\t\t\t\tthis.#nav.unHighlightAll();\n\t\t\t\t\tthis.#nav.cursorTo(event.target);\n\t\t\t\t\tSearchNavigation.highlight(event.target);\n\t\t\t\t},\n\t\t\t\tmouseleave: (event) => {\n\t\t\t\t\tSearchNavigation.unHighlight(event.target);\n\t\t\t\t}\n\t\t\t},\n\t\t\tattrs: {\n\t\t\t\ttitle: option.title,\n\t\t\t\thref: Type.isStringFilled(option.url) ? option.url : '#',\n\t\t\t\ttarget: '_blank'\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tTag.render`<span class=\"search-title-top-item-text\"><span>${option.title}</span></span>`,\n\t\t\t],\n\t\t});\n\t\tthis.#nav.add(link);\n\t\treturn link;\n\t}\n\n\tcreateBtnOption(page: string, option): HTMLElement\n\t{\n\t\tconst link = Dom.create('a', {\n\t\t\tprops: {\n\t\t\t\tclassName: 'search-title-top-item-link',\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tclick: (event) => {\n\t\t\t\t\tEventEmitter.emit(\n\t\t\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\t\t\t'BX.Intranet.SettingsNavigation:onMove',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpage: page,\n\t\t\t\t\t\t\tfieldName: option.code,\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tthis.#inputNode.blur();\n\t\t\t\t\tthis.#popup.close();\n\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t},\n\t\t\t\tmouseenter: (event) => {\n\t\t\t\t\tthis.#nav.unHighlightAll();\n\t\t\t\t\tthis.#nav.cursorTo(event.target);\n\t\t\t\t\tSearchNavigation.highlight(event.target);\n\t\t\t\t},\n\t\t\t\tmouseleave: (event) => {\n\t\t\t\t\tSearchNavigation.unHighlight(event.target);\n\t\t\t\t}\n\t\t\t},\n\t\t\tattrs: {\n\t\t\t\ttitle: option.title,\n\t\t\t\thref: \"#\",\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tTag.render`<span class=\"search-title-top-item-text\"><span>${option.title}</span></span>`,\n\t\t\t],\n\t\t});\n\t\tthis.#nav.add(link);\n\t\treturn Tag.render`<div class=\"search-title-top-item search-title-top-item-js\">${link}</div>`;\n\t}\n\n\trenderOption(page: string, option): HTMLElement\n\t{\n\t\tlet link;\n\t\tif (page === Renderer.EXTERNAL_LINK)\n\t\t{\n\t\t\tlink = this.createLinkOption(option);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlink = this.createBtnOption(page, option)\n\t\t}\n\n\t\treturn Tag.render`<div class=\"search-title-top-item search-title-top-item-js\">${link}</div>`;\n\t}\n\n\trenderGroup(group): HTMLElement\n\t{\n\t\tconst optionsContainer = Tag.render`<div class=\"search-title-top-list search-title-top-list-js\"></div>`;\n\t\tgroup.options.forEach((option) => {\n\t\t\tDom.append(this.renderOption(group.page, option), optionsContainer);\n\t\t});\n\t\treturn Tag.render`\n\t\t\t<div class=\"search-title-top-block search-title-top-block-sonetgroups\">\n\t\t\t\t<div class=\"search-title-top-subtitle\">\n\t\t\t\t\t<div class=\"search-title-top-subtitle-text\">${group.title}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"search-title-top-list-wrap\">\n\t\t\t\t\t${optionsContainer}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderContent(state: 'wait'|'ready'|'not_found' = 'ready'): HTMLElement\n\t{\n\t\tconst optionsContainer = Tag.render`<div class=\"search-title-top-result\"></div>`;\n\n\t\tswitch (state)\n\t\t{\n\t\t\tcase 'ready':\n\t\t\t\tDom.append(this.renderSearchResult(this.#searcher.getResult()), optionsContainer);\n\t\t\t\tbreak;\n\t\t\tcase 'wait':\n\t\t\t\tDom.append(this.renderWait(), optionsContainer);\n\t\t\t\tbreak;\n\t\t\tcase 'not_found':\n\t\t\t\tDom.append(this.renderNotFound(), optionsContainer);\n\t\t\t\tbreak;\n\t\t}\n\t\tDom.append(this.renderOthers(this.#searcher.getOthers()), optionsContainer);\n\n\t\treturn optionsContainer;\n\t}\n\n\trenderNotFound(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"title-search-waiter\">\n\t\t\t\t<span class=\"title-search-waiter-text\">${Loc.getMessage('INTRANET_SETTINGS_SEARCH_NOT_FOUND')}</span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderSearchResult(result): HTMLElement\n\t{\n\t\tconst container = Tag.render`<div class=\"search-title-content-result\"></div>`;\n\t\tresult.forEach((item) => {\n\t\t\tDom.append(this.renderGroup(item), container);\n\t\t});\n\n\t\treturn container;\n\t}\n\n\trenderOthers(links): HTMLElement\n\t{\n\t\tconst wraper = Tag.render`<div class=\"search-title-top-list search-title-top-list-js\"></div>`;\n\t\tconst other = Tag.render`\n\t\t<div class=\"search-title-top-block search-title-top-block-tools\">\n\t\t\t<div class=\"search-title-top-subtitle\">\n\t\t\t\t<div class=\"search-title-top-subtitle-text\">${Loc.getMessage('INTRANET_SETTINGS_TITLE_SEARCH_IN')}</div>\n\t\t\t</div>\n\t\t\t<div class=\"search-title-top-list-height-wrap\">\n\t\t\t\t\t<div class=\"search-title-top-list-wrap\">${wraper}</div>\n\t\t\t\t</div>\n\t\t</div>\n\t\t`;\n\n\t\tlinks.forEach((link) => {\n\t\t\tDom.append(this.renderOtherLink(link), wraper);\n\t\t});\n\n\t\treturn other\n\t}\n\n\trenderOtherLink(link): HTMLElement\n\t{\n\t\tconst linkTag = Dom.create('a', {\n\t\t\tprops: {\n\t\t\t\tclassName: 'search-title-top-item-link',\n\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tmouseenter: (event) => {\n\t\t\t\t\tthis.#nav.unHighlightAll();\n\t\t\t\t\tthis.#nav.cursorTo(event.target);\n\t\t\t\t\tSearchNavigation.highlight(event.target);\n\t\t\t\t},\n\t\t\t\tmouseleave: (event) => {\n\t\t\t\t\tSearchNavigation.unHighlight(event.target);\n\t\t\t\t}\n\t\t\t},\n\t\t\tattrs: {\n\t\t\t\ttitle: link.title,\n\t\t\t\thref: link.link,\n\t\t\t\ttarget: 'blank_'\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tTag.render`<span class=\"search-title-top-item-text\"><span>${link.title}</span></span>`,\n\t\t\t],\n\t\t});\n\t\tthis.#nav.add(linkTag);\n\n\t\treturn Tag.render`\n\t\t<div class=\"search-title-top-item search-title-top-item-js\">\n\t\t\t${linkTag}\n\t\t</div>`;\n\t}\n}\n\nclass SearchNavigation\n{\n\t#index: ?number = null;\n\t#elementList: Array<HTMLElement>;\n\n\tconstructor(nodeList: Array<HTMLElement> = [])\n\t{\n\t\tthis.#elementList = nodeList;\n\t}\n\n\tadd(element: HTMLElement): void\n\t{\n\t\tthis.#elementList.push(element);\n\t}\n\n\tclean(): void\n\t{\n\t\tthis.#index = null;\n\t\tthis.#elementList = [];\n\t}\n\n\tnext(): SearchNavigation\n\t{\n\t\tif (Type.isNil(this.#index))\n\t\t{\n\t\t\tthis.#index = 0;\n\n\t\t\treturn this;\n\t\t}\n\n\t\tif (this.#elementList.length - 1 > this.#index)\n\t\t{\n\t\t\tthis.#index++;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tcurrent(): ?HTMLElement\n\t{\n\t\tif (Type.isNil(this.#index))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.#elementList[this.#index];\n\t}\n\n\tprev(): SearchNavigation\n\t{\n\t\tif (Type.isNil(this.#index))\n\t\t{\n\t\t\tthis.#index = this.#elementList.length - 1;\n\n\t\t\treturn this;\n\t\t}\n\n\t\tif (this.#index > 0)\n\t\t{\n\t\t\tthis.#index -= 1;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\thighlight(): void\n\t{\n\t\tthis.unHighlightAll();\n\t\tif (!Dom.hasClass(this.current(), 'active'))\n\t\t{\n\t\t\tDom.addClass(this.current(), 'active');\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tunHighlight(): void\n\t{\n\t\tif (Dom.hasClass(this.current(), 'active'))\n\t\t{\n\t\t\tDom.removeClass(this.current(), 'active');\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tstatic highlight(element: HTMLElement): void\n\t{\n\t\telement.classList.add('active');\n\t}\n\n\tstatic unHighlight(element: HTMLElement): void\n\t{\n\t\telement.classList.remove('active');\n\t}\n\n\tcursorTo(element: HTMLElement): void\n\t{\n\t\tthis.#elementList.forEach((item, index) => {\n\t\t\tif (item === element)\n\t\t\t{\n\t\t\t\tthis.#index = index;\n\t\t\t\treturn;\n\t\t\t}\n\t\t});\n\t}\n\n\tunHighlightAll(): void\n\t{\n\t\tthis.#elementList.forEach((item) => {\n\t\t\tSearchNavigation.unHighlight(item);\n\t\t});\n\t}\n}\n","import { ajax } from 'main.core';\nimport { DataSource } from './data-source';\n\nexport class ServerDataSource extends DataSource\n{\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tfetch(query: string): Promise\n\t{\n\t\treturn ajax.runComponentAction(\n\t\t\t'bitrix:intranet.settings',\n\t\t\t'search',\n\t\t\t{\n\t\t\t\tmode: 'class',\n\t\t\t\tdata: { query: query }\n\t\t\t}\n\t\t);\n\t}\n}","export class Permission\n{\n\tstatic READ = 1 << 0;\n\tstatic EDIT = 1 << 2;\n\n\t#permission: number\n\n\tconstructor(permission: number = 0)\n\t{\n\t\tthis.#permission = permission\n\t}\n\n\tcanRead(): boolean\n\t{\n\t\treturn !!(this.#permission & Permission.READ);\n\t}\n\n\tcanEdit(): boolean\n\t{\n\t\treturn !!(this.#permission & Permission.EDIT);\n\t}\n\n\tgetPermission(): number\n\t{\n\t\treturn this.#permission;\n\t}\n}","import { ajax, Http, Event, Runtime } from 'main.core';\nimport { HelpMessage } from 'ui.section';\nimport { Analytic } from './analytic';\nimport { Navigation } from './navigation';\nimport { ToolsPage } from './pages/tools-page';\nimport { EmployeePage } from './pages/employee-page';\nimport { RequisitePage } from './pages/requisite-page';\nimport { CommunicationPage } from './pages/communication-page';\nimport { PortalPage } from './pages/portal-page';\nimport { ConfigurationPage } from './pages/configuration-page';\nimport { SchedulePage } from './pages/schedule-page';\nimport { GdprPage } from './pages/gdpr-page';\nimport { SecurityPage } from './pages/security-page';\nimport { MainpagePage } from './pages/mainpage-page';\nimport { ExternalTemporaryPage } from './pages/external-temporary-page';\nimport { Type, Dom, Loc } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\nimport { PageManager } from './page-manager';\nimport { BaseSettingsElement, ErrorCollection, BaseSettingsPage } from 'ui.form-elements.field';\nimport { Searcher } from './search-engine/searcher';\nimport { Renderer } from './search-engine/renderer';\nimport { ServerDataSource } from './search-engine/server-data-source';\nimport { Permission } from './permission';\n\nimport './css/style.css';\nimport './css/main_search_field.css';\n\nexport class Settings extends BaseSettingsElement\n{\n\t#basePage: string;\n\tisChanged: boolean = false;\n\t#menuNode: ?HTMLElement;\n\t#settingsNode: ?HTMLElement;\n\t#contentNode: ?HTMLElement;\n\t#pageManager: ?PageManager;\n\t#cancelMessageBox: ?MessageBox;\n\t#analytic: Analytic;\n\t#navigator: Navigation;\n\t#permission: Permission;\n\t#pagesPermission;\n\t#extraSettings = {\n\t\treloadAfterClose: false,\n\t};\n\n\tconstructor(params)\n\t{\n\t\tsuper(params);\n\t\tthis.#analytic = new Analytic({\n\t\t\tisAdmin: true,\n\t\t\tlocationName: 'settings',\n\t\t\tisBitrix24: params.isBitrix24 === true,\n\t\t\tanalyticContext: Type.isStringFilled(params.analyticContext) ? params.analyticContext : null\n\t\t});\n\t\tthis.#analytic.addEventOpenSettings();\n\t\tthis.#analytic.addEventStartPagePage(params.startPage);\n\t\tthis.setEventNamespace('BX.Intranet.Settings');\n\t\tEventEmitter.subscribe(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t'button-click',\n\t\t\t(event) => {\n\t\t\t\tconst [clickedBtn] = event.data;\n\t\t\t\tif (clickedBtn.TYPE === 'save')\n\t\t\t\t{\n\t\t\t\t\tthis.#onClickSaveBtn(event);\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\n\t\tEventEmitter.subscribe(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t'SidePanel.Slider:onClose',\n\t\t\tthis.#onSliderCloseHandler.bind(this),\n\t\t);\n\t\tthis.#menuNode = Type.isDomNode(params.menuNode) ? params.menuNode : null;\n\t\tthis.#settingsNode = Type.isDomNode(params.settingsNode) ? params.settingsNode : null;\n\t\tthis.#contentNode = Type.isDomNode(params.contentNode) ? params.contentNode : null;\n\t\tthis.#basePage = Type.isString(params.basePage) ? params.basePage : '';\n\t\tthis.#permission = params.permission instanceof Permission ? params.permission : new Permission();\n\t\tthis.#pagesPermission = params.pagesPermission;\n\n\t\tif (this.#settingsNode)\n\t\t{\n\t\t\tthis.#settingsNode.querySelector('.ui-button-panel input[name=\"cancel\"]')\n\t\t\t\t.addEventListener('click', this.#onClickCancelBtn);\n\t\t}\n\n\t\tparams.pages\n\t\t\t.concat(\n\t\t\t\tObject\n\t\t\t\t\t.values(params.externalPages)\n\t\t\t\t\t.map(({type, extensions}) => new ExternalTemporaryPage(type, extensions))\n\t\t\t)\n\t\t\t.forEach((page: BaseSettingsPage) => this.registerPage(page).expandPage(params.subPages[page.getType()]))\n\t\t;\n\n\t\tconst toolsMenuItem = BX.UI.DropdownMenuItem.getItemByNode(this.#menuNode.querySelector('[data-type=\"tools\"]'));\n\t\tif (toolsMenuItem.subItems && toolsMenuItem.subItems.length > 0)\n\t\t{\n\t\t\ttoolsMenuItem.hideSubmenu();\n\t\t\ttoolsMenuItem.setDefaultToggleButtonName();\n\t\t}\n\n\t\tthis.#navigator = new Navigation(this);\n\n\t\tif (this.#menuNode)\n\t\t{\n\t\t\tthis.#menuNode.querySelectorAll('li.ui-sidepanel-menu-item a.ui-sidepanel-menu-link')\n\t\t\t\t.forEach(item => {\n\t\t\t\t\tconst helpPopup = new HelpMessage(\n\t\t\t\t\t\titem.dataset.type + '_help-msg',\n\t\t\t\t\t\titem,\n\t\t\t\t\t\tLoc.getMessage('INTRANET_SETTINGS_PERMISSION_MSG')\n\t\t\t\t\t);\n\t\t\t\t\thelpPopup.getPopup().setWidth(275);\n\t\t\t\t\tconst page = this.getNavigator().getPageByType(item.dataset.type);\n\t\t\t\t\titem.addEventListener('click', (event) => {\n\t\t\t\t\t\tif (page?.getPermission()?.canRead())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.show(item.dataset.type);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thelpPopup.show();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t}\n\t}\n\n\tregisterPage(page: BaseSettingsPage): BaseSettingsPage\n\t{\n\t\tpage.setParentElement(this);\n\t\tpage.setPermission(new Permission(this.#pagesPermission[page.getType()] ?? null))\n\t\tpage.subscribe('change', this.#onEventChangeData.bind(this))\n\t\t\t.subscribe('fetch', this.#onEventFetchPage.bind(this))\n\t\t;\n\t\tpage.setAnalytic(this.#analytic);\n\n\t\treturn page;\n\t}\n\n\tgetCurrentPage(): ?BaseSettingsPage\n\t{\n\t\treturn this.getNavigator().getCurrentPage();\n\t}\n\n\tgetNavigator(): Navigation\n\t{\n\t\treturn this.#navigator\n\t}\n\n\tshow(type: string, option?: string): void\n\t{\n\t\tif (!Type.isDomNode(this.#contentNode))\n\t\t{\n\t\t\tconsole.log('Not found settings container');\n\t\t\treturn;\n\t\t}\n\t\tif (!this.#permission.canRead())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst nextPage = this.getNavigator().getPageByType(type);\n\n\t\tif (this.getCurrentPage() === nextPage)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.getNavigator().changePage(nextPage);\n\t\tDom.hide(this.getNavigator().getPrevPage()?.getPage());\n\t\tif (Type.isNil(this.getNavigator().getCurrentPage().getPage().parentNode))\n\t\t{\n\t\t\tDom.append(this.getNavigator().getCurrentPage().getPage(), this.#contentNode);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.show(this.getNavigator().getCurrentPage().getPage());\n\t\t}\n\t\tthis.activateMenuItem(type);\n\n\t\tthis.#analytic.addEventChangePage(type);\n\t\tthis.getNavigator().updateAddressBar();\n\t\tEventEmitter.emit(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t'BX.Intranet.Settings:onAfterShowPage', {\n\t\t\t\tsource: this,\n\t\t\t\tpage: nextPage,\n\t\t\t},\n\t\t);\n\n\t\tif (Type.isString(option) && option !== '')\n\t\t{\n\t\t\tEventEmitter.subscribeOnce(\n\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\t'BX.Intranet.Settings:onPageComplete',\n\t\t\t\t() => {\n\t\t\t\t\tconsole.log(option);\n\t\t\t\t\tthis.getNavigator().moveTo(nextPage, option);\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\tactivateMenuItem(type: string)\n\t{\n\t\tconst menuItem = BX.UI.DropdownMenuItem.getItemByNode(\n\t\t\tthis.#menuNode.querySelector(`a.ui-sidepanel-menu-link[data-type=\"${type}\"]`)\n\t\t);\n\t\tmenuItem && menuItem.setActiveHandler();\n\t}\n\n\t#getPageManager(): PageManager\n\t{\n\t\tif (!this.#pageManager)\n\t\t{\n\t\t\tthis.#pageManager = (new PageManager(this.getChildrenElements()))\n\t\t}\n\t\treturn this.#pageManager;\n\t}\n\n\t#onEventFetchPage(event: BaseEvent): Promise\n\t{\n\t\treturn this.#getPageManager().fetchPage(event.getTarget());\n\t}\n\n\t#onSliderCloseHandler(event: BaseEvent)\n\t{\n\t\tconst [panelEvent] = event.getCompatData();\n\t\tif (this.#cancelMessageBox instanceof MessageBox)\n\t\t{\n\t\t\tpanelEvent.denyAction();\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.isChanged && panelEvent.slider.getData()?.get('ignoreChanges') !== true)\n\t\t{\n\t\t\tpanelEvent.denyAction();\n\t\t\tthis.#cancelMessageBox = MessageBox.create({\n\t\t\t\tmessage: Loc.getMessage('INTRANET_SETTINGS_CONFIRM_ACTION_DESC'),\n\t\t\t\tmodal: true,\n\t\t\t\tbuttons: [\n\t\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\t\ttext: Loc.getMessage('INTRANET_SETTINGS_CONFIRM_ACTION_OK'),\n\t\t\t\t\t\tcolor: BX.UI.Button.Color.SUCCESS,\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'BX.Intranet.Settings:onCancel', {});\n\t\t\t\t\t\t\t\tpanelEvent.slider.getData().set('ignoreChanges', true);\n\t\t\t\t\t\t\t\tthis.isChanged = false;\n\t\t\t\t\t\t\t\tBX.UI.ButtonPanel.hide();\n\t\t\t\t\t\t\t\tthis.#cancelMessageBox.close();\n\t\t\t\t\t\t\t\tthis.#cancelMessageBox = null;\n\t\t\t\t\t\t\t\tpanelEvent.slider.close();\n\t\t\t\t\t\t\t\tpanelEvent.slider.destroy();\n\n\t\t\t\t\t\t\t\tif (this.#basePage.includes('/configs/')) {\n\t\t\t\t\t\t\t\t\tthis.#reload('/index.php');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tnew BX.UI.CancelButton({\n\t\t\t\t\t\ttext: Loc.getMessage('INTRANET_SETTINGS_CONFIRM_ACTION_CANCEL'),\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\t\tthis.#cancelMessageBox.close();\n\t\t\t\t\t\t\t\tthis.#cancelMessageBox = null;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t],\n\t\t\t});\n\t\t\treturn this.#cancelMessageBox.show();\n\t\t}\n\n\t\tif (\n\t\t\tthis.#basePage.includes('/configs/')\n\t\t\t|| this.#extraSettings.reloadAfterClose === true\n\t\t)\n\t\t{\n\t\t\tthis.#reload('/index.php');\n\t\t}\n\t}\n\n\t#reload(url: ?string = null)\n\t{\n\t\tconst loader =  document.querySelector('#ui-sidepanel-wrapper-loader');\n\t\tif (loader)\n\t\t{\n\t\t\tloader.style.display = '';\n\t\t}\n\t\tif (Type.isString(url))\n\t\t{\n\t\t\ttop.window.location.href = url;\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttop.window.location.href = this.#basePage;\n\t\t}\n\t}\n\n\t#onEventChangeData(event)\n\t{\n\t\tif (!this.#permission.canEdit())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.isChanged = true;\n\t\tBX.UI.ButtonPanel.show();\n\t}\n\n\t#onClickSaveBtn(event)\n\t{\n\t\tlet data = this.#getPageManager().collectData();\n\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'BX.Intranet.Settings:onBeforeSave', {\n\t\t\tdata: data,\n\t\t});\n\t\tthis.#analytic.send();\n\t\tajax.runComponentAction(\n\t\t\t'bitrix:intranet.settings',\n\t\t\t'set',\n\t\t\t{\n\t\t\t\tmode: 'class',\n\t\t\t\tdata: Http.Data.convertObjectToFormData(data),\n\t\t\t},\n\t\t).then(this.#successSaveHandler.bind(this), this.#failSaveHandler.bind(this));\n\t}\n\n\t#successSaveHandler(response: Object)\n\t{\n\t\tthis.#extraSettings.reloadAfterClose = true;\n\n\t\tthis.isChanged = false;\n\t\tthis.#hideWaitIcon();\n\t\tBX.UI.ButtonPanel.hide();\n\n\t\tEventEmitter.emit(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t'BX.Intranet.Settings:onSuccessSave',\n\t\t\tthis.#extraSettings,\n\t\t);\n\t}\n\n\t#failSaveHandler(response: Object)\n\t{\n\t\tlet errorCollection = this.#prepareErrorCollection(response.errors);\n\t\tthis.#hideWaitIcon();\n\n\t\tEventEmitter.emit('BX.UI.FormElement.Field:onFailedSave', {\n\t\t\terrors: errorCollection,\n\t\t});\n\n\t\tlet pageType = this.#selectPageForError(errorCollection);\n\t\tthis.show(pageType);\n\t}\n\n\t#prepareErrorCollection(rawErrors): Object\n\t{\n\t\tlet errorCollection = {};\n\t\tfor (let error of rawErrors)\n\t\t{\n\t\t\tlet type = error.customData?.page;\n\t\t\tlet field = error.customData?.field;\n\t\t\tif (Type.isNil(type) || Type.isNil(field))\n\t\t\t{\n\t\t\t\tErrorCollection.showSystemError(Loc.getMessage('INTRANET_SETTINGS_ERROR_FETCH_DATA'));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (Type.isNil(errorCollection[type]))\n\t\t\t{\n\t\t\t\terrorCollection[type] = {};\n\t\t\t}\n\t\t\tif (Type.isNil(errorCollection[type][field]))\n\t\t\t{\n\t\t\t\terrorCollection[type][field] = [];\n\t\t\t}\n\t\t\terrorCollection[type][field].push(error.message);\n\t\t}\n\n\t\treturn errorCollection;\n\t}\n\n\t#onClickCancelBtn(event)\n\t{\n\t\ttop.BX.SidePanel.Instance.close();\n\t}\n\n\t#hideWaitIcon()\n\t{\n\t\tlet saveBtnNode = document.querySelector('#intranet-settings-page #ui-button-panel-save');\n\t\tDom.removeClass(saveBtnNode, 'ui-btn-wait');\n\t}\n\n\t#selectPageForError(errors): string\n\t{\n\t\tfor (let pageType in errors)\n\t\t{\n\t\t\treturn pageType;\n\t\t}\n\t}\n}\n\nexport {\n\tToolsPage,\n\tEmployeePage,\n\tPortalPage,\n\tMainpagePage,\n\tCommunicationPage,\n\tRequisitePage,\n\tConfigurationPage,\n\tSchedulePage,\n\tGdprPage,\n\tSecurityPage,\n\tRenderer,\n\tSearcher,\n\tServerDataSource,\n\tPermission,\n};"],"names":["Analytic","constructor","context","addEvent","eventType","eventData","isBitrix24","send","Object","keys","length","ajax","runComponentAction","mode","data","then","addEventOpenSettings","options","event","AnalyticSettingsEvent","OPEN","tool","category","p1","isAdmin","AnalyticSettingsUserRole","ADMIN","NOT_ADMIN","c_section","analyticContext","c_element","locationName","sendData","addEventOpenTariffSelector","fieldName","addEventOpenHint","addEventStartPagePage","page","START_PAGE","addEventChangePage","VIEW","addEventToggleTools","toolName","state","type","p2","AnalyticSettingsTurnState","ON","OFF","addEventToggle2fa","addEventConfigPortal","AnalyticSettingsCategory","PORTAL","addEventChangeTheme","themeId","regex","preparedThemeId","test","CHANGE_PORTAL_THEME","AnalyticSettingsType","COMMON","AnalyticSettingsSection","SETTINGS","addEventConfigEmployee","addEventConfigConfiguration","addEventConfigRequisite","TOOLS","SECURITY","AI","EMPLOYEE","COMMUNICATION","REQUISITE","SCHEDULE","CONFIGURATION","TFA","CHANGE_PORTAL_NAME","CHANGE_PORTAL_LOGO","CHANGE_PORTAL_SITE","CHANGE_MARKET","CHANGE_PAY_TARIFF","CREATE_CARD","EDIT_CARD","COPY_LINK_CARD","OPEN_ADD_COMPANY","CHANGE_QUICK_REG","CHANGE_REG_ALL","CHANGE_COLLABERS_INVITATION","CHANGE_EXTRANET_INVITE","SiteTitle24Field","BaseSettingsElement","params","setEventNamespace","Checker","id","inputName","title","Loc","getMessage","size","isEnable","checked","value","bannerCode","hideSeparator","getFieldView","render","Tag","SiteTitleField","setParentElement","parent","siteTitleOptions","canUserEditTitle","logo24","canUserEditLogo24","labels","siteTitleLabels","cancel","startInputMonitoring","setInterval","monitorInput","bind","stopInputMonitoring","clearInterval","getInputNode","EventEmitter","emit","GLOBAL_TARGET","getEventNamespace","BaseEvent","Event","subscribe","getData","getId","getName","getLabel","getLogo24Field","TextInput","placeholder","label","Navigation","settings","getCurrentPage","getType","moveTo","pageObj","getPageByType","hasData","subscribeOnce","hasContent","show","getPages","find","getPrevPage","changePage","BaseSettingsPage","console","log","getChildrenElements","updateAddressBar","url","URL","window","location","href","searchParams","set","delete","top","history","replaceState","toString","findByFieldName","rootNode","node","RecursiveFilteringVisitor","startFrom","SettingsSection","getSectionView","TabField","SettingsField","shift","scrollToNode","element","headerOffset","elementPosition","getBoundingClientRect","offsetPosition","pageYOffset","scrollTo","behavior","fieldNode","Type","isNil","isColored","AscendingOpeningVisitor","SettingsRow","getRowView","toggle","tabs","getParentElement","TabsField","activateTab","highlight","ToolsPage","titlePage","descriptionPage","appendSections","contentNode","description","Row","content","getDescription","getContainer","row","hasValue","renderTo","descriptionText","BX","UI","Alert","text","inline","Size","SMALL","color","Color","PRIMARY","animated","tools","getValue","startSort","forEach","item","push","menuId","subgroups","toolSelectorItems","toolSelector","SwitcherNested","code","name","link","getPermission","canEdit","infoHelperCode","linkTitle","isChecked","enabled","mainInputName","isOpen","items","isDisabled","isDefault","default","helpMessage","toolSelectorSection","section","Dom","style","attr","append","child","parentToolName","disabled","subgroupConfig","isNull","toolSelectorItem","SwitcherNestedItem","settingsPath","settingsTitle","getSwitcher","getNode","opacity","getAnalytic","EventBX","Section","Draggable","container","draggable","dragElement","CLONE","toolId","bindElement","message","PopupWindowManager","create","darkMode","autoHide","angle","offsetLeft","bindOptions","position","closeByEsc","EmployeePage","onSuccessDataFetched","response","querySelector","innerText","profileSection","inviteSection","additionalSection","sectionSettings","companyPulseField","switcher","addToSectionHelper","hasSelectValue","currentValue","current","values","selected","nameFormatField","Selector","hints","settingsField","fieldView","customFormatNameField","customFormatNameRow","isHidden","addEventListener","target","hide","formatNumberField","addressFormatField","addressFormatRow","separator","className","showBirthYearField","InlineChecker","fastReqField","inviteCollabersField","showQuitField","newUserField","newUserLfField","extranetField","ButtonBar","buttons","button","getButtons","addButton","LandingButton","Button","round","noCaps","MEDIUM","LIGHT_BORDER","setState","apply","getButton","LandingButtonState","EditState","landing","setText","setDropdown","bindEvent","openNewTab","edit_url","open","focus","ShowState","menuRenderer","unbindEvent","setColor","setMenu","CreateState","request","getState","ButtonState","WAITING","is_public","ErrorCollection","showSystemError","errors","LandingCard","landingOptions","qrRender","qrContainer","QRCode","public_url","width","height","onclickOpenEdit","getCopyButton","EXTRA_SMALL","SUCCESS","events","click","clipboard","copy","Notification","Center","notify","LandingButtonFactory","landingData","setMenuRenderer","renderer","btn","is_connected","maxWidth","html","companyId","company_id","requisiteId","requisite_id","bankRequisiteId","bank_requisite_id","Card","company","TITLE","isStringFilled","phone","email","site","requisiteFieldsRender","getButtonsBar","getRequisiteUrl","ID","getCompanyUrl","fields","field","renderField","VALUE","setButtonBar","buttonBar","attrs","RequisitePage","addCustomEvent","eventName","key","reload","reqSection","sectionField","descriptionRow","companies","requisites","phones","sites","emails","landings","landingsData","isArray","defaultCompanyRow","cardRender","cardRow","addCompanyLinkRender","card","factory","landingCard","landingBtn","hasClass","CommunicationPage","chatSection","channelSection","diskSection","newsFeedSection","settingsSection","allowPostFeedField","settingsRow","userSelectorField","UserSelector","enableDepartments","encodeValue","split","decodeValue","arr","match","userSelectorRow","allowPostToAllField","likeBtnNameField","TextInputInline","hintTitle","valueColor","hintDesc","canPostGeneralChatField","canPostGeneralChatListField","canPostGeneralChatListRow","managerSelectorField","enableAll","managerSelectorRow","separatorRow","SeparatorRow","leaveMessageField","adminMessageField","allowUrlPreviewField","allowAutoDeleteField","overdueChatsField","canPostGeneralChannelField","canPostGeneralChannelListField","canPostGeneralChannelListRow","fileViewerField","messageNode","fileLimitField","helpDesk","helpMessageProvider","helpMessageProviderFactory","fileLimitRow","allowEditDocField","allowEditDocRow","connectDiskField","publicLinkField","hintOn","enableBlockDocField","enableFindField","SiteDomainField","siteDomainOptions","subDomainName","setAttribute","timeout","clearTimeout","setTimeout","validateInput","hostname","mainDomainName","isRenameable","occupiedDomains","join","replace","newDomain","trim","setErrors","includes","cleanError","copyButton","bindCopyClick","Text","encode","renderErrors","setPortalSettings","portalSettings","logoNode","titleNode","logo24Node","hasAttribute","dataset","prevDisplay","display","isUndefined","innerHTML","visibility","removeProperty","logo","isPlainObject","backgroundImage","encodeURI","src","setPortalThemeSettings","themeSettings","theme","lightning","String","indexOf","removeClass","addClass","previewImage","backgroundSize","background","previewColor","backgroundColor","ThemePickerElement","BaseField","themePickerSettings","allowSetDefaultTheme","applyTheme","themeNode","getItemNode","getTheme","getAppliedTheme","applyPortalThemePreview","showSaveButton","form","dispatchEvent","applyPortalSettings","renderContentField","document","overflow","uploadBtn","handleNewThemeButtonClick","themeContainer","Array","from","getThemes","itemNode","createItem","canSetDefaultTheme","unbindAll","appendChild","renderLockElement","showBanner","Ears","noScrollbar","init","getNewThemeDialog","handleLockButtonClick","getClass","InfoHelper","Intranet","Bitrix24","ThemePicker","setThemes","themes","setBaseThemes","baseThemes","applyThemeAssets","getContentContainer","closure","handleRemoveBtnClick","getThemeId","handleItemClick","addItem","SiteThemePickerField","baseEvent","HiddenInput","defaultValue","helpDeskCode","SiteLogoField","canUserEditLogo","siteLogoOptions","siteLogoLabel","initUploader","TileWidget","StackWidget","StackWidgetSize","defaultOptions","maxFileCount","acceptOnlyImages","multiple","acceptedFileTypes","error","onFileError","onLogoAdd","onLogoRemove","preventDefault","allowReplaceSingle","hiddenFieldName","hiddenFieldsContainer","assignAsFile","imageResizeWidth","imageResizeHeight","imageResizeMode","imageResizeMimeType","imagePreviewWidth","imagePreviewHeight","imagePreviewResizeMode","files","serverFileId","serverId","treatImageAsFile","downloadUrl","serverPreviewUrl","serverPreviewWidth","serverPreviewHeight","preload","LARGE","removeFailedLogo","tabField","getUploader","getFiles","isLoadFailed","removeFiles","file","getClientPreviewUrl","Runtime","loadExtension","exports","createElement","uploaderContent","Loader","destroy","SiteTitlePreviewWidget","portalThemeSettings","onChange","onSetTheme","PortalPage","headerWidgetRender","getSections","buildSiteTitleSection","buildDomainSection","buildThemeSection","filter","portalSettingsLabels","sectionView","AlertSize","AlertColor","siteLogoRow","previewWidget","tabsRow","tabsField","siteTitleTab","tabsOptions","siteTitleRow","siteTitleField","helpMessages","siteLogoTab","siteLogoField","inputDefaultWidth","domainSettings","firstTab","siteDomainField","firstTabRow","secondTab","portalDomainSettings","exampleDns","replaceAll","res","isCustomizable","PortalDeleteFormType","BOUND","MAIL","NETWORK","DEFAULT","PortalDeleteForm","verificationOptions","getMoreDetails","getBodyClass","getConfirmButtonText","getInputContainer","getButtonContainer","onConfirmEventHandler","getConfirmButton","setWaiting","PortalDelete","portalDelete","showCheckwordPopup","confirmButton","props","sendChangeFormEvent","PortalDeleteFormEmployee","isFreeLicense","SidePanel","Instance","onCloseComplete","runAction","catch","reject","PortalDeleteFormMail","mailForRequest","portalUrl","mailBody","mailSubject","PortalDeleteFormNotAdmin","PortalDeleteFormBound","PortalDeleteFormNetwork","networkUrl","tag","LINK","PortalDeleteSection","bodyActive","isBound","isEmployeesLeft","removeChild","remove","formRow","addChild","getContent","ConfigurationPage","timeFormat","dateTimeSection","mailsSection","mapsSection","cardsProductPropertiesSection","additionalSettingsSection","deletePortalSection","regionField","format24Time","trackOutLettersRead","showQuitRow","trackOutMailsClick","defaultEmailFrom","cardsProvider","cardsProviderRow","googleKeyFrontend","googleKeyFrontendRow","mapApiKeyBackend","googleKeyBackendRow","separatorRow1","showPhotoPlacesMaps","hintOff","showPhotoPlacesMapsRow","useGeocodingService","useGeocodingServiceRow","productPropertiesSection","cardsProviderProductProperties","cardsProviderProductPropertiesRow","descriptionYandex","descriptionYandexRow","yandexKeyProductProperties","yandexKeyProductPropertiesRow","descriptionGoogle","descriptionGoogleRow","googleKeyProductProperties","googleKeyProductPropertiesRow","allInstallMarketApplication","allInstallMarketApplicationRow","allCanBuyTariff","allCanBuyTariffRow","allowMeasureStressLevel","allowMeasureStressLevelRow","collectGeoData","Dialogs","MessageBox","MessageBoxButtons","OK_CANCEL","check","SchedulePage","scheduleSection","holidaysSection","workTimeRow","workTimeStartField","workTimeEndField","containerTab","itemPickerField","ItemPicker","isMulti","multiValue","itemPickerRow","weekStartField","weekStartRow","forCompanyTab","forDepartmentTab","forDepartmentRow","countDays","countDaysNode","holidaysRow","holidaysField","count","GdprPage","gdprSection","addApplicationsRender","marketDirectory","titleField","contactNameField","emailField","dateField","adjust","calendar","bTime","bHideTime","SecurityPage","otpSection","securityOtpCheckerRow","securityOtpPeriodSelectorRow","switcherWrapper","SingleChecker","Switcher","SwitcherSize","small","securityOtpMessageChatCheckerRow","alignCenter","noMarginBottom","Popup","popupDescription","popupButton","close","popupContent","offset","offsetWidth","borderRadius","ITEMS","CURRENT","accessIpSection","fieldsCount","ipUsersList","onclickAddField","emptyUserSelectorRow","insertBefore","additionalUsersAccessIpButton","parentElement","emptyAccessIpRow","fieldNumber","userSelector","accessIp","users","ip","titleIconClasses","canCollapse","devicesHistorySection","devicesHistoryDescription","cleanupDaysField","goToUserListButton","eventLogSection","eventLogDescription","mobileAppSection","disableCopyField","disableCopyScreenshotField","MainpagePage","urlCreate","urlEdit","urlPublic","urlPartners","urlImport","urlExport","previewImg","feedbackParams","isPageExists","isPublished","secondarySection","secondaryContent","getInfoTemplate","infoTemplate","warningHintPopup","cacheable","animation","offsetTop","parseInt","getInfoSuccessTemplate","infoSuccessTemplate","successHintPopup","htmlContent","Menu","onclick","onPopupClose","onPopupShow","onOK","allowChangeHistory","rightBoundary","messageBox","okCaption","cancelCaption","onOk","onCancel","popupWindow","popupContainer","classList","add","titleBar","closeIcon","newTemplate","wrapper","innerWrapper","Ajax","Analytics","c_sub_section","status","onClose","okText","DANGER_DARK","buttonEdit","buttonEditLock","renderNode","renderNodeLock","buttonColor","customLeftBoundary","Feedback","Form","isPublishedBefore","ExternalTemporaryPage","extensions","externalPage","externalPageHasBeenFound","some","externalPageClassOrInstance","isObjectLike","pageExemplar","prototype","registerPage","setData","isShown","getPage","onFailDataFetched","PageManager","pages","fetchPage","Promise","resolve","pageIsFound","savedPage","collectData","getFormData","getFormNode","formNode","prepareForm","DataSource","fetch","query","Searcher","dataSource","minSymbol","Error","changeState","STATE_WAIT","getMinSymbol","STATE_READY","STATE_NOT_FOUND","getResult","getOthers","Renderer","searcher","inputNode","iconContainer","SearchNavigation","overlay","contentBackground","contentPadding","autoHideHandler","setContent","renderContent","clean","keyCode","MouseEvent","unHighlightAll","prev","updateScroll","next","getQuery","rect","firstElementChild","relTop","relBot","bottom","padding","scrollTop","renderWait","loaderContainer","loader","util","createLinkOption","option","mouseenter","cursorTo","mouseleave","unHighlight","children","createBtnOption","blur","renderOption","EXTERNAL_LINK","renderGroup","group","optionsContainer","renderSearchResult","renderNotFound","renderOthers","result","links","wraper","other","renderOtherLink","linkTag","nodeList","index","ServerDataSource","Permission","permission","canRead","READ","EDIT","Settings","isChanged","reloadAfterClose","startPage","clickedBtn","TYPE","isDomNode","menuNode","settingsNode","isString","basePage","pagesPermission","concat","externalPages","map","expandPage","subPages","toolsMenuItem","DropdownMenuItem","getItemByNode","subItems","hideSubmenu","setDefaultToggleButtonName","querySelectorAll","helpPopup","HelpMessage","getPopup","setWidth","getNavigator","setPermission","setAnalytic","nextPage","parentNode","activateMenuItem","source","menuItem","setActiveHandler","getTarget","panelEvent","getCompatData","denyAction","slider","get","modal","ButtonPanel","CancelButton","Http","Data","convertObjectToFormData","errorCollection","pageType","rawErrors","customData","saveBtnNode"],"mappings":"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"}