this.BX=this.BX||{};(function(e,t,s,i,a,l,r,n,o,c,d,b,p,u,h,_,g,v,T,E,P,L,S,I,N,m){"use strict";var F=babelHelpers.classPrivateFieldLooseKey("eventList");var f=babelHelpers.classPrivateFieldLooseKey("tool");var w=babelHelpers.classPrivateFieldLooseKey("context");class B{constructor(e=null){Object.defineProperty(this,F,{writable:true,value:[]});Object.defineProperty(this,f,{writable:true,value:"settings"});Object.defineProperty(this,w,{writable:true,value:null});babelHelpers.classPrivateFieldLooseBase(this,w)[w]=e}addEvent(e,t){if(babelHelpers.classPrivateFieldLooseBase(this,w)[w].isBitrix24){babelHelpers.classPrivateFieldLooseBase(this,F)[F][e]=t}}send(){if(!babelHelpers.classPrivateFieldLooseBase(this,w)[w].isBitrix24){return}if(Object.keys(babelHelpers.classPrivateFieldLooseBase(this,F)[F]).length>0){m.ajax.runComponentAction("bitrix:intranet.settings","analytic",{mode:"class",data:{data:babelHelpers.classPrivateFieldLooseBase(this,F)[F]}}).then((()=>{}))}babelHelpers.classPrivateFieldLooseBase(this,F)[F]=[]}addEventOpenSettings(){var e,s,i,a;const l={event:A.OPEN,tool:babelHelpers.classPrivateFieldLooseBase(this,f)[f],category:"slider",p1:((e=babelHelpers.classPrivateFieldLooseBase(this,w)[w])==null?void 0:e.isAdmin)!==false?R.ADMIN:R.NOT_ADMIN,c_section:(s=(i=babelHelpers.classPrivateFieldLooseBase(this,w)[w])==null?void 0:i.analyticContext)!=null?s:"",c_element:(a=babelHelpers.classPrivateFieldLooseBase(this,w)[w])==null?void 0:a.locationName};t.sendData(l)}addEventOpenTariffSelector(e){var t;const s={event:"open_tariff",tool:babelHelpers.classPrivateFieldLooseBase(this,f)[f],category:e,p1:((t=babelHelpers.classPrivateFieldLooseBase(this,w)[w])==null?void 0:t.isAdmin)!==false?R.ADMIN:R.NOT_ADMIN};this.addEvent(e+"_open_tariff",s)}addEventOpenHint(e){var t;const s={event:"open_hint",tool:babelHelpers.classPrivateFieldLooseBase(this,f)[f],category:e,p1:((t=babelHelpers.classPrivateFieldLooseBase(this,w)[w])==null?void 0:t.isAdmin)!==false?R.ADMIN:R.NOT_ADMIN};this.addEvent(e+"_open_hint",s)}addEventStartPagePage(e){var s;const i={event:A.START_PAGE,tool:babelHelpers.classPrivateFieldLooseBase(this,f)[f],category:e,p1:((s=babelHelpers.classPrivateFieldLooseBase(this,w)[w])==null?void 0:s.isAdmin)!==false?R.ADMIN:R.NOT_ADMIN};t.sendData(i)}addEventChangePage(e){var s;const i={event:A.VIEW,tool:babelHelpers.classPrivateFieldLooseBase(this,f)[f],category:e,p1:((s=babelHelpers.classPrivateFieldLooseBase(this,w)[w])==null?void 0:s.isAdmin)!==false?R.ADMIN:R.NOT_ADMIN};t.sendData(i)}addEventToggleTools(e,t){var s,i;const a="onoff_tools";const l={event:a,tool:babelHelpers.classPrivateFieldLooseBase(this,f)[f],category:"tools",type:e,c_element:(s=babelHelpers.classPrivateFieldLooseBase(this,w)[w])==null?void 0:s.locationName,p1:((i=babelHelpers.classPrivateFieldLooseBase(this,w)[w])==null?void 0:i.isAdmin)!==false?R.ADMIN:R.NOT_ADMIN,p2:t?C.ON:C.OFF};this.addEvent("tools"+e+"_"+a,l)}addEventToggle2fa(e){var t;const s="2fa_onoff";const i={event:s,tool:babelHelpers.classPrivateFieldLooseBase(this,f)[f],category:"security",p1:((t=babelHelpers.classPrivateFieldLooseBase(this,w)[w])==null?void 0:t.isAdmin)!==false?R.ADMIN:R.NOT_ADMIN,p2:e?C.ON:C.OFF};this.addEvent("security_"+s,i)}addEventConfigPortal(e){const t={event:e,tool:babelHelpers.classPrivateFieldLooseBase(this,f)[f],category:H.PORTAL};this.addEvent("portal_"+e,t)}addEventChangeTheme(e){const t=/custom_\d+/;const s=t.test(e)?"themeName_custom":"themeName_"+e;const i={event:A.CHANGE_PORTAL_THEME,tool:babelHelpers.classPrivateFieldLooseBase(this,f)[f],category:H.PORTAL,type:O.COMMON,c_section:y.SETTINGS,p1:s};this.addEvent("portal_"+A.CHANGE_PORTAL_THEME,i)}addEventConfigEmployee(e,t){var s;const i={event:e,tool:babelHelpers.classPrivateFieldLooseBase(this,f)[f],category:"employee",p1:((s=babelHelpers.classPrivateFieldLooseBase(this,w)[w])==null?void 0:s.isAdmin)!==false?R.ADMIN:R.NOT_ADMIN,p2:t?C.ON:C.OFF};this.addEvent("employee_"+e,i)}addEventConfigConfiguration(e,t){var s;const i={event:e,tool:babelHelpers.classPrivateFieldLooseBase(this,f)[f],category:"configuration",p1:((s=babelHelpers.classPrivateFieldLooseBase(this,w)[w])==null?void 0:s.isAdmin)!==false?R.ADMIN:R.NOT_ADMIN,p2:t?C.ON:C.OFF};this.addEvent("configuration_"+e,i)}addEventConfigRequisite(e){var s,i;const a={event:e,tool:babelHelpers.classPrivateFieldLooseBase(this,f)[f],category:"requisite",c_element:(s=babelHelpers.classPrivateFieldLooseBase(this,w)[w])==null?void 0:s.locationName,p1:((i=babelHelpers.classPrivateFieldLooseBase(this,w)[w])==null?void 0:i.isAdmin)!==false?R.ADMIN:R.NOT_ADMIN};t.sendData(a)}}class H{}H.TOOLS="tools";H.SECURITY="security";H.AI="ai";H.PORTAL="portal";H.EMPLOYEE="employee";H.COMMUNICATION="communication";H.REQUISITE="requisite";H.SCHEDULE="schedule";H.CONFIGURATION="configuration";class A{}A.OPEN="open_setting";A.START_PAGE="start_page";A.VIEW="view";A.TFA="2fa_onoff";A.CHANGE_PORTAL_NAME="change_portal_name";A.CHANGE_PORTAL_LOGO="change_portal_logo";A.CHANGE_PORTAL_SITE="change_portal_site";A.CHANGE_PORTAL_THEME="change_portal_theme";A.CHANGE_MARKET="change_market";A.CHANGE_PAY_TARIFF="change_pay_tariff";A.CREATE_CARD="create_vizitka";A.EDIT_CARD="edit_vizitka";A.COPY_LINK_CARD="copylink_vizitka";A.OPEN_ADD_COMPANY="open_add_company";A.CHANGE_QUICK_REG="change_quick_reg";A.CHANGE_REG_ALL="change_reg_all";A.CHANGE_COLLABERS_INVITATION="change_collabers_invitation";A.CHANGE_EXTRANET_INVITE="change_extranet_invite";class y{}y.SETTINGS="settings";class O{}O.COMMON="common";class R{}R.ADMIN="isAdmin_Y";R.NOT_ADMIN="isAdmin_N";class C{}C.ON="turn_on";C.OFF="turn_off";let M=e=>e,D;var G=babelHelpers.classPrivateFieldLooseKey("checker");var V=babelHelpers.classPrivateFieldLooseKey("content");class k extends L.BaseSettingsElement{constructor(e){var t;super();Object.defineProperty(this,G,{writable:true,value:void 0});Object.defineProperty(this,V,{writable:true,value:void 0});this.setEventNamespace("BX.Intranet.Settings");babelHelpers.classPrivateFieldLooseBase(this,G)[G]=new u.Checker({id:"siteLogo24",inputName:"logo24",title:(t=e.title)!=null?t:m.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_SITE_LOGO24"),size:"extra-small",isEnable:e.isEnable,checked:e.checked!=="",value:"Y",bannerCode:"limit_admin_logo24",hideSeparator:true})}getFieldView(){return babelHelpers.classPrivateFieldLooseBase(this,G)[G]}render(){if(babelHelpers.classPrivateFieldLooseBase(this,V)[V]){return babelHelpers.classPrivateFieldLooseBase(this,V)[V]}babelHelpers.classPrivateFieldLooseBase(this,V)[V]=m.Tag.render(D||(D=M`
			<div class="ui-section__field-selector --align-center">
				<div class="ui-section__hint">
					${0}
				</div>
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,G)[G].render());return babelHelpers.classPrivateFieldLooseBase(this,V)[V]}}let U=e=>e,K;var j=babelHelpers.classPrivateFieldLooseKey("content");var x=babelHelpers.classPrivateFieldLooseKey("contentLogo24");var X=babelHelpers.classPrivateFieldLooseKey("title");var $=babelHelpers.classPrivateFieldLooseKey("logo24");var Y=babelHelpers.classPrivateFieldLooseKey("inputMonitoringIntervalId");var W=babelHelpers.classPrivateFieldLooseKey("inputMonitoringCountdown");var q=babelHelpers.classPrivateFieldLooseKey("inputMonitoringPrevState");var z=babelHelpers.classPrivateFieldLooseKey("initTitle");var Q=babelHelpers.classPrivateFieldLooseKey("initLogo24");class Z extends L.BaseSettingsElement{constructor(e){super(e);Object.defineProperty(this,Q,{value:ee});Object.defineProperty(this,z,{value:J});Object.defineProperty(this,j,{writable:true,value:void 0});Object.defineProperty(this,x,{writable:true,value:void 0});Object.defineProperty(this,X,{writable:true,value:void 0});Object.defineProperty(this,$,{writable:true,value:void 0});Object.defineProperty(this,Y,{writable:true,value:void 0});Object.defineProperty(this,W,{writable:true,value:10});Object.defineProperty(this,q,{writable:true,value:void 0});this.setParentElement(e.parent);this.setEventNamespace("BX.Intranet.Settings");const t=e.siteTitleOptions;this.options={title:t.title,canUserEditTitle:t.canUserEditTitle,logo24:t.logo24,canUserEditLogo24:t.canUserEditLogo24};const s=e.siteTitleLabels;this.labels={title:s.title,logo24:s.logo24};babelHelpers.classPrivateFieldLooseBase(this,z)[z](t,s);babelHelpers.classPrivateFieldLooseBase(this,Q)[Q](t,s)}getFieldView(){return babelHelpers.classPrivateFieldLooseBase(this,X)[X]}cancel(){}startInputMonitoring(){if(babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]>0){return}babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]=setInterval(this.monitorInput.bind(this),500)}stopInputMonitoring(){if(babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]>0){clearInterval(babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]);babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]=null}}monitorInput(){const e=babelHelpers.classPrivateFieldLooseBase(this,X)[X].getInputNode().value;if(babelHelpers.classPrivateFieldLooseBase(this,q)[q]!==e){babelHelpers.classPrivateFieldLooseBase(this,W)[W]=10;babelHelpers.classPrivateFieldLooseBase(this,q)[q]=e;S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":Portal:Change",new S.BaseEvent({data:{title:e}}))}else if(--babelHelpers.classPrivateFieldLooseBase(this,W)[W]<=0){this.stopInputMonitoring()}}render(){if(babelHelpers.classPrivateFieldLooseBase(this,j)[j]){return babelHelpers.classPrivateFieldLooseBase(this,j)[j]}m.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,X)[X].getInputNode(),"focus",this.startInputMonitoring.bind(this));m.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,X)[X].getInputNode(),"keydown",this.startInputMonitoring.bind(this));m.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,X)[X].getInputNode(),"click",this.startInputMonitoring.bind(this));m.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,X)[X].getInputNode(),"blur",this.stopInputMonitoring.bind(this));m.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,X)[X].getInputNode(),"blur",this.stopInputMonitoring.bind(this));babelHelpers.classPrivateFieldLooseBase(this,$)[$].getFieldView().subscribe("change",(e=>{S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":Portal:Change",new S.BaseEvent({data:{logo24:e.getData()===true?"24":""}}))}));babelHelpers.classPrivateFieldLooseBase(this,j)[j]=m.Tag.render(K||(K=U`
		<div id="${0}" class="ui-section__field-selector --no-border --no-margin --align-center">
			<div class="ui-section__field-container">
				<div class="ui-section__field-label_box">
					<label class="ui-section__field-label" for="${0}">
						${0}
					</label> 
				</div>
				<div class="ui-section__field-inner">
					<div class="ui-ctl ui-ctl-textbox ui-ctl-block">
						${0}
					</div>
				</div>
			</div>
		</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,X)[X].getId(),babelHelpers.classPrivateFieldLooseBase(this,X)[X].getName(),babelHelpers.classPrivateFieldLooseBase(this,X)[X].getLabel(),babelHelpers.classPrivateFieldLooseBase(this,X)[X].getInputNode());return babelHelpers.classPrivateFieldLooseBase(this,j)[j]}getLogo24Field(){return babelHelpers.classPrivateFieldLooseBase(this,$)[$]}}function J(e,t){var s;babelHelpers.classPrivateFieldLooseBase(this,X)[X]=new u.TextInput({value:e.title,placeholder:e.title,label:(s=t.title)!=null?s:m.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_SITE_TITLE_INPUT_LABEL"),id:"siteTitle",inputName:"title",isEnable:true});babelHelpers.classPrivateFieldLooseBase(this,X)[X].setEventNamespace(this.getEventNamespace())}function ee(e,t){babelHelpers.classPrivateFieldLooseBase(this,$)[$]=new k({title:t.logo24,isEnable:e.canUserEditLogo24,checked:e.logo24})}var te=babelHelpers.classPrivateFieldLooseKey("settings");var se=babelHelpers.classPrivateFieldLooseKey("currentPage");var ie=babelHelpers.classPrivateFieldLooseKey("prevPage");class ae{constructor(e){Object.defineProperty(this,te,{writable:true,value:void 0});Object.defineProperty(this,se,{writable:true,value:void 0});Object.defineProperty(this,ie,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,te)[te]=e;S.EventEmitter.subscribe("BX.Intranet.SettingsNavigation:onMove",(e=>{var t;const{page:s,fieldName:i}=e.data;if(((t=this.getCurrentPage())==null?void 0:t.getType())===s){this.moveTo(this.getCurrentPage(),i);return}const a=this.getPageByType(s);if(!(a!=null&&a.hasData())){S.EventEmitter.subscribeOnce("BX.Intranet.Settings:onPageComplete",(e=>{if(e.data.page.hasContent()){this.moveTo(e.data.page,i)}}))}S.EventEmitter.subscribeOnce("BX.Intranet.Settings:onAfterShowPage",(e=>{if(e.data.page.hasContent()){this.moveTo(e.data.page,i)}}));babelHelpers.classPrivateFieldLooseBase(this,te)[te].show(s)}))}getPageByType(e){return this.getPages().find((t=>t.getType()===e))}getCurrentPage(){return babelHelpers.classPrivateFieldLooseBase(this,se)[se]}getPrevPage(){return babelHelpers.classPrivateFieldLooseBase(this,ie)[ie]}changePage(e){if(!(e instanceof L.BaseSettingsPage)){console.log('Not found "'+type+'" page');return}if(e===babelHelpers.classPrivateFieldLooseBase(this,se)[se]){return}babelHelpers.classPrivateFieldLooseBase(this,ie)[ie]=babelHelpers.classPrivateFieldLooseBase(this,se)[se];babelHelpers.classPrivateFieldLooseBase(this,se)[se]=e}getPages(){return babelHelpers.classPrivateFieldLooseBase(this,te)[te].getChildrenElements()}updateAddressBar(){var e;let t=new URL(window.location.href);t.searchParams.set("page",(e=this.getCurrentPage())==null?void 0:e.getType());t.searchParams.delete("IFRAME");t.searchParams.delete("IFRAME_TYPE");top.window.history.replaceState(null,"",t.toString())}findByFieldName(e,t){var s;const i=L.RecursiveFilteringVisitor.startFrom(e,(e=>{if(e instanceof L.SettingsSection&&e.getSectionView().getId()===t){return true}if(e instanceof L.TabField&&e.getFieldView().getId()===t){return true}return(e instanceof L.SettingsField||e instanceof Z||e instanceof k)&&(e.getFieldView().getName()===t||e.getFieldView().getId()===t)}));return(s=i.shift())!=null?s:null}scrollToNode(e){const t=e.render();const s=45;const i=t.getBoundingClientRect().top;const a=i+window.pageYOffset-s;scrollTo({top:a,behavior:"smooth"})}moveTo(e,t){const s=this.findByFieldName(e,t);if(m.Type.isNil(s)){return}let i=false;L.AscendingOpeningVisitor.startFrom(s,(e=>{if(e instanceof L.SettingsRow){e.getRowView().show()}else if(e instanceof L.SettingsSection){e.getSectionView().toggle(true,false)}else if(e instanceof L.TabField){const t=e.getParentElement();if(t instanceof L.TabsField){t.activateTab(e,false)}}if(!i){i=e.highlight()}}));this.scrollToNode(s)}}let le=e=>e,re;var ne=babelHelpers.classPrivateFieldLooseKey("inputForSaveSortTools");var oe=babelHelpers.classPrivateFieldLooseKey("toolsWrapperRow");var ce=babelHelpers.classPrivateFieldLooseKey("draggable");var de=babelHelpers.classPrivateFieldLooseKey("mainSection");var be=babelHelpers.classPrivateFieldLooseKey("settingsSection");var pe=babelHelpers.classPrivateFieldLooseKey("renderToolsSelectors");var ue=babelHelpers.classPrivateFieldLooseKey("getSubToolHelpMessage");var he=babelHelpers.classPrivateFieldLooseKey("getToolsSelectorsItems");var _e=babelHelpers.classPrivateFieldLooseKey("getMainSection");var ge=babelHelpers.classPrivateFieldLooseKey("getSettingsSection");var ve=babelHelpers.classPrivateFieldLooseKey("getInputForSaveSortTools");var Te=babelHelpers.classPrivateFieldLooseKey("getDraggable");var Ee=babelHelpers.classPrivateFieldLooseKey("getToolsWrapperRow");var Pe=babelHelpers.classPrivateFieldLooseKey("getWarningMessage");class Le extends L.BaseSettingsPage{constructor(){super();Object.defineProperty(this,Pe,{value:He});Object.defineProperty(this,Ee,{value:Be});Object.defineProperty(this,Te,{value:we});Object.defineProperty(this,ve,{value:fe});Object.defineProperty(this,ge,{value:Fe});Object.defineProperty(this,_e,{value:me});Object.defineProperty(this,he,{value:Ne});Object.defineProperty(this,ue,{value:Ie});Object.defineProperty(this,pe,{value:Se});Object.defineProperty(this,ne,{writable:true,value:void 0});Object.defineProperty(this,oe,{writable:true,value:void 0});Object.defineProperty(this,ce,{writable:true,value:void 0});Object.defineProperty(this,de,{writable:true,value:void 0});Object.defineProperty(this,be,{writable:true,value:void 0});this.titlePage=m.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_TOOLS");this.descriptionPage=m.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_TOOLS")}getType(){return"tools"}appendSections(e){const t=new T.Row({content:this.getDescription().getContainer()});new L.SettingsRow({row:t,parent:babelHelpers.classPrivateFieldLooseBase(this,ge)[ge]()});if(this.hasValue("tools")){babelHelpers.classPrivateFieldLooseBase(this,pe)[pe]()}babelHelpers.classPrivateFieldLooseBase(this,ge)[ge]().renderTo(e)}getDescription(){const e=`\n\t\t\t${m.Loc.getMessage("INTRANET_SETTINGS_SECTION_TOOLS_DESCRIPTION")}\n\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show('redirect=detail&code=18213196')">\n\t\t\t\t${m.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE")}\n\t\t\t</a>\n\t\t`;return new BX.UI.Alert({text:e,inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true})}}function Se(){const e=this.getValue("tools");const t=[];Object.keys(e).forEach((s=>{var a;t.push(e[s].menuId);const l=e[s];const r=l.subgroups;let n=[];if(Object.keys(r).length>0){n=babelHelpers.classPrivateFieldLooseBase(this,he)[he](r,l)}const o=new i.SwitcherNested({id:l.code,title:l.name,link:this.getPermission().canEdit()?l["settings-path"]:null,infoHelperCode:this.getPermission().canEdit()?l["infohelper-slider"]:null,linkTitle:(a=l["settings-title"])!=null?a:m.Loc.getMessage("INTRANET_SETTINGS_SECTION_TOOLS_LINK_SETTINGS"),isChecked:l.enabled,mainInputName:l.code,isOpen:false,items:n,isDisabled:!this.getPermission().canEdit(),isDefault:l.default,helpMessage:!this.getPermission().canEdit()?m.Loc.getMessage("INTRANET_SETTINGS_ELEMENT_PERMISSION_MSG"):m.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_DISABLED",{"#TOOL#":l.name})});const c=new L.SettingsSection({section:o});m.Dom.style(c.getSectionView().render(),"margin-bottom","8px");m.Dom.attr(c.getSectionView().render(),"data-menu-id",l.menuId);babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee]().append(c.getSectionView().render());new L.SettingsRow({row:babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee](),parent:babelHelpers.classPrivateFieldLooseBase(this,ge)[ge](),child:c})}))}function Ie(e,t){if(!this.getPermission().canEdit()){return m.Loc.getMessage("INTRANET_SETTINGS_ELEMENT_PERMISSION_MSG")}if(e.disabled){return m.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_DISABLED",{"#TOOL#":e.name})}if(e.default){return m.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_MAIN_TOOL",{"#TOOL#":t!=null?t:""})}return""}function Ne(e,t){const s=[];Object.keys(e).forEach((a=>{var l,r,n;const o=e[a];if(m.Type.isNull(o.name)||m.Type.isNull(o.code)||m.Type.isNull(o.enabled)){return}const c=new i.SwitcherNestedItem({title:o.name,id:o.code,inputName:o.code,isChecked:o.enabled,settingsPath:this.getPermission().canEdit()?o["settings_path"]:null,settingsTitle:(l=o["settings_title"])!=null?l:m.Loc.getMessage("INTRANET_SETTINGS_SECTION_TOOLS_LINK_SETTINGS"),infoHelperCode:this.getPermission().canEdit()?o["infohelper-slider"]:null,isDisabled:!this.getPermission().canEdit(),isDefault:(r=(n=o.default)!=null?n:o.disabled)!=null?r:false,helpMessage:babelHelpers.classPrivateFieldLooseBase(this,ue)[ue](o,t.name)});if(o.disabled){m.Dom.style(c.getSwitcher().getNode(),{opacity:"0.4"})}else{S.EventEmitter.subscribe(c.getSwitcher(),"toggled",(()=>{var e;(e=this.getAnalytic())==null?void 0:e.addEventToggleTools(o.code,c.getSwitcher().isChecked())}))}if(o.code==="tool_subgroup_team_work_instant_messenger"){m.Event.bind(c.getSwitcher().getNode(),"click",(()=>{if(!c.getSwitcher().isChecked()){babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe](o.code,c.getSwitcher().getNode(),m.Loc.getMessage("INTRANET_SETTINGS_WARNING_TOOL_INSTANT_MESSENGER")).show()}}))}s.push(c)}));return s}function me(){if(babelHelpers.classPrivateFieldLooseBase(this,de)[de]){return babelHelpers.classPrivateFieldLooseBase(this,de)[de]}babelHelpers.classPrivateFieldLooseBase(this,de)[de]=new T.Section(this.getValue("sectionTools"));return babelHelpers.classPrivateFieldLooseBase(this,de)[de]}function Fe(){if(babelHelpers.classPrivateFieldLooseBase(this,be)[be]){return babelHelpers.classPrivateFieldLooseBase(this,be)[be]}babelHelpers.classPrivateFieldLooseBase(this,be)[be]=new L.SettingsSection({section:babelHelpers.classPrivateFieldLooseBase(this,_e)[_e](),parent:this});return babelHelpers.classPrivateFieldLooseBase(this,be)[be]}function fe(){if(babelHelpers.classPrivateFieldLooseBase(this,ne)[ne]){return babelHelpers.classPrivateFieldLooseBase(this,ne)[ne]}babelHelpers.classPrivateFieldLooseBase(this,ne)[ne]=m.Tag.render(re||(re=le`
			<input type="hidden" name="tools-sort">
		`));return babelHelpers.classPrivateFieldLooseBase(this,ne)[ne]}function we(){if(babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]){return babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]}babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]=new s.Draggable({container:[babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee]().render()],draggable:".--tool-selector",dragElement:".ui-section__dragdrop-icon-wrapper",type:s.Draggable.CLONE});return babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]}function Be(){if(babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]){return babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]}babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]=new T.Row({});return babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]}function He(e,t,s){return BX.PopupWindowManager.create(e,t,{content:s,darkMode:true,autoHide:true,angle:true,offsetLeft:14,bindOptions:{position:"bottom"},closeByEsc:true})}var Ae=babelHelpers.classPrivateFieldLooseKey("buildAdditionalSection");var ye=babelHelpers.classPrivateFieldLooseKey("buildProfileSection");var Oe=babelHelpers.classPrivateFieldLooseKey("buildInviteSection");class Re extends L.BaseSettingsPage{constructor(){super();Object.defineProperty(this,Oe,{value:De});Object.defineProperty(this,ye,{value:Me});Object.defineProperty(this,Ae,{value:Ce});this.titlePage=m.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_EMPLOYEE");this.descriptionPage=m.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_EMPLOYEE_BOX")}onSuccessDataFetched(e){super.onSuccessDataFetched(e);if(this.hasValue("IS_BITRIX_24")&&this.getValue("IS_BITRIX_24")){this.descriptionPage=m.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_EMPLOYEE");this.render().querySelector(".intranet-settings__page-header_desc").innerText=this.descriptionPage}}getType(){return"employee"}appendSections(e){let t=babelHelpers.classPrivateFieldLooseBase(this,ye)[ye]();t==null?void 0:t.renderTo(e);let s=babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe]();s==null?void 0:s.renderTo(e);let i=babelHelpers.classPrivateFieldLooseBase(this,Ae)[Ae]();i==null?void 0:i.renderTo(e)}}function Ce(){if(!this.hasValue("SECTION_ADDITIONAL")){return}let e=new T.Section(this.getValue("SECTION_ADDITIONAL"));let t=new L.SettingsSection({section:e,parent:this});if(this.hasValue("allow_company_pulse")){let e=new u.Checker(this.getValue("allow_company_pulse"));S.EventEmitter.subscribe(e.switcher,"toggled",(()=>{var t;(t=this.getAnalytic())==null?void 0:t.addEventConfigEmployee(A.CHANGE_QUICK_REG,e.isChecked())}));Re.addToSectionHelper(e,t)}return t}function Me(){if(!this.hasValue("SECTION_PROFILE")){return}let e=new T.Section(this.getValue("SECTION_PROFILE"));let t=new L.SettingsSection({section:e,parent:this});if(this.hasValue("fieldFormatName")){var s;let e=false;let i=this.getValue("fieldFormatName").current;for(let t of this.getValue("fieldFormatName").values){if(t.selected===true){e=true}}this.getValue("fieldFormatName").values.push({value:"other",name:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_OPTION_OTHER"),selected:!e});let a=new u.Selector({label:(s=this.getValue("fieldFormatName").label)!=null?s:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_NAME_FORMAT"),name:this.getValue("fieldFormatName").name+"_selector",items:this.getValue("fieldFormatName").values,hints:this.getValue("fieldFormatName").hints,current:this.getValue("fieldFormatName").current});let l=new L.SettingsField({fieldView:a});new L.SettingsRow({child:l,parent:t});let r=new u.TextInput({inputName:this.getValue("fieldFormatName").name,label:"",value:i});l=new L.SettingsField({fieldView:r});let n=new T.Row({isHidden:true});new L.SettingsRow({row:n,parent:t,child:l});if(!e){n.show()}a.getInputNode().addEventListener("change",(e=>{if(e.target.value==="other"){n.show()}else{r.getInputNode().value=a.getInputNode().value;n.hide()}}))}if(this.hasValue("fieldFormatPhoneNumber")){let e=new u.Selector(this.getValue("fieldFormatPhoneNumber"));Re.addToSectionHelper(e,t)}if(this.hasValue("fieldFormatAddress")){let e=new u.Selector(this.getValue("fieldFormatAddress"));let s=new T.Row({separator:this.hasValue("show_year_for_female")?"bottom":null,className:"--block"});Re.addToSectionHelper(e,t,s)}if(this.hasValue("show_year_for_female")){let e=new u.InlineChecker(this.getValue("show_year_for_female"));Re.addToSectionHelper(e,t)}return t}function De(){if(!this.hasValue("SECTION_INVITE")){return}let e=new T.Section(this.getValue("SECTION_INVITE"));let t=new L.SettingsSection({section:e,parent:this});if(this.hasValue("allow_register")){let e=new u.Checker(this.getValue("allow_register"));S.EventEmitter.subscribe(e.switcher,"toggled",(()=>{var t;(t=this.getAnalytic())==null?void 0:t.addEventConfigEmployee(A.CHANGE_QUICK_REG,e.isChecked())}));Re.addToSectionHelper(e,t)}if(this.hasValue("allow_invite_collabers")){let e=new u.Checker(this.getValue("allow_invite_collabers"));S.EventEmitter.subscribe(e.switcher,"toggled",(()=>{var t;(t=this.getAnalytic())==null?void 0:t.addEventConfigEmployee(A.CHANGE_COLLABERS_INVITATION,e.isChecked())}));Re.addToSectionHelper(e,t)}if(this.hasValue("show_fired_employees")){let e=new u.Checker(this.getValue("show_fired_employees"));Re.addToSectionHelper(e,t)}if(this.hasValue("general_chat_message_join")){let e=new u.Checker(this.getValue("general_chat_message_join"));Re.addToSectionHelper(e,t)}if(this.hasValue("allow_new_user_lf")){let e=new u.Checker(this.getValue("allow_new_user_lf"));Re.addToSectionHelper(e,t)}if(this.hasValue("feature_extranet")){let e=new u.Checker(this.getValue("feature_extranet"));S.EventEmitter.subscribe(e.switcher,"toggled",(()=>{var t;(t=this.getAnalytic())==null?void 0:t.addEventConfigEmployee(A.CHANGE_EXTRANET_INVITE,e.isChecked())}));Re.addToSectionHelper(e,t)}return t}let Ge=e=>e,Ve;var ke=babelHelpers.classPrivateFieldLooseKey("buttonBarElement");var Ue=babelHelpers.classPrivateFieldLooseKey("buttons");class Ke{constructor(e=[]){Object.defineProperty(this,ke,{writable:true,value:void 0});Object.defineProperty(this,Ue,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue]=e}render(){if(babelHelpers.classPrivateFieldLooseBase(this,ke)[ke]){return babelHelpers.classPrivateFieldLooseBase(this,ke)[ke]}babelHelpers.classPrivateFieldLooseBase(this,ke)[ke]=m.Tag.render(Ve||(Ve=Ge`<div class="intranet-settings__button_bar"></div>`));for(const e of babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue]){m.Dom.append(e.getContainer(),babelHelpers.classPrivateFieldLooseBase(this,ke)[ke])}return babelHelpers.classPrivateFieldLooseBase(this,ke)[ke]}getButtons(){return babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue]}addButton(e){babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue].push(e);m.Dom.append(e.getContainer(),this.render())}}var je=babelHelpers.classPrivateFieldLooseKey("button");class xe{constructor(){Object.defineProperty(this,je,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,je)[je]=new g.Button({className:"landing-button-trigger",round:true,noCaps:true,size:BX.UI.Button.Size.MEDIUM,color:BX.UI.Button.Color.LIGHT_BORDER})}setState(e){e.apply(babelHelpers.classPrivateFieldLooseBase(this,je)[je])}getButton(){return babelHelpers.classPrivateFieldLooseBase(this,je)[je]}}class Xe{apply(e){}}var $e=babelHelpers.classPrivateFieldLooseKey("landing");class Ye extends Xe{constructor(e){super();Object.defineProperty(this,$e,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,$e)[$e]=e}apply(e){e.setText(m.Loc.getMessage("INTRANET_SETTINGS_BUTTON_EDIT"));e.setDropdown(false);e.bindEvent("click",(()=>{this.openNewTab(babelHelpers.classPrivateFieldLooseBase(this,$e)[$e].edit_url)}))}openNewTab(e){window.open(e,"_blank").focus()}}var We=babelHelpers.classPrivateFieldLooseKey("landing");var qe=babelHelpers.classPrivateFieldLooseKey("menuRenderer");class ze extends Xe{constructor(e,t){super();Object.defineProperty(this,We,{writable:true,value:void 0});Object.defineProperty(this,qe,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,We)[We]=e;babelHelpers.classPrivateFieldLooseBase(this,qe)[qe]=t}apply(e){e.setText(m.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_SITE"));e.setDropdown(true);e.unbindEvent("click");e.setColor(BX.UI.Button.Color.PRIMARY);e.setMenu(babelHelpers.classPrivateFieldLooseBase(this,qe)[qe](babelHelpers.classPrivateFieldLooseBase(this,We)[We]))}}var Qe=babelHelpers.classPrivateFieldLooseKey("requestBuilder");var Ze=babelHelpers.classPrivateFieldLooseKey("menuRenderer");class Je extends Xe{constructor(e,t){super();Object.defineProperty(this,Qe,{writable:true,value:void 0});Object.defineProperty(this,Ze,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Qe)[Qe]=e;babelHelpers.classPrivateFieldLooseBase(this,Ze)[Ze]=t}apply(e){e.setText(m.Loc.getMessage("INTRANET_SETTINGS_BUTTON_CREATE"));e.setDropdown(false);e.bindEvent("click",(t=>{if(e.getState()===g.ButtonState.WAITING){return}e.setState(g.ButtonState.WAITING);babelHelpers.classPrivateFieldLooseBase(this,Qe)[Qe]().then((t=>{const s=t.data;e.setState(null);e.unbindEvent("click");if(s.is_public){new ze(s,babelHelpers.classPrivateFieldLooseBase(this,Ze)[Ze]).apply(e)}else{const t=new Ye(s);t.apply(e);t.openNewTab(s.edit_url)}}),(t=>{e.setState(null);L.ErrorCollection.showSystemError(t.errors[0].message)}))}))}}let et=e=>e,tt,st;var it=babelHelpers.classPrivateFieldLooseKey("landing");var at=babelHelpers.classPrivateFieldLooseKey("copyBtn");var lt=babelHelpers.classPrivateFieldLooseKey("landingCardElement");class rt{constructor(e){Object.defineProperty(this,it,{writable:true,value:void 0});Object.defineProperty(this,at,{writable:true,value:void 0});Object.defineProperty(this,lt,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,it)[it]=e}qrRender(){let e=m.Tag.render(tt||(tt=et`<div class="intranet-settings__qr_image-container"></div>`));new QRCode(e,{text:babelHelpers.classPrivateFieldLooseBase(this,it)[it].public_url,width:106,height:106});return e}render(){if(babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]){return babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]}const e=()=>{window.open(babelHelpers.classPrivateFieldLooseBase(this,it)[it].edit_url,"_blank").focus()};babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]=m.Tag.render(st||(st=et`
		<div class="intranet-settings__req-info-container">
			<div class="intranet-settings__req-info-inner">
				<div class="intranet-settings__qr_container">${0}</div>
				<div class="intranet-settings__qr_description-block">
					<div class="intranet-settings__qr_help-text">
						<h4 class="intranet-settings__qr_title">${0}</h4>
						<p class="intranet-settings__qr_text">
							${0}
						</p>
					</div>
					<div class="intranet-settings__qr_button">
						${0}
					</div>
				</div>
			</div>
			<div class="intranet-settings__qr_editor_box" onclick="${0}">
				<div class="intranet-settings__qr_editor_icon">
					<div class="ui-icon-set --paint-1"></div>
				</div>
				<div class="intranet-settings__qr_editor_name">${0}</div>
				<div class="ui-icon-set --expand intranet-settings__qr_editor_btn"></div>
			</div>
		</div>`),this.qrRender(),m.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_SITE"),m.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_HELP_TEXT",{"#SITE_URL#":babelHelpers.classPrivateFieldLooseBase(this,it)[it].public_url}),this.getCopyButton().getContainer(),e,m.Loc.getMessage("INTRANET_SETTINGS_BUTTON_EDIT_LANDING"));return babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]}getCopyButton(){if(babelHelpers.classPrivateFieldLooseBase(this,at)[at]){return babelHelpers.classPrivateFieldLooseBase(this,at)[at]}babelHelpers.classPrivateFieldLooseBase(this,at)[at]=new g.Button({text:m.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_COPY_LINK"),round:true,noCaps:true,className:"landing-copy-button",size:BX.UI.Button.Size.EXTRA_SMALL,color:BX.UI.Button.Color.SUCCESS,events:{click:()=>{if(BX.clipboard.copy(babelHelpers.classPrivateFieldLooseBase(this,it)[it].public_url)){top.BX.UI.Notification.Center.notify({content:m.Loc.getMessage("INTRANET_SETTINGS_BUTTON_LINK_WAS_COPIED"),autoHide:true})}}}});return babelHelpers.classPrivateFieldLooseBase(this,at)[at]}}var nt=babelHelpers.classPrivateFieldLooseKey("options");var ot=babelHelpers.classPrivateFieldLooseKey("menuRenderer");var ct=babelHelpers.classPrivateFieldLooseKey("defaultMenuRenderer");var dt=babelHelpers.classPrivateFieldLooseKey("getRequestCreateLanding");class bt{constructor(e,t){Object.defineProperty(this,dt,{value:ut});Object.defineProperty(this,ct,{value:pt});Object.defineProperty(this,nt,{writable:true,value:void 0});Object.defineProperty(this,ot,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,nt)[nt]=e;this.landingData=t;babelHelpers.classPrivateFieldLooseBase(this,ot)[ot]=babelHelpers.classPrivateFieldLooseBase(this,ct)[ct]}setMenuRenderer(e){babelHelpers.classPrivateFieldLooseBase(this,ot)[ot]=e}create(){const e=new xe;let t;if(babelHelpers.classPrivateFieldLooseBase(this,nt)[nt].is_connected&&!babelHelpers.classPrivateFieldLooseBase(this,nt)[nt].is_public){t=new Ye(babelHelpers.classPrivateFieldLooseBase(this,nt)[nt])}else if(babelHelpers.classPrivateFieldLooseBase(this,nt)[nt].is_connected&&babelHelpers.classPrivateFieldLooseBase(this,nt)[nt].is_public){t=new ze(babelHelpers.classPrivateFieldLooseBase(this,nt)[nt],babelHelpers.classPrivateFieldLooseBase(this,ot)[ot].bind(this))}else{t=new Je((()=>babelHelpers.classPrivateFieldLooseBase(this,dt)[dt]()),babelHelpers.classPrivateFieldLooseBase(this,ot)[ot].bind(this))}e.setState(t);return e.getButton()}}function pt(e){return{angle:true,maxWidth:396,closeByEsc:true,className:"intranet-settings__qr_popup",items:[{html:new rt(e).render(),className:"intranet-settings__qr_popup_item"}]}}function ut(){return m.ajax.runComponentAction("bitrix:intranet.settings","getLanding",{mode:"class",data:{companyId:this.landingData.company_id,requisiteId:this.landingData.requisite_id,bankRequisiteId:this.landingData.bank_requisite_id}})}let ht=e=>e,_t,gt,vt;var Tt=babelHelpers.classPrivateFieldLooseKey("options");var Et=babelHelpers.classPrivateFieldLooseKey("cardElement");var Pt=babelHelpers.classPrivateFieldLooseKey("requisiteFieldsElement");var Lt=babelHelpers.classPrivateFieldLooseKey("buttonBar");var St=babelHelpers.classPrivateFieldLooseKey("buildCompanyField");var It=babelHelpers.classPrivateFieldLooseKey("buildField");class Nt{constructor(e){Object.defineProperty(this,It,{value:Ft});Object.defineProperty(this,St,{value:mt});Object.defineProperty(this,Tt,{writable:true,value:void 0});Object.defineProperty(this,Et,{writable:true,value:void 0});Object.defineProperty(this,Pt,{writable:true,value:void 0});Object.defineProperty(this,Lt,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Tt)[Tt]=e}render(){if(babelHelpers.classPrivateFieldLooseBase(this,Et)[Et]){return babelHelpers.classPrivateFieldLooseBase(this,Et)[Et]}babelHelpers.classPrivateFieldLooseBase(this,Et)[Et]=m.Tag.render(_t||(_t=ht`
		<div class="intranet-settings__req_background">
			<div class="intranet-settings__req-card_wrapper">
				<div class="intranet-settings__header">
					<div class="intranet-settings__title"> <span class="ui-section__title-icon ui-icon-set --city"></span> <span>${0}</span></div>
					<div class="intranet-settings__contact_bar"> 
						<span class="intranet-settings__contact_bar_item">
							${0}
						</span> 
						<span class="intranet-settings__contact_bar_item">
							${0}
						</span> 
						<span class="intranet-settings__contact_bar_item">
							${0}
						</span> 
					</div>
				</div>
				${0}
				${0}
			</div>
		</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,Tt)[Tt].company.TITLE,babelHelpers.classPrivateFieldLooseBase(this,St)[St](m.Type.isStringFilled(babelHelpers.classPrivateFieldLooseBase(this,Tt)[Tt].phone)?babelHelpers.classPrivateFieldLooseBase(this,Tt)[Tt].phone:m.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB_PHONE")),babelHelpers.classPrivateFieldLooseBase(this,St)[St](m.Type.isStringFilled(babelHelpers.classPrivateFieldLooseBase(this,Tt)[Tt].email)?babelHelpers.classPrivateFieldLooseBase(this,Tt)[Tt].email:m.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB_EMAIL")),babelHelpers.classPrivateFieldLooseBase(this,St)[St](m.Type.isStringFilled(babelHelpers.classPrivateFieldLooseBase(this,Tt)[Tt].site)?babelHelpers.classPrivateFieldLooseBase(this,Tt)[Tt].site:m.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB_SITE")),this.requisiteFieldsRender(),this.getButtonsBar().render());return babelHelpers.classPrivateFieldLooseBase(this,Et)[Et]}getRequisiteUrl(){const e=babelHelpers.classPrivateFieldLooseBase(this,Tt)[Tt].landingData.requisite_id;if(e){return"/crm/company/requisite/"+e+"/"}else{return"/crm/company/requisite/0/?itemId="+babelHelpers.classPrivateFieldLooseBase(this,Tt)[Tt].company.ID}}getCompanyUrl(){if(babelHelpers.classPrivateFieldLooseBase(this,Tt)[Tt].company.ID===0){return"/crm/company/details/0/?mycompany=y&TITLE="+babelHelpers.classPrivateFieldLooseBase(this,Tt)[Tt].company.TITLE}else{return"/crm/company/details/"+babelHelpers.classPrivateFieldLooseBase(this,Tt)[Tt].company.ID+"/"}}requisiteFieldsRender(){if(babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt]){return babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt]}const e=babelHelpers.classPrivateFieldLooseBase(this,Tt)[Tt].fields;babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt]=m.Tag.render(gt||(gt=ht`<div class="intranet-settings__req-table_wrap"></div>`));for(let t of e){const e=m.Tag.render(vt||(vt=ht`
				<div class="intranet-settings__req-table_row">
					<div class="intranet-settings__table-cell">${0}</div>
					<div class="intranet-settings__table-cell">
						${0}
					</div>
				</div>
			`),t.TITLE,!babelHelpers.classPrivateFieldLooseBase(this,Tt)[Tt].company.ID?babelHelpers.classPrivateFieldLooseBase(this,St)[St](m.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB")):m.Type.isStringFilled(t.VALUE)?babelHelpers.classPrivateFieldLooseBase(this,It)[It](t.VALUE):babelHelpers.classPrivateFieldLooseBase(this,It)[It](m.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB")));m.Dom.append(e,babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt])}return babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt]}getButtonsBar(){if(babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt]){return babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt]}babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt]=new Ke;return babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt]}setButtonBar(e){babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt]=e}}function mt(e){return m.Dom.create("a",{text:e,attrs:{href:this.getCompanyUrl()}})}function Ft(e){return m.Dom.create("a",{text:e,attrs:{href:this.getRequisiteUrl()}})}let ft=e=>e,wt,Bt;class Ht extends L.BaseSettingsPage{constructor(){super();this.titlePage=m.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_REQUISITE");this.descriptionPage=m.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_REQUISITE");top.BX.addCustomEvent("onLocalStorageSet",(e=>{var t;let s=(t=e==null?void 0:e.key)!=null?t:null;if(s==="onCrmEntityUpdate"||s==="onCrmEntityCreate"||s==="BX.Crm.RequisiteSliderDetails:onSave"){this.reload()}}))}getType(){return"requisite"}appendSections(e){if(!this.hasValue("sectionRequisite")){return}let t=new T.Section(this.getValue("sectionRequisite"));const s=new L.SettingsSection({parent:this,section:t});const i=new BX.UI.Alert({text:`\n\t\t\t\t${m.Loc.getMessage("INTRANET_SETTINGS_SECTION_REQUISITE_DESCRIPTION")}\n\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show('redirect=detail&code=18213326')">\n\t\t\t\t\t${m.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE")}\n\t\t\t\t</a>\n\t\t\t`,inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});const a=new T.Row({content:i.getContainer()});t.append(a.render());if(this.hasValue("COMPANY")){let e=this.getValue("COMPANY");const s=this.getValue("REQUISITES");const i=this.getValue("PHONES");const a=this.getValue("SITES");const l=this.getValue("EMAILS");const r=this.getValue("LANDINGS");const n=this.getValue("LANDINGS_DATA");if(!m.Type.isArray(e)||e.length<=0){const e=new T.Row({content:this.cardRender({company:{ID:0,TITLE:this.getValue("BITRIX_TITLE")},fields:this.getValue("EMPTY_REQUISITE"),phone:[],email:[],site:[]})});t.append(e.render())}for(let o of e){const e=!m.Type.isNil(s[o.ID])?s[o.ID]:this.getValue("EMPTY_REQUISITE");const c=new T.Row({content:this.cardRender({company:o,fields:e,phone:!m.Type.isNil(i[o.ID])?i[o.ID]:[],email:!m.Type.isNil(l[o.ID])?l[o.ID]:[],site:!m.Type.isNil(a[o.ID])?a[o.ID]:[],landing:!m.Type.isNil(r[o.ID])?r[o.ID]:[],landingData:!m.Type.isNil(n[o.ID])?n[o.ID]:[]})});t.append(c.render())}}new L.SettingsRow({row:new T.Row({content:this.addCompanyLinkRender()}),parent:s});s.renderTo(e)}addCompanyLinkRender(){const e=m.Tag.render(wt||(wt=ft`
				<a class="ui-section__link" 
					href="/crm/company/details/0/?mycompany=y" target="_blank">
				${0}
				</a>
		`),m.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_ADD_COMPANY"));m.Event.bind(e,"click",(e=>{var t;(t=this.getAnalytic())==null?void 0:t.addEventConfigRequisite(A.OPEN_ADD_COMPANY)}));return m.Tag.render(Bt||(Bt=ft`<div class="ui-section__link_box">${0}</div>`),e)}cardRender(e){const t=new Nt(e);const s=new Ke;if(e.company.ID>0){const t=new bt(e.landing,e.landingData);t.setMenuRenderer((e=>{const t=new rt(e);m.Event.bind(t.getCopyButton().getContainer(),"click",(e=>{var t;(t=this.getAnalytic())==null?void 0:t.addEventConfigRequisite(A.COPY_LINK_CARD)}));return{angle:true,maxWidth:396,closeByEsc:true,className:"intranet-settings__qr_popup",items:[{html:t.render(),className:"intranet-settings__qr_popup_item"}]}}));const i=t.create();if(m.Dom.hasClass(i.getContainer(),"landing-button-trigger")){m.Event.bind(i.getContainer(),"click",(t=>{if(e.landing.is_connected&&!e.landing.is_public){var s;(s=this.getAnalytic())==null?void 0:s.addEventConfigRequisite(A.EDIT_CARD)}else if(!e.landing.is_connected&&!e.landing.is_public){var i;(i=this.getAnalytic())==null?void 0:i.addEventConfigRequisite(A.CREATE_CARD)}}))}s.addButton(i)}t.setButtonBar(s);return t.render()}}let At=e=>e,yt,Ot,Rt,Ct;var Mt=babelHelpers.classPrivateFieldLooseKey("buildNewsFeedSection");var Dt=babelHelpers.classPrivateFieldLooseKey("buildChatSection");var Gt=babelHelpers.classPrivateFieldLooseKey("buildChannelSection");var Vt=babelHelpers.classPrivateFieldLooseKey("buildDiskSection");class kt extends L.BaseSettingsPage{constructor(){super();Object.defineProperty(this,Vt,{value:xt});Object.defineProperty(this,Gt,{value:jt});Object.defineProperty(this,Dt,{value:Kt});Object.defineProperty(this,Mt,{value:Ut});this.titlePage=m.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_COMMUNICATION");this.descriptionPage=m.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_COMMUNICATION")}getType(){return"communication"}appendSections(e){let t=babelHelpers.classPrivateFieldLooseBase(this,Mt)[Mt]();t.renderTo(e);let s=babelHelpers.classPrivateFieldLooseBase(this,Dt)[Dt]();s.renderTo(e);if(this.hasValue("availableGeneralChannel")){let t=babelHelpers.classPrivateFieldLooseBase(this,Gt)[Gt]();t.renderTo(e)}let i=babelHelpers.classPrivateFieldLooseBase(this,Vt)[Vt]();i.renderTo(e)}}function Ut(){if(!this.hasValue("sectionFeed")){return}let e=new T.Section(this.getValue("sectionFeed"));let t=new L.SettingsSection({section:e,parent:this});if(this.hasValue("allow_livefeed_toall")){let e=new u.Checker(this.getValue("allow_livefeed_toall"));e.hideSeparator=true;let s=new L.SettingsField({fieldView:e});const i=new L.SettingsRow({parent:t,child:s});let a=new u.UserSelector({inputName:"livefeed_toall_rights[]",label:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_PUBLIC_MESS"),values:Object.values(this.getValue("arToAllRights")),enableDepartments:true,encodeValue:e=>{if(!m.Type.isNil(e.id)){return e.id==="all-users"?"AU":e.type+e.id.toString().split(":")[0]}return null},decodeValue:e=>{if(e==="UA"){return{type:"AU",id:""}}const t=e.match(/^(U|DR|D)(\d+)/);if(!m.Type.isArray(t)){return{type:null,id:null}}return{type:t[1],id:t[2]}}});s=new L.SettingsField({fieldView:a});const l=new T.Row({isHidden:!e.isChecked(),className:"ui-section__subrow"});new L.SettingsRow({row:l,parent:i,child:s});S.EventEmitter.subscribe(e.switcher,"toggled",(()=>{if(e.isChecked()){l.show()}else{l.hide()}}))}if(this.hasValue("default_livefeed_toall")){let e=new u.Checker(this.getValue("default_livefeed_toall"));kt.addToSectionHelper(e,t)}if(this.hasValue("ratingTextLikeY")){var s,i,a;const e=new u.TextInputInline({inputName:(s=this.getValue("ratingTextLikeY"))==null?void 0:s.name,label:(i=this.getValue("ratingTextLikeY").label)!=null?i:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_LIKE_INPUT"),hintTitle:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_TITLE_LIKE"),value:(a=this.getValue("ratingTextLikeY"))==null?void 0:a.current,valueColor:this.hasValue("ratingTextLikeY"),hintDesc:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_DESC_LIKE")});kt.addToSectionHelper(e,t)}return t}function Kt(){if(!this.hasValue("sectionChats")){return}let e=new T.Section(this.getValue("sectionChats"));let t=new L.SettingsSection({section:e,parent:this});if(this.hasValue("general_chat_can_post")){var s;let e=new u.Checker(this.getValue("allow_post_general_chat"));let i=new L.SettingsField({fieldView:e});let a=new L.SettingsRow({parent:t,child:i});let l=new u.Selector(this.getValue("general_chat_can_post"));i=new L.SettingsField({fieldView:l});let r=new T.Row({isHidden:!e.isChecked(),className:"ui-section__subrow --no-border"});kt.addToSectionHelper(l,a,r);let n=new u.UserSelector({inputName:"imchat_toall_rights[]",label:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_PUBLIC_MESS"),enableAll:false,values:Object.values((s=this.getValue("generalChatManagersList"))!=null?s:[]),encodeValue:e=>{if(!m.Type.isNil(e.id)){return e.id==="all-users"?"AU":"U"+e.id}return null},decodeValue:e=>{if(e==="UA"){return{type:"AU",id:""}}const t=e.match(/^(U)(\d+)/);if(!m.Type.isArray(t)){return{type:null,id:null}}return{type:t[1],id:t[2]}}});let o=new T.Row({content:n.render(),isHidden:this.getValue("general_chat_can_post").current!=="MANAGER",className:"ui-section__subrow --no-border"});kt.addToSectionHelper(n,a,o);const c=new T.SeparatorRow({isHidden:this.getValue("general_chat_can_post").current!=="MANAGER"});new L.SettingsRow({row:c,parent:a});S.EventEmitter.subscribe(e.switcher,"toggled",(()=>{if(e.isChecked()){r.show();if(l.getInputNode().value==="MANAGER"){o.show()}c.show()}else{r.hide();o.hide();c.hide()}}));l.getInputNode().addEventListener("change",(e=>{if(e.target.value==="MANAGER"){o.show()}else{o.hide()}}))}if(this.hasValue("general_chat_message_leave")){let e=new u.Checker(this.getValue("general_chat_message_leave"));kt.addToSectionHelper(e,t)}if(this.hasValue("general_chat_message_admin_rights")){let e=new u.Checker(this.getValue("general_chat_message_admin_rights"));kt.addToSectionHelper(e,t)}if(this.hasValue("url_preview_enable")){let e=new u.Checker(this.getValue("url_preview_enable"));kt.addToSectionHelper(e,t)}if(this.hasValue("isAutoDeleteMessagesEnabled")){const e=new u.Checker(this.getValue("isAutoDeleteMessagesEnabled"));kt.addToSectionHelper(e,t)}if(this.hasValue("create_overdue_chats")){let e=new u.Checker(this.getValue("create_overdue_chats"));kt.addToSectionHelper(e,t)}return t}function jt(){if(!this.hasValue("sectionChannels")){return}let e=new T.Section(this.getValue("sectionChannels"));let t=new L.SettingsSection({section:e,parent:this});if(this.hasValue("general_channel_can_post")){var s,i;let e=new u.Checker(this.getValue("allow_post_general_channel"));let a=new L.SettingsField({fieldView:e});let l=new L.SettingsRow({parent:t,child:a});let r=new u.Selector(this.getValue("general_channel_can_post"));a=new L.SettingsField({fieldView:r});let n=new T.Row({isHidden:!e.isChecked(),className:"ui-section__subrow --no-border"});kt.addToSectionHelper(r,l,n);let o=new u.UserSelector({inputName:"imchannel_toall_rights[]",label:(s=m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_PUBLIC_MESS_CHANNEL"))!=null?s:"",enableAll:false,values:Object.values((i=this.getValue("generalChannelManagersList"))!=null?i:[]),encodeValue:e=>{if(!m.Type.isNil(e.id)){return e.id==="all-users"?"AU":"U"+e.id}return null},decodeValue:e=>{if(e==="UA"){return{type:"AU",id:""}}const t=e.match(/^(U)(\d+)/);if(!m.Type.isArray(t)){return{type:null,id:null}}return{type:t[1],id:t[2]}}});let c=new T.Row({content:o.render(),isHidden:this.getValue("general_channel_can_post").current!=="MANAGER",className:"ui-section__subrow --no-border"});kt.addToSectionHelper(o,l,c);const d=new T.SeparatorRow({isHidden:this.getValue("general_channel_can_post").current!=="MANAGER"});new L.SettingsRow({row:d,parent:l});S.EventEmitter.subscribe(e.switcher,"toggled",(()=>{if(e.isChecked()){n.show();if(r.getInputNode().value==="MANAGER"){c.show()}d.show()}else{n.hide();c.hide();d.hide()}}));r.getInputNode().addEventListener("change",(e=>{if(e.target.value==="MANAGER"){c.show()}else{c.hide()}}))}return t}function xt(){if(!this.hasValue("sectionDisk")){return}let e=new T.Section(this.getValue("sectionDisk"));let t=new L.SettingsSection({section:e,parent:this});if(this.hasValue("DISK_VIEWER_SERVICE")){let e=new u.Selector(this.getValue("DISK_VIEWER_SERVICE"));kt.addToSectionHelper(e,t)}if(this.hasValue("DISK_LIMIT_PER_FILE")){var s;const e=m.Tag.render(yt||(yt=At`<span>${0}</span>`),m.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE"));let i=new u.Selector({label:(s=this.getValue("DISK_LIMIT_PER_FILE").label)!=null?s:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_MAX_FILE_LIMIT"),hintTitle:this.getValue("DISK_LIMIT_PER_FILE").hintTitle,name:this.getValue("DISK_LIMIT_PER_FILE").name,items:this.getValue("DISK_LIMIT_PER_FILE").values,hints:this.getValue("DISK_LIMIT_PER_FILE").hints,current:this.getValue("DISK_LIMIT_PER_FILE").current,isEnable:this.getValue("DISK_LIMIT_PER_FILE").isEnable,bannerCode:"limit_max_entries_in_document_history",helpDesk:"redirect=detail&code=18869612",helpMessageProvider:this.helpMessageProviderFactory(e)});let a=new T.Row({separator:"bottom",className:"--block"});if(!this.getValue("DISK_LIMIT_PER_FILE").isEnable){m.Event.bind(i.getInputNode(),"click",(()=>{var e;(e=this.getAnalytic())==null?void 0:e.addEventOpenHint(this.getValue("DISK_LIMIT_PER_FILE").name)}));m.Event.bind(e.querySelector("a"),"click",(()=>{var e;return(e=this.getAnalytic())==null?void 0:e.addEventOpenTariffSelector(this.getValue("DISK_LIMIT_PER_FILE").name)}))}kt.addToSectionHelper(i,t,a)}new L.SettingsRow({row:new T.SeparatorRow,parent:t});if(this.hasValue("disk_allow_edit_object_in_uf")){let e=new u.Checker(this.getValue("disk_allow_edit_object_in_uf"));let s=new T.Row({separator:"top",className:"--block"});kt.addToSectionHelper(e,t,s)}if(this.hasValue("disk_allow_autoconnect_shared_objects")){let e=new u.Checker(this.getValue("disk_allow_autoconnect_shared_objects"));kt.addToSectionHelper(e,t)}if(this.hasValue("disk_allow_use_external_link")){var i;const e=m.Tag.render(Ot||(Ot=At`<span>${0}</span>`),m.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE"));let s=new u.Checker({inputName:this.getValue("disk_allow_use_external_link").inputName,title:(i=this.getValue("disk_allow_use_external_link").label)!=null?i:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ALLOW_PUBLIC_LINK"),hintOn:this.getValue("disk_allow_use_external_link").hintOn,checked:this.getValue("disk_allow_use_external_link").checked,isEnable:this.getValue("disk_allow_use_external_link").isEnable,bannerCode:"limit_admin_share_link",helpDesk:this.getValue("disk_allow_use_external_link").helpDesk,helpMessageProvider:this.helpMessageProviderFactory(e)});if(!this.getValue("disk_allow_use_external_link").isEnable){S.EventEmitter.subscribe(s.switcher,"toggled",(()=>{var e;(e=this.getAnalytic())==null?void 0:e.addEventOpenHint("disk_allow_use_external_link")}));m.Event.bind(e.querySelector("a"),"click",(()=>{var e;return(e=this.getAnalytic())==null?void 0:e.addEventOpenTariffSelector("enable_pub_link")}))}kt.addToSectionHelper(s,t)}if(this.hasValue("disk_object_lock_enabled")){var a;const e=m.Tag.render(Rt||(Rt=At`<span>${0}</span>`),m.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE"));let s=new u.Checker({inputName:this.getValue("disk_object_lock_enabled").inputName,title:(a=this.getValue("disk_object_lock_enabled").label)!=null?a:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ALLOW_BLOCK_DOC"),hintOn:this.getValue("disk_object_lock_enabled").hintOn,checked:this.getValue("disk_object_lock_enabled").checked,isEnable:this.getValue("disk_object_lock_enabled").isEnable,bannerCode:"limit_document_lock",helpMessageProvider:this.helpMessageProviderFactory(e),helpDesk:this.getValue("disk_object_lock_enabled").helpDesk});if(!this.getValue("disk_object_lock_enabled").isEnable){S.EventEmitter.subscribe(s.switcher,"toggled",(()=>{var e;(e=this.getAnalytic())==null?void 0:e.addEventOpenHint("disk_object_lock_enabled")}));m.Event.bind(e.querySelector("a"),"click",(()=>{var e;return(e=this.getAnalytic())==null?void 0:e.addEventOpenTariffSelector("disk_object_lock_enabled")}))}kt.addToSectionHelper(s,t)}if(this.hasValue("disk_allow_use_extended_fulltext")){var l;const e=m.Tag.render(Ct||(Ct=At`<span>${0}</span>`),m.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_ENT",{"#TARIFF#":"ent250"}));let s=new u.Checker({inputName:this.getValue("disk_allow_use_extended_fulltext").inputName,title:(l=this.getValue("disk_allow_use_extended_fulltext").label)!=null?l:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ALLOW_SEARCH_DOC"),hintOn:this.getValue("disk_allow_use_extended_fulltext").hintOn,checked:this.getValue("disk_allow_use_extended_fulltext").checked,isEnable:this.getValue("disk_allow_use_extended_fulltext").isEnable,bannerCode:"limit_in_text_search",helpDesk:this.getValue("disk_allow_use_extended_fulltext").helpDesk,helpMessageProvider:this.helpMessageProviderFactory(e)});if(!this.getValue("disk_allow_use_extended_fulltext").isEnable){S.EventEmitter.subscribe(s.switcher,"toggled",(()=>{var e;(e=this.getAnalytic())==null?void 0:e.addEventOpenHint("disk_allow_use_extended_fulltext")}));m.Event.bind(e.querySelector("a"),"click",(()=>{var e;return(e=this.getAnalytic())==null?void 0:e.addEventOpenTariffSelector("disk_allow_use_extended_fulltext")}))}kt.addToSectionHelper(s,t)}return t}let Xt=e=>e,$t,Yt,Wt;var qt=babelHelpers.classPrivateFieldLooseKey("content");var zt=babelHelpers.classPrivateFieldLooseKey("title");class Qt extends L.SettingsField{constructor(e){const t=e.siteDomainOptions;e.fieldView=new u.TextInput({value:t.subDomainName,placeholder:t.subDomainName,label:m.Loc.getMessage("INTRANET_SETTINGS_SECTION_DOMAIN_NAME3"),id:"subDomainName",inputName:"subDomainName",isEnable:true});super(e);Object.defineProperty(this,qt,{writable:true,value:void 0});Object.defineProperty(this,zt,{writable:true,value:void 0});this.setParentElement(e.parent);this.getFieldView().setEventNamespace(this.getEventNamespace());this.getFieldView().getInputNode().setAttribute("autocomplete","off");let s=null;m.Event.bind(this.getFieldView().getInputNode(),"input",(()=>{clearTimeout(s);s=setTimeout((()=>{this.validateInput()}),1e3)}));this.options={hostname:t.hostname,subDomainName:t.subDomainName,mainDomainName:t.mainDomainName,isRenameable:t.isRenameable,occupiedDomains:t.occupiedDomains};this.options.mainDomainName=[".",this.options.mainDomainName].join("").replace("..",".")}validateInput(){let e=this.getFieldView().getInputNode().value;e=e.trim();if(e.length<3||e.length>60){this.getFieldView().setErrors([m.Loc.getMessage("INTRANET_SETTINGS_DOMAIN_RENAMING_LENGTH_ERROR")])}else if(!/^([a-zA-Z0-9]([a-zA-Z0-9\\-]{0,58})[a-zA-Z0-9])$/.test(e)){this.getFieldView().setErrors([m.Loc.getMessage("INTRANET_SETTINGS_DOMAIN_RENAMING_FORMAT_ERROR")])}else if(this.options.occupiedDomains.includes(e)){this.getFieldView().setErrors([m.Loc.getMessage("INTRANET_SETTINGS_DOMAIN_RENAMING_DOMAIN_EXISTS_ERROR")])}else{this.getFieldView().cleanError()}}cancel(){}render(){if(babelHelpers.classPrivateFieldLooseBase(this,qt)[qt]){return babelHelpers.classPrivateFieldLooseBase(this,qt)[qt]}if(this.options.isRenameable!==true){const e=m.Tag.render($t||($t=Xt`<div class="settings-tools-description-link">${0}</div>`),m.Loc.getMessage("INTRANET_SETTINGS_COPY"));BX.clipboard.bindCopyClick(e,{text:()=>this.options.hostname});babelHelpers.classPrivateFieldLooseBase(this,qt)[qt]=m.Tag.render(Yt||(Yt=Xt`
				<div>
					<div class="ui-section__field-label_box">
						<div class="ui-section__field-label">${0}</div>
					</div>
					<div class="intranet-settings__domain_box">
						<div class="intranet-settings__domain_name">${0}</div>
						${0}
					</div>
				</div>`),m.Loc.getMessage("INTRANET_SETTINGS_SECTION_DOMAIN_NAME4"),m.Text.encode(this.options.hostname),e)}else{babelHelpers.classPrivateFieldLooseBase(this,qt)[qt]=m.Tag.render(Wt||(Wt=Xt`<div id="${0}" class="ui-section__field-selector --no-border">
				<div class="ui-section__field-container">
					<div class="ui-section__field-label_box">
						<label class="ui-section__field-label" for="${0}">
							${0}
						</label> 
					</div>
					<div class="ui-section__field-inner">
						<div class="intarnet-settings__domain_inline-field">
							<div class="ui-ctl ui-ctl-textbox ui-ctl-block">
								${0}
							</div>
							<div class="intarnet-settings__domain_name">${0}</div>
						</div>
						${0}
					</div>
				</div>
			</div>`),this.getFieldView().getId(),this.getFieldView().getName(),this.getFieldView().getLabel(),this.getFieldView().getInputNode(),m.Text.encode(this.options.mainDomainName),this.getFieldView().renderErrors())}return babelHelpers.classPrivateFieldLooseBase(this,qt)[qt]}}function Zt(e,t){const s=e.querySelector('[data-role="logo"]');const i=e.querySelector('[data-role="title"]');const a=e.querySelector('[data-role="logo24"]');if(!s.hasAttribute("data-prev-display")){s.dataset.prevDisplay=s.style.display;i.dataset.prevDisplay=i.style.display;a.dataset.prevDisplay=a.style.display}if(m.Type.isUndefined(t.title)!==true){i.innerHTML=m.Text.encode(m.Type.isStringFilled(t.title)?t.title:"Bitrix")}if(m.Type.isUndefined(t.logo24)!==true){if(m.Type.isStringFilled(t.logo24)){delete a.dataset.visibility;if(s.style.display==="none"){a.style.removeProperty("display")}}else{a.dataset.visibility="hidden";a.style.display="none"}}if(m.Type.isUndefined(t.logo)!==true){if(m.Type.isPlainObject(t.logo)){s.style.backgroundImage='url("'+encodeURI(t.logo.src)+'")';s.style.removeProperty("display");i.style.display="none";a.style.display="none"}else{s.style.display="none";i.style.removeProperty("display");if(a.dataset.visibility!=="hidden"){a.style.removeProperty("display")}else{a.style.display="none"}}}}function Jt(e,t){const s=m.Type.isPlainObject(t)?t:{};const i=String(s.id).indexOf("dark:")===0?"dark":"light";m.Dom.removeClass(e,"--light --dark");m.Dom.addClass(e,"--"+i);if(m.Type.isStringFilled(s.previewImage)){e.style.backgroundImage='url("'+s.previewImage+'")';e.style.backgroundSize="cover"}else{e.style.removeProperty("backgroundImage");e.style.removeProperty("backgroundSize");e.style.background="none"}if(m.Type.isStringFilled(s.previewColor)){e.style.backgroundColor=s.previewColor}}let es=e=>e,ts,ss,is;var as=babelHelpers.classPrivateFieldLooseKey("themePicker");var ls=babelHelpers.classPrivateFieldLooseKey("initThemePicker");class rs extends u.BaseField{constructor(e){super({inputName:"themeId",isEnable:e.allowSetDefaultTheme,bannerCode:"limit_office_background_to_all"});Object.defineProperty(this,ls,{value:ns});Object.defineProperty(this,as,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,ls)[ls](e);this.applyTheme()}applyTheme(e){const t=e?babelHelpers.classPrivateFieldLooseBase(this,as)[as].getItemNode(e):null;let s=t?babelHelpers.classPrivateFieldLooseBase(this,as)[as].getTheme(t.dataset.themeId):babelHelpers.classPrivateFieldLooseBase(this,as)[as].getAppliedTheme();this.applyPortalThemePreview(s);if(e){S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:ThemePicker:Change",s);this.showSaveButton()}}applyPortalThemePreview(e){const t=this.render().querySelector('[data-role="preview"]');Jt(t,e);this.getInputNode().value=m.Type.isPlainObject(e)?e["id"]:""}showSaveButton(){this.getInputNode().disabled=false;this.getInputNode().form.dispatchEvent(new window.Event("change"))}getValue(){return this.getInputNode().value}getInputNode(){return this.render().querySelector('input[name="themeId"]')}applyPortalSettings(){}renderContentField(){document.querySelector(".ui-side-panel-content").style.overflow="hidden";const e=m.Tag.render(ts||(ts=es`
		<div class="intranet-theme-settings ui-section__row">
			<div class="ui-section__row theme-dialog-preview">
				<section data-role="preview" style="background-color: #0a51ae;" class="intranet-settings__main-widget_section --preview">
					<div class="intranet-settings__main-widget__bang"></div>
					<aside class="intranet-settings__main-widget__aside">
						<div class="intranet-settings__main-widget__aside_item --active"></div>
						<div class="intranet-settings__main-widget__aside_item"></div>
						<div class="intranet-settings__main-widget__aside_item"></div>
						<div class="intranet-settings__main-widget__aside_item"></div>
						<div class="intranet-settings__main-widget__aside_item"></div>
					</aside>
					<main class="intranet-settings__main-widget_main">
						<div class="intranet-settings__main-widget_header --with-logo">
							<div class="intranet-settings__main-widget_header_left">
								<div class="intranet-settings__main-widget_logo" data-role="logo"></div>
								<div class="intranet-settings__main-widget_name" data-role="title">Bitrix</div>
								<div class="intranet-settings__main-widget_logo24" data-role="logo24">24</div>
							</div>
							<div class="intranet-settings__main-widget_header_right">
								<div class="intranet-settings__main-widget_lane_item"></div>
								<div class="intranet-settings__main-widget_lane_item"></div>
							</div>
						</div>
						<div class="intranet-settings__main-widget_lane_box">
							<div class="intranet-settings__main-widget_lane_item"></div>
							<div class="intranet-settings__main-widget_lane_inline --space-between">
								<div class="intranet-settings__main-widget_lane_item --sm"></div>
								<div class="intranet-settings__main-widget_lane_item --bg-30"></div>
								<div class="intranet-settings__main-widget_lane_item --square"></div>
							</div>
							<div class="intranet-settings__main-widget_lane_inner">
								<div class="intranet-settings__main-widget_lane_item"></div>
								<div class="intranet-settings__main-widget_lane_item --bg-30"></div>
								<div class="intranet-settings__main-widget_lane_item --bg-30"></div>
							</div>
						</div>
					</main>
					<aside class="intranet-settings__main-widget__aside --right-side">
						<div class="intranet-settings__main-widget__aside_item --active"></div>
						<div class="intranet-settings__main-widget__aside_item"></div>
						<div class="intranet-settings__main-widget__aside_item"></div>
						<div class="intranet-settings__main-widget__aside_item"></div>
						<div class="intranet-settings__main-widget__aside_item"></div>
					</aside>
				</section>
			</div>
			<div class="ui-section__row theme-dialog-content" data-role="theme-container"></div>
			<input type="hidden" name="themeId" value="" disabled>
		</div>
		`));const t=m.Tag.render(ss||(ss=es`
			<div class="intranet-settings__theme-btn_box">
				<div class="intranet-settings__theme-btn" onclick="${0}">${0}</div>
			</div>
		`),this.handleNewThemeButtonClick.bind(this),m.Loc.getMessage("INTRANET_SETTINGS_THEME_UPLOAD_BTN"));const s=e.querySelector('div[data-role="theme-container"]');Array.from(babelHelpers.classPrivateFieldLooseBase(this,as)[as].getThemes()).forEach((e=>{const t=babelHelpers.classPrivateFieldLooseBase(this,as)[as].createItem(e);if(babelHelpers.classPrivateFieldLooseBase(this,as)[as].canSetDefaultTheme()!==true){m.Event.unbindAll(t,"click");if(e["default"]!==true){m.Dom.addClass(t,"--restricted");t.appendChild(m.Tag.render(is||(is=es`<div class="intranet-settings__theme_lock_box">${0}</div>`),this.renderLockElement()));m.Event.bind(t,"click",this.showBanner.bind(this))}}if(e["default"]===true){t.setAttribute("data-role","ui-ears-active")}s.appendChild(t)}));new r.Ears({container:s,noScrollbar:false}).init();e.appendChild(t);return e}handleNewThemeButtonClick(e){if(babelHelpers.classPrivateFieldLooseBase(this,as)[as].canSetDefaultTheme()!==true){return this.showBanner()}babelHelpers.classPrivateFieldLooseBase(this,as)[as].getNewThemeDialog().show()}handleLockButtonClick(){if(BX.getClass("BX.UI.InfoHelper")){BX.UI.InfoHelper.show("limit_office_background_to_all")}}}function ns(e){babelHelpers.classPrivateFieldLooseBase(this,as)[as]=new BX.Intranet.Bitrix24.ThemePicker(e);babelHelpers.classPrivateFieldLooseBase(this,as)[as].setThemes(e.themes);babelHelpers.classPrivateFieldLooseBase(this,as)[as].setBaseThemes(e.baseThemes);babelHelpers.classPrivateFieldLooseBase(this,as)[as].applyThemeAssets=()=>{};babelHelpers.classPrivateFieldLooseBase(this,as)[as].getContentContainer=()=>this.render().querySelector('div[data-role="theme-container"]');const t=babelHelpers.classPrivateFieldLooseBase(this,as)[as].handleRemoveBtnClick.bind(babelHelpers.classPrivateFieldLooseBase(this,as)[as]);babelHelpers.classPrivateFieldLooseBase(this,as)[as].handleRemoveBtnClick=e=>{const s=babelHelpers.classPrivateFieldLooseBase(this,as)[as].getItemNode(e);if(!s){return}t(e);this.applyPortalThemePreview(babelHelpers.classPrivateFieldLooseBase(this,as)[as].getTheme(babelHelpers.classPrivateFieldLooseBase(this,as)[as].getThemeId()));this.showSaveButton()};const s=babelHelpers.classPrivateFieldLooseBase(this,as)[as].handleItemClick.bind(babelHelpers.classPrivateFieldLooseBase(this,as)[as]);babelHelpers.classPrivateFieldLooseBase(this,as)[as].handleItemClick=e=>{s(e);this.applyTheme(e)};const i=babelHelpers.classPrivateFieldLooseBase(this,as)[as].addItem.bind(babelHelpers.classPrivateFieldLooseBase(this,as)[as]);babelHelpers.classPrivateFieldLooseBase(this,as)[as].addItem=e=>{i(e);this.applyPortalThemePreview(e);this.showSaveButton()}}var os=babelHelpers.classPrivateFieldLooseKey("fieldView");class cs extends L.SettingsField{constructor(e){e.fieldView=new rs(e.themePickerSettings);super(e);Object.defineProperty(this,os,{writable:true,value:void 0});if(e.portalSettings){this.setEventNamespace("BX.Intranet.Settings");Zt(this.getFieldView().render(),e.portalSettings);S.EventEmitter.subscribe(S.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":Portal:Change",(e=>{Zt(this.getFieldView().render(),e.getData())}))}}}let ds=e=>e,bs,ps,us;class hs extends u.TextInput{constructor(e){super({inputName:"logo",isEnable:e.isEnable,defaultValue:"default",bannerCode:"limit_admin_logo",helpDeskCode:123,helpMessageProvider:()=>{}});this.getInputNode().type="hidden";this.getInputNode().disabled=true}renderContentField(){return this.getInputNode()}}var _s=babelHelpers.classPrivateFieldLooseKey("content");var gs=babelHelpers.classPrivateFieldLooseKey("uploader");var vs=babelHelpers.classPrivateFieldLooseKey("siteLogo");var Ts=babelHelpers.classPrivateFieldLooseKey("hiddenContainer");var Es=babelHelpers.classPrivateFieldLooseKey("hiddenRemoveInput");var Ps=babelHelpers.classPrivateFieldLooseKey("loader");var Ls=babelHelpers.classPrivateFieldLooseKey("getFileContainer");var Ss=babelHelpers.classPrivateFieldLooseKey("renderAfterLoad");var Is=babelHelpers.classPrivateFieldLooseKey("showLoader");var Ns=babelHelpers.classPrivateFieldLooseKey("removeLoader");class ms extends L.SettingsField{constructor(e){e.fieldView=new hs({isEnable:e.canUserEditLogo});super(e);Object.defineProperty(this,Ns,{value:Bs});Object.defineProperty(this,Is,{value:ws});Object.defineProperty(this,Ss,{value:fs});Object.defineProperty(this,Ls,{value:Fs});Object.defineProperty(this,_s,{writable:true,value:void 0});Object.defineProperty(this,gs,{writable:true,value:void 0});Object.defineProperty(this,vs,{writable:true,value:void 0});Object.defineProperty(this,Ts,{writable:true,value:void 0});Object.defineProperty(this,Es,{writable:true,value:void 0});Object.defineProperty(this,Ps,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,vs)[vs]=e.siteLogoOptions;this.siteLogoLabel=e.siteLogoLabel;this.setEventNamespace("BX.Intranet.Settings")}initUploader({TileWidget:e,StackWidget:t,StackWidgetSize:s}){const i={maxFileCount:1,acceptOnlyImages:true,multiple:false,acceptedFileTypes:["image/png"],events:{onError:function(e){console.error("File Uploader onError",e.getData().error)},"File:onError":this.onFileError.bind(this),"File:onAdd":this.onLogoAdd.bind(this),"File:onRemove":this.onLogoRemove.bind(this),onBeforeFilesAdd:this.getFieldView().isEnable()?()=>{}:e=>{this.getFieldView().showBanner();e.preventDefault()}},allowReplaceSingle:true,hiddenFieldName:"logo_file",hiddenFieldsContainer:babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls](),assignAsFile:true,imageResizeWidth:444,imageResizeHeight:110,imageResizeMode:"contain",imageResizeMimeType:"image/png",imagePreviewWidth:444,imagePreviewHeight:110,imagePreviewResizeMode:"contain",files:babelHelpers.classPrivateFieldLooseBase(this,vs)[vs]?[[1,{serverFileId:babelHelpers.classPrivateFieldLooseBase(this,vs)[vs].id,serverId:babelHelpers.classPrivateFieldLooseBase(this,vs)[vs].id,type:"image/png",width:babelHelpers.classPrivateFieldLooseBase(this,vs)[vs].width,height:babelHelpers.classPrivateFieldLooseBase(this,vs)[vs].height,treatImageAsFile:true,downloadUrl:babelHelpers.classPrivateFieldLooseBase(this,vs)[vs].src,serverPreviewUrl:babelHelpers.classPrivateFieldLooseBase(this,vs)[vs].src,serverPreviewWidth:babelHelpers.classPrivateFieldLooseBase(this,vs)[vs].width,serverPreviewHeight:babelHelpers.classPrivateFieldLooseBase(this,vs)[vs].height,src:babelHelpers.classPrivateFieldLooseBase(this,vs)[vs].src,preload:true}]]:null};babelHelpers.classPrivateFieldLooseBase(this,gs)[gs]=new t(i,{size:s.LARGE});return this}onFileError(e){console.error("File Error",e.getData().error);S.EventEmitter.subscribeOnce(S.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":onAfterShowPage",this.removeFailedLogo.bind(this));const t=this.getParentElement();if(t){S.EventEmitter.subscribeOnce(t.getFieldView(),"onActive",this.removeFailedLogo.bind(this))}}removeFailedLogo(){const e=babelHelpers.classPrivateFieldLooseBase(this,gs)[gs].getUploader().getFiles()[0];if(e&&e.isLoadFailed()){babelHelpers.classPrivateFieldLooseBase(this,gs)[gs].getUploader().removeFiles()}}onLogoAdd(e){S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":Portal:Change",new S.BaseEvent({data:{logo:{src:e.getData().file.getClientPreviewUrl()}}}));this.getFieldView().getInputNode().disabled=false;this.getFieldView().getInputNode().value="add";this.getFieldView().getInputNode().form.dispatchEvent(new window.Event("change"))}onLogoRemove(e){S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":Portal:Change",new S.BaseEvent({data:{logo:null}}));this.getFieldView().getInputNode().disabled=false;this.getFieldView().getInputNode().value="remove";this.getFieldView().getInputNode().form.dispatchEvent(new window.Event("change"))}getName(){return"logo"}cancel(){}render(){if(babelHelpers.classPrivateFieldLooseBase(this,_s)[_s]){return babelHelpers.classPrivateFieldLooseBase(this,_s)[_s]}babelHelpers.classPrivateFieldLooseBase(this,_s)[_s]=m.Tag.render(bs||(bs=ds`<div></div>`));babelHelpers.classPrivateFieldLooseBase(this,Is)[Is]();m.Runtime.loadExtension("ui.uploader.stack-widget").then((e=>{this.initUploader(e);babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss]();babelHelpers.classPrivateFieldLooseBase(this,Ns)[Ns]()}));return babelHelpers.classPrivateFieldLooseBase(this,_s)[_s]}}function Fs(){if(!babelHelpers.classPrivateFieldLooseBase(this,Ts)[Ts]){babelHelpers.classPrivateFieldLooseBase(this,Ts)[Ts]=document.createElement("div")}return babelHelpers.classPrivateFieldLooseBase(this,Ts)[Ts]}function fs(){var e;const t=m.Tag.render(ps||(ps=ds`<div></div>`));const s=m.Tag.render(us||(us=ds`<div>
				<div class="ui-section__field-label">${0}</div>
				${0}
				<div class="ui-section__field-label">${0}</div>
				${0}
				${0}
				${0}
			</div>`),(e=this.siteLogoLabel)!=null?e:m.Loc.getMessage("INTRANET_SETTINGS_SECTION_TAB_TITLE_WIDGET_LOGO_TITLE1"),t,m.Loc.getMessage("INTRANET_SETTINGS_SECTION_TAB_TITLE_WIDGET_LOGO_TITLE2"),this.getFieldView().getInputNode(),babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls](),this.getFieldView().renderErrors());babelHelpers.classPrivateFieldLooseBase(this,gs)[gs].renderTo(t);m.Dom.replace(babelHelpers.classPrivateFieldLooseBase(this,_s)[_s],s)}function ws(){babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps]=new N.Loader({target:babelHelpers.classPrivateFieldLooseBase(this,_s)[_s],color:"rgba(82, 92, 105, 0.9)",mode:"inline"});babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps].show().then((()=>{console.log("The loader is shown")}))}function Bs(){if(babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps]){babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps].destroy();babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps]=null}}let Hs=e=>e,As;var ys=babelHelpers.classPrivateFieldLooseKey("container");class Os extends S.EventEmitter{constructor(e,t){super();Object.defineProperty(this,ys,{writable:true,value:void 0});this.setEventNamespace("BX.Intranet.Settings");Zt(this.render(),e);S.EventEmitter.subscribe(S.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":Portal:Change",this.onChange.bind(this));if(t){Jt(this.render(),t==null?void 0:t.theme);S.EventEmitter.subscribe(S.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":ThemePicker:Change",this.onSetTheme.bind(this))}}onChange(e){Zt(this.render(),e.getData())}onSetTheme(e){Jt(this.render(),e.getData())}render(){if(!babelHelpers.classPrivateFieldLooseBase(this,ys)[ys]){babelHelpers.classPrivateFieldLooseBase(this,ys)[ys]=m.Tag.render(As||(As=Hs`
			<section class="intranet-settings__main-widget_section">
				<div class="intranet-settings__main-widget__bang"></div>
					<div class="intranet-settings__main-widget_bg"></div>
					<div class="intranet-settings__main-widget_pos-box">
						<aside class="intranet-settings__main-widget__aside">
							<div class="intranet-settings__main-widget__aside_item --active"></div>
							<div class="intranet-settings__main-widget__aside_item"></div>
							<div class="intranet-settings__main-widget__aside_item"></div>
							<div class="intranet-settings__main-widget__aside_item"></div>
							<div class="intranet-settings__main-widget__aside_item"></div>
							<div class="intranet-settings__main-widget__aside_item"></div>
							<div class="intranet-settings__main-widget__aside_item"></div>
							<div class="intranet-settings__main-widget__aside_item"></div>
							<div class="intranet-settings__main-widget__aside_item"></div>
							<div class="intranet-settings__main-widget__aside_item"></div>
							<div class="intranet-settings__main-widget__aside_item"></div>
							<div class="intranet-settings__main-widget__aside_item"></div>
							<div class="intranet-settings__main-widget__aside_item"></div>
						</aside>
						<main class="intranet-settings__main-widget_main">
						<div class="intranet-settings__main-widget_header"> 
						<!-- statement class. depends of content --with-logo -->
							<div class="intranet-settings__main-widget_logo" data-role="logo"></div>
							<div class="intranet-settings__main-widget_name" data-role="title">Bitrix</div>
							<div class="intranet-settings__main-widget_logo24" data-role="logo24">24</div>
						</div>
						<div class="intranet-settings__main-widget_lane_box">
							<div class="intranet-settings__main-widget_lane_item"></div>
							<div class="intranet-settings__main-widget_lane_inline">
								<div class="intranet-settings__main-widget_lane_item --sm"></div>
								<div class="intranet-settings__main-widget_lane_item --bg-30"></div>
							</div>
							<div class="intranet-settings__main-widget_lane_inner">
								<div class="intranet-settings__main-widget_lane_item"></div>
								<div class="intranet-settings__main-widget_lane_item --bg-30"></div>
								<div class="intranet-settings__main-widget_lane_item --bg-30"></div>
								<div class="intranet-settings__main-widget_lane_item --bg-30"></div>
								<div class="intranet-settings__main-widget_lane_item --bg-30"></div>
								<div class="intranet-settings__main-widget_lane_item --bg-30"></div>
								<div class="intranet-settings__main-widget_lane_item --bg-30"></div>
								<div class="intranet-settings__main-widget_lane_item --bg-30"></div>
								<div class="intranet-settings__main-widget_lane_item --bg-30"></div>
								<div class="intranet-settings__main-widget_lane_item --bg-30"></div>
								<div class="intranet-settings__main-widget_lane_item --bg-30"></div>
								<div class="intranet-settings__main-widget_lane_item --bg-30"></div>
							</div>
						</div>
					</main>
					</div>				
			</section>`))}return babelHelpers.classPrivateFieldLooseBase(this,ys)[ys]}}let Rs=e=>e,Cs,Ms,Ds;var Gs=babelHelpers.classPrivateFieldLooseKey("headerWidgetRenderAlternative");var Vs=babelHelpers.classPrivateFieldLooseKey("getOwnDomainTabBody");class ks extends L.BaseSettingsPage{constructor(){super();Object.defineProperty(this,Vs,{value:Ks});Object.defineProperty(this,Gs,{value:Us});this.titlePage=m.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_PORTAL");this.descriptionPage=m.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_PORTAL");S.EventEmitter.subscribe(S.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":Portal:Change",(e=>{if(!m.Type.isNil(e.data.title)){var t;(t=this.getAnalytic())==null?void 0:t.addEventConfigPortal(A.CHANGE_PORTAL_NAME)}else if(!m.Type.isNil(e.data.logo)){var s;(s=this.getAnalytic())==null?void 0:s.addEventConfigPortal(A.CHANGE_PORTAL_LOGO)}}));S.EventEmitter.subscribe(S.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":ThemePicker:Change",(e=>{var t,s;(t=this.getAnalytic())==null?void 0:t.addEventChangeTheme((s=e.data)==null?void 0:s.id)}))}getType(){return"portal"}headerWidgetRender(){return""}getSections(){return[this.buildSiteTitleSection(this.getValue("portalSettings"),this.getValue("portalThemeSettings"),this.getValue("portalSettingsLabels")),this.getValue("portalDomainSettings")?this.buildDomainSection(this.getValue("portalDomainSettings")):null,this.buildThemeSection(this.getValue("portalThemeSettings"),this.getValue("portalSettings"))].filter((e=>e instanceof L.SettingsSection))}buildSiteTitleSection(e,t,s){if(!this.hasValue("sectionCompanyTitle")){return}const i=new T.Section(this.getValue("sectionCompanyTitle"));const a=new L.SettingsSection({parent:this,section:i});i.append(new T.Row({content:new o.Alert({text:m.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_SITE_TITLE_DESCRIPTION"),inline:true,size:o.AlertSize.SMALL,color:o.AlertColor.PRIMARY}).getContainer()}).render());const l=new L.SettingsRow({row:new T.Row({className:"intranet-settings__grid_box"}),parent:a});const r=new Os(e,t);const n=new L.SettingsRow({row:new T.Row({className:"intranet-settings__site-logo_subrow --no-padding --bottom-separator --block"}),parent:l});const c=new L.TabsField({parent:n});const d=new L.TabField({parent:c,tabsOptions:this.getValue("tabCompanyTitle")});const b=new T.Row({});const p=new Z({parent:b,siteTitleOptions:e,siteTitleLabels:s,helpMessages:{site:this.helpMessageProviderFactory()}});new L.SettingsRow({row:b,parent:d,child:p});new L.SettingsRow({parent:d,child:p.getLogo24Field()});const h=new L.TabField({parent:c,tabsOptions:this.getValue("tabCompanyLogo")});const _=new ms({siteLogoLabel:this.getValue("portalSettingsLabels").logo,siteLogoOptions:this.getValue("portalSettings").logo,canUserEditLogo:this.getValue("portalSettings").canUserEditLogo});new L.SettingsRow({parent:h,child:_});c.activateTab(d);new L.SettingsRow({row:new T.Row({content:r.render(),className:"intranet-settings__site-logo_subrow --no-padding"}),parent:l});new L.SettingsRow({row:new T.SeparatorRow,parent:a});new L.SettingsRow({parent:a,child:new L.SettingsField({fieldView:new u.TextInput({inputName:"name",label:this.getValue("portalSettingsLabels").name,value:this.getValue("portalSettings").name,placeholder:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_COMPANY_TITLE"),inputDefaultWidth:true})})});return a}buildDomainSection(e){if(!this.hasValue("sectionSiteDomain")){return}const t=new T.Section(this.getValue("sectionSiteDomain"));const s=new L.SettingsSection({parent:this,section:t});t.append(new T.Row({content:new o.Alert({text:`\n\t\t\t\t\t\t${m.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_SITE_DOMAIN_DESCRIPTION")}\n\t\t\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show('redirect=detail&code=18213298')">\n\t\t\t\t\t\t\t${m.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE")}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t`,inline:true,size:o.AlertSize.SMALL,color:o.AlertColor.PRIMARY}).getContainer()}).render());const i=new L.SettingsRow({parent:s});const a=new L.TabsField({parent:i});const l=new L.TabField({parent:a,tabsOptions:this.getValue("tabDomainPrefix")});const r=new Qt({siteDomainOptions:e,helpMessages:{site:this.helpMessageProviderFactory()}});m.Event.bind(r.getFieldView().getInputNode(),"keydown",(()=>{var e;(e=this.getAnalytic())==null?void 0:e.addEventConfigPortal(A.CHANGE_PORTAL_SITE)}));const n=new T.Row({content:r.render()});new L.SettingsRow({row:n,parent:l,child:r});const c=new L.TabField({parent:a,tabsOptions:this.getValue("tabDomain")});const d=new T.Row({content:babelHelpers.classPrivateFieldLooseBase(this,Vs)[Vs](e)});new L.SettingsRow({row:d,parent:c});a.activateTab(l);return s}buildThemeSection(e,t){if(!this.hasValue("sectionSiteTheme")){return}const s=new T.Section(this.getValue("sectionSiteTheme"));const i=new L.SettingsSection({section:s,parent:this});new L.SettingsRow({row:new T.Row({content:new o.Alert({text:`\n\t\t\t\t\t\t${m.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_PORTAL_THEME_DESCRIPTION")}\n\t\t\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show('redirect=detail&code=18325288')">\n\t\t\t\t\t\t\t${m.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE")}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t`,inline:true,size:o.AlertSize.SMALL,color:o.AlertColor.PRIMARY}).getContainer()}),parent:i});new cs({parent:i,portalSettings:t,themePickerSettings:e});return i}}function Us(){if(!this.hasValue("portalSettings")){return""}const e=this.getValue("portalSettings");const t=this.getValue("portalThemeSettings");const s=this.getValue("portalDomainSettings");const i=m.Tag.render(Cs||(Cs=Rs`
		<div class="intranet-settings__header-widget_box">
			<div class="intranet-settings__header-widget_main">
				<div class="intranet-settings__header-widget_icon" data-role="logo"></div>
				<div class="intranet-settings__header-widget_name" data-role="title">Bitrix</div>
				<div class="intranet-settings__header-widget_logo24" data-role="logo24">24</div>
			</div>
			<div class="intranet-settings__header-widget__link_box">
				<div class="intranet-settings__header-widget__link_value">${0}</div>
				<div data-role="copy" class="ui-icon-set --link-3 intranet-settings__header-widget__link_btn"></div>
			</div>
		</div>`),m.Text.encode(s.hostname));Zt(i,e);Jt(i,t==null?void 0:t.theme);const a=i.querySelector('[data-role="copy"]');BX.clipboard.bindCopyClick(a,{text:()=>s.hostname});return i}function Ks(e){const t=m.Tag.render(Ms||(Ms=Rs`<div class="ui-icon-set --copy-plates intranet-settings__domain__list_btn"></div>`));const s=e.exampleDns.join("<br>");BX.clipboard.bindCopyClick(t,{text:()=>s.replaceAll("<br>","\n")});const i=m.Tag.render(Ds||(Ds=Rs`<div class="intranet-settings__domain__list_box">
						<ul class="intranet-settings__domain__list">
							<li class="intranet-settings__domain__list_item">
								${0}
								<div class="intranet-settings__domain_box">
									${0}
									${0}
								</div>
							</li>
							<li class="intranet-settings__domain__list_item">
								${0}
							</li>
							<li class="intranet-settings__domain__list_item">
								${0}
							</li>
						</ul>
						<a target="_blank" href="/settings/support.php" class="settings-tools-description-link">${0}</a>
					</div>`),m.Loc.getMessage("INTRANET_SETTINGS_OWN_DOMAIN_HELP1"),s,t,m.Loc.getMessage("INTRANET_SETTINGS_OWN_DOMAIN_HELP2"),m.Loc.getMessage("INTRANET_SETTINGS_OWN_DOMAIN_HELP3"),m.Loc.getMessage("INTRANET_SETTINGS_WRITE_TO_SUPPORT"));if(e.isCustomizable!==true){m.Event.bind(i.querySelector("a.settings-tools-description-link"),"click",(e=>{BX.UI.InfoHelper.show("limit_office_own_domain");e.preventDefault();return false}))}return i}let js=e=>e,xs,Xs,$s;class Ys{}Ys.NOT_ADMIN="not_admin";Ys.BOUND="bound";Ys.MAIL="mail";Ys.EMPLOYEE="employee";Ys.NETWORK="network";Ys.DEFAULT="default";var Ws=babelHelpers.classPrivateFieldLooseKey("container");var qs=babelHelpers.classPrivateFieldLooseKey("verificationOptions");class zs extends S.EventEmitter{constructor(e){super();Object.defineProperty(this,Ws,{writable:true,value:void 0});Object.defineProperty(this,qs,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,qs)[qs]=e;this.setEventNamespace("BX.Intranet.Settings:PortalDeleteForm")}getDescription(){return m.Tag.render(xs||(xs=js`
			${0}
		`),m.Loc.getMessage("INTRANET_SETTINGS_SECTION_CONFIGURATION_DESCRIPTION_DELETE_PORTAL_MSGVER_1",{"#MORE_DETAILS#":this.getMoreDetails()}))}getMoreDetails(){return`\n\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show('redirect=detail&code=19566456')">\n\t\t\t\t${m.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE")}\n\t\t\t</a>\n\t\t`}getBodyClass(){return"--warning"}getConfirmButtonText(){return m.Loc.getMessage("INTRANET_SETTINGS_CONFIRM_ACTION_DELETE_PORTAL")}getInputContainer(){}getContainer(){if(!babelHelpers.classPrivateFieldLooseBase(this,Ws)[Ws]){babelHelpers.classPrivateFieldLooseBase(this,Ws)[Ws]=m.Tag.render(Xs||(Xs=js`
				<div class="intranet-settings__portal-delete-form_wrapper ${0}">
					<div class="intranet-settings__portal-delete-form_body">
						<div class="intranet-settings__portal-delete-icon-wrapper">
							<div class="ui-icon-set --warning"></div>
						</div>
						<div class="intranet-settings__portal-delete-form_description-wrapper">
							<span class="intranet-settings__portal-delete-form_description">
								${0}
							</span>
							${0}
						</div>
					</div>
					${0}
				</div>
			`),this.getBodyClass(),this.getDescription(),this.getInputContainer(),this.getButtonContainer())}return babelHelpers.classPrivateFieldLooseBase(this,Ws)[Ws]}onConfirmEventHandler(){this.getConfirmButton().setWaiting(true);top.BX.Runtime.loadExtension("bitrix24.portal-delete").then((e=>{const{PortalDelete:t}=e;const s=new t(babelHelpers.classPrivateFieldLooseBase(this,qs)[qs]);s.showCheckwordPopup();this.getConfirmButton().setWaiting(false)}))}getButtonContainer(){return m.Tag.render($s||($s=js`
			<span class="intranet-settings__portal-delete-form_buttons-wrapper">
				${0}
			</span>
		`),this.getConfirmButton().getContainer())}getConfirmButton(){if(!this.confirmButton){var e;this.confirmButton=new g.Button({text:(e=this.getConfirmButtonText())!=null?e:"",noCaps:true,round:true,className:"--confirm",events:{click:()=>{this.onConfirmEventHandler()}},props:{"data-bx-role":"delete-portal-confirm"}})}return this.confirmButton}sendChangeFormEvent(e){this.emit("updateForm",new S.BaseEvent({data:{type:e!=null?e:null}}))}}let Qs=e=>e,Zs;var Js=babelHelpers.classPrivateFieldLooseKey("isFreeLicense");class ei extends zs{constructor(e){super();Object.defineProperty(this,Js,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Js)[Js]=e}getDescription(){return m.Tag.render(Zs||(Zs=Qs`
			${0}
		`),m.Loc.getMessage("INTRANET_SETTINGS_SECTION_CONFIGURATION_DESCRIPTION_DELETE_PORTAL_EMPLOYEE",{"#MORE_DETAILS#":this.getMoreDetails()}))}getConfirmButtonText(){return m.Loc.getMessage("INTRANET_SETTINGS_CONFIRM_ACTION_DELETE_PORTAL_FIRE_EMPLOYEE")}onConfirmEventHandler(){this.getConfirmButton().setWaiting(true);BX.SidePanel.Instance.open("/company/?apply_filter=Y&FIRED=N",{events:{onCloseComplete:()=>{m.ajax.runAction("bitrix24.portal.getActiveUserCount").then((e=>{this.getConfirmButton().setWaiting(false);if(e.data<=1){this.sendChangeFormEvent(babelHelpers.classPrivateFieldLooseBase(this,Js)[Js]?Ys.DEFAULT:Ys.MAIL)}})).catch((e=>{this.getConfirmButton().setWaiting(false);e.errors.forEach((e=>{console.log(e.message)}))}))}}})}}let ti=e=>e,si;var ii=babelHelpers.classPrivateFieldLooseKey("mailForRequest");var ai=babelHelpers.classPrivateFieldLooseKey("portalUrl");var li=babelHelpers.classPrivateFieldLooseKey("mailLink");var ri=babelHelpers.classPrivateFieldLooseKey("getMailLink");class ni extends zs{constructor(e,t){super();Object.defineProperty(this,ri,{value:oi});Object.defineProperty(this,ii,{writable:true,value:void 0});Object.defineProperty(this,ai,{writable:true,value:void 0});Object.defineProperty(this,li,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,ii)[ii]=e;babelHelpers.classPrivateFieldLooseBase(this,ai)[ai]=t}getConfirmButtonText(){return m.Loc.getMessage("INTRANET_SETTINGS_CONFIRM_ACTION_DELETE_PORTAL_MAIL",{"#MAIL#":babelHelpers.classPrivateFieldLooseBase(this,ii)[ii]})}onConfirmEventHandler(){top.window.location.href=babelHelpers.classPrivateFieldLooseBase(this,ri)[ri]()}getDescription(){return m.Tag.render(si||(si=ti`
			${0}
		`),m.Loc.getMessage("INTRANET_SETTINGS_SECTION_CONFIGURATION_DESCRIPTION_DELETE_PORTAL_MAIL",{"#MAIL#":babelHelpers.classPrivateFieldLooseBase(this,ii)[ii],"#MAIL_LINK#":babelHelpers.classPrivateFieldLooseBase(this,ri)[ri](),"#MORE_DETAILS#":this.getMoreDetails()}))}}function oi(){if(!babelHelpers.classPrivateFieldLooseBase(this,li)[li]){const e=m.Loc.getMessage("INTRANET_SETTINGS_PORTAL_DELETE_MAIL_BODY",{"#PORTAL_URL#":babelHelpers.classPrivateFieldLooseBase(this,ai)[ai]});const t=m.Loc.getMessage("INTRANET_SETTINGS_PORTAL_DELETE_MAIL_SUBJECT",{"#PORTAL_URL#":babelHelpers.classPrivateFieldLooseBase(this,ai)[ai]});babelHelpers.classPrivateFieldLooseBase(this,li)[li]=`mailto:${babelHelpers.classPrivateFieldLooseBase(this,ii)[ii]}?body=${e}&subject=${t}`}return babelHelpers.classPrivateFieldLooseBase(this,li)[li]}let ci=e=>e,di;class bi extends zs{getButtonContainer(){}getDescription(){return m.Tag.render(di||(di=ci`
			${0}
			<a class="ui-section__link" onclick="top.BX.Helper.show('redirect=detail&code=19566456')">
				${0}
			</a>
		`),m.Loc.getMessage("INTRANET_SETTINGS_SECTION_CONFIGURATION_DESCRIPTION_DELETE_PORTAL_NOT_ADMIN"),m.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"))}}let pi=e=>e,ui;class hi extends zs{getButtonContainer(){}getDescription(){return m.Tag.render(ui||(ui=pi`
			${0}
		`),m.Loc.getMessage("INTRANET_SETTINGS_SECTION_CONFIGURATION_DESCRIPTION_DELETE_PORTAL_BOUND",{"#MORE_DETAILS#":this.getMoreDetails()}))}}let _i=e=>e,gi;var vi=babelHelpers.classPrivateFieldLooseKey("networkUrl");class Ti extends zs{constructor(e){super();Object.defineProperty(this,vi,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,vi)[vi]=e}getButtonContainer(){if(m.Type.isStringFilled(babelHelpers.classPrivateFieldLooseBase(this,vi)[vi])){return super.getButtonContainer()}return null}getConfirmButton(){if(!this.confirmButton){this.confirmButton=new g.Button({tag:g.Button.Tag.LINK,link:babelHelpers.classPrivateFieldLooseBase(this,vi)[vi],text:m.Loc.getMessage("INTRANET_SETTINGS_CONFIRM_ACTION_DELETE_PORTAL_NETWORK_LINK"),noCaps:true,round:true,className:"--confirm",props:{"data-bx-role":"delete-portal-confirm",target:"_top"}})}return this.confirmButton}getDescription(){return m.Tag.render(gi||(gi=_i`
			${0}
		`),m.Loc.getMessage("INTRANET_SETTINGS_SECTION_CONFIGURATION_DESCRIPTION_DELETE_PORTAL_NETWORK",{"#MORE_DETAILS#":this.getMoreDetails()}))}}var Ei=babelHelpers.classPrivateFieldLooseKey("options");var Pi=babelHelpers.classPrivateFieldLooseKey("settingsRow");var Li=babelHelpers.classPrivateFieldLooseKey("form");var Si=babelHelpers.classPrivateFieldLooseKey("defaultBodyClass");var Ii=babelHelpers.classPrivateFieldLooseKey("bodyClass");var Ni=babelHelpers.classPrivateFieldLooseKey("renderFormRow");var mi=babelHelpers.classPrivateFieldLooseKey("bindFormEvents");var Fi=babelHelpers.classPrivateFieldLooseKey("updateSectionBodyClass");class fi extends L.SettingsSection{constructor(e){super(e);Object.defineProperty(this,Fi,{value:Hi});Object.defineProperty(this,mi,{value:Bi});Object.defineProperty(this,Ni,{value:wi});Object.defineProperty(this,Ei,{writable:true,value:void 0});Object.defineProperty(this,Pi,{writable:true,value:void 0});Object.defineProperty(this,Li,{writable:true,value:void 0});Object.defineProperty(this,Si,{writable:true,value:void 0});Object.defineProperty(this,Ii,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Si)[Si]=this.getSectionView().className.bodyActive;babelHelpers.classPrivateFieldLooseBase(this,Ei)[Ei]=e.options;let t;if(!babelHelpers.classPrivateFieldLooseBase(this,Ei)[Ei].isAdmin){t=Ys.NOT_ADMIN}else if(!babelHelpers.classPrivateFieldLooseBase(this,Ei)[Ei].isFreeLicense){t=Ys.MAIL}else if(babelHelpers.classPrivateFieldLooseBase(this,Ei)[Ei].isBound){t=Ys.BOUND}else if(babelHelpers.classPrivateFieldLooseBase(this,Ei)[Ei].isEmployeesLeft){t=Ys.EMPLOYEE}else if(!babelHelpers.classPrivateFieldLooseBase(this,Ei)[Ei].verificationOptions){t=Ys.NETWORK}else{t=Ys.DEFAULT}babelHelpers.classPrivateFieldLooseBase(this,Ni)[Ni](t)}}function wi(e){if(babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi]){this.removeChild(babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi]);m.Dom.remove(babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi].render())}switch(e){case Ys.MAIL:babelHelpers.classPrivateFieldLooseBase(this,Li)[Li]=new ni(babelHelpers.classPrivateFieldLooseBase(this,Ei)[Ei].mailForRequest,babelHelpers.classPrivateFieldLooseBase(this,Ei)[Ei].portalUrl);break;case Ys.EMPLOYEE:babelHelpers.classPrivateFieldLooseBase(this,Li)[Li]=new ei(babelHelpers.classPrivateFieldLooseBase(this,Ei)[Ei].isFreeLicense);break;case Ys.NOT_ADMIN:babelHelpers.classPrivateFieldLooseBase(this,Li)[Li]=new bi;break;case Ys.BOUND:babelHelpers.classPrivateFieldLooseBase(this,Li)[Li]=new hi;break;case Ys.NETWORK:babelHelpers.classPrivateFieldLooseBase(this,Li)[Li]=new Ti(babelHelpers.classPrivateFieldLooseBase(this,Ei)[Ei].networkUrl);break;default:babelHelpers.classPrivateFieldLooseBase(this,Li)[Li]=new zs(babelHelpers.classPrivateFieldLooseBase(this,Ei)[Ei].verificationOptions);break}babelHelpers.classPrivateFieldLooseBase(this,Fi)[Fi]();babelHelpers.classPrivateFieldLooseBase(this,mi)[mi]();const t=new T.Row({content:babelHelpers.classPrivateFieldLooseBase(this,Li)[Li].getContainer()});babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi]=new L.SettingsRow({row:t});this.addChild(babelHelpers.classPrivateFieldLooseBase(this,Pi)[Pi]);this.render()}function Bi(){babelHelpers.classPrivateFieldLooseBase(this,Li)[Li].subscribe("closeForm",(()=>{this.getSectionView().toggle(false)}));babelHelpers.classPrivateFieldLooseBase(this,Li)[Li].subscribe("updateForm",(e=>{if(e.data.type){babelHelpers.classPrivateFieldLooseBase(this,Ni)[Ni](e.data.type)}}))}function Hi(){m.Dom.removeClass(this.getSectionView().getContent(),babelHelpers.classPrivateFieldLooseBase(this,Ii)[Ii]);babelHelpers.classPrivateFieldLooseBase(this,Ii)[Ii]=babelHelpers.classPrivateFieldLooseBase(this,Li)[Li].getBodyClass();this.getSectionView().className.bodyActive=babelHelpers.classPrivateFieldLooseBase(this,Si)[Si]+" "+babelHelpers.classPrivateFieldLooseBase(this,Ii)[Ii];if(this.getSectionView().isOpen){m.Dom.addClass(this.getSectionView().getContent(),babelHelpers.classPrivateFieldLooseBase(this,Ii)[Ii])}}let Ai=e=>e,yi,Oi;var Ri=babelHelpers.classPrivateFieldLooseKey("header");var Ci=babelHelpers.classPrivateFieldLooseKey("buildDateTimeSection");var Mi=babelHelpers.classPrivateFieldLooseKey("buildMailsSection");var Di=babelHelpers.classPrivateFieldLooseKey("buildCRMMapsSection");var Gi=babelHelpers.classPrivateFieldLooseKey("buildCardsProductPropertiesSection");var Vi=babelHelpers.classPrivateFieldLooseKey("buildAdditionalSettingsSection");var ki=babelHelpers.classPrivateFieldLooseKey("geoDataSwitch");class Ui extends L.BaseSettingsPage{constructor(){super();Object.defineProperty(this,ki,{value:Yi});Object.defineProperty(this,Vi,{value:$i});Object.defineProperty(this,Gi,{value:Xi});Object.defineProperty(this,Di,{value:xi});Object.defineProperty(this,Mi,{value:ji});Object.defineProperty(this,Ci,{value:Ki});Object.defineProperty(this,Ri,{writable:true,value:void 0});this.titlePage=m.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_CONFIGURATION")}getType(){return"configuration"}headerWidgetRender(){var e;let t="";if(((e=this.getValue("isFormat24Hour"))==null?void 0:e.current)==="Y"){t=this.getValue("format24HourTime")}else{t=this.getValue("format12HourTime")}babelHelpers.classPrivateFieldLooseBase(this,Ri)[Ri]=m.Tag.render(yi||(yi=Ai`
		<div class="intranet-settings__date-widget_box">
			<span class="ui-icon-set --earth-language"></span>
			<div class="intranet-settings__date-widget_content">
				<div class="intranet-settings__date-widget_inner">
					<span data-role="time" class="intranet-settings__date-widget_title">${0}</span>
					<span class="intranet-settings__date-widget_subtitle">${0}</span>
				</div>
				<div data-role="date" class="intranet-settings__date-widget_subtitle">${0}</div>
			</div>
		</div>`),t,this.getValue("offsetUTC"),this.getValue("currentDate"));return babelHelpers.classPrivateFieldLooseBase(this,Ri)[Ri]}appendSections(e){let t=babelHelpers.classPrivateFieldLooseBase(this,Ci)[Ci]();t==null?void 0:t.renderTo(e);let s=babelHelpers.classPrivateFieldLooseBase(this,Mi)[Mi]();s==null?void 0:s.renderTo(e);if(this.hasValue("mapsProviderCRM")&&this.getValue("mapsProviderCRM")){let t=babelHelpers.classPrivateFieldLooseBase(this,Di)[Di]();t==null?void 0:t.renderTo(e)}let i=babelHelpers.classPrivateFieldLooseBase(this,Gi)[Gi]();i==null?void 0:i.renderTo(e);let a=babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi]();a==null?void 0:a.renderTo(e);if(this.hasValue("deletePortalOptions")&&this.hasValue("sectionDeletePortal")){const t=new T.Section(this.getValue("sectionDeletePortal"));const s=new fi({section:t,parent:this,options:this.getValue("deletePortalOptions")});s.renderTo(e)}}}function Ki(){if(!this.hasValue("sectionDateFormat")){return}let e=new T.Section(this.getValue("sectionDateFormat"));const t=new L.SettingsSection({section:e,parent:this});if(this.hasValue("culture")){let e=new u.Selector(this.getValue("culture"));Ui.addToSectionHelper(e,t,new T.Row({className:"--intranet-settings__mb-20"}));m.Event.bind(e.getInputNode(),"change",(e=>{babelHelpers.classPrivateFieldLooseBase(this,Ri)[Ri].querySelector('[data-role="date"]').innerHTML=this.getValue("longDates")[e.target.value]}))}if(this.hasValue("isFormat24Hour")){let e=new u.InlineChecker(this.getValue("isFormat24Hour"));Ui.addToSectionHelper(e,t);S.EventEmitter.subscribe(e,"change",(t=>{babelHelpers.classPrivateFieldLooseBase(this,Ri)[Ri].querySelector('[data-role="time"]').innerHTML=e.isChecked()?this.getValue("format24HourTime"):this.getValue("format12HourTime")}))}return t}function ji(){if(!this.hasValue("sectionLetters")){return}let e=new T.Section(this.getValue("sectionLetters"));const t=new L.SettingsSection({section:e,parent:this});if(this.hasValue("trackOutMailsRead")){let e=new u.Checker(this.getValue("trackOutMailsRead"));let s=new T.Row({});Ui.addToSectionHelper(e,t,s)}if(this.hasValue("trackOutMailsClick")){let e=new u.Checker(this.getValue("trackOutMailsClick"));let s=new T.Row({});Ui.addToSectionHelper(e,t,s)}if(this.hasValue("defaultEmailFrom")){let e=new u.TextInput(this.getValue("defaultEmailFrom"));let s=new T.Row({});Ui.addToSectionHelper(e,t,s)}return t}function xi(){var e;if(!this.hasValue("sectionMapsInCrm")){return}let t=new T.Section(this.getValue("sectionMapsInCrm"));const s=new L.SettingsSection({section:t,parent:this});let i=new u.Selector({label:(e=this.getValue("mapsProviderCRM").label)!=null?e:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_CHOOSE_REGION_CRM_MAPS"),name:this.getValue("mapsProviderCRM").name,items:this.getValue("mapsProviderCRM").values,current:this.getValue("mapsProviderCRM").current});let a=new T.Row({separator:"bottom",className:"--block"});Ui.addToSectionHelper(i,s,a);const l=new T.SeparatorRow({isHidden:this.getValue("mapsProviderCRM").current==="OSM"});new L.SettingsRow({row:l,parent:s});const r=new BX.UI.Alert({text:m.Loc.getMessage("INTRANET_SETTINGS_SECTION_CRM_MAPS_DESCRIPTION",{"#GOOGLE_API_URL#":this.getValue("googleApiUrl")}),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});const n=new T.Row({separator:"top",content:r.getContainer(),isHidden:this.getValue("mapsProviderCRM").current==="OSM"});new L.SettingsRow({row:n,parent:s});const o=new u.TextInputInline({inputName:"API_KEY_FRONTEND",label:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_PUBLIC"),hintTitle:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_PUBLIC_HINT"),value:this.getValue("API_KEY_FRONTEND").value,placeholder:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER")});const c=new T.Row({isHidden:this.getValue("mapsProviderCRM").current==="OSM"});Ui.addToSectionHelper(o,s,c);const d=new u.TextInputInline({inputName:"API_KEY_BACKEND",label:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_SERVER"),hintTitle:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_SERVER_HINT"),value:this.getValue("API_KEY_BACKEND").value,placeholder:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER")});const b=new T.Row({content:d.render(),isHidden:this.getValue("mapsProviderCRM").current==="OSM",separator:"bottom",className:"--block"});Ui.addToSectionHelper(d,s,b);const p=new T.SeparatorRow({});new L.SettingsRow({row:p,parent:s});let h=new u.Checker({inputName:"SHOW_PHOTOS_ON_MAP",title:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SHOW_PHOTO_PLACES_MAPS"),hintOn:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON"),hintOff:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON"),checked:this.getValue("SHOW_PHOTOS_ON_MAP").value==="1"});let _=new T.Row({separator:"top",className:"--block",content:h.render(),isHidden:this.getValue("mapsProviderCRM").current==="OSM"});Ui.addToSectionHelper(h,s,_);let g=new u.Checker({inputName:"USE_GEOCODING_SERVICE",title:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SHOW_GEOCODING_SERVICE"),hintOn:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON"),hintOff:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON"),checked:this.getValue("USE_GEOCODING_SERVICE").value==="1"});let v=new T.Row({content:g.render(),isHidden:this.getValue("mapsProviderCRM").current==="OSM"});Ui.addToSectionHelper(g,s,v);i.getInputNode().addEventListener("change",(e=>{if(e.target.value==="OSM"){l.hide();n.hide();c.hide();b.hide();v.hide();_.hide()}else{l.show();n.show();c.show();b.show();v.show();_.show()}}));return s}function Xi(){if(!this.hasValue("sectionMapsInProduct")){return}let e=new T.Section(this.getValue("sectionMapsInProduct"));const t=new L.SettingsSection({section:e,parent:this});if(this.hasValue("cardsProviderProductProperties")){var s;let e=new u.Selector({label:(s=this.getValue("cardsProviderProductProperties").label)!=null?s:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_CHOOSE_REGION_CRM_MAPS"),name:this.getValue("cardsProviderProductProperties").name,items:this.getValue("cardsProviderProductProperties").values,current:this.getValue("cardsProviderProductProperties").current});let i=new T.Row({separator:"bottom"});Ui.addToSectionHelper(e,t,i);new L.SettingsRow({row:new T.SeparatorRow,parent:t});const a=new BX.UI.Alert({text:m.Loc.getMessage("INTRANET_SETTINGS_SECTION_CRM_MAPS_YANDEX_DESCRIPTION",{"#YANDEX_API_URL#":this.getValue("yandexApiUrl")}),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});const l=new T.Row({content:a.getContainer(),isHidden:this.getValue("cardsProviderProductProperties").current!=="yandex"});new L.SettingsRow({row:l,parent:t});const r=new u.TextInput({inputName:"yandexKeyProductProperties",label:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_MAP_PRODUCT_PROPERTIES_YANDEX_KEY"),value:this.getValue("yandexKeyProductProperties"),placeholder:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER")});const n=new T.Row({separator:"bottom",className:"--block",content:r.render(),isHidden:this.getValue("cardsProviderProductProperties").current!=="yandex"});Ui.addToSectionHelper(r,t,n);const o=new BX.UI.Alert({text:m.Loc.getMessage("INTRANET_SETTINGS_SECTION_CRM_MAPS_DESCRIPTION",{"#GOOGLE_API_URL#":this.getValue("googleApiUrl")}),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});const c=new T.Row({content:o.getContainer(),isHidden:this.getValue("cardsProviderProductProperties").current!=="google"});new L.SettingsRow({row:c,parent:t});const d=new u.TextInput({inputName:"googleKeyProductProperties",label:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_MAP_PRODUCT_PROPERTIES_GOOGLE_KEY"),value:this.getValue("googleKeyProductProperties"),placeholder:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER")});const b=new T.Row({content:d.render(),isHidden:this.getValue("cardsProviderProductProperties").current!=="google"});Ui.addToSectionHelper(d,t,b);e.getInputNode().addEventListener("change",(e=>{if(e.target.value==="yandex"){l.show();n.show();c.hide();b.hide()}else{l.hide();n.hide();c.show();b.show()}}))}return t}function $i(){if(!this.hasValue("sectionOther")){return}let e=new T.Section(this.getValue("sectionOther"));const t=new L.SettingsSection({section:e,parent:this});if(this.hasValue("allowUserInstallApplication")){let e=new u.Checker(this.getValue("allowUserInstallApplication"));let s=new T.Row({});S.EventEmitter.subscribe(e.switcher,"toggled",(()=>{var t;(t=this.getAnalytic())==null?void 0:t.addEventConfigConfiguration(A.CHANGE_MARKET,e.isChecked())}));Ui.addToSectionHelper(e,t,s)}if(this.hasValue("allCanBuyTariff")){var s;const e=m.Tag.render(Oi||(Oi=Ai`<span>${0}</span>`),m.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE"));let i=new u.Checker({inputName:this.getValue("allCanBuyTariff").inputName,title:(s=this.getValue("allCanBuyTariff").title)!=null?s:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ALL_CAN_BUY_TARIFF"),hintOn:this.getValue("allCanBuyTariff").hintOn,checked:this.getValue("allCanBuyTariff").checked,isEnable:this.getValue("allCanBuyTariff").isEnable,bannerCode:"limit_why_pay_tariff_everyone",helpMessageProvider:this.helpMessageProviderFactory(e)});let a=new T.Row({});S.EventEmitter.subscribe(i.switcher,"toggled",(()=>{var e;(e=this.getAnalytic())==null?void 0:e.addEventConfigConfiguration(A.CHANGE_PAY_TARIFF,i.isChecked())}));Ui.addToSectionHelper(i,t,a)}if(this.hasValue("allowMeasureStressLevel")){let e=new u.Checker(this.getValue("allowMeasureStressLevel"));let s=new T.Row({});Ui.addToSectionHelper(e,t,s)}if(this.hasValue("collectGeoData")){let e=new u.Checker(this.getValue("collectGeoData"));S.EventEmitter.subscribe(e.switcher,"toggled",(()=>{babelHelpers.classPrivateFieldLooseBase(this,ki)[ki](e)}));Ui.addToSectionHelper(e,t)}return t}function Yi(e){if(e.isChecked()){BX.UI.Dialogs.MessageBox.show({modal:true,minWidth:640,title:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_COLLECT_GEO_DATA"),message:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_COLLECT_GEO_DATA_CONFIRM"),buttons:BX.UI.Dialogs.MessageBoxButtons.OK_CANCEL,okCaption:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_COLLECT_GEO_DATA_OK"),onCancel:function(){e.switcher.check(false);return true},onOk:function(){return true}})}}let Wi=e=>e,qi,zi,Qi;var Zi=babelHelpers.classPrivateFieldLooseKey("buildScheduleTab");var Ji=babelHelpers.classPrivateFieldLooseKey("buildScheduleSection");var ea=babelHelpers.classPrivateFieldLooseKey("buildHolidaysSection");var ta=babelHelpers.classPrivateFieldLooseKey("forDepartmentsRender");class sa extends L.BaseSettingsPage{constructor(){super();Object.defineProperty(this,ta,{value:ra});Object.defineProperty(this,ea,{value:la});Object.defineProperty(this,Ji,{value:aa});Object.defineProperty(this,Zi,{value:ia});this.titlePage=m.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_SCHEDULE");this.descriptionPage=m.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_SCHEDULE")}getType(){return"schedule"}appendSections(e){const t=babelHelpers.classPrivateFieldLooseBase(this,Ji)[Ji]();t.renderTo(e);const s=babelHelpers.classPrivateFieldLooseBase(this,ea)[ea]();s.renderTo(e)}}function ia(e){let t=new T.Row({className:"intranet-settings__work-time_container --no-padding"});let s=new L.SettingsRow({row:t,parent:e});if(this.hasValue("WORK_TIME_START")){const e=new u.Selector(this.getValue("WORK_TIME_START"));new L.SettingsRow({child:new L.SettingsField({fieldView:e}),parent:s,row:new T.Row({className:"intranet-settings__work-time_row"})})}new L.SettingsRow({row:new T.Row({className:"ui-section__field-inline-separator"}),parent:s});if(this.hasValue("WORK_TIME_END")){const e=new u.Selector(this.getValue("WORK_TIME_END"));new L.SettingsRow({child:new L.SettingsField({fieldView:e}),parent:s,row:new T.Row({className:"intranet-settings__work-time_row"})})}let i=m.Tag.render(qi||(qi=Wi`<div><div>`));m.Dom.append(t.render(),i);if(this.hasValue("WEEK_DAYS")){var a;const t=new u.ItemPicker({inputName:this.getValue("WEEK_DAYS").inputName,isMulti:true,label:(a=this.getValue("WEEK_DAYS").label)!=null?a:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_WEEKEND"),items:this.getValue("WEEK_DAYS").values,current:this.getValue("WEEK_DAYS").multiValue});let s=new L.SettingsField({fieldView:t});const l=new T.Row({content:t.render()});new L.SettingsRow({row:l,child:s,parent:e});m.Dom.append(l.render(),i)}if(this.hasValue("WEEK_START")){const t=new u.ItemPicker(this.getValue("WEEK_START"));let s=new L.SettingsField({fieldView:t});m.Dom.addClass(t.render(),"--row-frame_gray");const a=new T.Row({content:t.render()});new L.SettingsRow({row:a,child:s,parent:e});m.Dom.append(a.render(),i)}return i}function aa(){if(!this.hasValue("sectionSchedule")){return}let e=new T.Section(this.getValue("sectionSchedule"));const t=new L.SettingsSection({parent:this,section:e});const s=new L.SettingsRow({parent:t});const i=new L.TabsField({parent:s});const a=new L.TabField({parent:i,tabsOptions:this.getValue("tabForCompany")});babelHelpers.classPrivateFieldLooseBase(this,Zi)[Zi](a);if(this.getValue("TIMEMAN").enabled){const e=new L.TabField({parent:i,tabsOptions:this.getValue("tabForDepartment")});const t=new T.Row({content:babelHelpers.classPrivateFieldLooseBase(this,ta)[ta]()});new L.SettingsRow({row:t,parent:e})}i.activateTab(a);return t}function la(){var e,t,s,i;if(!this.hasValue("sectionHoliday")){return}let a=new T.Section(this.getValue("sectionHoliday"));const l=new L.SettingsSection({parent:this,section:a});const r=(e=(t=this.getValue("year_holidays"))==null?void 0:(s=t.value)==null?void 0:(i=s.match(/\d{1,2}.\d{1,2}/gm))==null?void 0:i.length)!=null?e:0;let n=m.Tag.render(zi||(zi=Wi`<div class="ui-section__field-label">${0}</div>`),m.Loc.getMessage("INTRANET_SETTINGS_FIELD_INFO",{"#COUNT_DAYS#":r}));const o=new T.Row({content:n});a.append(o.render());if(this.hasValue("year_holidays")){const e=new u.TextInput(this.getValue("year_holidays"));sa.addToSectionHelper(e,l);m.Event.bind(e.getInputNode(),"keyup",(()=>{var t,s,i;const a=(t=e==null?void 0:(s=e.getInputNode().value)==null?void 0:(i=s.match(/\d{1,2}.\d{1,2}/gm))==null?void 0:i.length)!=null?t:0;n.innerHTML=m.Loc.getMessage("INTRANET_SETTINGS_FIELD_INFO",{"#COUNT_DAYS#":a})}))}return l}function ra(){return m.Tag.render(Qi||(Qi=Wi`
			<div class="intranet-settings__tab-info_container">
				<div class="intranet-settings__tab-info_text">${0}</div>
				<a href="/timeman/schedules/" class="ui-section__link" target="_blank">${0}</a>
			</div>
		`),m.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_FOR_DEPARTMENTS"),m.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_FOR_DEPARTMENTS_CONFIG"))}let na=e=>e,oa;var ca=babelHelpers.classPrivateFieldLooseKey("buildGdprSection");class da extends L.BaseSettingsPage{constructor(){super();Object.defineProperty(this,ca,{value:ba});this.titlePage=m.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_GDPR");this.descriptionPage=m.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_GDPR")}getType(){return"gdpr"}appendSections(e){let t=babelHelpers.classPrivateFieldLooseBase(this,ca)[ca]();t==null?void 0:t.renderTo(e)}addApplicationsRender(){if(this.hasValue("marketDirectory")){const e=this.getValue("marketDirectory");return m.Tag.render(oa||(oa=na`
				<div class="ui-text-right">
					<a class="ui-section__link" href="${0}detail/integrations24.gdprstaff/">
						${0}
					</a>
					<a class="ui-section__link" style="margin-left: 12px;" href="${0}detail/integrations24.gdpr/">
						${0}
					</a>
				</div>
			`),e,m.Loc.getMessage("INTRANET_SETTINGS_BUTTON_GDPR_APPLICATION_EMPLOYEE"),e,m.Loc.getMessage("INTRANET_SETTINGS_BUTTON_GDPR_APPLICATION_CRM"))}return null}}function ba(){if(!this.hasValue("sectionGdpr")){return}let e=new T.Section(this.getValue("sectionGdpr"));let t=new L.SettingsSection({section:e,parent:this});const s=new BX.UI.Alert({text:`\n\t\t\t\t${m.Loc.getMessage("INTRANET_SETTINGS_SECTION_GDPR_DESCRIPTION")}\n\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show('redirect=detail&code=7608199')">\n\t\t\t\t\t${m.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE")}\n\t\t\t\t</a>\n\t\t\t\t</br>\n\t\t\t\t<a class="ui-section__link" href="${this.getValue("dpaLink")}" target="_blank">\n\t\t\t\t\t${m.Loc.getMessage("INTRANET_SETTINGS_BUTTON_GDPR_AGREEMENT")}\n\t\t\t\t</a>\n\t\t\t`,inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});const i=new T.Row({content:s.getContainer()});new L.SettingsRow({row:i,parent:t});if(this.hasValue("companyTitle")){var a;const e=new u.TextInput({inputName:"companyTitle",label:(a=this.getValue("companyTitle").label)!=null?a:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_COMPANY_TITLE"),value:this.getValue("companyTitle").value,placeholder:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_PLACEHOLDER_COMPANY_TITLE")});let s=new L.SettingsField({fieldView:e});new L.SettingsRow({parent:t,child:s})}if(this.hasValue("contactName")){var l;const e=new u.TextInput({inputName:"contactName",label:(l=this.getValue("contactName").label)!=null?l:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_CONTACT_NAME"),value:this.getValue("contactName").value,placeholder:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_PLACEHOLDER_CONTACT_NAME")});let s=new L.SettingsField({fieldView:e});new L.SettingsRow({parent:t,child:s})}if(this.hasValue("notificationEmail")){var r;const e=new u.TextInput({inputName:"notificationEmail",label:(r=this.getValue("notificationEmail").label)!=null?r:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_NOTIFICATION_EMAIL"),value:this.getValue("notificationEmail").value,placeholder:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_PLACEHOLDER_NOTIFICATION_EMAIL")});let s=new L.SettingsField({fieldView:e});new L.SettingsRow({parent:t,child:s})}if(this.hasValue("date")){var n;const e=new u.TextInput({inputName:"date",label:(n=this.getValue("date").label)!=null?n:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_DATE"),value:this.getValue("date").value});m.Dom.adjust(e.render(),{events:{click:e=>{BX.calendar({node:e.target,field:"date",form:"",bTime:false,bHideTime:true})}}});let s=new L.SettingsField({fieldView:e});new L.SettingsRow({parent:t,child:s})}new L.SettingsRow({row:new T.Row({content:this.addApplicationsRender()}),parent:t});return t}let pa=e=>e,ua,ha,_a,ga,va,Ta,Ea,Pa,La;var Sa=babelHelpers.classPrivateFieldLooseKey("otpChecker");var Ia=babelHelpers.classPrivateFieldLooseKey("otpSelector");var Na=babelHelpers.classPrivateFieldLooseKey("otpPopup");var ma=babelHelpers.classPrivateFieldLooseKey("buildOTPSection");var Fa=babelHelpers.classPrivateFieldLooseKey("getOTPChecker");var fa=babelHelpers.classPrivateFieldLooseKey("getOTPPopup");var wa=babelHelpers.classPrivateFieldLooseKey("getOTPPeriodSelector");var Ba=babelHelpers.classPrivateFieldLooseKey("getOTPDescription");var Ha=babelHelpers.classPrivateFieldLooseKey("getOTPDescriptionText");var Aa=babelHelpers.classPrivateFieldLooseKey("buildAccessIPSection");var ya=babelHelpers.classPrivateFieldLooseKey("getEmptyUserSelectorRow");var Oa=babelHelpers.classPrivateFieldLooseKey("getEmptyAccessIpRow");var Ra=babelHelpers.classPrivateFieldLooseKey("getUserSelectorRow");var Ca=babelHelpers.classPrivateFieldLooseKey("getAccessIpRow");var Ma=babelHelpers.classPrivateFieldLooseKey("getIpAccessDescription");var Da=babelHelpers.classPrivateFieldLooseKey("buildPasswordRecoverySection");var Ga=babelHelpers.classPrivateFieldLooseKey("buildDevicesHistorySection");var Va=babelHelpers.classPrivateFieldLooseKey("buildEventLogSection");var ka=babelHelpers.classPrivateFieldLooseKey("buildBlackListSection");var Ua=babelHelpers.classPrivateFieldLooseKey("buildMobileAppSection");class Ka extends L.BaseSettingsPage{constructor(){super();Object.defineProperty(this,Ua,{value:ll});Object.defineProperty(this,ka,{value:al});Object.defineProperty(this,Va,{value:il});Object.defineProperty(this,Ga,{value:sl});Object.defineProperty(this,Da,{value:tl});Object.defineProperty(this,Ma,{value:el});Object.defineProperty(this,Ca,{value:Ja});Object.defineProperty(this,Ra,{value:Za});Object.defineProperty(this,Oa,{value:Qa});Object.defineProperty(this,ya,{value:za});Object.defineProperty(this,Aa,{value:qa});Object.defineProperty(this,Ha,{value:Wa});Object.defineProperty(this,Ba,{value:Ya});Object.defineProperty(this,wa,{value:$a});Object.defineProperty(this,fa,{value:Xa});Object.defineProperty(this,Fa,{value:xa});Object.defineProperty(this,ma,{value:ja});Object.defineProperty(this,Sa,{writable:true,value:void 0});Object.defineProperty(this,Ia,{writable:true,value:void 0});Object.defineProperty(this,Na,{writable:true,value:void 0});this.titlePage=m.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_SECURITY");this.descriptionPage=m.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_SECURITY")}getType(){return"security"}appendSections(e){var t,s,i;const a=this.hasValue("IS_BITRIX_24")&&this.getValue("IS_BITRIX_24");if(this.hasValue("SECURITY_OTP_ENABLED")&&this.getValue("SECURITY_OTP_ENABLED")){var l;(l=babelHelpers.classPrivateFieldLooseBase(this,ma)[ma]())==null?void 0:l.renderTo(e)}(t=babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga]())==null?void 0:t.renderTo(e);(s=babelHelpers.classPrivateFieldLooseBase(this,Va)[Va]())==null?void 0:s.renderTo(e);(i=babelHelpers.classPrivateFieldLooseBase(this,Ua)[Ua]())==null?void 0:i.renderTo(e);if(a){var r,n;(r=babelHelpers.classPrivateFieldLooseBase(this,Aa)[Aa]())==null?void 0:r.renderTo(e);(n=babelHelpers.classPrivateFieldLooseBase(this,ka)[ka]())==null?void 0:n.renderTo(e)}}}function ja(){if(!this.hasValue("sectionOtp")){return}const e=new T.Section(this.getValue("sectionOtp"));const t=new L.SettingsSection({section:e,parent:this});const s=new T.Row({content:babelHelpers.classPrivateFieldLooseBase(this,Ba)[Ba]().getContainer()});new L.SettingsRow({row:s,parent:t});if(this.hasValue("SECURITY_OTP")&&this.hasValue("SEND_OTP_PUSH")){const e=new T.Row({content:babelHelpers.classPrivateFieldLooseBase(this,Fa)[Fa]().render(),separator:babelHelpers.classPrivateFieldLooseBase(this,Fa)[Fa]().isChecked()?"":"bottom",className:babelHelpers.classPrivateFieldLooseBase(this,Fa)[Fa]().isChecked()?"":"--block"});new L.SettingsRow({row:e,parent:t});const s=new T.Row({content:babelHelpers.classPrivateFieldLooseBase(this,wa)[wa]().render(),isHidden:!babelHelpers.classPrivateFieldLooseBase(this,Fa)[Fa]().isChecked()});new L.SettingsRow({row:s,parent:t});const i=m.Tag.render(ua||(ua=pa`
				<div class="settings-switcher-wrapper">
					<div class="settings-security-message-switcher"/>
				</div>
			`));new u.SingleChecker({switcher:new h.Switcher({node:i.querySelector(".settings-security-message-switcher"),inputName:"SEND_OTP_PUSH",checked:this.getValue("SEND_OTP_PUSH"),size:h.SwitcherSize.small})});const a=new T.Row({content:i,isHidden:!babelHelpers.classPrivateFieldLooseBase(this,Fa)[Fa]().isChecked()});i.append(m.Tag.render(ha||(ha=pa`<span class="settings-switcher-title">${0}</span>`),m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_OTP_SWITCHING_MESSAGE_CHAT")));new L.SettingsRow({row:a,parent:t});S.EventEmitter.subscribe(babelHelpers.classPrivateFieldLooseBase(this,Fa)[Fa]().switcher,"toggled",(()=>{if(this.getValue("SECURITY_IS_USER_OTP_ACTIVE")!==true&&babelHelpers.classPrivateFieldLooseBase(this,Fa)[Fa]().isChecked()){babelHelpers.classPrivateFieldLooseBase(this,fa)[fa]().show();babelHelpers.classPrivateFieldLooseBase(this,Fa)[Fa]().cancel();babelHelpers.classPrivateFieldLooseBase(this,Fa)[Fa]().switcher.check(false);return}if(this.hasValue("SECURITY_OTP_ENABLED")&&this.getValue("SECURITY_OTP_ENABLED")){var t;(t=this.getAnalytic())==null?void 0:t.addEventToggle2fa(babelHelpers.classPrivateFieldLooseBase(this,Fa)[Fa]().isChecked())}if(babelHelpers.classPrivateFieldLooseBase(this,Fa)[Fa]().isChecked()){m.Dom.removeClass(e.render(),"--bottom-separator --block");s.show();a.show()}else{m.Dom.addClass(e.render(),"--bottom-separator --block");s.hide();a.hide()}}))}return t}function xa(){if(babelHelpers.classPrivateFieldLooseBase(this,Sa)[Sa]instanceof u.Checker){return babelHelpers.classPrivateFieldLooseBase(this,Sa)[Sa]}if(this.hasValue("fieldSecurityOtp")){babelHelpers.classPrivateFieldLooseBase(this,Sa)[Sa]=new u.Checker({inputName:this.getValue("fieldSecurityOtp").inputName,checked:this.getValue("fieldSecurityOtp").checked,title:this.getValue("fieldSecurityOtp").title,isEnable:this.getValue("fieldSecurityOtp").isEnable,hideSeparator:true,alignCenter:true,noMarginBottom:true})}babelHelpers.classPrivateFieldLooseBase(this,Sa)[Sa].renderLockElement=()=>null;return babelHelpers.classPrivateFieldLooseBase(this,Sa)[Sa]}function Xa(){if(babelHelpers.classPrivateFieldLooseBase(this,Na)[Na]instanceof I.Popup){return babelHelpers.classPrivateFieldLooseBase(this,Na)[Na]}const e=m.Tag.render(_a||(_a=pa`
			<div class="intranet-settings__security_popup_info">
				${0}
			</div>	
		`),m.Loc.getMessage("INTRANET_SETTINGS_POPUP_OTP_ENABLE"));const t=new BX.UI.Button({text:m.Loc.getMessage("INTRANET_SETTINGS_POPUP_OTP_ENABLE_BUTTON"),color:BX.UI.Button.Color.PRIMARY,events:{click:()=>{babelHelpers.classPrivateFieldLooseBase(this,fa)[fa]().close();BX.SidePanel.Instance.open(this.getValue("SECURITY_OTP_PATH"))}}});const s=m.Tag.render(ga||(ga=pa`
			<div class="intranet-settings__security_popup_container">
				${0}
				<div class="ui-btn-container ui-btn-container-center">
					${0}
				</div>			
			</div>
		`),e,t.getContainer());babelHelpers.classPrivateFieldLooseBase(this,Na)[Na]=new I.Popup({bindElement:babelHelpers.classPrivateFieldLooseBase(this,Sa)[Sa].getInputNode(),content:s,autoHide:true,width:337,angle:{offset:200-15},offsetLeft:babelHelpers.classPrivateFieldLooseBase(this,Sa)[Sa].getInputNode().offsetWidth-200+15,closeByEsc:true,borderRadius:18});return babelHelpers.classPrivateFieldLooseBase(this,Na)[Na]}function $a(){if(babelHelpers.classPrivateFieldLooseBase(this,Ia)[Ia]instanceof u.Selector){return babelHelpers.classPrivateFieldLooseBase(this,Ia)[Ia]}babelHelpers.classPrivateFieldLooseBase(this,Ia)[Ia]=new u.Selector({label:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_OTP_SWITCHING_PERIOD"),name:"SECURITY_OTP_DAYS",items:this.getValue("SECURITY_OTP_DAYS").ITEMS,current:this.getValue("SECURITY_OTP_DAYS").CURRENT});return babelHelpers.classPrivateFieldLooseBase(this,Ia)[Ia]}function Ya(){return new BX.UI.Alert({text:babelHelpers.classPrivateFieldLooseBase(this,Ha)[Ha](),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true})}function Wa(){return`\n\t\t${m.Loc.getMessage("INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_FIRST")}\n\t\t</br></br>\n\t\t<span class="settings-section-description-focus-text --security-info">\n\t\t\t${m.Loc.getMessage("INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_SECOND")}\n\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show('redirect=detail&code=17728602')">\n\t\t\t\t${m.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE")}\n\t\t\t</a>\n\t\t</span>`}function qa(){if(!this.hasValue("sectionAccessIp")){return}const e=new T.Section(this.getValue("sectionAccessIp"));const t=new L.SettingsSection({section:e,parent:this});const s=new T.Row({content:babelHelpers.classPrivateFieldLooseBase(this,Ma)[Ma]().getContainer()});new L.SettingsRow({row:s,parent:t});let i=0;if(this.hasValue("IP_ACCESS_RIGHTS")){for(const e of this.getValue("IP_ACCESS_RIGHTS")){i++;new L.SettingsRow({parent:t,child:babelHelpers.classPrivateFieldLooseBase(this,Ra)[Ra](e)});new L.SettingsRow({parent:t,child:babelHelpers.classPrivateFieldLooseBase(this,Ca)[Ca](e)})}}if(i===0){i++;new L.SettingsRow({parent:t,child:babelHelpers.classPrivateFieldLooseBase(this,ya)[ya](i)});new L.SettingsRow({parent:t,child:babelHelpers.classPrivateFieldLooseBase(this,Oa)[Oa](i)})}const a=()=>{if(this.getValue("IP_ACCESS_RIGHTS_ENABLED")){i++;const e=new T.Row({content:babelHelpers.classPrivateFieldLooseBase(this,ya)[ya](i).render()});m.Dom.insertBefore(e.render(),l.parentElement);const t=new T.Row({content:babelHelpers.classPrivateFieldLooseBase(this,Oa)[Oa](i).render()});m.Dom.insertBefore(t.render(),l.parentElement)}else{BX.UI.InfoHelper.show("limit_admin_ip")}};const l=m.Tag.render(va||(va=pa`
			<div class="ui-text-right">
				<a class="ui-section__link" href="javascript:void(0)" onclick="${0}">
					${0}
				</a>
			</div>
		`),a,m.Loc.getMessage("INTRANET_SETTINGS_ADDITIONAL_USER_ACCESS_IP"));new L.SettingsRow({row:new T.Row({content:l}),parent:t});return t}function za(e){const t=new u.UserSelector({inputName:`SECURITY_IP_ACCESS_${e}_USERS[]`,label:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_ACCESS_IP"),enableDepartments:true,encodeValue:e=>{if(!m.Type.isNil(e.id)){return e.id==="all-users"?"AU":e.type+e.id.toString().split(":")[0]}return null},isEnable:this.getValue("IP_ACCESS_RIGHTS_ENABLED"),helpMessageProvider:this.helpMessageProviderFactory(m.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_PRO"))});return new L.SettingsField({fieldView:t})}function Qa(e){var t;const s=`SECURITY_IP_ACCESS_${e}_IP`;const i=new u.TextInput({inputName:s,label:(t=this.getValue("IP_ACCESS_RIGHTS_ENABLED_LABEL"))!=null?t:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_ACCEPTED_IP"),isEnable:this.getValue("IP_ACCESS_RIGHTS_ENABLED"),helpMessageProvider:this.helpMessageProviderFactory(m.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_PRO"))});return new L.SettingsField({fieldView:i})}function Za(e){var t;const s=new u.UserSelector({inputName:`SECURITY_IP_ACCESS_${e.fieldNumber}_USERS[]`,label:(t=this.getValue("IP_ACCESS_RIGHTS_ENABLED_LABEL"))!=null?t:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_ACCESS_IP"),values:Object.values(e.users),enableDepartments:true,encodeValue:e=>{if(!m.Type.isNil(e.id)){return e.id==="all-users"?"AU":e.type+e.id.toString().split(":")[0]}return null},decodeValue:e=>{if(e==="AU"){return{type:e,id:""}}const t=e.match(/^(U|DR|D)(\d+)/);if(!m.Type.isArray(t)){return{type:null,id:null}}return{type:t[1],id:t[2]}}});return new L.SettingsField({fieldView:s})}function Ja(e){const t=`SECURITY_IP_ACCESS_${e.fieldNumber}_IP`;const s=new u.TextInput({inputName:t,label:m.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_ACCEPTED_IP"),value:e.ip});return new L.SettingsField({fieldView:s})}function el(){return new BX.UI.Alert({text:`\n\t\t\t\t${m.Loc.getMessage("INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_IP_ACCESS",{"#ARTICLE_CODE#":"redirect=detail&code=17300230"})}\n\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show('redirect=detail&code=17300230')">\n\t\t\t\t\t${m.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE")}\n\t\t\t\t</a>\n\t\t\t`,inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true})}function tl(){return new T.Section({title:m.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_PASSWORD_RECOVERY"),titleIconClasses:"ui-icon-set",isOpen:false,canCollapse:false})}function sl(){if(!this.hasValue("sectionHistory")){return}const e=new T.Section(this.getValue("sectionHistory"));const t=new L.SettingsSection({section:e,parent:this});const s=new BX.UI.Alert({text:`\n\t\t\t\t${m.Loc.getMessage("INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_DEVICE_HISTORY")}\n\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show('redirect=detail&code=16623484')">\n\t\t\t\t\t${m.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE")}\n\t\t\t\t</a>\n\t\t\t`,inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});const i=new T.Row({content:s.getContainer()});new L.SettingsRow({row:i,parent:t});if(this.hasValue("DEVICE_HISTORY_SETTINGS")){const e=m.Tag.render(Ta||(Ta=pa`<span>${0}</span>`),m.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_ENT",{"#TARIFF#":"ent250"}));const s=new u.Selector({label:this.getValue("DEVICE_HISTORY_SETTINGS").label,name:this.getValue("DEVICE_HISTORY_SETTINGS").name,items:this.getValue("DEVICE_HISTORY_SETTINGS").values,current:this.getValue("DEVICE_HISTORY_SETTINGS").current,isEnable:this.getValue("DEVICE_HISTORY_SETTINGS").isEnable,bannerCode:"limit_office_login_history",helpMessageProvider:this.helpMessageProviderFactory(e)});if(!this.getValue("DEVICE_HISTORY_SETTINGS").isEnable){m.Event.bind(s.getInputNode(),"click",(()=>{var e;(e=this.getAnalytic())==null?void 0:e.addEventOpenHint(this.getValue("DEVICE_HISTORY_SETTINGS").name)}));m.Event.bind(e.querySelector("a"),"click",(()=>{var e;return(e=this.getAnalytic())==null?void 0:e.addEventOpenTariffSelector(this.getValue("DEVICE_HISTORY_SETTINGS").name)}))}Ka.addToSectionHelper(s,t)}const a=m.Tag.render(Ea||(Ea=pa`
			<div class="ui-text-right">
				<a class="ui-section__link" href="/company/" target="_blank">
					${0}
				</a>
			</div>
		`),m.Loc.getMessage("INTRANET_SETTINGS_GO_TO_USER_LIST_LINK"));new L.SettingsRow({row:new T.Row({content:a}),parent:t});return t}function il(){if(!this.hasValue("sectionEventLog")){return}const e=new T.Section(this.getValue("sectionEventLog"));const t=new L.SettingsSection({section:e,parent:this});const s=new BX.UI.Alert({text:`\n\t\t\t\t${m.Loc.getMessage("INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_EVENT_LOG")}\n\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show('redirect=detail&code=17296266')">\n\t\t\t\t\t${m.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE")}\n\t\t\t\t</a>\n\t\t\t`,inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});const i=new T.Row({content:s.getContainer()});new L.SettingsRow({row:i,parent:t});const a=this.hasValue("EVENT_LOG")?m.Tag.render(Pa||(Pa=pa`
				<div class="ui-text-right">
					<a class="ui-section__link" href="${0}" target="_blank">
						${0}
					</a>
				</div>
			`),this.getValue("EVENT_LOG"),m.Loc.getMessage("INTRANET_SETTINGS_GO_TO_EVENT_LOG_LINK")):m.Tag.render(La||(La=pa`
				<div class="ui-text-right">
					<a class="ui-section__link" href="javascript:void(0)" onclick="BX.UI.InfoHelper.show('limit_office_login_log')">
						${0}
					</a>
				</div>
			`),m.Loc.getMessage("INTRANET_SETTINGS_GO_TO_EVENT_LOG_LINK"));new L.SettingsRow({row:new T.Row({content:a}),parent:t});return t}function al(){if(!this.hasValue("sectionBlackList")){return}let e=this.getValue("sectionBlackList");e["singleLink"]={href:"/settings/configs/mail_blacklist.php"};return new T.Section(e)}function ll(){if(!this.hasValue("sectionMobileApp")){return}const e=new T.Section(this.getValue("sectionMobileApp"));const t=new L.SettingsSection({section:e,parent:this});if(this.hasValue("switcherDisableCopy")){let e=new u.Checker(this.getValue("switcherDisableCopy"));Ka.addToSectionHelper(e,t)}if(this.hasValue("switcherDisableScreenshot")){let e=new u.Checker(this.getValue("switcherDisableScreenshot"));Ka.addToSectionHelper(e,t)}return t}let rl=e=>e,nl,ol,cl,dl,bl,pl,ul,hl,_l,gl,vl,Tl,El,Pl,Ll,Sl,Il,Nl,ml,Fl,fl,wl;var Bl=babelHelpers.classPrivateFieldLooseKey("urlCreate");var Hl=babelHelpers.classPrivateFieldLooseKey("urlEdit");var Al=babelHelpers.classPrivateFieldLooseKey("urlPublic");var yl=babelHelpers.classPrivateFieldLooseKey("urlPartners");var Ol=babelHelpers.classPrivateFieldLooseKey("urlImport");var Rl=babelHelpers.classPrivateFieldLooseKey("urlExport");var Cl=babelHelpers.classPrivateFieldLooseKey("previewImg");var Ml=babelHelpers.classPrivateFieldLooseKey("title");var Dl=babelHelpers.classPrivateFieldLooseKey("feedbackParams");var Gl=babelHelpers.classPrivateFieldLooseKey("buttonEdit");var Vl=babelHelpers.classPrivateFieldLooseKey("buttonPartners");var kl=babelHelpers.classPrivateFieldLooseKey("buttonMarket");var Ul=babelHelpers.classPrivateFieldLooseKey("buttonWithdraw");var Kl=babelHelpers.classPrivateFieldLooseKey("buttonPublish");var jl=babelHelpers.classPrivateFieldLooseKey("mainTemplate");var xl=babelHelpers.classPrivateFieldLooseKey("secondaryTemplate");var Xl=babelHelpers.classPrivateFieldLooseKey("buttonMainSettings");var $l=babelHelpers.classPrivateFieldLooseKey("buttonSecondarySettings");var Yl=babelHelpers.classPrivateFieldLooseKey("importPopup");var Wl=babelHelpers.classPrivateFieldLooseKey("exportPopup");var ql=babelHelpers.classPrivateFieldLooseKey("popupShare");var zl=babelHelpers.classPrivateFieldLooseKey("popupWithdraw");var Ql=babelHelpers.classPrivateFieldLooseKey("isPageExists");var Zl=babelHelpers.classPrivateFieldLooseKey("isPublished");var Jl=babelHelpers.classPrivateFieldLooseKey("canEdit");var er=babelHelpers.classPrivateFieldLooseKey("getMainTemplate");var tr=babelHelpers.classPrivateFieldLooseKey("getSecondaryTemplate");var sr=babelHelpers.classPrivateFieldLooseKey("getButtonMainSettings");var ir=babelHelpers.classPrivateFieldLooseKey("getButtonSecondarySettings");var ar=babelHelpers.classPrivateFieldLooseKey("showImportPopup");var lr=babelHelpers.classPrivateFieldLooseKey("showExportPopup");var rr=babelHelpers.classPrivateFieldLooseKey("showImportSlider");var nr=babelHelpers.classPrivateFieldLooseKey("showExportSlider");var or=babelHelpers.classPrivateFieldLooseKey("showSharePopup");var cr=babelHelpers.classPrivateFieldLooseKey("showWithdrawPopup");var dr=babelHelpers.classPrivateFieldLooseKey("getButtonEdit");var br=babelHelpers.classPrivateFieldLooseKey("getButtonPublish");var pr=babelHelpers.classPrivateFieldLooseKey("getButtonWithdraw");var ur=babelHelpers.classPrivateFieldLooseKey("getButtonPartners");var hr=babelHelpers.classPrivateFieldLooseKey("getButtonCreate");var _r=babelHelpers.classPrivateFieldLooseKey("bindButtonEvents");var gr=babelHelpers.classPrivateFieldLooseKey("bindSliderCloseEvent");class vr extends L.BaseSettingsPage{constructor(){super();Object.defineProperty(this,gr,{value:Rr});Object.defineProperty(this,_r,{value:Or});Object.defineProperty(this,hr,{value:yr});Object.defineProperty(this,ur,{value:Ar});Object.defineProperty(this,pr,{value:Hr});Object.defineProperty(this,br,{value:Br});Object.defineProperty(this,dr,{value:wr});Object.defineProperty(this,cr,{value:fr});Object.defineProperty(this,or,{value:Fr});Object.defineProperty(this,nr,{value:mr});Object.defineProperty(this,rr,{value:Nr});Object.defineProperty(this,lr,{value:Ir});Object.defineProperty(this,ar,{value:Sr});Object.defineProperty(this,ir,{value:Lr});Object.defineProperty(this,sr,{value:Pr});Object.defineProperty(this,tr,{value:Er});Object.defineProperty(this,er,{value:Tr});this.titlePage="";this.descriptionPage="";Object.defineProperty(this,Bl,{writable:true,value:null});Object.defineProperty(this,Hl,{writable:true,value:null});Object.defineProperty(this,Al,{writable:true,value:null});Object.defineProperty(this,yl,{writable:true,value:null});Object.defineProperty(this,Ol,{writable:true,value:null});Object.defineProperty(this,Rl,{writable:true,value:null});Object.defineProperty(this,Cl,{writable:true,value:null});Object.defineProperty(this,Ml,{writable:true,value:null});Object.defineProperty(this,Dl,{writable:true,value:null});Object.defineProperty(this,Gl,{writable:true,value:null});Object.defineProperty(this,Vl,{writable:true,value:null});Object.defineProperty(this,kl,{writable:true,value:null});Object.defineProperty(this,Ul,{writable:true,value:null});Object.defineProperty(this,Kl,{writable:true,value:null});Object.defineProperty(this,jl,{writable:true,value:null});Object.defineProperty(this,xl,{writable:true,value:null});Object.defineProperty(this,Xl,{writable:true,value:null});Object.defineProperty(this,$l,{writable:true,value:null});Object.defineProperty(this,Yl,{writable:true,value:null});Object.defineProperty(this,Wl,{writable:true,value:null});Object.defineProperty(this,ql,{writable:true,value:null});Object.defineProperty(this,zl,{writable:true,value:null});Object.defineProperty(this,Ql,{writable:true,value:false});Object.defineProperty(this,Zl,{writable:true,value:false});Object.defineProperty(this,Jl,{writable:true,value:true});this.titlePage=m.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_MAINPAGE");this.descriptionPage=m.Loc.getMessage("INTRANET_SETTINGS_TITLE_DESCRIPTION_PAGE_MAINPAGE")}getType(){return"mainpage"}appendSections(e){var t,s,i,a;const l=this.getValue("main-page");babelHelpers.classPrivateFieldLooseBase(this,Bl)[Bl]=l.urlCreate||null;babelHelpers.classPrivateFieldLooseBase(this,Hl)[Hl]=l.urlEdit||null;babelHelpers.classPrivateFieldLooseBase(this,Al)[Al]=l.urlPublic||null;babelHelpers.classPrivateFieldLooseBase(this,yl)[yl]=l.urlPartners||null;babelHelpers.classPrivateFieldLooseBase(this,Ol)[Ol]=l.urlImport||null;babelHelpers.classPrivateFieldLooseBase(this,Rl)[Rl]=l.urlExport||null;babelHelpers.classPrivateFieldLooseBase(this,Cl)[Cl]=l.previewImg||null;babelHelpers.classPrivateFieldLooseBase(this,Dl)[Dl]=l.feedbackParams||null;babelHelpers.classPrivateFieldLooseBase(this,Ql)[Ql]=(t=l.isPageExists)!=null?t:false;babelHelpers.classPrivateFieldLooseBase(this,Zl)[Zl]=(s=l.isPublished)!=null?s:false;babelHelpers.classPrivateFieldLooseBase(this,Ml)[Ml]=(i=l.title)!=null?i:null;babelHelpers.classPrivateFieldLooseBase(this,Jl)[Jl]=(a=l.canEdit)!=null?a:false;const r=new L.SettingsSection({parent:this,section:{canCollapse:false,isOpen:true}});const n=new L.SettingsSection({parent:this,section:{canCollapse:false,isOpen:true}});const o=m.Tag.render(nl||(nl=rl`<div>		
			${0}		
		</div>`),babelHelpers.classPrivateFieldLooseBase(this,er)[er]());r.getSectionView().append(new T.Row({content:o}).render());if(babelHelpers.classPrivateFieldLooseBase(this,Ql)[Ql]){const e=m.Tag.render(ol||(ol=rl`<div>
				${0}			
			</div>`),babelHelpers.classPrivateFieldLooseBase(this,tr)[tr]());n.getSectionView().append(new T.Row({content:e}).render())}babelHelpers.classPrivateFieldLooseBase(this,_r)[_r]();babelHelpers.classPrivateFieldLooseBase(this,gr)[gr]();n.renderTo(e);r.renderTo(e)}getInfoTemplate(){this.infoTemplate=m.Tag.render(cl||(cl=rl`
			<div class="intranet-settings__main-page-info">
				<div class="intranet-settings__main-page-info-title">
					${0}
				</div>
				<div class="intranet-settings__main-page-info-subtitle">
					${0}
					<div class="ui-icon-set --help intranet-settings__main-page-info-help"></div>
				</div>
			</div>
		`),m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_INFO_TITLE"),m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_INFO_SUBTITLE"));m.Event.bind(this.infoTemplate.querySelector(".intranet-settings__main-page-info-help"),"mouseenter",(e=>{const t=this.infoTemplate.querySelector(".intranet-settings__main-page-info-help").offsetWidth;this.warningHintPopup=new I.Popup({angle:true,autoHide:true,content:m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_HINT_WARNING"),cacheable:false,animation:"fading-slide",bindElement:e.target,offsetTop:0,offsetLeft:parseInt(t/2),bindOptions:{position:"top"},darkMode:true});this.warningHintPopup.show()}));m.Event.bind(this.infoTemplate.querySelector(".intranet-settings__main-page-info-help"),"mouseleave",(()=>{if(this.warningHintPopup){setTimeout((()=>{this.warningHintPopup.destroy();this.warningHintPopup=null}),300)}}));return this.infoTemplate}getInfoSuccessTemplate(){this.infoSuccessTemplate=m.Tag.render(dl||(dl=rl`
			<div class="intranet-settings__main-page-info --success">
				<div class="intranet-settings__main-page-info-title">
					${0}				
				</div>
				<div class="intranet-settings__main-page-info-subtitle">
					${0}
					<div class="ui-icon-set --help intranet-settings__main-page-info-help"></div>
				</div>
			</div>
		`),m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_INFO_SUCCESS_TITLE"),m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_INFO_SUCCESS_SUBTITLE"));m.Event.bind(this.infoSuccessTemplate.querySelector(".intranet-settings__main-page-info-help"),"mouseenter",(e=>{const t=this.infoSuccessTemplate.querySelector(".intranet-settings__main-page-info-help").offsetWidth;this.successHintPopup=new I.Popup({angle:true,autoHide:true,content:m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_HINT_SUCCESS"),cacheable:false,animation:"fading-slide",bindElement:e.target,offsetTop:0,offsetLeft:parseInt(t/2),bindOptions:{position:"top"},darkMode:true});this.successHintPopup.show()}));m.Event.bind(this.infoSuccessTemplate.querySelector(".intranet-settings__main-page-info-help"),"mouseleave",(()=>{if(this.successHintPopup){setTimeout((()=>{this.successHintPopup.destroy();this.successHintPopup=null}),300)}}));return this.infoSuccessTemplate}renderLockElement(){return m.Tag.render(bl||(bl=rl`<span class="intranet-settings-mp-icon ui-icon-set --lock"></span>`))}}function Tr(){if(!babelHelpers.classPrivateFieldLooseBase(this,jl)[jl]){babelHelpers.classPrivateFieldLooseBase(this,jl)[jl]=m.Tag.render(pl||(pl=rl`
				<div class="intranet-settings__main-page-template">
					<div class="intranet-settings__main-page-icon-box">
						<div class="intranet-settings__main-page-icon"></div>
					</div>
					<div class="intranet-settings__main-page-content">
						<ul class="intranet-settings__main-page-list">
							<li class="intranet-settings__main-page-list-item">
								<div class="ui-icon-set --check intranet-settings__main-page-list-icon"></div>
								<div class="intranet-settings__main-page-list-name">
									${0}
								</div>																																
							</li>
							<li class="intranet-settings__main-page-list-item">
								<div class="ui-icon-set --check intranet-settings__main-page-list-icon"></div>
								<div class="intranet-settings__main-page-list-name">
									${0}
								</div>								
							</li>
							<li class="intranet-settings__main-page-list-item">
								<div class="ui-icon-set --check intranet-settings__main-page-list-icon"></div>
								<div class="intranet-settings__main-page-list-name">
									${0}
								</div>
							</li>
						</ul>
						<div class="intranet-settings__main-page-button-box">
							${0}
							<div class="intranet-settings__main-page-button-box-right">
								${0}
								${0}
							</div>
						</div>
					</div>
				</div>
			`),m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_LIST_ITEM_1"),m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_LIST_ITEM_2"),m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_LIST_ITEM_3"),babelHelpers.classPrivateFieldLooseBase(this,hr)[hr](),babelHelpers.classPrivateFieldLooseBase(this,ur)[ur](),babelHelpers.classPrivateFieldLooseBase(this,sr)[sr]())}return babelHelpers.classPrivateFieldLooseBase(this,jl)[jl]}function Er(){if(!babelHelpers.classPrivateFieldLooseBase(this,xl)[xl]){var e;const t=babelHelpers.classPrivateFieldLooseBase(this,Cl)[Cl]?m.Tag.render(ul||(ul=rl`<img 
						src="${0}"
						class="intranet-settings__main-page-preview" 
					/>`),babelHelpers.classPrivateFieldLooseBase(this,Cl)[Cl]):"";babelHelpers.classPrivateFieldLooseBase(this,xl)[xl]=m.Tag.render(hl||(hl=rl`
				<div class="intranet-settings__main-page-template --secondary-template">
					<div class="intranet-settings__main-page-preview-box">
						${0}
					</div>
					<div class="intranet-settings__main-page-content">
						<div class="intranet-settings__main-page-title">
							${0}
						</div>
						<div class="intranet-settings__main-page-info-template">
							${0}
						</div>					
						<div class="intranet-settings__main-page-button-box">
							${0}
							<div class="intranet-settings__main-page-button-box-right">
								${0}
								${0}
							</div>
						</div>
					</div>
				</div>			
			`),t,(e=babelHelpers.classPrivateFieldLooseBase(this,Ml)[Ml])!=null?e:"",babelHelpers.classPrivateFieldLooseBase(this,Zl)[Zl]?this.getInfoSuccessTemplate():this.getInfoTemplate(),babelHelpers.classPrivateFieldLooseBase(this,dr)[dr](),babelHelpers.classPrivateFieldLooseBase(this,Zl)[Zl]?babelHelpers.classPrivateFieldLooseBase(this,pr)[pr]():babelHelpers.classPrivateFieldLooseBase(this,br)[br](),babelHelpers.classPrivateFieldLooseBase(this,ir)[ir]())}return babelHelpers.classPrivateFieldLooseBase(this,xl)[xl]}function Pr(){if(!babelHelpers.classPrivateFieldLooseBase(this,Xl)[Xl]){babelHelpers.classPrivateFieldLooseBase(this,Xl)[Xl]=m.Tag.render(_l||(_l=rl`
				<button class="intranet-settings-btn-settings">
					<div class="ui-icon-set --more"></div>
				</button>
			`))}return babelHelpers.classPrivateFieldLooseBase(this,Xl)[Xl]}function Lr(){if(!babelHelpers.classPrivateFieldLooseBase(this,$l)[$l]){babelHelpers.classPrivateFieldLooseBase(this,$l)[$l]=m.Tag.render(gl||(gl=rl`
			<button class="intranet-settings-btn-settings">
				<div class="ui-icon-set --more"></div>
			</button>`))}return babelHelpers.classPrivateFieldLooseBase(this,$l)[$l]}function Sr(){var e;if(!babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl]){const e=babelHelpers.classPrivateFieldLooseBase(this,Jl)[Jl]?m.Tag.render(vl||(vl=rl`<span>${0}</span>`),m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_IMPORT_POPUP")):m.Tag.render(Tl||(Tl=rl`<span class="intranet-settings-mp-popup-item">${0} ${0}</span>`),m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_IMPORT_POPUP"),this.renderLockElement());babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl]=new I.Menu({angle:true,animation:"fading-slide",bindElement:babelHelpers.classPrivateFieldLooseBase(this,Xl)[Xl],className:babelHelpers.classPrivateFieldLooseBase(this,Jl)[Jl]?"":"--disabled",items:[{id:"importPopup",html:e,onclick:babelHelpers.classPrivateFieldLooseBase(this,rr)[rr].bind(this)}],offsetLeft:20,events:{onPopupClose:()=>{},onPopupShow:()=>{}}})}(e=babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl])==null?void 0:e.show()}function Ir(){var e;if(!babelHelpers.classPrivateFieldLooseBase(this,Wl)[Wl]){const e=babelHelpers.classPrivateFieldLooseBase(this,Jl)[Jl]?m.Tag.render(El||(El=rl`<span>${0}</span>`),m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_EXPORT_POPUP")):m.Tag.render(Pl||(Pl=rl`<span class="intranet-settings-mp-popup-item --disabled">${0} ${0}</span>`),m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_EXPORT_POPUP"),this.renderLockElement());babelHelpers.classPrivateFieldLooseBase(this,Wl)[Wl]=new I.Menu({angle:true,animation:"fading-slide",bindElement:babelHelpers.classPrivateFieldLooseBase(this,$l)[$l],className:babelHelpers.classPrivateFieldLooseBase(this,Jl)[Jl]?"":"--disabled",items:[{id:"exportPopup",html:e,onclick:babelHelpers.classPrivateFieldLooseBase(this,nr)[nr].bind(this)}],offsetLeft:20,events:{onPopupClose:()=>{},onPopupShow:()=>{}}})}(e=babelHelpers.classPrivateFieldLooseBase(this,Wl)[Wl])==null?void 0:e.show()}function Nr(){if(!babelHelpers.classPrivateFieldLooseBase(this,Jl)[Jl]){BX.UI.InfoHelper.show("limit_office_vibe");return}if(typeof BX.SidePanel==="undefined"){return}if(typeof BX.SidePanel!=="undefined"&&babelHelpers.classPrivateFieldLooseBase(this,Ol)[Ol]){const e=()=>{BX.SidePanel.Instance.open(babelHelpers.classPrivateFieldLooseBase(this,Ol)[Ol],{width:491,allowChangeHistory:false,cacheable:false,data:{rightBoundary:0}})};if(!babelHelpers.classPrivateFieldLooseBase(this,Ql)[Ql]){e();return}BX.Runtime.loadExtension("ui.dialogs.messagebox").then((()=>{const t=new BX.UI.Dialogs.MessageBox({message:m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_IMPORT_POPUP_MESSAGEBOX_MESSAGE"),title:m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_IMPORT_POPUP_MESSAGEBOX_TITLE"),buttons:BX.UI.Dialogs.MessageBoxButtons.OK_CANCEL,okCaption:m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_IMPORT_POPUP_MESSAGEBOX_OK_BUTTON"),cancelCaption:m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_IMPORT_POPUP_MESSAGEBOX_CANCEL_BUTTON"),onOk:()=>{e();return true},onCancel:()=>true});t.show();if(t.popupWindow&&t.popupWindow.popupContainer){t.popupWindow.popupContainer.classList.add("intranet-settings__main-page-popup")}}))}}function mr(){if(!babelHelpers.classPrivateFieldLooseBase(this,Jl)[Jl]){BX.UI.InfoHelper.show("limit_office_vibe");return}if(typeof BX.SidePanel==="undefined"){return}if(typeof BX.SidePanel!=="undefined"&&babelHelpers.classPrivateFieldLooseBase(this,Rl)[Rl]){BX.SidePanel.Instance.open(babelHelpers.classPrivateFieldLooseBase(this,Rl)[Rl],{width:491,allowChangeHistory:false,cacheable:false,data:{rightBoundary:0}})}}function Fr(){if(!babelHelpers.classPrivateFieldLooseBase(this,ql)[ql]){var e;babelHelpers.classPrivateFieldLooseBase(this,ql)[ql]=new I.Popup({titleBar:m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_SHARE_POPUP_TITLE_MSGVER_1"),content:m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_SHARE_POPUP_CONTENT"),width:350,closeIcon:true,closeByEsc:true,animation:"fading-slide",buttons:[new g.Button({text:m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_SHARE_POPUP_BTN_CONFIRM"),color:g.Button.Color.PRIMARY,onclick:()=>{const e=this.getInfoSuccessTemplate();const t=babelHelpers.classPrivateFieldLooseBase(this,xl)[xl].querySelector(".intranet-settings__main-page-info-template");const s=t.querySelector(".intranet-settings__main-page-info:not(.--success)");m.Dom.replace(s,e);m.ajax.runAction("intranet.mainpage.publish").then((()=>{this.emit("publish");if(babelHelpers.classPrivateFieldLooseBase(this,Al)[Al]){babelHelpers.classPrivateFieldLooseBase(this,Zl)[Zl]=true}}));babelHelpers.classPrivateFieldLooseBase(this,ql)[ql].close();BX.UI.Analytics.sendData({tool:"landing",category:"vibe",event:"publish_page",c_sub_section:"from_settings",status:"success"})}}),new g.Button({text:m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_POPUP_BTN_CANCEL"),color:g.Button.Color.LIGHT_BORDER,onclick:()=>{babelHelpers.classPrivateFieldLooseBase(this,ql)[ql].close()}})],events:{onClose:()=>{}}});(e=babelHelpers.classPrivateFieldLooseBase(this,ql)[ql])==null?void 0:e.show()}else{var t;(t=babelHelpers.classPrivateFieldLooseBase(this,ql)[ql])==null?void 0:t.show()}}function fr(){if(!babelHelpers.classPrivateFieldLooseBase(this,zl)[zl]){var e;const t=babelHelpers.classPrivateFieldLooseBase(this,Jl)[Jl]?m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_WITHDRAW_POPUP_TITLE"):m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_WITHDRAW_POPUP_TITLE_FREE");const s=babelHelpers.classPrivateFieldLooseBase(this,Jl)[Jl]?m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_WITHDRAW_POPUP_CONTENT"):m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_WITHDRAW_POPUP_CONTENT_FREE");const i=babelHelpers.classPrivateFieldLooseBase(this,Jl)[Jl]?m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_WITHDRAW_POPUP_BTN_CONFIRM"):m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_WITHDRAW_POPUP_BTN_CONFIRM_FREE");babelHelpers.classPrivateFieldLooseBase(this,zl)[zl]=new I.Popup({titleBar:t,content:s,width:350,closeIcon:true,closeByEsc:true,animation:"fading-slide",buttons:[new g.Button({text:i,color:g.Button.Color.DANGER_DARK,onclick:()=>{const e=this.getInfoTemplate();const t=babelHelpers.classPrivateFieldLooseBase(this,xl)[xl].querySelector(".intranet-settings__main-page-info-template");const s=t.querySelector(".intranet-settings__main-page-info");m.Dom.replace(s,e);m.ajax.runAction("intranet.mainpage.withdraw").then((()=>{this.emit("withdraw");babelHelpers.classPrivateFieldLooseBase(this,Zl)[Zl]=false}));babelHelpers.classPrivateFieldLooseBase(this,zl)[zl].close();BX.UI.Analytics.sendData({tool:"landing",category:"vibe",event:"unpublish_page",c_sub_section:"from_settings"})}}),new g.Button({text:m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_POPUP_BTN_CANCEL"),color:g.Button.Color.LIGHT_BORDER,onclick:()=>{babelHelpers.classPrivateFieldLooseBase(this,zl)[zl].close()}})],events:{onClose:()=>{}}});(e=babelHelpers.classPrivateFieldLooseBase(this,zl)[zl])==null?void 0:e.show()}else{var t;(t=babelHelpers.classPrivateFieldLooseBase(this,zl)[zl])==null?void 0:t.show()}}function wr(){if(!babelHelpers.classPrivateFieldLooseBase(this,Hl)[Hl]){return null}if(!babelHelpers.classPrivateFieldLooseBase(this,Gl)[Gl]){const e=m.Tag.render(Ll||(Ll=rl`			
				<button class="ui-btn ui-btn-md ui-btn-round ui-btn-no-caps --light-blue">
					${0}
				</button>
			`),m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_BUTTON_EDIT"));const t=m.Tag.render(Sl||(Sl=rl`
				<button class="ui-btn ui-btn-md ui-btn-round ui-btn-no-caps --light-blue --disabled">
					${0}
					${0}
				</button>
			`),m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_BUTTON_EDIT"),this.renderLockElement());babelHelpers.classPrivateFieldLooseBase(this,Gl)[Gl]=babelHelpers.classPrivateFieldLooseBase(this,Jl)[Jl]?e:t}return babelHelpers.classPrivateFieldLooseBase(this,Gl)[Gl]}function Br(){if(!babelHelpers.classPrivateFieldLooseBase(this,Kl)[Kl]){const e=m.Tag.render(Il||(Il=rl`
				<button class="ui-btn ui-btn-md ui-btn-round ui-btn-no-caps
						${0}">
					${0}
				</button>
			`),babelHelpers.classPrivateFieldLooseBase(this,Ql)[Ql]?"ui-btn-primary":"--light-blue",m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_BUTTON_PUBLIC"));const t=m.Tag.render(Nl||(Nl=rl`
				<button class="ui-btn ui-btn-md ui-btn-round ui-btn-no-caps --disabled
						${0}">
					${0}
					${0}
				</button>
			`),babelHelpers.classPrivateFieldLooseBase(this,Ql)[Ql]?"ui-btn-primary":"--light-blue",m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_BUTTON_PUBLIC"),this.renderLockElement());babelHelpers.classPrivateFieldLooseBase(this,Kl)[Kl]=babelHelpers.classPrivateFieldLooseBase(this,Jl)[Jl]?e:t}return babelHelpers.classPrivateFieldLooseBase(this,Kl)[Kl]}function Hr(){if(!babelHelpers.classPrivateFieldLooseBase(this,Ul)[Ul]){babelHelpers.classPrivateFieldLooseBase(this,Ul)[Ul]=m.Tag.render(ml||(ml=rl`
				<button class="ui-btn ui-btn-md ui-btn-round ui-btn-no-caps
						${0}">
					${0}
				</button>
			`),babelHelpers.classPrivateFieldLooseBase(this,Ql)[Ql]?"ui-btn-primary":"--light-blue",m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_BUTTON_UNPUBLIC"))}return babelHelpers.classPrivateFieldLooseBase(this,Ul)[Ul]}function Ar(){if(!babelHelpers.classPrivateFieldLooseBase(this,yl)[yl]){return null}if(!babelHelpers.classPrivateFieldLooseBase(this,Vl)[Vl]){babelHelpers.classPrivateFieldLooseBase(this,Vl)[Vl]=m.Tag.render(Fl||(Fl=rl`
				<button class="ui-btn ui-btn-md ui-btn-round ui-btn-no-caps --light-gray">
					${0}
				</button>
			`),m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_BUTTON_PARTNERS"))}return babelHelpers.classPrivateFieldLooseBase(this,Vl)[Vl]}function yr(){if(!babelHelpers.classPrivateFieldLooseBase(this,Bl)[Bl]){return null}if(!babelHelpers.classPrivateFieldLooseBase(this,kl)[kl]){const e=!babelHelpers.classPrivateFieldLooseBase(this,Ql)[Ql]?"ui-btn-primary":"--light-blue";const t=m.Tag.render(fl||(fl=rl`			
				<button class="ui-btn ui-btn-md ui-btn-round ui-btn-no-caps ${0}">
					${0}
				</button>
			`),e,m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_BUTTON_MARKET"));const s=m.Tag.render(wl||(wl=rl`
				<button class="ui-btn ui-btn-md ui-btn-round ui-btn-no-caps ${0} --disabled">
					${0}
					${0}
				</button>
			`),e,m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_BUTTON_MARKET"),this.renderLockElement());babelHelpers.classPrivateFieldLooseBase(this,kl)[kl]=babelHelpers.classPrivateFieldLooseBase(this,Jl)[Jl]?t:s}return babelHelpers.classPrivateFieldLooseBase(this,kl)[kl]}function Or(){if(typeof BX.SidePanel==="undefined"){return}m.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,sr)[sr](),"click",babelHelpers.classPrivateFieldLooseBase(this,ar)[ar].bind(this));m.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,ir)[ir](),"click",babelHelpers.classPrivateFieldLooseBase(this,lr)[lr].bind(this));if(babelHelpers.classPrivateFieldLooseBase(this,hr)[hr]()){m.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,hr)[hr](),"click",(()=>{if(babelHelpers.classPrivateFieldLooseBase(this,Jl)[Jl]){BX.SidePanel.Instance.open(babelHelpers.classPrivateFieldLooseBase(this,Bl)[Bl])}else{BX.UI.InfoHelper.show("limit_office_vibe")}BX.UI.Analytics.sendData({tool:"landing",category:"vibe",event:"open_market",status:babelHelpers.classPrivateFieldLooseBase(this,Jl)[Jl]?"success":"error_limit"})}))}if(babelHelpers.classPrivateFieldLooseBase(this,dr)[dr]()){m.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,dr)[dr](),"click",(()=>{if(babelHelpers.classPrivateFieldLooseBase(this,Jl)[Jl]){BX.SidePanel.Instance.open(babelHelpers.classPrivateFieldLooseBase(this,Hl)[Hl],{customLeftBoundary:66,events:{onCloseComplete:()=>{if(babelHelpers.classPrivateFieldLooseBase(this,Al)[Al]){window.top.location=babelHelpers.classPrivateFieldLooseBase(this,Al)[Al]}}}})}else{BX.UI.InfoHelper.show("limit_office_vibe")}BX.UI.Analytics.sendData({tool:"landing",category:"vibe",event:"open_editor",status:babelHelpers.classPrivateFieldLooseBase(this,Jl)[Jl]?"success":"error_limit"})}))}if(babelHelpers.classPrivateFieldLooseBase(this,ur)[ur]()){m.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,ur)[ur](),"click",(()=>{if(!babelHelpers.classPrivateFieldLooseBase(this,Dl)[Dl]){return}m.Runtime.loadExtension("ui.feedback.form").then((()=>{babelHelpers.classPrivateFieldLooseBase(this,Dl)[Dl].title=m.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_BUTTON_PARTNERS");BX.UI.Feedback.Form.open(babelHelpers.classPrivateFieldLooseBase(this,Dl)[Dl])}))}))}this.subscribe("publish",(()=>{m.Dom.replace(babelHelpers.classPrivateFieldLooseBase(this,br)[br](),babelHelpers.classPrivateFieldLooseBase(this,pr)[pr]())}));this.subscribe("withdraw",(()=>{m.Dom.replace(babelHelpers.classPrivateFieldLooseBase(this,pr)[pr](),babelHelpers.classPrivateFieldLooseBase(this,br)[br]())}));m.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,br)[br](),"click",(()=>{if(!babelHelpers.classPrivateFieldLooseBase(this,Jl)[Jl]){BX.UI.InfoHelper.show("limit_office_vibe");BX.UI.Analytics.sendData({tool:"landing",category:"vibe",event:"publish_page",c_sub_section:"from_settings",status:"error_limit"});return}babelHelpers.classPrivateFieldLooseBase(this,or)[or]()}));m.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,pr)[pr](),"click",babelHelpers.classPrivateFieldLooseBase(this,cr)[cr].bind(this))}function Rr(){const e=babelHelpers.classPrivateFieldLooseBase(this,Zl)[Zl];S.EventEmitter.subscribe(S.EventEmitter.GLOBAL_TARGET,"SidePanel.Slider:onClose",(()=>{if(babelHelpers.classPrivateFieldLooseBase(this,Zl)[Zl]!==e){const e=babelHelpers.classPrivateFieldLooseBase(this,Zl)[Zl]?babelHelpers.classPrivateFieldLooseBase(this,Al)[Al]:"/";window.top.location=e}}))}var Cr=babelHelpers.classPrivateFieldLooseKey("type");var Mr=babelHelpers.classPrivateFieldLooseKey("extensions");class Dr extends L.BaseSettingsPage{constructor(e,t){super();Object.defineProperty(this,Cr,{writable:true,value:void 0});Object.defineProperty(this,Mr,{writable:true,value:[]});babelHelpers.classPrivateFieldLooseBase(this,Cr)[Cr]=e;babelHelpers.classPrivateFieldLooseBase(this,Mr)[Mr]=t}getType(){return babelHelpers.classPrivateFieldLooseBase(this,Cr)[Cr]}onSuccessDataFetched(e){m.Runtime.loadExtension(babelHelpers.classPrivateFieldLooseBase(this,Mr)[Mr]).then((t=>{let s;let i=Object.values(t).some((e=>{if(m.Type.isObjectLike(e)){let t=null;if(e.prototype instanceof L.BaseSettingsPage){t=new e}else if(e instanceof L.BaseSettingsPage){t=e}if(t instanceof L.BaseSettingsPage){s=t;return true}}return false}));if(i===false){const e=new S.BaseEvent;i=S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:onExternalPageLoaded:"+this.getType(),e).some((e=>{if(e instanceof L.BaseSettingsPage){s=e;return true}return false}))}if(s instanceof L.BaseSettingsPage){this.getParentElement().registerPage(s);s.setData(e.data);this.getParentElement().removeChild(this);if(m.Dom.isShown(this.getPage())){s.getParentElement().show(s.getType())}}else{this.onFailDataFetched("The external page was not found.")}}),this.onFailDataFetched.bind(this))}}var Gr=babelHelpers.classPrivateFieldLooseKey("pages");class Vr{constructor(e){Object.defineProperty(this,Gr,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Gr)[Gr]=e}fetchPage(e){return new Promise(((t,s)=>{const i=babelHelpers.classPrivateFieldLooseBase(this,Gr)[Gr].some((i=>{if(e.getType()===i.getType()){m.ajax.runComponentAction("bitrix:intranet.settings","get",{mode:"class",data:{type:e.getType()}}).then(t,s);return true}return false}));if(i!==true){return s({error:"The page was not found in pageManager"})}}))}collectData(){const e={};babelHelpers.classPrivateFieldLooseBase(this,Gr)[Gr].forEach((t=>{if(t.hasData()){e[t.getType()]=this.constructor.getFormData(t.getFormNode())}}));return e}static getFormData(e){return BX.ajax.prepareForm(e).data}}class kr{fetch(e){return new Promise}}var Ur=babelHelpers.classPrivateFieldLooseKey("query");var Kr=babelHelpers.classPrivateFieldLooseKey("minSymbol");var jr=babelHelpers.classPrivateFieldLooseKey("dataSource");var xr=babelHelpers.classPrivateFieldLooseKey("result");var Xr=babelHelpers.classPrivateFieldLooseKey("state");class $r{constructor(e,t=3){Object.defineProperty(this,Ur,{writable:true,value:void 0});Object.defineProperty(this,Kr,{writable:true,value:void 0});Object.defineProperty(this,jr,{writable:true,value:void 0});Object.defineProperty(this,xr,{writable:true,value:void 0});Object.defineProperty(this,Xr,{writable:true,value:void 0});if(!(e instanceof kr)){throw new Error("Unexpected type, expect: DataSource")}babelHelpers.classPrivateFieldLooseBase(this,jr)[jr]=e;babelHelpers.classPrivateFieldLooseBase(this,Kr)[Kr]=t;babelHelpers.classPrivateFieldLooseBase(this,xr)[xr]=[];babelHelpers.classPrivateFieldLooseBase(this,Xr)[Xr]="ready"}find(e){if(e.length<babelHelpers.classPrivateFieldLooseBase(this,Kr)[Kr]){return}babelHelpers.classPrivateFieldLooseBase(this,Ur)[Ur]=e;this.changeState($r.STATE_WAIT);babelHelpers.classPrivateFieldLooseBase(this,jr)[jr].fetch(babelHelpers.classPrivateFieldLooseBase(this,Ur)[Ur]).then(this.resolve.bind(this),this.reject.bind(this))}changeState(e){if(babelHelpers.classPrivateFieldLooseBase(this,Xr)[Xr]===e){return}babelHelpers.classPrivateFieldLooseBase(this,Xr)[Xr]=e;S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:searchChangeState",{state:babelHelpers.classPrivateFieldLooseBase(this,Xr)[Xr]})}getMinSymbol(){return babelHelpers.classPrivateFieldLooseBase(this,Kr)[Kr]}resolve(e){babelHelpers.classPrivateFieldLooseBase(this,xr)[xr]=e.data;this.changeState(babelHelpers.classPrivateFieldLooseBase(this,xr)[xr].length>0?$r.STATE_READY:$r.STATE_NOT_FOUND)}reject(e){babelHelpers.classPrivateFieldLooseBase(this,xr)[xr]=[];this.changeState($r.STATE_READY)}getResult(){return babelHelpers.classPrivateFieldLooseBase(this,xr)[xr]}getOthers(){return[{link:"/stream/",title:m.Loc.getMessage("INTRANET_SETTINGS_TITLE_TOOL_TEAMWORK")},{link:"/tasks/config/permissions/",title:m.Loc.getMessage("INTRANET_SETTINGS_TITLE_TOOL_TASKS")},{link:"/crm/configs/",title:m.Loc.getMessage("INTRANET_SETTINGS_TITLE_TOOL_CRM")},{link:"/shop/documents/?inventoryManagementSource=inventory",title:m.Loc.getMessage("INTRANET_SETTINGS_TITLE_TOOL_WAREHOUSE")},{link:"/sites/",title:m.Loc.getMessage("INTRANET_SETTINGS_TITLE_TOOL_SITES")},{link:"/company/vis_structure.php",title:m.Loc.getMessage("INTRANET_SETTINGS_TITLE_TOOL_COMPANY")}]}}$r.STATE_READY="ready";$r.STATE_WAIT="wait";$r.STATE_NOT_FOUND="not_found";let Yr=e=>e,Wr,qr,zr,Qr,Zr,Jr,en,tn,sn,an,ln,rn,nn,on,cn;var dn=babelHelpers.classPrivateFieldLooseKey("searcher");var bn=babelHelpers.classPrivateFieldLooseKey("inputNode");var pn=babelHelpers.classPrivateFieldLooseKey("iconContainer");var un=babelHelpers.classPrivateFieldLooseKey("popup");var hn=babelHelpers.classPrivateFieldLooseKey("timeoutId");var _n=babelHelpers.classPrivateFieldLooseKey("timeout");var gn=babelHelpers.classPrivateFieldLooseKey("nav");class vn{constructor(e){Object.defineProperty(this,dn,{writable:true,value:void 0});Object.defineProperty(this,bn,{writable:true,value:void 0});Object.defineProperty(this,pn,{writable:true,value:void 0});Object.defineProperty(this,un,{writable:true,value:void 0});Object.defineProperty(this,hn,{writable:true,value:void 0});Object.defineProperty(this,_n,{writable:true,value:void 0});Object.defineProperty(this,gn,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,dn)[dn]=e.searcher;babelHelpers.classPrivateFieldLooseBase(this,bn)[bn]=e.inputNode;babelHelpers.classPrivateFieldLooseBase(this,pn)[pn]=e.iconContainer;babelHelpers.classPrivateFieldLooseBase(this,_n)[_n]=e.timeout;babelHelpers.classPrivateFieldLooseBase(this,gn)[gn]=new Pn;babelHelpers.classPrivateFieldLooseBase(this,un)[un]=new I.Popup("settings-search-popup",babelHelpers.classPrivateFieldLooseBase(this,bn)[bn],{closeByEsc:true,angle:false,overlay:false,width:332,offsetTop:4,background:"#fff",contentBackground:"#fff",contentPadding:0,autoHide:true,borderRadius:6,autoHideHandler:e=>e.target!==babelHelpers.classPrivateFieldLooseBase(this,bn)[bn]});babelHelpers.classPrivateFieldLooseBase(this,un)[un].setContent(this.renderContent());m.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,bn)[bn],"focus",(()=>{if(!babelHelpers.classPrivateFieldLooseBase(this,un)[un].isShown()){babelHelpers.classPrivateFieldLooseBase(this,un)[un].show()}}));S.EventEmitter.subscribe("BX.Intranet.Settings:searchChangeState",(e=>{const{state:t}=e.data;babelHelpers.classPrivateFieldLooseBase(this,gn)[gn].clean();babelHelpers.classPrivateFieldLooseBase(this,un)[un].setContent(this.renderContent(t))}));m.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,pn)[pn].querySelector("#intranet-settings-icon-delete"),"click",(()=>{m.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,pn)[pn],"main-ui-show");babelHelpers.classPrivateFieldLooseBase(this,bn)[bn].value=""}));m.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,bn)[bn],"keyup",(e=>{if(e.keyCode===37||e.keyCode===39){return}if(e.keyCode===13){babelHelpers.classPrivateFieldLooseBase(this,gn)[gn].current().dispatchEvent(new MouseEvent("click"));babelHelpers.classPrivateFieldLooseBase(this,gn)[gn].unHighlightAll();return}if(e.keyCode===38){babelHelpers.classPrivateFieldLooseBase(this,gn)[gn].prev().highlight();if(!m.Type.isNil(babelHelpers.classPrivateFieldLooseBase(this,gn)[gn].current())){this.updateScroll(babelHelpers.classPrivateFieldLooseBase(this,gn)[gn].current())}return}if(e.keyCode===40){babelHelpers.classPrivateFieldLooseBase(this,gn)[gn].next().highlight();if(!m.Type.isNil(babelHelpers.classPrivateFieldLooseBase(this,gn)[gn].current())){this.updateScroll(babelHelpers.classPrivateFieldLooseBase(this,gn)[gn].current())}return}if(this.getQuery().length>0){m.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,pn)[pn],"main-ui-show")}else{m.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,pn)[pn],"main-ui-show")}if(!babelHelpers.classPrivateFieldLooseBase(this,un)[un].isShown()&&this.getQuery().length>0){babelHelpers.classPrivateFieldLooseBase(this,un)[un].show()}this.find()}))}updateScroll(e){const t=e.getBoundingClientRect();const s=babelHelpers.classPrivateFieldLooseBase(this,un)[un].getContentContainer().firstElementChild;const i=t.top-s.getBoundingClientRect().top;const a=t.bottom-s.getBoundingClientRect().bottom;const l=10;if(i<0&&a<=0){s.scrollTo(0,i+s.scrollTop-l)}else if(i>=0&&a>0){s.scrollTo(0,a+s.scrollTop+l)}}renderWait(){const e=m.Tag.render(Wr||(Wr=Yr`<span class="title-search-waiter-img"></span>`));const t=new N.Loader({target:e,size:20,mode:"inline"});t.show();return m.Tag.render(qr||(qr=Yr`
			<div class="title-search-waiter">
				${0}
				<span class="title-search-waiter-text">${0}</span>
			</div>
		`),e,m.Loc.getMessage("INTRANET_SETTINGS_TITLE_SEARCHING"))}find(){clearTimeout(babelHelpers.classPrivateFieldLooseBase(this,hn)[hn]);babelHelpers.classPrivateFieldLooseBase(this,hn)[hn]=setTimeout((()=>{babelHelpers.classPrivateFieldLooseBase(this,dn)[dn].find(this.getQuery())}),babelHelpers.classPrivateFieldLooseBase(this,_n)[_n])}getQuery(){return BX.util.trim(babelHelpers.classPrivateFieldLooseBase(this,bn)[bn].value)}createLinkOption(e){const t=m.Dom.create("a",{props:{className:"search-title-top-item-link"},events:{mouseenter:e=>{babelHelpers.classPrivateFieldLooseBase(this,gn)[gn].unHighlightAll();babelHelpers.classPrivateFieldLooseBase(this,gn)[gn].cursorTo(e.target);Pn.highlight(e.target)},mouseleave:e=>{Pn.unHighlight(e.target)}},attrs:{title:e.title,href:m.Type.isStringFilled(e.url)?e.url:"#",target:"_blank"},children:[m.Tag.render(zr||(zr=Yr`<span class="search-title-top-item-text"><span>${0}</span></span>`),e.title)]});babelHelpers.classPrivateFieldLooseBase(this,gn)[gn].add(t);return t}createBtnOption(e,t){const s=m.Dom.create("a",{props:{className:"search-title-top-item-link"},events:{click:s=>{S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,"BX.Intranet.SettingsNavigation:onMove",{page:e,fieldName:t.code});babelHelpers.classPrivateFieldLooseBase(this,bn)[bn].blur();babelHelpers.classPrivateFieldLooseBase(this,un)[un].close();s.preventDefault()},mouseenter:e=>{babelHelpers.classPrivateFieldLooseBase(this,gn)[gn].unHighlightAll();babelHelpers.classPrivateFieldLooseBase(this,gn)[gn].cursorTo(e.target);Pn.highlight(e.target)},mouseleave:e=>{Pn.unHighlight(e.target)}},attrs:{title:t.title,href:"#"},children:[m.Tag.render(Qr||(Qr=Yr`<span class="search-title-top-item-text"><span>${0}</span></span>`),t.title)]});babelHelpers.classPrivateFieldLooseBase(this,gn)[gn].add(s);return m.Tag.render(Zr||(Zr=Yr`<div class="search-title-top-item search-title-top-item-js">${0}</div>`),s)}renderOption(e,t){let s;if(e===vn.EXTERNAL_LINK){s=this.createLinkOption(t)}else{s=this.createBtnOption(e,t)}return m.Tag.render(Jr||(Jr=Yr`<div class="search-title-top-item search-title-top-item-js">${0}</div>`),s)}renderGroup(e){const t=m.Tag.render(en||(en=Yr`<div class="search-title-top-list search-title-top-list-js"></div>`));e.options.forEach((s=>{m.Dom.append(this.renderOption(e.page,s),t)}));return m.Tag.render(tn||(tn=Yr`
			<div class="search-title-top-block search-title-top-block-sonetgroups">
				<div class="search-title-top-subtitle">
					<div class="search-title-top-subtitle-text">${0}</div>
				</div>
				<div class="search-title-top-list-wrap">
					${0}
				</div>
			</div>
		`),e.title,t)}renderContent(e="ready"){const t=m.Tag.render(sn||(sn=Yr`<div class="search-title-top-result"></div>`));switch(e){case"ready":m.Dom.append(this.renderSearchResult(babelHelpers.classPrivateFieldLooseBase(this,dn)[dn].getResult()),t);break;case"wait":m.Dom.append(this.renderWait(),t);break;case"not_found":m.Dom.append(this.renderNotFound(),t);break}m.Dom.append(this.renderOthers(babelHelpers.classPrivateFieldLooseBase(this,dn)[dn].getOthers()),t);return t}renderNotFound(){return m.Tag.render(an||(an=Yr`
			<div class="title-search-waiter">
				<span class="title-search-waiter-text">${0}</span>
			</div>
		`),m.Loc.getMessage("INTRANET_SETTINGS_SEARCH_NOT_FOUND"))}renderSearchResult(e){const t=m.Tag.render(ln||(ln=Yr`<div class="search-title-content-result"></div>`));e.forEach((e=>{m.Dom.append(this.renderGroup(e),t)}));return t}renderOthers(e){const t=m.Tag.render(rn||(rn=Yr`<div class="search-title-top-list search-title-top-list-js"></div>`));const s=m.Tag.render(nn||(nn=Yr`
		<div class="search-title-top-block search-title-top-block-tools">
			<div class="search-title-top-subtitle">
				<div class="search-title-top-subtitle-text">${0}</div>
			</div>
			<div class="search-title-top-list-height-wrap">
					<div class="search-title-top-list-wrap">${0}</div>
				</div>
		</div>
		`),m.Loc.getMessage("INTRANET_SETTINGS_TITLE_SEARCH_IN"),t);e.forEach((e=>{m.Dom.append(this.renderOtherLink(e),t)}));return s}renderOtherLink(e){const t=m.Dom.create("a",{props:{className:"search-title-top-item-link"},events:{mouseenter:e=>{babelHelpers.classPrivateFieldLooseBase(this,gn)[gn].unHighlightAll();babelHelpers.classPrivateFieldLooseBase(this,gn)[gn].cursorTo(e.target);Pn.highlight(e.target)},mouseleave:e=>{Pn.unHighlight(e.target)}},attrs:{title:e.title,href:e.link,target:"blank_"},children:[m.Tag.render(on||(on=Yr`<span class="search-title-top-item-text"><span>${0}</span></span>`),e.title)]});babelHelpers.classPrivateFieldLooseBase(this,gn)[gn].add(t);return m.Tag.render(cn||(cn=Yr`
		<div class="search-title-top-item search-title-top-item-js">
			${0}
		</div>`),t)}}vn.EXTERNAL_LINK="EXTERNAL_LINKS";var Tn=babelHelpers.classPrivateFieldLooseKey("index");var En=babelHelpers.classPrivateFieldLooseKey("elementList");class Pn{constructor(e=[]){Object.defineProperty(this,Tn,{writable:true,value:null});Object.defineProperty(this,En,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,En)[En]=e}add(e){babelHelpers.classPrivateFieldLooseBase(this,En)[En].push(e)}clean(){babelHelpers.classPrivateFieldLooseBase(this,Tn)[Tn]=null;babelHelpers.classPrivateFieldLooseBase(this,En)[En]=[]}next(){if(m.Type.isNil(babelHelpers.classPrivateFieldLooseBase(this,Tn)[Tn])){babelHelpers.classPrivateFieldLooseBase(this,Tn)[Tn]=0;return this}if(babelHelpers.classPrivateFieldLooseBase(this,En)[En].length-1>babelHelpers.classPrivateFieldLooseBase(this,Tn)[Tn]){babelHelpers.classPrivateFieldLooseBase(this,Tn)[Tn]++}return this}current(){if(m.Type.isNil(babelHelpers.classPrivateFieldLooseBase(this,Tn)[Tn])){return null}return babelHelpers.classPrivateFieldLooseBase(this,En)[En][babelHelpers.classPrivateFieldLooseBase(this,Tn)[Tn]]}prev(){if(m.Type.isNil(babelHelpers.classPrivateFieldLooseBase(this,Tn)[Tn])){babelHelpers.classPrivateFieldLooseBase(this,Tn)[Tn]=babelHelpers.classPrivateFieldLooseBase(this,En)[En].length-1;return this}if(babelHelpers.classPrivateFieldLooseBase(this,Tn)[Tn]>0){babelHelpers.classPrivateFieldLooseBase(this,Tn)[Tn]-=1}return this}highlight(){this.unHighlightAll();if(!m.Dom.hasClass(this.current(),"active")){m.Dom.addClass(this.current(),"active")}return this}unHighlight(){if(m.Dom.hasClass(this.current(),"active")){m.Dom.removeClass(this.current(),"active")}return this}static highlight(e){e.classList.add("active")}static unHighlight(e){e.classList.remove("active")}cursorTo(e){babelHelpers.classPrivateFieldLooseBase(this,En)[En].forEach(((t,s)=>{if(t===e){babelHelpers.classPrivateFieldLooseBase(this,Tn)[Tn]=s;return}}))}unHighlightAll(){babelHelpers.classPrivateFieldLooseBase(this,En)[En].forEach((e=>{Pn.unHighlight(e)}))}}class Ln extends kr{constructor(){super()}fetch(e){return m.ajax.runComponentAction("bitrix:intranet.settings","search",{mode:"class",data:{query:e}})}}var Sn=babelHelpers.classPrivateFieldLooseKey("permission");class In{constructor(e=0){Object.defineProperty(this,Sn,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Sn)[Sn]=e}canRead(){return!!(babelHelpers.classPrivateFieldLooseBase(this,Sn)[Sn]&In.READ)}canEdit(){return!!(babelHelpers.classPrivateFieldLooseBase(this,Sn)[Sn]&In.EDIT)}getPermission(){return babelHelpers.classPrivateFieldLooseBase(this,Sn)[Sn]}}In.READ=1<<0;In.EDIT=1<<2;var Nn=babelHelpers.classPrivateFieldLooseKey("basePage");var mn=babelHelpers.classPrivateFieldLooseKey("menuNode");var Fn=babelHelpers.classPrivateFieldLooseKey("settingsNode");var fn=babelHelpers.classPrivateFieldLooseKey("contentNode");var wn=babelHelpers.classPrivateFieldLooseKey("pageManager");var Bn=babelHelpers.classPrivateFieldLooseKey("cancelMessageBox");var Hn=babelHelpers.classPrivateFieldLooseKey("analytic");var An=babelHelpers.classPrivateFieldLooseKey("navigator");var yn=babelHelpers.classPrivateFieldLooseKey("permission");var On=babelHelpers.classPrivateFieldLooseKey("pagesPermission");var Rn=babelHelpers.classPrivateFieldLooseKey("extraSettings");var Cn=babelHelpers.classPrivateFieldLooseKey("getPageManager");var Mn=babelHelpers.classPrivateFieldLooseKey("onEventFetchPage");var Dn=babelHelpers.classPrivateFieldLooseKey("onSliderCloseHandler");var Gn=babelHelpers.classPrivateFieldLooseKey("reload");var Vn=babelHelpers.classPrivateFieldLooseKey("onEventChangeData");var kn=babelHelpers.classPrivateFieldLooseKey("onClickSaveBtn");var Un=babelHelpers.classPrivateFieldLooseKey("successSaveHandler");var Kn=babelHelpers.classPrivateFieldLooseKey("failSaveHandler");var jn=babelHelpers.classPrivateFieldLooseKey("prepareErrorCollection");var xn=babelHelpers.classPrivateFieldLooseKey("onClickCancelBtn");var Xn=babelHelpers.classPrivateFieldLooseKey("hideWaitIcon");var $n=babelHelpers.classPrivateFieldLooseKey("selectPageForError");class Yn extends L.BaseSettingsElement{constructor(e){super(e);Object.defineProperty(this,$n,{value:lo});Object.defineProperty(this,Xn,{value:ao});Object.defineProperty(this,xn,{value:io});Object.defineProperty(this,jn,{value:so});Object.defineProperty(this,Kn,{value:to});Object.defineProperty(this,Un,{value:eo});Object.defineProperty(this,kn,{value:Jn});Object.defineProperty(this,Vn,{value:Zn});Object.defineProperty(this,Gn,{value:Qn});Object.defineProperty(this,Dn,{value:zn});Object.defineProperty(this,Mn,{value:qn});Object.defineProperty(this,Cn,{value:Wn});Object.defineProperty(this,Nn,{writable:true,value:void 0});this.isChanged=false;Object.defineProperty(this,mn,{writable:true,value:void 0});Object.defineProperty(this,Fn,{writable:true,value:void 0});Object.defineProperty(this,fn,{writable:true,value:void 0});Object.defineProperty(this,wn,{writable:true,value:void 0});Object.defineProperty(this,Bn,{writable:true,value:void 0});Object.defineProperty(this,Hn,{writable:true,value:void 0});Object.defineProperty(this,An,{writable:true,value:void 0});Object.defineProperty(this,yn,{writable:true,value:void 0});Object.defineProperty(this,On,{writable:true,value:void 0});Object.defineProperty(this,Rn,{writable:true,value:{reloadAfterClose:false}});babelHelpers.classPrivateFieldLooseBase(this,Hn)[Hn]=new B({isAdmin:true,locationName:"settings",isBitrix24:e.isBitrix24===true,analyticContext:m.Type.isStringFilled(e.analyticContext)?e.analyticContext:null});babelHelpers.classPrivateFieldLooseBase(this,Hn)[Hn].addEventOpenSettings();babelHelpers.classPrivateFieldLooseBase(this,Hn)[Hn].addEventStartPagePage(e.startPage);this.setEventNamespace("BX.Intranet.Settings");S.EventEmitter.subscribe(S.EventEmitter.GLOBAL_TARGET,"button-click",(e=>{const[t]=e.data;if(t.TYPE==="save"){babelHelpers.classPrivateFieldLooseBase(this,kn)[kn](e)}}));S.EventEmitter.subscribe(S.EventEmitter.GLOBAL_TARGET,"SidePanel.Slider:onClose",babelHelpers.classPrivateFieldLooseBase(this,Dn)[Dn].bind(this));babelHelpers.classPrivateFieldLooseBase(this,mn)[mn]=m.Type.isDomNode(e.menuNode)?e.menuNode:null;babelHelpers.classPrivateFieldLooseBase(this,Fn)[Fn]=m.Type.isDomNode(e.settingsNode)?e.settingsNode:null;babelHelpers.classPrivateFieldLooseBase(this,fn)[fn]=m.Type.isDomNode(e.contentNode)?e.contentNode:null;babelHelpers.classPrivateFieldLooseBase(this,Nn)[Nn]=m.Type.isString(e.basePage)?e.basePage:"";babelHelpers.classPrivateFieldLooseBase(this,yn)[yn]=e.permission instanceof In?e.permission:new In;babelHelpers.classPrivateFieldLooseBase(this,On)[On]=e.pagesPermission;if(babelHelpers.classPrivateFieldLooseBase(this,Fn)[Fn]){babelHelpers.classPrivateFieldLooseBase(this,Fn)[Fn].querySelector('.ui-button-panel input[name="cancel"]').addEventListener("click",babelHelpers.classPrivateFieldLooseBase(this,xn)[xn])}e.pages.concat(Object.values(e.externalPages).map((({type:e,extensions:t})=>new Dr(e,t)))).forEach((t=>this.registerPage(t).expandPage(e.subPages[t.getType()])));const t=BX.UI.DropdownMenuItem.getItemByNode(babelHelpers.classPrivateFieldLooseBase(this,mn)[mn].querySelector('[data-type="tools"]'));if(t.subItems&&t.subItems.length>0){t.hideSubmenu();t.setDefaultToggleButtonName()}babelHelpers.classPrivateFieldLooseBase(this,An)[An]=new ae(this);if(babelHelpers.classPrivateFieldLooseBase(this,mn)[mn]){babelHelpers.classPrivateFieldLooseBase(this,mn)[mn].querySelectorAll("li.ui-sidepanel-menu-item a.ui-sidepanel-menu-link").forEach((e=>{const t=new T.HelpMessage(e.dataset.type+"_help-msg",e,m.Loc.getMessage("INTRANET_SETTINGS_PERMISSION_MSG"));t.getPopup().setWidth(275);const s=this.getNavigator().getPageByType(e.dataset.type);e.addEventListener("click",(i=>{var a;if(s!=null&&(a=s.getPermission())!=null&&a.canRead()){this.show(e.dataset.type)}else{t.show()}}))}))}}registerPage(e){var t;e.setParentElement(this);e.setPermission(new In((t=babelHelpers.classPrivateFieldLooseBase(this,On)[On][e.getType()])!=null?t:null));e.subscribe("change",babelHelpers.classPrivateFieldLooseBase(this,Vn)[Vn].bind(this)).subscribe("fetch",babelHelpers.classPrivateFieldLooseBase(this,Mn)[Mn].bind(this));e.setAnalytic(babelHelpers.classPrivateFieldLooseBase(this,Hn)[Hn]);return e}getCurrentPage(){return this.getNavigator().getCurrentPage()}getNavigator(){return babelHelpers.classPrivateFieldLooseBase(this,An)[An]}show(e,t){var s;if(!m.Type.isDomNode(babelHelpers.classPrivateFieldLooseBase(this,fn)[fn])){console.log("Not found settings container");return}if(!babelHelpers.classPrivateFieldLooseBase(this,yn)[yn].canRead()){return}const i=this.getNavigator().getPageByType(e);if(this.getCurrentPage()===i){return}this.getNavigator().changePage(i);m.Dom.hide((s=this.getNavigator().getPrevPage())==null?void 0:s.getPage());if(m.Type.isNil(this.getNavigator().getCurrentPage().getPage().parentNode)){m.Dom.append(this.getNavigator().getCurrentPage().getPage(),babelHelpers.classPrivateFieldLooseBase(this,fn)[fn])}else{m.Dom.show(this.getNavigator().getCurrentPage().getPage())}this.activateMenuItem(e);babelHelpers.classPrivateFieldLooseBase(this,Hn)[Hn].addEventChangePage(e);this.getNavigator().updateAddressBar();S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:onAfterShowPage",{source:this,page:i});if(m.Type.isString(t)&&t!==""){S.EventEmitter.subscribeOnce(S.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:onPageComplete",(()=>{console.log(t);this.getNavigator().moveTo(i,t)}))}}activateMenuItem(e){const t=BX.UI.DropdownMenuItem.getItemByNode(babelHelpers.classPrivateFieldLooseBase(this,mn)[mn].querySelector(`a.ui-sidepanel-menu-link[data-type="${e}"]`));t&&t.setActiveHandler()}}function Wn(){if(!babelHelpers.classPrivateFieldLooseBase(this,wn)[wn]){babelHelpers.classPrivateFieldLooseBase(this,wn)[wn]=new Vr(this.getChildrenElements())}return babelHelpers.classPrivateFieldLooseBase(this,wn)[wn]}function qn(e){return babelHelpers.classPrivateFieldLooseBase(this,Cn)[Cn]().fetchPage(e.getTarget())}function zn(e){var t;const[s]=e.getCompatData();if(babelHelpers.classPrivateFieldLooseBase(this,Bn)[Bn]instanceof P.MessageBox){s.denyAction();return false}if(this.isChanged&&((t=s.slider.getData())==null?void 0:t.get("ignoreChanges"))!==true){s.denyAction();babelHelpers.classPrivateFieldLooseBase(this,Bn)[Bn]=P.MessageBox.create({message:m.Loc.getMessage("INTRANET_SETTINGS_CONFIRM_ACTION_DESC"),modal:true,buttons:[new BX.UI.Button({text:m.Loc.getMessage("INTRANET_SETTINGS_CONFIRM_ACTION_OK"),color:BX.UI.Button.Color.SUCCESS,events:{click:()=>{S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:onCancel",{});s.slider.getData().set("ignoreChanges",true);this.isChanged=false;BX.UI.ButtonPanel.hide();babelHelpers.classPrivateFieldLooseBase(this,Bn)[Bn].close();babelHelpers.classPrivateFieldLooseBase(this,Bn)[Bn]=null;s.slider.close();s.slider.destroy();if(babelHelpers.classPrivateFieldLooseBase(this,Nn)[Nn].includes("/configs/")){babelHelpers.classPrivateFieldLooseBase(this,Gn)[Gn]("/index.php")}}}}),new BX.UI.CancelButton({text:m.Loc.getMessage("INTRANET_SETTINGS_CONFIRM_ACTION_CANCEL"),events:{click:()=>{babelHelpers.classPrivateFieldLooseBase(this,Bn)[Bn].close();babelHelpers.classPrivateFieldLooseBase(this,Bn)[Bn]=null}}})]});return babelHelpers.classPrivateFieldLooseBase(this,Bn)[Bn].show()}if(babelHelpers.classPrivateFieldLooseBase(this,Nn)[Nn].includes("/configs/")||babelHelpers.classPrivateFieldLooseBase(this,Rn)[Rn].reloadAfterClose===true){babelHelpers.classPrivateFieldLooseBase(this,Gn)[Gn]("/index.php")}}function Qn(e=null){const t=document.querySelector("#ui-sidepanel-wrapper-loader");if(t){t.style.display=""}if(m.Type.isString(e)){top.window.location.href=e}else{top.window.location.href=babelHelpers.classPrivateFieldLooseBase(this,Nn)[Nn]}}function Zn(e){if(!babelHelpers.classPrivateFieldLooseBase(this,yn)[yn].canEdit()){return}this.isChanged=true;BX.UI.ButtonPanel.show()}function Jn(e){let t=babelHelpers.classPrivateFieldLooseBase(this,Cn)[Cn]().collectData();S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:onBeforeSave",{data:t});babelHelpers.classPrivateFieldLooseBase(this,Hn)[Hn].send();m.ajax.runComponentAction("bitrix:intranet.settings","set",{mode:"class",data:m.Http.Data.convertObjectToFormData(t)}).then(babelHelpers.classPrivateFieldLooseBase(this,Un)[Un].bind(this),babelHelpers.classPrivateFieldLooseBase(this,Kn)[Kn].bind(this))}function eo(e){babelHelpers.classPrivateFieldLooseBase(this,Rn)[Rn].reloadAfterClose=true;this.isChanged=false;babelHelpers.classPrivateFieldLooseBase(this,Xn)[Xn]();BX.UI.ButtonPanel.hide();S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:onSuccessSave",babelHelpers.classPrivateFieldLooseBase(this,Rn)[Rn])}function to(e){let t=babelHelpers.classPrivateFieldLooseBase(this,jn)[jn](e.errors);babelHelpers.classPrivateFieldLooseBase(this,Xn)[Xn]();S.EventEmitter.emit("BX.UI.FormElement.Field:onFailedSave",{errors:t});let s=babelHelpers.classPrivateFieldLooseBase(this,$n)[$n](t);this.show(s)}function so(e){let t={};for(let a of e){var s,i;let e=(s=a.customData)==null?void 0:s.page;let l=(i=a.customData)==null?void 0:i.field;if(m.Type.isNil(e)||m.Type.isNil(l)){L.ErrorCollection.showSystemError(m.Loc.getMessage("INTRANET_SETTINGS_ERROR_FETCH_DATA"));break}if(m.Type.isNil(t[e])){t[e]={}}if(m.Type.isNil(t[e][l])){t[e][l]=[]}t[e][l].push(a.message)}return t}function io(e){top.BX.SidePanel.Instance.close()}function ao(){let e=document.querySelector("#intranet-settings-page #ui-button-panel-save");m.Dom.removeClass(e,"ui-btn-wait")}function lo(e){for(let t in e){return t}}e.Settings=Yn;e.ToolsPage=Le;e.EmployeePage=Re;e.PortalPage=ks;e.MainpagePage=vr;e.CommunicationPage=kt;e.RequisitePage=Ht;e.ConfigurationPage=Ui;e.SchedulePage=sa;e.GdprPage=da;e.SecurityPage=Ka;e.Renderer=vn;e.Searcher=$r;e.ServerDataSource=Ln;e.Permission=In})(this.BX.Intranet=this.BX.Intranet||{},BX.UI.Analytics,BX.UI.DragAndDrop,BX.UI,BX,BX.UI.Uploader,BX.UI,BX,BX.UI,BX,BX,BX,BX,BX.UI.FormElements,BX.UI,BX.UI.EntitySelector,BX.UI,BX,BX.UI,BX,BX.UI.Dialogs,BX.UI.FormElements,BX.Event,BX.Main,BX,BX);
//# sourceMappingURL=script.map.js