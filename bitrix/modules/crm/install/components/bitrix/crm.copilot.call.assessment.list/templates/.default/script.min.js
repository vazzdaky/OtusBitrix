(function(e,t,a,i,s,l,n){"use strict";function r(e,t,a){o(e,t);t.set(e,a)}function o(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var c=l.Reflection.namespace("BX.Crm.Copilot.CallAssessmentList");var v=new WeakMap;var d=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;babelHelpers.classCallCheck(this,e);r(this,v,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,v,t)}babelHelpers.createClass(e,[{key:"execute",value:function e(){var a,i;if(babelHelpers.classPrivateFieldGet(this,v)){if(!t.SidePanel.Instance){console.error("SidePanel.Instance not found");return}t.SidePanel.Instance.open("/crm/copilot-call-assessment/details/0/",{cacheable:false,width:700,allowChangeHistory:false});return}(a=top.BX.UI)===null||a===void 0?void 0:(i=a.InfoHelper)===null||i===void 0?void 0:i.show("limit_v2_crm_copilot_call_assessment_off")}}]);return e}();c.ActionButton=d;var u;function h(e,t){p(e,t);t.add(e)}function b(e,t,a){p(e,t);t.set(e,a)}function p(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function f(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var m=l.Reflection.namespace("BX.Crm.Copilot.CallAssessmentList");var w=new WeakMap;var C=new WeakMap;var _=new WeakMap;var S=new WeakMap;var T=new WeakSet;var E=function(){function e(t){var a=t.id,i=t.targetNodeId,s=t.checked,l=t.readOnly;babelHelpers.classCallCheck(this,e);h(this,T);b(this,w,{writable:true,value:void 0});b(this,C,{writable:true,value:void 0});b(this,_,{writable:true,value:void 0});b(this,S,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,w,a);babelHelpers.classPrivateFieldSet(this,C,document.getElementById(i));babelHelpers.classPrivateFieldSet(this,_,s);babelHelpers.classPrivateFieldSet(this,S,l)}babelHelpers.createClass(e,[{key:"init",value:function e(){var t=this;void l.Runtime.loadExtension("ui.switcher").then((function(e){var a=e.Switcher;t.switcher=new a({checked:babelHelpers.classPrivateFieldGet(t,_),disabled:babelHelpers.classPrivateFieldGet(t,S),handlers:{checked:function e(a){a.stopPropagation();var s=l.Tag.render(u||(u=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t\t\t<div class="crm-copilot-call-assessment-list-confirm-container">\n\t\t\t\t\t\t\t\t<div class="crm-copilot-call-assessment-list-confirm-title">\n\t\t\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="crm-copilot-call-assessment-list-confirm-message"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t'])),l.Loc.getMessage("CRM_COPILOT_CALL_ASSESSMENT_LIST_COLUMN_ACTIVITY_CONFIRM_DIALOG_TITLE"));i.MessageBox.show({modal:true,minHeight:100,minWidth:400,popupOptions:{content:s,closeIcon:false},buttons:i.MessageBoxButtons.OK_CANCEL,okCaption:l.Loc.getMessage("CRM_COPILOT_CALL_ASSESSMENT_LIST_COLUMN_ACTIVITY_CONFIRM_DIALOG_OK_BTN"),onOk:function e(a){a.close();f(t,T,g).call(t,false)},onCancel:function e(a){t.switcher.check(true,false);a.close()}})},unchecked:function e(a){a.stopPropagation();f(t,T,g).call(t,true)}}});l.Dom.clean(babelHelpers.classPrivateFieldGet(t,C));t.switcher.renderTo(babelHelpers.classPrivateFieldGet(t,C))}))}}]);return e}();function g(e){var t=this;l.Runtime.throttle((function(){l.ajax.runAction("crm.copilot.callassessment.active",{data:{id:babelHelpers.classPrivateFieldGet(t,w),isEnabled:e?"Y":"N"}})["catch"]((function(e){s.UI.Notification.Center.notify({content:l.Text.encode(e.errors[0].message),autoHideDelay:6e3});throw e}))}),100)()}m.ActiveField=E;function I(e,t){H(e,t);t.add(e)}function M(e,t,a){H(e,t);t.set(e,a)}function H(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function L(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var P=l.Reflection.namespace("BX.Crm.Copilot.CallAssessmentList");var F=new WeakMap;var k=new WeakMap;var O=new WeakSet;var A=new WeakSet;var B=new WeakSet;var R=new WeakSet;var N=function(){function e(t){babelHelpers.classCallCheck(this,e);I(this,R);I(this,B);I(this,A);I(this,O);M(this,F,{writable:true,value:null});M(this,k,{writable:true,value:null});babelHelpers.classPrivateFieldSet(this,F,BX.Main.gridManager.getInstanceById(t))}babelHelpers.createClass(e,[{key:"init",value:function e(){L(this,O,G).call(this)}}]);return e}();function G(){a.EventEmitter.subscribe("BX.Crm.Copilot.CallAssessment:onClickDelete",L(this,A,W).bind(this))}function W(e){var t=this;var a=l.Text.toInteger(e.data.id);if(!a){L(this,B,y).call(this,l.Loc.getMessage("CRM_COPILOT_CALL_ASSESSMENT_LIST_NOT_FOUND_MSGVER_1"));return}i.MessageBox.show({title:l.Loc.getMessage("CRM_TYPE_ITEM_DELETE_CONFIRMATION_TITLE"),message:l.Loc.getMessage("CRM_TYPE_ITEM_DELETE_CONFIRMATION_MESSAGE"),modal:true,buttons:i.MessageBoxButtons.YES_CANCEL,onYes:function e(i){l.ajax.runAction("crm.controller.copilot.callassessment.delete",{data:{id:a}}).then((function(e){s.UI.Notification.Center.notify({content:l.Loc.getMessage("CRM_TYPE_ITEM_DELETE_NOTIFICATION")});L(t,R,D).call(t)}))["catch"]((function(e){var a,i;var s=e.errors;L(t,B,y).call(t,(a=(i=s[0])===null||i===void 0?void 0:i.message)!==null&&a!==void 0?a:l.Loc.getMessage("CRM_COPILOT_CALL_ASSESSMENT_LIST_ITEM_DELETE_ERROR"))}));i.close()}})}function y(e){s.UI.Notification.Center.notify({content:l.Text.encode(e),autoHideDelay:6e3})}function D(){var e=this;if(!babelHelpers.classPrivateFieldGet(this,F)){return}if(babelHelpers.classPrivateFieldGet(this,k)>0){clearTimeout(babelHelpers.classPrivateFieldGet(this,k));babelHelpers.classPrivateFieldSet(this,k,0)}babelHelpers.classPrivateFieldSet(this,k,setTimeout((function(){babelHelpers.classPrivateFieldGet(e,F).reload()}),1e3))}P.Grid=N;var X,U;function x(e,t){j(e,t);t.add(e)}function Y(e,t,a){j(e,t);t.set(e,a)}function j(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function z(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var V=l.Reflection.namespace("BX.Crm.Copilot.CallAssessmentList");var K="default";var q="lowBorder";var J="highBorder";var Q=new WeakMap;var Z=new WeakMap;var $=new WeakMap;var ee=new WeakMap;var te=new WeakMap;var ae=new WeakSet;var ie=new WeakSet;var se=new WeakSet;var le=new WeakSet;var ne=new WeakSet;var re=function(){function e(t){var a=t.id,i=t.targetNodeId,s=t.borders,l=t.value;babelHelpers.classCallCheck(this,e);x(this,ne);x(this,le);x(this,se);x(this,ie);x(this,ae);Y(this,Q,{writable:true,value:void 0});Y(this,Z,{writable:true,value:void 0});Y(this,$,{writable:true,value:void 0});Y(this,ee,{writable:true,value:void 0});Y(this,te,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,Q,a);babelHelpers.classPrivateFieldSet(this,Z,document.getElementById(i));babelHelpers.classPrivateFieldSet(this,$,s!==null&&s!==void 0?s:null);babelHelpers.classPrivateFieldSet(this,ee,l)}babelHelpers.createClass(e,[{key:"init",value:function e(){if(babelHelpers.classPrivateFieldGet(this,ee)===null){return}babelHelpers.classPrivateFieldSet(this,te,l.Tag.render(X||(X=babelHelpers.taggedTemplateLiteral(["<div></div>"]))));var t=l.Tag.render(U||(U=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="crm-copilot-call-assessment-list-assessment-avg">\n\t\t\t\t','\n\t\t\t\t<div class="crm-copilot-call-assessment-list-assessment-avg-value">\n\t\t\t\t\t','\n\t\t\t\t\t<span class="crm-copilot-call-assessment-list-assessment-avg-percent">%</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'])),babelHelpers.classPrivateFieldGet(this,te),babelHelpers.classPrivateFieldGet(this,ee));l.Dom.append(t,babelHelpers.classPrivateFieldGet(this,Z));var a=new n.ProgressRound({width:28,lineSize:8,colorBar:z(this,ie,ce).call(this),colorTrack:"#EBF1F6",rotation:false,value:babelHelpers.classPrivateFieldGet(this,ee),color:n.ProgressRound.Color.SUCCESS});a.renderTo(babelHelpers.classPrivateFieldGet(this,te));z(this,ae,oe).call(this,t)}}]);return e}();function oe(e){l.Event.bind(e,"mouseenter",z(this,le,de).bind(this));l.Event.bind(e,"mouseleave",z(this,ne,ue).bind(this))}function ce(){var e=z(this,se,ve).call(this,J);if(e&&babelHelpers.classPrivateFieldGet(this,ee)>=(e===null||e===void 0?void 0:e.value)){return e.color}var t=z(this,se,ve).call(this,q);if(t&&babelHelpers.classPrivateFieldGet(this,ee)<=(t===null||t===void 0?void 0:t.value)){return t.color}var a=z(this,se,ve).call(this,K);if(a){return a.color}throw new RangeError("unknown track color")}function ve(e){var t;return(t=babelHelpers.classPrivateFieldGet(this,$).find((function(t){return t.id===e})))!==null&&t!==void 0?t:null}function de(e){var t=z(this,se,ve).call(this,q);var a=z(this,se,ve).call(this,J);BX.UI.Hint.show(e.target,l.Loc.getMessage("CRM_COPILOT_CALL_ASSESSMENT_LIST_COLUMN_ASSESSMENT_AVG_TOOLTIP",{"#LOW_BORDER#":t.value,"#HIGH_BORDER#":a.value}),true)}function ue(e){BX.UI.Hint.hide(e.target)}V.RoundChartField=re;e.ActiveField=E;e.ActionButton=d;e.Grid=N;e.RoundChartField=re})(this.window=this.window||{},BX,BX.Event,BX.UI.Dialogs,BX,BX,BX.UI);
//# sourceMappingURL=script.map.js