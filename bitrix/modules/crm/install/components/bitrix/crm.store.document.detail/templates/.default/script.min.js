this.BX=this.BX||{};this.BX.Crm=this.BX.Crm||{};this.BX.Crm.Store=this.BX.Crm.Store||{};(function(e,t,n,a,o,r,i,l,s,c,u){"use strict";function d(e,t){var n=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=f(e))||t&&e&&typeof e.length==="number"){if(n)e=n;var a=0;var o=function e(){};return{s:o,n:function t(){if(a>=e.length)return{done:true};return{done:false,value:e[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r=true,i=false,l;return{s:function t(){n=n.call(e)},n:function e(){var t=n.next();r=t.done;return t},e:function e(t){i=true;l=t},f:function e(){try{if(!r&&n["return"]!=null)n["return"]()}finally{if(i)throw l}}}}function f(e,t){if(!e)return;if(typeof e==="string")return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}function v(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function b(e,t){C(e,t);t.add(e)}function p(e,t,n){C(e,t);t.set(e,n)}function C(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function E(e,t,n){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return n}var m=new WeakMap;var h=new WeakMap;var g=new WeakMap;var _=new WeakSet;var y=new WeakSet;var T=new WeakSet;var S=function(){function e(t){babelHelpers.classCallCheck(this,e);b(this,T);b(this,y);b(this,_);p(this,m,{writable:true,value:void 0});p(this,h,{writable:true,value:void 0});p(this,g,{writable:true,value:null});babelHelpers.classPrivateFieldSet(this,m,t.onboardingData);babelHelpers.classPrivateFieldSet(this,h,t.documentGuid);if(t.productListController){babelHelpers.classPrivateFieldSet(this,g,t.productListController)}}babelHelpers.createClass(e,[{key:"processOnboarding",value:function e(){var t=babelHelpers.classPrivateFieldGet(this,m).chain;var n=babelHelpers.classPrivateFieldGet(this,m).chainStep;if(t===1&&n===1){var a=E(this,y,B).call(this);if(a){E(this,_,O).call(this,a)}}}}]);return e}();function O(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var t=document.querySelector("#".concat(babelHelpers.classPrivateFieldGet(this,h),"_TABS_MENU"));var n=new BX.SpotLight({id:"arrow_spotlight",targetElement:document.querySelector("[data-tab-id=tab_products]"),autoSave:true,targetVertex:"middle-center",zIndex:200});n.show();n.container.style.pointerEvents="none";var a=function a(o){n.close();var r=babelHelpers.slicedToArray(o.data,1),s=r[0];var c=function e(){var n=s.getActiveHint();if(n!==null){n.close();i.Event.unbind(t,"click",e)}};i.Event.bind(t,"click",c);var u=function e(t){var n,a;if((t===null||t===void 0?void 0:(n=t.data)===null||n===void 0?void 0:n.tabId)==="tab_products"){return}(a=s.getActiveHint())===null||a===void 0?void 0:a.close()};s.showFieldTourHint("AMOUNT",{title:i.Loc.getMessage("CRM_STORE_DOCUMENT_WAREHOUSE_PRODUCT_AMOUNT_GUIDE_TITLE_2"),text:i.Loc.getMessage("CRM_STORE_DOCUMENT_WAREHOUSE_PRODUCT_AMOUNT_GUIDE_TEXT")},(function(){i.userOptions.save("crm","warehouse-onboarding","secondChainStage",2);i.userOptions.save("crm","warehouse-onboarding","chainStage",2);i.Event.unbind(t,"click",c);l.EventEmitter.unsubscribe("onDemandRecalculateWrapper",a);l.EventEmitter.unsubscribe("BX.Catalog.EntityCard.TabManager:onOpenTab",u)}),[],e);l.EventEmitter.subscribe("BX.Catalog.EntityCard.TabManager:onOpenTab",u)};l.EventEmitter.subscribe("onDemandRecalculateWrapper",a)}function B(){var e=E(this,T,P).call(this);var t=d(e),n;try{for(t.s();!(n=t.n()).done;){var a=n.value;if(!a.getModel().isService()){return a.getId()}}}catch(e){t.e(e)}finally{t.f()}return""}function P(){if(babelHelpers.classPrivateFieldGet(this,g)&&babelHelpers.classPrivateFieldGet(this,g).productList){if(babelHelpers.classPrivateFieldGet(this,g).productList.products instanceof Array){return babelHelpers.classPrivateFieldGet(this,g).productList.products}}return[]}var M,D,w,I,A,L;function k(e,t){var n=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=N(e))||t&&e&&typeof e.length==="number"){if(n)e=n;var a=0;var o=function e(){};return{s:o,n:function t(){if(a>=e.length)return{done:true};return{done:false,value:e[a++]}},e:function e(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r=true,i=false,l;return{s:function t(){n=n.call(e)},n:function e(){var t=n.next();r=t.done;return t},e:function e(t){i=true;l=t},f:function e(){try{if(!r&&n["return"]!=null)n["return"]()}finally{if(i)throw l}}}}function N(e,t){if(!e)return;if(typeof e==="string")return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,t)}function U(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function R(e,t){H(e,t);t.add(e)}function X(e,t,n){H(e,t);t.set(e,n)}function H(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function F(e,t,n){G(e,t);j(n,"get");return x(e,n)}function x(e,t){if(t.get){return t.get.call(e)}return t.value}function W(e,t,n,a){G(e,t);j(n,"set");V(e,n,a);return a}function j(e,t){if(e===undefined){throw new TypeError("attempted to "+t+" private static field before its declaration")}}function G(e,t){if(e!==t){throw new TypeError("Private static access of wrong provenance")}}function V(e,t,n){if(t.set){t.set.call(e,n)}else{if(!t.writable){throw new TypeError("attempted to set read only private field")}t.value=n}}function z(e,t,n){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return n}var q=new WeakMap;var K=new WeakSet;var Y=function(e){babelHelpers.inherits(t,e);function t(e,n){var a;babelHelpers.classCallCheck(this,t);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e,n));R(babelHelpers.assertThisInitialized(a),K);X(babelHelpers.assertThisInitialized(a),q,{writable:true,value:null});a.isDocumentDeducted=n.documentStatus==="Y";a.isDeductLocked=n.isDeductLocked;a.masterSliderUrl=n.masterSliderUrl;a.inventoryManagementSource=n.inventoryManagementSource;a.permissions=n.permissions;a.isInventoryManagementDisabled=n.isInventoryManagementDisabled;a.inventoryManagementFeatureCode=n.inventoryManagementFeatureCode;a.lockedCancellation=n.isProductBatchMethodSelected;a.isOnecMode=n.isOnecMode;a.insidePageTitleConfig=n.insidePageTitleConfig||{};if(i.Type.isPlainObject(a.insidePageTitleConfig)){a.appendInsidePageTitle(a.insidePageTitleConfig)}a.addCopyLinkPopup();l.EventEmitter.subscribe("BX.Crm.EntityEditor:onFailedValidation",(function(e){l.EventEmitter.emit("BX.Catalog.EntityCard.TabManager:onOpenTab",{tabId:"main"})}));l.EventEmitter.subscribe("onProductsCheckFailed",(function(e){l.EventEmitter.emit("BX.Catalog.EntityCard.TabManager:onOpenTab",{tabId:"tab_products"})}));l.EventEmitter.subscribe("BX.Crm.EntityEditor:onSave",(function(e){var n=e.data[0];if(n&&n._ajaxForm){var o,r;if(a.isInventoryManagementDisabled){var i;e.data[1].cancel=true;(i=n._toolPanel)===null||i===void 0?void 0:i.setLocked(false);return}var l=((o=n._ajaxForm)===null||o===void 0?void 0:o._actionName)==="SAVE"?"save":(r=n._ajaxForm)===null||r===void 0?void 0:r._config.data.ACTION;if(l===t.saveAndDeductAction){var s=a.getControllersIssues(n.getControllers());if(s.length>0){var c,u;e.data[1].cancel=true;(c=n._toolPanel)===null||c===void 0?void 0:c.setLocked(false);(u=n._toolPanel)===null||u===void 0?void 0:u.addError(s[0]);return}}if(l==="SAVE"){l="save"}var d={isNewDocument:a.entityId<=0?"Y":"N",inventoryManagementSource:a.inventoryManagementSource};if(l){d.action=l}n._ajaxForm.addUrlParams(d)}}));l.EventEmitter.subscribe("BX.Catalog.EntityCard.TabManager:onSelectItem",(function(e){var t=e.data.tabId;if(t==="tab_products"&&!a.isTabAnalyticsSent){a.sendAnalyticsData({tab:"products",isNewDocument:a.entityId<=0?"Y":"N",documentType:"W",inventoryManagementSource:a.inventoryManagementSource});a.isTabAnalyticsSent=true}}));z(babelHelpers.assertThisInitialized(a),K,$).call(babelHelpers.assertThisInitialized(a));W(t,t,Q,babelHelpers.assertThisInitialized(a));BX.UI.SidePanel.Wrapper.setParam("closeAfterSave",true);a.showNotificationOnClose=false;return a}babelHelpers.createClass(t,[{key:"appendInsidePageTitle",value:function e(t){var n,a;var o=(n=BX.UI)===null||n===void 0?void 0:(a=n.ToolbarManager)===null||a===void 0?void 0:a.getDefaultToolbar();var l=o===null||o===void 0?void 0:o.titleContainer.querySelector(".ui-toolbar-title-item-box");if(!l){return}var s=null;if(t.enablePageLink){s=i.Tag.render(M||(M=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<span id="','" class="page-link-btn"></span>\n\t\t\t'])),this.settings.copyLinkButtonId)}if(s){var c=i.Tag.render(D||(D=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<span id="pagetitle_btn_wrapper" class="pagetitile-button-container"></span>\n\t\t\t'])));i.Dom.append(s,c);i.Dom.append(c,l)}if(t.enableStatusLabel){var u={text:t.statusLabel.text,color:t.statusLabel.color,size:r.LabelSize.LG,link:"",fill:true,customClass:"document-status-label"};var d=new r.Label(u);i.Dom.append(d.render(),l)}}},{key:"focusOnTab",value:function e(t){l.EventEmitter.emit("BX.Catalog.EntityCard.TabManager:onOpenTab",{tabId:t})}},{key:"getControllersIssues",value:function e(t){var n=[];if(Array.isArray(t)){t.forEach((function(e){if(e instanceof BX.Crm.EntityStoreDocumentProductListController){n.push.apply(n,babelHelpers.toConsumableArray(e.getErrorCollection()))}}))}return n}},{key:"openMasterSlider",value:function e(){var t=this;(new c.EnableWizardOpener).open(this.masterSliderUrl,{urlParams:{analyticsContextSection:c.AnalyticsContextList.DOCUMENT_CARD},data:{openGridOnDone:false},events:{onCloseComplete:function e(n){var a=n.getSlider();if(!a){return}if(a.getData().get("isInventoryManagementEnabled")){t.isDeductLocked=false;BX.SidePanel.Instance.getOpenSliders().forEach((function(e){var t,n;if((t=e.getWindow())!==null&&t!==void 0&&(n=t.BX.Catalog)!==null&&n!==void 0&&n.DocumentGridManager){e.allowChangeHistory=false;e.getWindow().location.reload()}}))}}}})}},{key:"adjustToolPanel",value:function e(){var n=this;var a=this.getEditorInstance();if(!a){return}var r=a._toolPanel;var s=a._toolPanel._editButton;this.defaultSaveActionName=a._ajaxForm._config.data.ACTION;this.defaultOnSuccessCallback=a._ajaxForm._config.onsuccess;s.onclick=function(e){if(n.isInventoryManagementDisabled){n.showPlanRestrictedSlider();return}n.showNotificationOnClose=false;a._ajaxForm._config.data.ACTION=n.defaultSaveActionName;a._ajaxForm._config.onsuccess=n.defaultOnSuccessCallback;r.onSaveButtonClick(e)};if(this.permissions.conduct&&!this.isDocumentDeducted){var c=i.Tag.render(w||(w=babelHelpers.taggedTemplateLiteral(['<button class="ui-btn ui-btn-light-border">',"</button>"])),i.Loc.getMessage("CRM_STORE_DOCUMENT_DETAIL_SAVE_AND_DEDUCT_BUTTON"));c.onclick=function(e){if(n.isInventoryManagementDisabled){n.showPlanRestrictedSlider();return}if(n.isDeductLocked){n.openMasterSlider();return}a._ajaxForm._config.data.ACTION=t.saveAndDeductAction;a._ajaxForm._config.onsuccess=function(e){n.showNotificationOnClose=true;var t=BX.prop.getString(e,"ERROR","");if(!t){n.setViewModeButtons(a)}a.onSaveSuccess(e)};r.onSaveButtonClick(e)};s.after(c);this.deductAndSaveButton=c;var u=new o.Button({text:i.Loc.getMessage("CRM_STORE_DOCUMENT_DETAIL_DEDUCT_BUTTON"),color:o.ButtonColor.LIGHT_BORDER,onclick:function e(i,l){if(r.isLocked()){return}if(n.isInventoryManagementDisabled){n.showPlanRestrictedSlider();return}if(n.isDeductLocked){n.openMasterSlider();return}i.setState(o.ButtonState.CLOCKING);r.setLocked(true);var s=t.deductAction;var c=a.getControllers();var u=[];c.forEach((function(e){if(e instanceof BX.Crm.EntityStoreDocumentProductListController&&!e.validateProductList()){u.push.apply(u,babelHelpers.toConsumableArray(e.getErrorCollection()))}}));if(u.length>0){r.clearErrors();r.addError(u[0]);r.setLocked(false);i.setActive(true);return}var d={};if(window.EntityEditorDocumentOrderShipmentController){d=window.EntityEditorDocumentOrderShipmentController.demandFormData()}var f=a.createAjaxForm({actionName:s,enableRequiredUserFieldCheck:false,formData:d},{onSuccess:function e(t){if(!n.isDocumentDeducted){n.showNotificationOnClose=true}i.setState(o.ButtonState.ACTIVE);a.onSaveSuccess(t)},onFailure:function e(t){i.setState(o.ButtonState.ACTIVE);a.onSaveFailure(t)}});f.addUrlParams({action:s,documentType:"W"});f.submit()}}).render();s.after(u);this.deductButton=u}else if(this.permissions.cancel&&!this.isDisabledCancellation()){var d=new o.Button({text:i.Loc.getMessage("CRM_STORE_DOCUMENT_DETAIL_CANCEL_DEDUCT_BUTTON"),color:o.ButtonColor.LIGHT_BORDER,onclick:function e(i,l){if(r.isLocked()){return}if(n.isInventoryManagementDisabled){n.showPlanRestrictedSlider();return}if(n.isDeductLocked){n.openMasterSlider();return}if(n.isLockedCancellation()){n.showCancellationInfo();return}i.setState(o.ButtonState.CLOCKING);r.setLocked(true);var s=t.cancelDeductAction;var c={};if(window.EntityEditorDocumentOrderShipmentController){c=window.EntityEditorDocumentOrderShipmentController.demandFormData()}var u=a.createAjaxForm({actionName:s,enableRequiredUserFieldCheck:false,formData:c},{onSuccess:function e(t){if(!n.isDocumentDeducted){n.showNotificationOnClose=true}i.setState(o.ButtonState.ACTIVE);a.onSaveSuccess(t)},onFailure:function e(t){i.setState(o.ButtonState.ACTIVE);a.onSaveFailure(t)}});u.addUrlParams({action:s,documentType:"W",inventoryManagementSource:n.inventoryManagementSource});u.submit()}}).render();s.after(d);this.deductButton=d}l.EventEmitter.subscribe("BX.Crm.EntityEditor:onControlModeChange",(function(e){var t=e.data[0];var a=e.data[1].control;if(a.getMode()===BX.Crm.EntityEditorMode.edit){n.setEditModeButtons(t)}else{n.setViewModeButtons(t)}}));l.EventEmitter.subscribe("BX.Crm.EntityEditor:onControlChange",(function(e){var t=e.data[0];n.setEditModeButtons(t)}));l.EventEmitter.subscribe("BX.Crm.EntityEditor:onControllerChange",(function(e){var t=e.data[0];n.setEditModeButtons(t)}));l.EventEmitter.subscribe("BX.Crm.EntityEditor:onSwitchToViewMode",(function(e){var t=e.data[0];n.setViewModeButtons(t)}));l.EventEmitter.subscribe("BX.Crm.EntityEditor:onNothingChanged",(function(e){var t=e.data[0];n.setViewModeButtons(t)}));l.EventEmitter.subscribe("onEntityCreate",(function(e){var t;var n=e===null||e===void 0?void 0:(t=e.data[0])===null||t===void 0?void 0:t.sender;if(n){n._toolPanel.disableSaveButton();n.hideToolPanel()}}));l.EventEmitter.subscribe("beforeCrmEntityRedirect",(function(e){var t;var a=e===null||e===void 0?void 0:(t=e.data[0])===null||t===void 0?void 0:t.sender;if(a){a._toolPanel.disableSaveButton();a.hideToolPanel();if(n.showNotificationOnClose){var o=e.data[0].redirectUrl;if(!o){return}o=BX.Uri.removeParam(o,"closeOnSave");window.top.BX.UI.Notification.Center.notify({content:i.Loc.getMessage("CRM_STORE_DOCUMENT_SAVE_AND_CONDUCT_NOTIFICATION"),actions:[{title:i.Loc.getMessage("CRM_STORE_DOCUMENT_OPEN_DOCUMENT"),href:o,events:{click:function e(t,n,a){n.close()}}}]})}}}));if(a.isNew()){this.setEditModeButtons(a)}else{this.setViewModeButtons(a)}}},{key:"showPlanRestrictedSlider",value:function e(){if(this.isOnecMode){u.OneCPlanRestrictionSlider.show()}else if(this.inventoryManagementFeatureCode){top.BX.UI.InfoHelper.show(this.inventoryManagementFeatureCode)}}},{key:"isLockedCancellation",value:function e(){return this.lockedCancellation}},{key:"isDisabledCancellation",value:function e(){return this.isOnecMode}},{key:"showCancellationInfo",value:function e(){var t=this;var n=new a.Popup(null,null,{events:{onPopupClose:function e(){n.destroy()}},content:this.getCancellationPopupContent(),overlay:true,buttons:[new o.Button({text:i.Loc.getMessage("CRM_STORE_DOCUMENT_WAREHOUSE_PRODUCT_CANCELLATION_POPUP_YES"),color:o.Button.Color.PRIMARY,onclick:function e(){t.lockedCancellation=false;if(t.deductButton){t.deductButton.click()}n.close()}}),new BX.UI.Button({text:i.Loc.getMessage("CRM_STORE_DOCUMENT_WAREHOUSE_PRODUCT_CANCELLATION_POPUP_NO"),color:BX.UI.Button.Color.LINK,onclick:function e(){n.close()}})]});n.show()}},{key:"getCancellationPopupContent",value:function e(){var n=i.Tag.render(I||(I=babelHelpers.taggedTemplateLiteral(['<a href="#" class="ui-form-link">',"</a>"])),i.Loc.getMessage("CRM_STORE_DOCUMENT_WAREHOUSE_PRODUCT_CANCELLATION_POPUP_LINK"));i.Event.bind(n,"click",(function(){if(top.BX.Helper){top.BX.Helper.show("redirect=detail&code=".concat(t.HELP_COST_CALCULATION_MODE_ARTICLE_ID))}}));var a=i.Tag.render(A||(A=babelHelpers.taggedTemplateLiteral(["\n\t\t\t<div>","</div>\n\t\t"])),i.Loc.getMessage("CRM_STORE_DOCUMENT_WAREHOUSE_PRODUCT_CANCELLATION_POPUP_HINT").replace("#HELP_LINK#","<help-link></help-link>"));i.Dom.replace(a.querySelector("help-link"),n);return i.Tag.render(L||(L=babelHelpers.taggedTemplateLiteral(["\n\t\t\t<div>\n\t\t\t\t<h3>","</h3>\n\t\t\t\t<div>","\n\t\t\t\t<br>","<div>\n\t\t\t</div>\n\t\t"])),i.Loc.getMessage("CRM_STORE_DOCUMENT_WAREHOUSE_PRODUCT_CANCELLATION_POPUP_TITLE"),i.Text.encode(i.Loc.getMessage("CRM_STORE_DOCUMENT_WAREHOUSE_PRODUCT_CANCELLATION_POPUP_QUESTION")),a)}},{key:"setViewModeButtons",value:function e(t){if(t._toolPanel&&t._toolPanel.hasOwnProperty("_cancelButton")){BX.hide(t._toolPanel._cancelButton)}if(t._toolPanel&&t._toolPanel.hasOwnProperty("_editButton")){BX.hide(t._toolPanel._editButton)}if(this.deductAndSaveButton){BX.hide(this.deductAndSaveButton)}if(this.deductButton){BX.show(this.deductButton)}}},{key:"setEditModeButtons",value:function e(t){if(t._toolPanel&&t._toolPanel.hasOwnProperty("_cancelButton")){BX.show(t._toolPanel._cancelButton)}if(t._toolPanel&&t._toolPanel.hasOwnProperty("_editButton")){BX.show(t._toolPanel._editButton)}if(this.deductAndSaveButton&&!this.isDocumentDeducted){BX.show(this.deductAndSaveButton)}if(this.deductButton&&!this.isDocumentDeducted){BX.hide(this.deductButton)}}},{key:"getEditorInstance",value:function e(){if(i.Reflection.getClass("BX.Crm.EntityEditor")){return BX.Crm.EntityEditor.getDefault()}return null}},{key:"addCopyLinkPopup",value:function e(){var t=this;var n=document.getElementById(this.settings.copyLinkButtonId);if(!n){return}n.onclick=function(){t.copyDocumentLinkToClipboard()}}},{key:"copyDocumentLinkToClipboard",value:function e(){var t=BX.util.remove_url_param(window.location.href,["IFRAME","IFRAME_TYPE"]);if(!BX.clipboard.copy(t)){return}var n=new BX.PopupWindow("catalog_copy_document_url_to_clipboard",document.getElementById(this.settings.copyLinkButtonId),{content:i.Loc.getMessage("CRM_STORE_DOCUMENT_DETAIL_LINK_COPIED"),darkMode:true,autoHide:true,zIndex:1e3,angle:true,bindOptions:{position:"top"}});n.show();setTimeout((function(){n.close()}),1500)}},{key:"sendAnalyticsData",value:function e(t){BX.ajax.runComponentAction("bitrix:crm.store.document.detail","sendAnalytics",{mode:"class",analyticsLabel:t})}},{key:"enableOnboardingChain",value:function e(t){if(babelHelpers.classPrivateFieldGet(this,q)===null){babelHelpers.classPrivateFieldSet(this,q,new S({onboardingData:t,documentGuid:this.id,productListController:this.getProductListController()}));babelHelpers.classPrivateFieldGet(this,q).processOnboarding()}}},{key:"getProductListController",value:function e(){var t=this.getEditorInstance();var n=t.getControllers();var a=k(n),o;try{for(a.s();!(o=a.n()).done;){var r=o.value;if(r instanceof BX.Crm.EntityStoreDocumentProductListController){return r}}}catch(e){a.e(e)}finally{a.f()}return null}}],[{key:"getInstance",value:function e(){return F(t,t,Q)}}]);return t}(n.BaseCard);function $(){l.EventEmitter.subscribe("BX.UI.EntityEditorProductRowSummary:onDetailProductListLinkClick",(function(){l.EventEmitter.emit("BX.Catalog.EntityCard.TabManager:onOpenTab",{tabId:"tab_products"})}));l.EventEmitter.subscribe("BX.UI.EntityEditorProductRowSummary:onAddNewRowInProductList",(function(){l.EventEmitter.emit("BX.Catalog.EntityCard.TabManager:onOpenTab",{tabId:"tab_products"});setTimeout((function(){l.EventEmitter.emit("onFocusToProductList")}),500)}))}var Q={writable:true,value:void 0};babelHelpers.defineProperty(Y,"saveAndDeductAction","saveAndDeduct");babelHelpers.defineProperty(Y,"deductAction","deduct");babelHelpers.defineProperty(Y,"cancelDeductAction","cancelDeduct");babelHelpers.defineProperty(Y,"HELP_COST_CALCULATION_MODE_ARTICLE_ID",17858278);e.Document=Y})(this.BX.Crm.Store.DocumentCard=this.BX.Crm.Store.DocumentCard||{},BX,BX.Catalog.EntityCard,BX.Main,BX.UI,BX.UI,BX,BX.Event,BX,BX.Catalog.Store,BX.Catalog);
//# sourceMappingURL=script.map.js