{"version":3,"file":"adding-popup.bundle.map.js","names":["this","BX","Crm","exports","crm_activity_todoEditorV2","main_core","main_core_events","main_popup","ui_buttons","ui_notification","_","t","_t","_t2","_t3","_classPrivateMethodInitSpec","obj","privateSet","_checkPrivateRedeclaration","add","_classPrivateFieldInitSpec","privateMap","value","set","privateCollection","has","TypeError","_classPrivateMethodGet","receiver","fn","_entityId","WeakMap","_entityTypeId","_currentUser","_pingSettings","_calendarSettings","_colorSettings","_popup","_popupContainer","_popupToDoEditorContainer","_todoEditor","_eventEmitter","_context","_createToDoEditor","WeakSet","_prepareAndShowPopup","_fetchNearActivity","_createPopupIfNotExists","_getPopupTitle","_getPopupParams","_saveAndClose","_actualizePopupLayout","_onEditorSaveHotkeyPressed","_onChangeUploaderContainerSize","_onFocus","AddingPopup","entityTypeId","entityId","currentUser","settings","_params","babelHelpers","classCallCheck","writable","classPrivateFieldSet","Text","toInteger","EventEmitter","classPrivateFieldGet","setEventNamespace","Type","isObject","_settings$pingSetting","_settings$calendarSet","_settings$colorSettin","pingSettings","calendarSettings","colorSettings","isPlainObject","events","eventName","isFunction","subscribe","context","createClass","key","async","show","mode","TodoEditorMode","ADD","popup","_createPopupIfNotExists2","call","isShown","hasChildNodes","_createToDoEditor2","setButtons","SaveButton","id","color","ButtonColor","PRIMARY","size","ButtonSize","EXTRA_SMALL","round","click","_saveAndClose2","bind","CancelButton","_babelHelpers$classPr","_babelHelpers$classPr2","_babelHelpers$classPr3","sendAnalyticsCancelEvent","analytics","close","subscribeOnce","event","target","getZIndexComponent","setZIndex","_actualizePopupLayout2","setFocused","resetToDefaults","then","emit","todoEditorMode","activity","params","UPDATE","setMode","setActivityId","setDescription","description","setDeadline","deadline","_prepareAndShowPopup2","_babelHelpers$classPr4","_babelHelpers$classPr5","_analytics$c_section","_analytics$c_sub_sect","container","ownerTypeId","ownerId","onSaveHotkeyPressed","_onEditorSaveHotkeyPressed2","onChangeUploaderContainerSize","_onChangeUploaderContainerSize2","onFocus","_onFocus2","popupMode","section","c_section","subSection","c_sub_section","defaultDescription","TodoEditorV2","_fetchNearActivity2","data","console","error","Promise","resolve","reject","ajax","runAction","responseData","catch","response","UI","Notification","Center","notify","content","errors","message","autoHideDelay","isDestroyed","Tag","render","_getPopupTitle2","Popup","_getPopupParams2","Loc","getMessage","innerWidth","window","cacheable","isScrollBlock","className","closeByEsc","closeIcon","padding","minWidth","width","Math","maxWidth","minHeight","maxHeight","overlay","opacity","saveButton","getButton","getState","setWaiting","save","finally","adjustPosition","forceBindPosition","setTimeout","Activity","Event","Main"],"sources":["adding-popup.bundle.js"],"mappings":"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","ignoreList":[]}