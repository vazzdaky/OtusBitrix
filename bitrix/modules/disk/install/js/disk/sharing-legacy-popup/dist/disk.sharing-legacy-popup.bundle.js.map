{"version":3,"file":"disk.sharing-legacy-popup.bundle.js","sources":["../src/legacy-popup.js","../src/sharing-control-type.js"],"sourcesContent":["import {Text} from \"main.core\";\nimport {SaveButton} from \"ui.buttons\";\n\nexport default class LegacyPopup\n{\n\tuserBoxNode: HTMLElement = null;\n\tisChangedRights: boolean = false;\n\tstorageNewRights: Object = {};\n\toriginalRights: Object = {};\n\tdetachedRights: Object = {};\n\tmoduleTasks: Object = {};\n\n\tentityToNewShared: Object = {};\n\tloadedReadOnlyEntityToNewShared: Object = {};\n\tentityToNewSharedMaxTaskName: string = '';\n\tajaxUrl: string = '/bitrix/components/bitrix/disk.folder.list/ajax.php';\n\tdestFormName: string = 'folder-list-destFormName';\n\n\tconstructor()\n\t{\n\t}\n\n\tshowSharingDetailWithChangeRights(params)\n\t{\n\t\tthis.entityToNewShared = {};\n\t\tthis.loadedReadOnlyEntityToNewShared = {};\n\n\t\tparams = params || {};\n\t\tconst objectId = params.object.id;\n\n\t\tBX.Disk.modalWindowLoader(\n\t\t\tBX.Disk.addToLinkParam(this.ajaxUrl, 'action', 'showSharingDetailChangeRights'),\n\t\t\t{\n\t\t\t\tid: 'folder_list_sharing_detail_object_' + objectId,\n\t\t\t\tresponseType: 'json',\n\t\t\t\tpostData: {\n\t\t\t\t\tobjectId: objectId\n\t\t\t\t},\n\t\t\t\tafterSuccessLoad: (response) => {\n\t\t\t\t\tif (response.status !== 'success')\n\t\t\t\t\t{\n\t\t\t\t\t\tresponse.errors = response.errors || [{}];\n\t\t\t\t\t\tBX.Disk.showModalWithStatusAction({\n\t\t\t\t\t\t\tstatus: 'error',\n\t\t\t\t\t\t\tmessage: response.errors.pop().message\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\n\t\t\t\t\tconst objectOwner = {\n\t\t\t\t\t\tname: response.owner.name,\n\t\t\t\t\t\tavatar: response.owner.avatar,\n\t\t\t\t\t\tlink: response.owner.link\n\t\t\t\t\t};\n\n\t\t\t\t\tBX.Disk.modalWindow({\n\t\t\t\t\t\tmodalId: 'bx-disk-detail-sharing-folder-change-right',\n\t\t\t\t\t\ttitle: BX.message('JS_DISK_SHARING_LEGACY_POPUP_TITLE_MODAL_3'),\n\t\t\t\t\t\tcontentClassName: '',\n\t\t\t\t\t\tcontentStyle: {},\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonAfterPopupShow: () => {\n\n\t\t\t\t\t\t\t\tBX.addCustomEvent('onChangeRightOfSharing', this.onChangeRightOfSharing.bind(this));\n\n\t\t\t\t\t\t\t\tfor (let i in response.members)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (!response.members.hasOwnProperty(i))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tthis.entityToNewShared[response.members[i].entityId] = {\n\t\t\t\t\t\t\t\t\t\titem: {\n\t\t\t\t\t\t\t\t\t\t\tid: response.members[i].entityId,\n\t\t\t\t\t\t\t\t\t\t\tname: response.members[i].name,\n\t\t\t\t\t\t\t\t\t\t\tavatar: response.members[i].avatar\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\ttype: response.members[i].type,\n\t\t\t\t\t\t\t\t\t\tright: response.members[i].right\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tBX.SocNetLogDestination.init({\n\t\t\t\t\t\t\t\t\tname: this.destFormName,\n\t\t\t\t\t\t\t\t\tsearchInput: BX('feed-add-post-destination-input'),\n\t\t\t\t\t\t\t\t\tbindMainPopup: {\n\t\t\t\t\t\t\t\t\t\t'node': BX('feed-add-post-destination-container'),\n\t\t\t\t\t\t\t\t\t\t'offsetTop': '5px',\n\t\t\t\t\t\t\t\t\t\t'offsetLeft': '15px'\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tbindSearchPopup: {\n\t\t\t\t\t\t\t\t\t\t'node': BX('feed-add-post-destination-container'),\n\t\t\t\t\t\t\t\t\t\t'offsetTop': '5px',\n\t\t\t\t\t\t\t\t\t\t'offsetLeft': '15px'\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tcallback: {\n\t\t\t\t\t\t\t\t\t\tselect: this.onSelectDestination.bind(this),\n\t\t\t\t\t\t\t\t\t\tunSelect: this.onUnSelectDestination.bind(this),\n\t\t\t\t\t\t\t\t\t\topenDialog: this.onOpenDialogDestination.bind(this),\n\t\t\t\t\t\t\t\t\t\tcloseDialog: this.onCloseDialogDestination.bind(this),\n\t\t\t\t\t\t\t\t\t\topenSearch: this.onOpenSearchDestination.bind(this),\n\t\t\t\t\t\t\t\t\t\tcloseSearch: this.onCloseSearchDestination.bind(this)\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\titems: response.destination.items,\n\t\t\t\t\t\t\t\t\titemsLast: response.destination.itemsLast,\n\t\t\t\t\t\t\t\t\titemsSelected: response.destination.itemsSelected\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tconst BXSocNetLogDestinationFormName = this.destFormName;\n\t\t\t\t\t\t\t\tBX.bind(BX('feed-add-post-destination-container'), 'click', function (e) {\n\t\t\t\t\t\t\t\t\tBX.SocNetLogDestination.openDialog(BXSocNetLogDestinationFormName);\n\t\t\t\t\t\t\t\t\tBX.PreventDefault(e);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tBX.bind(BX('feed-add-post-destination-input'), 'keyup', this.onKeyUpDestination.bind(this));\n\t\t\t\t\t\t\t\tBX.bind(BX('feed-add-post-destination-input'), 'keydown', this.onKeyDownDestination.bind(this));\n\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonPopupClose: () => {\n\t\t\t\t\t\t\t\tif (BX.SocNetLogDestination && BX.SocNetLogDestination.isOpenDialog())\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tBX.SocNetLogDestination.closeDialog()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tBX.removeCustomEvent('onChangeRightOfSharing', this.onChangeRightOfSharing.bind(this));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcontent: [\n\t\t\t\t\t\t\tBX.create('div', {\n\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\tclassName: 'bx-disk-popup-content'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\tBX.create('table', {\n\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\tclassName: 'bx-disk-popup-shared-people-list'\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\t\t\tBX.create('thead', {\n\t\t\t\t\t\t\t\t\t\t\t\thtml: '<tr>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'<td class=\"bx-disk-popup-shared-people-list-head-col1\">' + BX.message('JS_DISK_SHARING_LEGACY_POPUP_LABEL_OWNER') + '</td>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'</tr>'\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\tBX.create('tr', {\n\t\t\t\t\t\t\t\t\t\t\t\thtml: '<tr>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'<td class=\"bx-disk-popup-shared-people-list-col1\" style=\"border-bottom: none;\"><a class=\"bx-disk-filepage-used-people-link\" href=\"' + objectOwner.link + '\"><span class=\"bx-disk-filepage-used-people-avatar\" style=\"background-image: url(\\'' + encodeURI(objectOwner.avatar) + '\\');\"></span>' + Text.encode(objectOwner.name) + '</a></td>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'</tr>'\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\tBX.create('table', {\n\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\tid: 'bx-disk-popup-shared-people-list',\n\t\t\t\t\t\t\t\t\t\t\tclassName: 'bx-disk-popup-shared-people-list'\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\t\t\tBX.create('thead', {\n\t\t\t\t\t\t\t\t\t\t\t\thtml: '<tr>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'<td class=\"bx-disk-popup-shared-people-list-head-col1\">' + BX.message('JS_DISK_SHARING_LEGACY_POPUP_LABEL_NAME_RIGHTS_USER') + '</td>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'<td class=\"bx-disk-popup-shared-people-list-head-col2\">' + BX.message('JS_DISK_SHARING_LEGACY_POPUP_LABEL_NAME_RIGHTS') + '</td>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'<td class=\"bx-disk-popup-shared-people-list-head-col3\"></td>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'</tr>'\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\tBX.create('div', {\n\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\tid: 'feed-add-post-destination-container',\n\t\t\t\t\t\t\t\t\t\t\tclassName: 'feed-add-post-destination-wrap'\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\t\t\tBX.create('span', {\n\t\t\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: 'feed-add-post-destination-item'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\tBX.create('span', {\n\t\t\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tid: 'feed-add-post-destination-input-box',\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: 'feed-add-destination-input-box'\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackground: 'transparent'\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\t\t\t\t\tBX.create('input', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: 'feed-add-post-destination-input',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: 'feed-add-destination-inp'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\tBX.create('a', {\n\t\t\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\t\t\thref: '#',\n\t\t\t\t\t\t\t\t\t\t\t\t\tid: 'bx-destination-tag',\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: 'feed-add-destination-link'\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackground: 'transparent'\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\ttext: BX.message('JS_DISK_SHARING_LEGACY_POPUP_LABEL_NAME_ADD_RIGHTS_USER'),\n\t\t\t\t\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tclick: () => {}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t],\n\t\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t\tnew SaveButton({\n\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\t\t\t\tBX.Disk.ajax({\n\t\t\t\t\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\t\t\t\t\t\turl: BX.Disk.addToLinkParam(this.ajaxUrl, 'action', 'changeSharingAndRights'),\n\t\t\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t\t\tobjectId: objectId,\n\t\t\t\t\t\t\t\t\t\t\t\tentityToNewShared: this.entityToNewShared\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tonsuccess: (response) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (!response)\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tlet name = params.object.name.split('.');\n\t\t\t\t\t\t\t\t\t\t\t\tconst ext = name.pop().toLowerCase();\n\t\t\t\t\t\t\t\t\t\t\t\tname = name.join('.');\n\t\t\t\t\t\t\t\t\t\t\t\tif (name && ext === 'board')\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tresponse.message = BX.message('JS_DISK_SHARING_LEGACY_POPUP_OK_BOARD_SHARE_MODIFIED').replace('#FILE#', name);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tresponse.message = BX.message('JS_DISK_SHARING_LEGACY_POPUP_OK_FILE_SHARE_MODIFIED').replace('#FILE#', params.object.name);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tBX.Disk.showModalWithStatusAction(response);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\tBX.PopupWindowManager.getCurrentPopup().close();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tnew BX.UI.CloseButton({\n\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\t\t\t\tBX.PopupWindowManager.getCurrentPopup().close();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t};\n\n\tshowSharingDetailWithSharing(params)\n\t{\n\t\tthis.entityToNewShared = {};\n\t\tthis.loadedReadOnlyEntityToNewShared = {};\n\n\t\tparams = params || {};\n\t\tconst objectId = params.object.id;\n\n\t\tBX.Disk.modalWindowLoader(\n\t\t\tBX.Disk.addToLinkParam(this.ajaxUrl, 'action', 'showSharingDetailAppendSharing'),\n\t\t\t{\n\t\t\t\tid: 'folder_list_sharing_detail_object_' + objectId,\n\t\t\t\tresponseType: 'json',\n\t\t\t\tpostData: {\n\t\t\t\t\tobjectId: objectId\n\t\t\t\t},\n\t\t\t\tafterSuccessLoad: (response) => {\n\t\t\t\t\tif (response.status !== 'success')\n\t\t\t\t\t{\n\t\t\t\t\t\tresponse.errors = response.errors || [{}];\n\t\t\t\t\t\tBX.Disk.showModalWithStatusAction({\n\t\t\t\t\t\t\tstatus: 'error',\n\t\t\t\t\t\t\tmessage: response.errors.pop().message\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\n\t\t\t\t\tconst objectOwner = {\n\t\t\t\t\t\tname: response.owner.name,\n\t\t\t\t\t\tavatar: response.owner.avatar,\n\t\t\t\t\t\tlink: response.owner.link\n\t\t\t\t\t};\n\t\t\t\t\tthis.entityToNewSharedMaxTaskName = response.owner.maxTaskName;\n\n\t\t\t\t\tBX.Disk.modalWindow({\n\t\t\t\t\t\tmodalId: 'bx-disk-detail-sharing-folder-change-right',\n\t\t\t\t\t\ttitle: BX.message('JS_DISK_SHARING_LEGACY_POPUP_TITLE_MODAL_3'),\n\t\t\t\t\t\tcontentClassName: '',\n\t\t\t\t\t\tcontentStyle: {},\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonAfterPopupShow: () => {\n\n\t\t\t\t\t\t\t\tBX.addCustomEvent('onChangeRightOfSharing', this.onChangeRightOfSharing.bind(this));\n\n\t\t\t\t\t\t\t\tfor (let i in response.members)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (!response.members.hasOwnProperty(i))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tthis.entityToNewShared[response.members[i].entityId] = {\n\t\t\t\t\t\t\t\t\t\titem: {\n\t\t\t\t\t\t\t\t\t\t\tid: response.members[i].entityId,\n\t\t\t\t\t\t\t\t\t\t\tname: response.members[i].name,\n\t\t\t\t\t\t\t\t\t\t\tavatar: response.members[i].avatar\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\ttype: response.members[i].type,\n\t\t\t\t\t\t\t\t\t\tright: response.members[i].right\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.loadedReadOnlyEntityToNewShared = BX.clone(this.entityToNewShared, true);\n\n\t\t\t\t\t\t\t\tBX.SocNetLogDestination.init({\n\t\t\t\t\t\t\t\t\tname : this.destFormName,\n\t\t\t\t\t\t\t\t\tsearchInput : BX('feed-add-post-destination-input'),\n\t\t\t\t\t\t\t\t\tbindMainPopup : { 'node' : BX('feed-add-post-destination-container'), 'offsetTop' : '5px', 'offsetLeft': '15px'},\n\t\t\t\t\t\t\t\t\tbindSearchPopup : { 'node' : BX('feed-add-post-destination-container'), 'offsetTop' : '5px', 'offsetLeft': '15px'},\n\t\t\t\t\t\t\t\t\tcallback : {\n\t\t\t\t\t\t\t\t\t\tselect: this.onSelectDestination.bind(this),\n\t\t\t\t\t\t\t\t\t\tunSelect: this.onUnSelectDestination.bind(this),\n\t\t\t\t\t\t\t\t\t\topenDialog: this.onOpenDialogDestination.bind(this),\n\t\t\t\t\t\t\t\t\t\tcloseDialog: this.onCloseDialogDestination.bind(this),\n\t\t\t\t\t\t\t\t\t\topenSearch: this.onOpenSearchDestination.bind(this),\n\t\t\t\t\t\t\t\t\t\tcloseSearch: this.onCloseSearchDestination.bind(this)\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\titems: response.destination.items,\n\t\t\t\t\t\t\t\t\titemsLast: response.destination.itemsLast,\n\t\t\t\t\t\t\t\t\titemsSelected : response.destination.itemsSelected\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tconst BXSocNetLogDestinationFormName = this.destFormName;\n\t\t\t\t\t\t\t\tBX.bind(BX('feed-add-post-destination-container'), 'click', function(e){BX.SocNetLogDestination.openDialog(BXSocNetLogDestinationFormName);BX.PreventDefault(e); });\n\t\t\t\t\t\t\t\tBX.bind(BX('feed-add-post-destination-input'), 'keyup', this.onKeyUpDestination.bind(this));\n\t\t\t\t\t\t\t\tBX.bind(BX('feed-add-post-destination-input'), 'keydown', this.onKeyDownDestination.bind(this));\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonPopupClose: () => {\n\t\t\t\t\t\t\t\tif(BX.SocNetLogDestination && BX.SocNetLogDestination.isOpenDialog())\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tBX.SocNetLogDestination.closeDialog()\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tBX.removeCustomEvent('onChangeRightOfSharing', this.onChangeRightOfSharing.bind(this));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcontent: [\n\t\t\t\t\t\t\tBX.create('div', {\n\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\tclassName: 'bx-disk-popup-content'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\tBX.create('table', {\n\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\tclassName: 'bx-disk-popup-shared-people-list'\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\t\t\tBX.create('thead', {\n\t\t\t\t\t\t\t\t\t\t\t\thtml: '<tr>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'<td class=\"bx-disk-popup-shared-people-list-head-col1\">' + BX.message('JS_DISK_SHARING_LEGACY_POPUP_LABEL_OWNER') + '</td>' +\n\t\t\t\t\t\t\t\t\t\t\t\t'</tr>'\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\tBX.create('tr', {\n\t\t\t\t\t\t\t\t\t\t\t\thtml: '<tr>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'<td class=\"bx-disk-popup-shared-people-list-col1\" style=\"border-bottom: none;\"><a class=\"bx-disk-filepage-used-people-link\" href=\"' + objectOwner.link + '\"><span class=\"bx-disk-filepage-used-people-avatar\" style=\"background-image: url(\\'' + encodeURI(objectOwner.avatar) + '\\');\"></span>' + Text.encode(objectOwner.name) + '</a></td>' +\n\t\t\t\t\t\t\t\t\t\t\t\t'</tr>'\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\tBX.create('table', {\n\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\tid: 'bx-disk-popup-shared-people-list',\n\t\t\t\t\t\t\t\t\t\t\tclassName: 'bx-disk-popup-shared-people-list'\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\t\t\tBX.create('thead', {\n\t\t\t\t\t\t\t\t\t\t\t\thtml: '<tr>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'<td class=\"bx-disk-popup-shared-people-list-head-col1\">' + BX.message('JS_DISK_SHARING_LEGACY_POPUP_LABEL_NAME_RIGHTS_USER') + '</td>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'<td class=\"bx-disk-popup-shared-people-list-head-col2\">' + BX.message('JS_DISK_SHARING_LEGACY_POPUP_LABEL_NAME_RIGHTS') + '</td>' +\n\t\t\t\t\t\t\t\t\t\t\t\t\t'<td class=\"bx-disk-popup-shared-people-list-head-col3\"></td>' +\n\t\t\t\t\t\t\t\t\t\t\t\t'</tr>'\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\tBX.create('div', {\n\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\tid: 'feed-add-post-destination-container',\n\t\t\t\t\t\t\t\t\t\t\tclassName: 'feed-add-post-destination-wrap'\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\t\t\tBX.create('span', {\n\t\t\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: 'feed-add-post-destination-item'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\tBX.create('span', {\n\t\t\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tid: 'feed-add-post-destination-input-box',\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: 'feed-add-destination-input-box'\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackground: 'transparent'\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\t\t\t\t\tBX.create('input', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: 'feed-add-post-destination-input',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: 'feed-add-destination-inp'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\tBX.create('a', {\n\t\t\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\t\t\thref: '#',\n\t\t\t\t\t\t\t\t\t\t\t\t\tid: 'bx-destination-tag',\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: 'feed-add-destination-link'\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackground: 'transparent'\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\ttext: BX.message('JS_DISK_SHARING_LEGACY_POPUP_LABEL_NAME_ADD_RIGHTS_USER'),\n\t\t\t\t\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tclick: () => {}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t],\n\t\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t\tnew SaveButton({\n\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\t\t\t\tBX.Disk.ajax({\n\t\t\t\t\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\t\t\t\t\t\turl: BX.Disk.addToLinkParam(this.ajaxUrl, 'action', 'appendSharing'),\n\t\t\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t\t\tobjectId: objectId,\n\t\t\t\t\t\t\t\t\t\t\t\tentityToNewShared: this.entityToNewShared\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tonsuccess: (response) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (!response)\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tBX.Disk.showModalWithStatusAction(response);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\tBX.PopupWindowManager.getCurrentPopup().close();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tnew BX.UI.CloseButton({\n\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\t\t\t\tBX.PopupWindowManager.getCurrentPopup().close();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tshowSharingDetailWithoutEdit(params)\n\t{\n\t\tparams = params || {};\n\n\t\tBX.Disk.showSharingDetailWithoutEdit({\n\t\t\tajaxUrl: '/bitrix/components/bitrix/disk.folder.list/ajax.php',\n\t\t\tobject: params.object,\n\t\t});\n\t}\n\n\tonSelectDestination(item, type, search)\n\t{\n\t\tthis.entityToNewShared[item.id] = this.entityToNewShared[item.id] || {};\n\t\tBX.Disk.appendNewShared({\n\t\t\tmaxTaskName: this.entityToNewSharedMaxTaskName,\n\t\t\treadOnly: !!this.loadedReadOnlyEntityToNewShared[item.id],\n\t\t\tdestFormName: this.destFormName,\n\t\t\titem: item,\n\t\t\ttype: type,\n\t\t\tright: this.entityToNewShared[item.id].right || 'disk_access_edit'\n\t\t});\n\n\t\tthis.entityToNewShared[item.id] = {\n\t\t\titem: item,\n\t\t\ttype: type,\n\t\t\tright: this.entityToNewShared[item.id].right || 'disk_access_edit'\n\t\t};\n\t};\n\n\tonUnSelectDestination(item, type, search)\n\t{\n\t\tconst entityId = item.id;\n\n\t\tif (!!this.loadedReadOnlyEntityToNewShared[entityId])\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tdelete this.entityToNewShared[entityId];\n\n\t\tlet child = BX.findChild(BX('bx-disk-popup-shared-people-list'), {attribute: {'data-dest-id': '' + entityId + ''}}, true);\n\t\tif (child)\n\t\t{\n\t\t\tBX.remove(child);\n\t\t}\n\t};\n\n\tonChangeRightOfSharing(entityId, taskName)\n\t{\n\t\tif (this.entityToNewShared[entityId])\n\t\t{\n\t\t\tthis.entityToNewShared[entityId].right = taskName;\n\t\t}\n\t};\n\n\tonOpenDialogDestination()\n\t{\n\t\tBX.style(BX('feed-add-post-destination-input-box'), 'display', 'inline-block');\n\t\tBX.style(BX('bx-destination-tag'), 'display', 'none');\n\t\tBX.focus(BX('feed-add-post-destination-input'));\n\t\tif (BX.SocNetLogDestination.popupWindow)\n\t\t{\n\t\t\tBX.SocNetLogDestination.popupWindow.adjustPosition({forceTop: true});\n\t\t}\n\t};\n\n\tonCloseDialogDestination()\n\t{\n\t\tlet input = BX('feed-add-post-destination-input');\n\t\tif (!BX.SocNetLogDestination.isOpenSearch() && input && input.value.length <= 0)\n\t\t{\n\t\t\tBX.style(BX('feed-add-post-destination-input-box'), 'display', 'none');\n\t\t\tBX.style(BX('bx-destination-tag'), 'display', 'inline-block');\n\t\t}\n\t};\n\n\tonOpenSearchDestination()\n\t{\n\t\tif (BX.SocNetLogDestination.popupSearchWindow)\n\t\t{\n\t\t\tBX.SocNetLogDestination.popupSearchWindow.adjustPosition({forceTop: true});\n\t\t}\n\t};\n\n\tonCloseSearchDestination()\n\t{\n\t\tlet input = BX('feed-add-post-destination-input');\n\t\tif (!BX.SocNetLogDestination.isOpenSearch() && input && input.value.length > 0)\n\t\t{\n\t\t\tBX.style(BX('feed-add-post-destination-input-box'), 'display', 'none');\n\t\t\tBX.style(BX('bx-destination-tag'), 'display', 'inline-block');\n\t\t\tBX('feed-add-post-destination-input').value = '';\n\t\t}\n\t};\n\n\tonKeyDownDestination(event)\n\t{\n\t\tlet BXSocNetLogDestinationFormName = this.destFormName;\n\t\tif (event.keyCode == 8 && BX('feed-add-post-destination-input').value.length <= 0)\n\t\t{\n\t\t\tBX.SocNetLogDestination.sendEvent = false;\n\t\t\tBX.SocNetLogDestination.deleteLastItem(BXSocNetLogDestinationFormName);\n\t\t}\n\n\t\treturn true;\n\t};\n\n\tonKeyUpDestination(event)\n\t{\n\t\tconst BXSocNetLogDestinationFormName = this.destFormName;\n\t\tif (event.keyCode == 16 || event.keyCode == 17 || event.keyCode == 18 || event.keyCode == 20 || event.keyCode == 244 || event.keyCode == 224 || event.keyCode == 91)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (event.keyCode == 13)\n\t\t{\n\t\t\tBX.SocNetLogDestination.selectFirstSearchItem(BXSocNetLogDestinationFormName);\n\t\t\treturn BX.PreventDefault(event);\n\t\t}\n\t\tif (event.keyCode == 27)\n\t\t{\n\t\t\tBX('feed-add-post-destination-input').value = '';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.SocNetLogDestination.search(BX('feed-add-post-destination-input').value, true, BXSocNetLogDestinationFormName);\n\t\t}\n\n\t\tif (BX.SocNetLogDestination.sendEvent && BX.SocNetLogDestination.isOpenDialog())\n\t\t{\n\t\t\tBX.SocNetLogDestination.closeDialog();\n\t\t}\n\n\t\tif (event.keyCode == 8)\n\t\t{\n\t\t\tBX.SocNetLogDestination.sendEvent = true;\n\t\t}\n\t\treturn BX.PreventDefault(event);\n\t};\n}","export default class SharingControlType\n{\n\tstatic WITHOUT_EDIT = 'without-edit';\n\tstatic WITH_CHANGE_RIGHTS = 'with-change-rights';\n\tstatic WITH_SHARING = 'with-sharing';\n\tstatic BLOCKED_BY_FEATURE = 'blocked-by-feature';\n}"],"names":["LegacyPopup","params","entityToNewShared","loadedReadOnlyEntityToNewShared","objectId","object","id","BX","Disk","modalWindowLoader","addToLinkParam","ajaxUrl","responseType","postData","afterSuccessLoad","response","status","errors","showModalWithStatusAction","message","pop","objectOwner","name","owner","avatar","link","modalWindow","modalId","title","contentClassName","contentStyle","events","onAfterPopupShow","addCustomEvent","onChangeRightOfSharing","bind","i","members","hasOwnProperty","entityId","item","type","right","SocNetLogDestination","init","destFormName","searchInput","bindMainPopup","bindSearchPopup","callback","select","onSelectDestination","unSelect","onUnSelectDestination","openDialog","onOpenDialogDestination","closeDialog","onCloseDialogDestination","openSearch","onOpenSearchDestination","closeSearch","onCloseSearchDestination","items","destination","itemsLast","itemsSelected","BXSocNetLogDestinationFormName","e","PreventDefault","onKeyUpDestination","onKeyDownDestination","onPopupClose","isOpenDialog","removeCustomEvent","content","create","props","className","children","html","encodeURI","Text","encode","style","background","value","href","text","click","buttons","SaveButton","ajax","method","dataType","url","data","onsuccess","split","ext","toLowerCase","join","replace","PopupWindowManager","getCurrentPopup","close","UI","CloseButton","entityToNewSharedMaxTaskName","maxTaskName","clone","showSharingDetailWithoutEdit","search","appendNewShared","readOnly","child","findChild","attribute","remove","taskName","focus","popupWindow","adjustPosition","forceTop","input","isOpenSearch","length","popupSearchWindow","event","keyCode","sendEvent","deleteLastItem","selectFirstSearchItem","SharingControlType"],"mappings":"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"}