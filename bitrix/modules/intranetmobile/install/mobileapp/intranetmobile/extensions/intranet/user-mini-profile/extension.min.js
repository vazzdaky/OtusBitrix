jn.define("intranet/user-mini-profile",((e,t,o)=>{const{RunActionExecutor:n}=e("rest/run-action-executor");const{BackgroundUIManager:a}=e("background/ui-manager");const i="intranet:user-mini-profile";class r{static init(){const e=Application.storage.get(`intranet.miniProfile.needToShow_${env.userId}`,null);if(e===null||e===undefined){const e=new n("intranetmobile.userprofile.isNeedToShowMiniProfile",{});e.call(false).then((e=>{Application.storage.set(`intranet.miniProfile.needToShow_${env.userId}`,false);if(e.data&&e.data===true){r.showMiniProfile()}else{BX.postComponentEvent("userMiniProfileClosed",null)}})).catch((e=>{console.error(e)}))}else{BX.postComponentEvent("userMiniProfileClosed",null)}}static showMiniProfile=async()=>{try{const e=await this.getProfileData();const t=await this.getPortalLogoData();a.openComponent(i,r.openComponent.bind(null,t,e),1e3)}catch(e){console.error(e)}};static openComponent(e,t){PageManager.openComponent("JSStackComponent",{name:"JSStackComponent",scriptPath:availableComponents[i].publicUrl,componentCode:i,canOpenInDefault:true,rootWidget:{name:"layout",settings:{objectName:"layout",modal:true,backdrop:{showOnTop:true,swipeAllowed:false,hideNavigationBar:true}}},params:{portalLogoParams:e.answer.result,profileDataParams:t.answer.result}})}static getProfileData=async()=>BX.rest.callMethod("user.current");static getPortalLogoData=async()=>BX.rest.callMethod("intranet.portal.getLogo")}o.exports={UserMiniProfile:r,MINI_PROFILE_COMPONENT_NAME:i}}));
//# sourceMappingURL=extension.map.js