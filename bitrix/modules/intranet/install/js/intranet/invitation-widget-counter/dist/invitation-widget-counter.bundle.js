this.BX=this.BX||{},function(e,s,t,i){"use strict";var r=babelHelpers.classPrivateFieldLooseKey("cache"),a=babelHelpers.classPrivateFieldLooseKey("instance"),l=babelHelpers.classPrivateFieldLooseKey("getCounterWrapper"),o=babelHelpers.classPrivateFieldLooseKey("getCounter"),n=babelHelpers.classPrivateFieldLooseKey("getCounterValue"),b=babelHelpers.classPrivateFieldLooseKey("onFirstWatchNewStructure");class c{constructor(){Object.defineProperty(this,b,{value:d}),Object.defineProperty(this,n,{value:h}),Object.defineProperty(this,o,{value:p}),Object.defineProperty(this,l,{value:u}),Object.defineProperty(this,r,{writable:!0,value:new s.Cache.MemoryCache}),t.EventEmitter.subscribeOnce("HR.company-structure:first-popup-showed",babelHelpers.classPrivateFieldLooseBase(this,b)[b].bind(this))}static getInstance(){return babelHelpers.classPrivateFieldLooseBase(this,a)[a]||(babelHelpers.classPrivateFieldLooseBase(this,a)[a]=new this),babelHelpers.classPrivateFieldLooseBase(this,a)[a]}setOptions(e){return babelHelpers.classPrivateFieldLooseBase(this,r)[r].set("options",e),this}getOptions(){return babelHelpers.classPrivateFieldLooseBase(this,r)[r].get("options",{})}show(){babelHelpers.classPrivateFieldLooseBase(this,o)[o]().renderTo(babelHelpers.classPrivateFieldLooseBase(this,l)[l]())}onReceiveCounterValue(e){this.getOptions().shouldShowStructureCounter&&e++,babelHelpers.classPrivateFieldLooseBase(this,o)[o]().update(e),this.getOptions().invitationCounter=e,e>0?babelHelpers.classPrivateFieldLooseBase(this,o)[o]().renderTo(babelHelpers.classPrivateFieldLooseBase(this,l)[l]()):(babelHelpers.classPrivateFieldLooseBase(this,o)[o]().destroy(),babelHelpers.classPrivateFieldLooseBase(this,r)[r].delete("counter"))}}function u(){return babelHelpers.classPrivateFieldLooseBase(this,r)[r].remember("counter-wrapper",()=>this.getOptions().button.querySelector(".invitation-widget-counter"))}function p(){return babelHelpers.classPrivateFieldLooseBase(this,r)[r].remember("counter",()=>new i.Counter({value:babelHelpers.classPrivateFieldLooseBase(this,n)[n](),color:i.Counter.Color.DANGER}))}function h(){var e;let s=Number(this.getOptions().invitationCounter);return null!=(e=this.getOptions().shouldShowStructureCounter)&&e&&s++,s}function d(){let e=babelHelpers.classPrivateFieldLooseBase(this,o)[o]().value;s.Type.isNumber(e)&&this.getOptions().shouldShowStructureCounter&&(e--,this.getOptions().shouldShowStructureCounter=!1,babelHelpers.classPrivateFieldLooseBase(this,o)[o]().update(e),this.getOptions().invitationCounter=e,e>0?babelHelpers.classPrivateFieldLooseBase(this,o)[o]().renderTo(babelHelpers.classPrivateFieldLooseBase(this,l)[l]()):(babelHelpers.classPrivateFieldLooseBase(this,o)[o]().destroy(),babelHelpers.classPrivateFieldLooseBase(this,r)[r].delete("counter")))}Object.defineProperty(c,a,{writable:!0,value:void 0}),e.InvitationWidgetCounter=c}(this.BX.Intranet=this.BX.Intranet||{},BX,BX.Event,BX.UI);
//# sourceMappingURL=invitation-widget-counter.bundle.js.map
