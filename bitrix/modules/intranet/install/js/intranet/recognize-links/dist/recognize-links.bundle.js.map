{"version":3,"file":"recognize-links.bundle.js","sources":["../src/recognize-links.js"],"sourcesContent":["import { Runtime, Extension } from 'main.core';\n\nclass RecognizeLinks\n{\n\tconstructor()\n\t{\n\t\tthis.serverName = location.origin;\n\t\tthis.netUrl = Extension.getSettings('intranet.recognize-links').netUrl;\n\t}\n\n\tanalyze(): void\n\t{\n\t\tconst isDesktop = typeof BXDesktopSystem !== 'undefined';\n\t\tconst referrer = document.referrer;\n\t\tif (\n\t\t\t!isDesktop\n\t\t\t&& !BX.browser.IsMobile()\n\t\t\t&& referrer !== ''\n\t\t\t&& !referrer.includes(this.serverName)\n\t\t\t&& (this.netUrl === '' || !referrer.includes(this.netUrl))\n\t\t)\n\t\t{\n\t\t\tRuntime.loadExtension('im.public').then((exports) => {\n\t\t\t\tconst { Messenger } = exports;\n\t\t\t\tMessenger.desktop.openPage(document.location.href, { skipNativeBrowser: true });\n\t\t\t});\n\t\t}\n\t}\n}\n\nsetTimeout(() => {\n\tconst isImInstalled = Extension.getSettings('intranet.recognize-links').isImInstalled;\n\tif (isImInstalled)\n\t{\n\t\t(new RecognizeLinks()).analyze();\n\t}\n}, 200);\n"],"names":["RecognizeLinks","constructor","serverName","location","origin","netUrl","Extension","getSettings","analyze","isDesktop","BXDesktopSystem","referrer","document","BX","browser","IsMobile","includes","Runtime","loadExtension","then","exports","Messenger","desktop","openPage","href","skipNativeBrowser","setTimeout","isImInstalled"],"mappings":";;;;;CAEA,MAAMA,cAAc,CACpB;GACCC,WAAW,GACX;KACC,IAAI,CAACC,UAAU,GAAGC,QAAQ,CAACC,MAAM;KACjC,IAAI,CAACC,MAAM,GAAGC,mBAAS,CAACC,WAAW,CAAC,0BAA0B,CAAC,CAACF,MAAM;;GAGvEG,OAAO,GACP;KACC,MAAMC,SAAS,GAAG,OAAOC,eAAe,KAAK,WAAW;KACxD,MAAMC,QAAQ,GAAGC,QAAQ,CAACD,QAAQ;KAClC,IACC,CAACF,SAAS,IACP,CAACI,EAAE,CAACC,OAAO,CAACC,QAAQ,EAAE,IACtBJ,QAAQ,KAAK,EAAE,IACf,CAACA,QAAQ,CAACK,QAAQ,CAAC,IAAI,CAACd,UAAU,CAAC,KAClC,IAAI,CAACG,MAAM,KAAK,EAAE,IAAI,CAACM,QAAQ,CAACK,QAAQ,CAAC,IAAI,CAACX,MAAM,CAAC,CAAC,EAE3D;OACCY,iBAAO,CAACC,aAAa,CAAC,WAAW,CAAC,CAACC,IAAI,CAAEC,OAAO,IAAK;SACpD,MAAM;WAAEC;UAAW,GAAGD,OAAO;SAC7BC,SAAS,CAACC,OAAO,CAACC,QAAQ,CAACX,QAAQ,CAACT,QAAQ,CAACqB,IAAI,EAAE;WAAEC,iBAAiB,EAAE;UAAM,CAAC;QAC/E,CAAC;;;CAGL;CAEAC,UAAU,CAAC,MAAM;GAChB,MAAMC,aAAa,GAAGrB,mBAAS,CAACC,WAAW,CAAC,0BAA0B,CAAC,CAACoB,aAAa;GACrF,IAAIA,aAAa,EACjB;KACE,IAAI3B,cAAc,EAAE,CAAEQ,OAAO,EAAE;;CAElC,CAAC,EAAE,GAAG,CAAC;;;;"}