{"version":3,"file":"license-widget.bundle.js","sources":["../src/contents/content.js","../src/contents/market-content.js","../src/contents/baas-content.js","../src/contents/license-content.js","../src/contents/partner-content.js","../src/contents/purchase-history-content.js","../src/contents/telephony-content.js","../src/contents/updates-content.js","../src/popup.js","../src/license-widget.js"],"sourcesContent":["import { EventEmitter } from 'main.core.events';\nimport { Cache } from 'main.core';\nimport type { ConfigOptions } from '../types/options';\n\nexport class Content extends EventEmitter\n{\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(options: Object)\n\t{\n\t\tsuper();\n\t\tthis.setOptions(options);\n\t\tthis.setEventNamespace('BX.Intranet.LicenseWidget.Content');\n\t}\n\n\tsetOptions(options: Object): Content\n\t{\n\t\tthis.cache.set('options', options);\n\n\t\treturn this;\n\t}\n\n\tgetOptions(): Object\n\t{\n\t\treturn this.cache.get('options', {});\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\tthrow new Error('Must be implemented in a child class');\n\t}\n\n\tgetConfig(): ConfigOptions\n\t{\n\t\treturn {\n\t\t\thtml: this.getLayout(),\n\t\t\tminHeight: '58px',\n\t\t};\n\t}\n}","import { EventEmitter } from 'main.core.events';\nimport { FeaturePromotersRegistry } from 'ui.info-helper';\nimport { Content } from './content';\nimport { Tag } from 'main.core';\n\nexport class MarketContent extends Content\n{\n\tgetConfig(): Object\n\t{\n\t\treturn {\n\t\t\thtml: this.getLayout(),\n\t\t\tminHeight: this.getOptions().isSmall ? '86px' : '55px',\n\t\t};\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div data-id=\"${this.getLayoutId()}\" class=\"license-widget-item license-widget-item--secondary ${this.getMainClass()}\">\n\t\t\t\t\t<div class=\"license-widget-inner ${this.getOptions().isSmall ? '--column' : ''}\">\n\t\t\t\t\t\t<div class=\"license-widget-content\">\n\t\t\t\t\t\t\t${this.getIcon()}\n\t\t\t\t\t\t\t<div class=\"license-widget-item-content\">\n\t\t\t\t\t\t\t\t${this.getTitle()}\n\t\t\t\t\t\t\t\t${this.getDescription()}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${this.getButton()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetLayoutId(): string\n\t{\n\t\treturn 'license-widget-block-market';\n\t}\n\n\tgetTitle(): HTMLElement\n\t{\n\t\treturn this.cache.remember('title', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"license-widget-item-name\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t${this.getOptions().title}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetIcon(): HTMLElement\n\t{\n\t\treturn this.cache.remember('icon', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"license-widget-item-icon license-widget-item-icon--mp\"/>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetDescription(): HTMLElement\n\t{\n\t\treturn this.cache.remember('description', () => {\n\t\t\tif (this.getOptions().isPaid || this.getOptions().isDemo)\n\t\t\t{\n\t\t\t\treturn this.getReminderMessage();\n\t\t\t}\n\n\t\t\treturn this.getDescriptionLink();\n\t\t});\n\t}\n\n\tgetMainClass(): string\n\t{\n\t\tif (this.getOptions().isExpired || this.getOptions().isAlmostExpired)\n\t\t{\n\t\t\treturn '--market-expired';\n\t\t}\n\n\t\tif (this.getOptions().isPaid || this.getOptions().isDemo)\n\t\t{\n\t\t\treturn '--market-active';\n\t\t}\n\n\t\treturn '--market-default';\n\t}\n\n\tgetReminderMessage(): ?HTMLDivElement\n\t{\n\t\treturn this.cache.remember('reminder-message', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"license-widget-item-info\">\n\t\t\t\t\t<span class=\"license-widget-item-info-text\">\n\t\t\t\t\t\t${this.getOptions().messages.remainder}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetDescriptionLink(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('description-link', () => {\n\t\t\tconst showHelper = () => {\n\t\t\t\tFeaturePromotersRegistry.getPromoter({ code: this.getOptions().description.landingCode }).show();\n\t\t\t};\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"license-widget-item-link\">\n\t\t\t\t\t<span class=\"license-widget-item-link-text\" onclick=\"${showHelper}\">\n\t\t\t\t\t\t${this.getOptions().description.text}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetButton(): HTMLLinkElement\n\t{\n\t\treturn this.cache.remember('button', () => {\n\t\t\tconst onclick = () => {\n\t\t\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'BX.Intranet.LicenseWidget.Popup:openChild');\n\t\t\t};\n\n\t\t\treturn Tag.render`\n\t\t\t\t<a onclick=\"${onclick}\" href=\"${this.getOptions().button.link}\" class=\"license-widget-item-btn\" target=\"_blank\">\n\t\t\t\t\t${this.getOptions().button.text}\n\t\t\t\t</a>\n\t\t\t`;\n\t\t});\n\t}\n}","import { Tag, Runtime, Extension } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { FeaturePromotersRegistry } from 'ui.info-helper';\nimport { MarketContent } from './market-content';\n\nconst baasWidgetMarker = Symbol('baas widget');\nexport class BaasContent extends MarketContent\n{\n\tgetConfig(): Object\n\t{\n\t\treturn {\n\t\t\thtml: this.getLayout(),\n\t\t\tminHeight: this.getOptions().isSmall ? '86px' : '55px',\n\t\t};\n\t}\n\n\tgetTitle(): HTMLElement\n\t{\n\t\treturn this.cache.remember('title', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"license-widget-item-name\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t${this.getOptions().title}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetDescription(): HTMLElement\n\t{\n\t\tif (this.getOptions().isActive)\n\t\t{\n\t\t\treturn this.getReminderMessage();\n\t\t}\n\n\t\treturn this.getDescriptionLink();\n\t}\n\n\tgetDescriptionLink(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('description-link', () => {\n\t\t\tconst showHelper = () => {\n\t\t\t\tFeaturePromotersRegistry.getPromoter({ code: this.getOptions().description.landingCode }).show();\n\t\t\t};\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"license-widget-item-link\">\n\t\t\t\t\t<span class=\"license-widget-item-link-text\" onclick=\"${showHelper}\">\n\t\t\t\t\t\t${this.getOptions().description.text}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetReminderMessage(): ?HTMLDivElement\n\t{\n\t\treturn this.cache.remember('reminder-message', () => {\n\t\t\tconst node = Tag.render`\n\t\t\t\t<div class=\"license-widget-item-link\" onclick=\"${this.#showBaasWidget.bind(this)}\">\n\t\t\t\t\t<span class=\"license-widget-item-link-text --active\">\n\t\t\t\t\t\t${this.getOptions().messages.remainder}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tif (BX.PULL && Extension.getSettings('baas.store').pull)\n\t\t\t{\n\t\t\t\tBX.PULL.extendWatch(Extension.getSettings('baas.store').pull.channelName);\n\n\t\t\t\tEventEmitter.subscribe('onPullEvent-baas', (event: BaseEvent) => {\n\t\t\t\t\tconst [command: string, params] = event.getData();\n\t\t\t\t\tif (command === 'updateService' && params.purchaseCount)\n\t\t\t\t\t{\n\t\t\t\t\t\tnode.querySelector('[data-bx-role=\"purchaseCount\"]').innerText = params.purchaseCount;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn node;\n\t\t});\n\t}\n\n\tgetLayoutId(): string\n\t{\n\t\treturn 'license-widget-block-baas';\n\t}\n\n\tgetButton(): HTMLLinkElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<a class=\"license-widget-item-btn\" onclick=\"${this.#showBaasWidget.bind(this)}\">\n\t\t\t\t${this.getOptions().button.text}\n\t\t\t</a>\n\t\t`;\n\t}\n\n\t#showBaasWidget(): void\n\t{\n\t\tRuntime.loadExtension(['baas.store']).then((exports) => {\n\t\t\tconst widget = exports.Widget.getInstance();\n\t\t\tif (!widget[baasWidgetMarker])\n\t\t\t{\n\t\t\t\twidget.subscribe('onClickBack', () => {\n\t\t\t\t\tthis.getOptions().licensePopup.show();\n\t\t\t\t});\n\t\t\t}\n\t\t\twidget.bind(this.getOptions().licensePopupTarget, exports.Analytics.CONTEXT_LICENSE_WIDGET).show();\n\t\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'BX.Intranet.LicenseWidget.Popup:openChild');\n\t\t});\n\t}\n\n\tgetIcon(): HTMLElement\n\t{\n\t\treturn this.cache.remember('icon', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"license-widget-item-icon license-widget-item-icon--baas\"/>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetMainClass(): string\n\t{\n\t\tif (this.getOptions().isActive)\n\t\t{\n\t\t\treturn '--baas-active';\n\t\t}\n\n\t\treturn '--baas-default';\n\t}\n}\n","import { Dom, Tag } from 'main.core';\nimport type { LicenseContentOptions } from '../types/options';\nimport { Content } from './content';\n\nexport class LicenseContent extends Content\n{\n\tconstructor(options: LicenseContentOptions)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Bitrix24.LicenseWidget.Content.License');\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t<div data-id=\"license-widget-block-tariff\"\n\t\t\t\tclass=\"license-widget-item license-widget-item--main ${this.getOptions().isExpired || this.getOptions().isAlmostExpired ? 'license-widget-item--expired' : ''}\"\n\t\t\t>\n\t\t\t\t<div class=\"license-widget-inner ${this.getOptions().isDemo ? '--demo' : ''}\">\n\t\t\t\t\t<div class=\"license-widget-content\">\n\t\t\t\t\t\t${this.getMainIcon()}\n\t\t\t\t\t\t<div class=\"license-widget-item-content\">\n\t\t\t\t\t\t\t<div class=\"license-widget-item-name\">\n\t\t\t\t\t\t\t\t<span>${this.getOptions().name}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t${this.getOptions().isExpired ? this.getExpiredMessage() : this.getRemainderMessage()}\n\t\t\t\t\t\t\t${this.getOptions().isExpired && this.getOptions().isAlmostBlocked ? this.getBlockMessage() : ''}\n\t\t\t\t\t\t\t${this.getOptions().isAlmostBlocked ? '' : this.getLink()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.getOptions().button.isAvailable ? this.getButton() : ''}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetMainIcon(): HTMLElement\n\t{\n\t\tconst icon = Tag.render`\n\t\t\t<div class=\"license-widget-item-icon\"/>\n\t\t`;\n\n\t\tif (this.getOptions().isAlmostExpired)\n\t\t{\n\t\t\tDom.addClass(icon, 'license-widget-item-icon--low');\n\t\t}\n\t\telse if (this.getOptions().isExpired)\n\t\t{\n\t\t\tDom.addClass(icon, 'license-widget-item-icon--expired');\n\t\t}\n\t\telse if (this.getOptions().isDemo)\n\t\t{\n\t\t\tDom.addClass(icon, 'license-widget-item-icon--demo');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(icon, 'license-widget-item-icon--pro');\n\t\t}\n\n\t\treturn icon;\n\t}\n\n\tgetButton(): HTMLElement\n\t{\n\t\tif (this.getOptions().button.type === 'POST')\n\t\t{\n\t\t\tconst onclick = () => {\n\t\t\t\tdocument.querySelector('#renew-license-form').submit();\n\t\t\t};\n\n\t\t\treturn Tag.render`\n\t\t\t\t<button onclick=\"${onclick}\" class=\"license-widget-item-btn ${this.getOptions().isDemo && !this.getOptions().isAlmostExpired && !this.getOptions().isExpired ? 'license-widget-item-btn--green' : ''}\">\n\t\t\t\t\t<form id=\"renew-license-form\" action=\"${this.getOptions().button.link}\" method=\"post\" target=\"_blank\">\n\t\t\t\t\t\t<input name=\"license_key\" value=\"${this.getOptions().button.hashKey}\" hidden>\n\t\t\t\t\t</form>\n\t\t\t\t\t${this.getOptions().button.text}\n\t\t\t\t</button>\n\t\t\t`;\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<a href=\"${this.getOptions().button.link}\" target=\"_blank\" class=\"license-widget-item-btn ${this.getOptions().isDemo && !this.getOptions().isAlmostExpired && !this.getOptions().isExpired ? 'license-widget-item-btn--green' : ''}\">\n\t\t\t\t${this.getOptions().button.text}\n\t\t\t</a>\n\t\t`;\n\t}\n\n\tgetExpiredMessage(): HTMLElement\n\t{\n\t\treturn this.cache.remember('expired-message', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"license-widget-item-expired-message\">\n\t\t\t\t\t<span class=\"license-widget-item-info-text\">\n\t\t\t\t\t\t${this.getOptions().messages.expired}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetBlockMessage(): HTMLElement\n\t{\n\t\treturn this.cache.remember('block-message', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"license-widget-item-expired-message --scanner-info\">\n\t\t\t\t\t<span class=\"license-widget-item-info-text\">\n\t\t\t\t\t\t${this.getOptions().messages.block}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetRemainderMessage(): HTMLElement\n\t{\n\t\treturn this.cache.remember('block-message', () => {\n\t\t\tif (this.getOptions().isExpired || this.getOptions().isAlmostExpired)\n\t\t\t{\n\t\t\t\treturn Tag.render`\n\t\t\t\t\t<div class=\"license-widget-item-expired-message --scanner-info\">\n\t\t\t\t\t\t<span class=\"license-widget-item-info-text\">\n\t\t\t\t\t\t\t${this.getOptions().messages.remainder}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t}\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"license-widget-item-info\">\n\t\t\t\t\t<span class=\"license-widget-item-info-text\">\n\t\t\t\t\t\t${this.getOptions().messages.remainder}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetLink(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<a href=\"${this.getOptions().more.link}\" class=\"license-widget-item-link-text\" target=\"_blank\">\n\t\t\t\t${this.getOptions().more.text}\n\t\t\t</a>\n\t\t`;\n\t}\n}\n","import { Tag } from 'main.core';\nimport { FeaturePromotersRegistry } from 'ui.info-helper';\nimport { Content } from './content';\n\nexport class PartnerContent extends Content\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Bitrix24.LicenseWidget.Content.Orders');\n\t}\n\n\tgetConfig(): Object\n\t{\n\t\treturn {\n\t\t\thtml: this.getLayout(),\n\t\t\tminHeight: '50px',\n\t\t};\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tconst onclick = () => {\n\t\t\t\tif (this.getOptions().landingCode)\n\t\t\t\t{\n\t\t\t\t\tFeaturePromotersRegistry.getPromoter({ code: this.getOptions().landingCode }).show();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\twindow.open(this.getOptions().link);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div data-id=\"license-widget-block-orders\" onclick=\"${onclick}\" class=\"license-widget-item license-widget-item--secondary --pointer\">\n\t\t\t\t\t<div class=\"license-widget-inner\">\n\t\t\t\t\t\t<div class=\"license-widget-content\">\n\t\t\t\t\t\t\t<div class=\"license-widget-item-icon license-widget-item-icon--partner\"></div>\n\t\t\t\t\t\t\t<div class=\"license-widget-item-content\">\n\t\t\t\t\t\t\t\t${this.getTitle()}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"license-widget-item-icon__arrow-right ui-icon-set --arrow-right\"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetTitle(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('title', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"license-widget-item-name\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t${this.getOptions().title}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n}\n","import { Tag } from 'main.core';\nimport type { PurchaseHistoryContentOptions } from '../types/options';\nimport { Content } from './content';\n\nexport class PurchaseHistoryContent extends Content\n{\n\tconstructor(options: PurchaseHistoryContentOptions)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Bitrix24.LicenseWidget.Content.Orders');\n\t}\n\n\tgetConfig(): Object\n\t{\n\t\treturn {\n\t\t\thtml: this.getLayout(),\n\t\t\tminHeight: '50px',\n\t\t};\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tconst onclick = (event) => {\n\t\t\t\tdocument.querySelector('#form-purchase-history').submit();\n\t\t\t};\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div data-id=\"license-widget-block-orders\" onclick=\"${onclick}\" class=\"license-widget-item license-widget-item--secondary --pointer\">\n\t\t\t\t\t<div class=\"license-widget-inner\">\n\t\t\t\t\t\t<div class=\"license-widget-content\">\n\t\t\t\t\t\t\t<div class=\"license-widget-item-icon license-widget-item-icon--order\"></div>\n\t\t\t\t\t\t\t<div class=\"license-widget-item-content\">\n\t\t\t\t\t\t\t\t${this.getTitle()}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"license-widget-item-icon__arrow-right ui-icon-set --arrow-right\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<form id=\"form-purchase-history\" action=\"${this.getOptions().link}\" method=\"post\" target=\"_blank\">\n\t\t\t\t\t\t<input name=\"license_key\" value=\"${this.getOptions().hashKey}\" hidden>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetTitle(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('title', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"license-widget-item-name\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t${this.getOptions().text}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n}","import { Content } from './content';\nimport { Tag } from 'main.core';\n\nexport class TelephonyContent extends Content\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Bitrix24.LicenseWidget.Content.Telephony');\n\t}\n\n\tgetConfig(): Object\n\t{\n\t\treturn {\n\t\t\thtml: this.getLayout(),\n\t\t\tminHeight: '43px',\n\t\t\tsizeLoader: 30,\n\t\t};\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tconst onclick = () => {\n\t\t\t\tdocument.location.href = this.getOptions().link;\n\t\t\t};\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div data-id=\"license-widget-block-telephony\" onclick=\"${onclick}\" class=\"license-widget-item license-widget-item--secondary --pointer\">\n\t\t\t\t\t<div class=\"license-widget-inner\">\n\t\t\t\t\t\t<div class=\"license-widget-content\">\n\t\t\t\t\t\t\t<div class=\"license-widget-item-icon ${this.getOptions().isActive ? 'license-widget-item-icon--tel-active' : 'license-widget-item-icon--tel'}\"/>\n\t\t\t\t\t\t\t<div class=\"license-widget-item-content\">\n\t\t\t\t\t\t\t\t<div class=\"license-widget-item-name\">\n\t\t\t\t\t\t\t\t\t${this.getOptions().title}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"license-widget-item-icon__arrow-right ui-icon-set --arrow-right\"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n}\n","import { Content } from './content';\nimport { Tag } from 'main.core';\n\nexport class UpdatesContent extends Content\n{\n\tgetConfig(): Object\n\t{\n\t\treturn {\n\t\t\thtml: this.getLayout(),\n\t\t\tminHeight: '43px',\n\t\t\tsizeLoader: 30,\n\t\t};\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tconst onclick = () => {\n\t\t\t\twindow.open(this.getOptions().link, '_blank');\n\t\t\t};\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div onclick=\"${onclick}\" data-id=\"license-widget-block-whatsnew\" class=\"license-widget-item license-widget-item--secondary --pointer\">\n\t\t\t\t\t<div class=\"license-widget-inner\">\n\t\t\t\t\t\t<div class=\"license-widget-content\">\n\t\t\t\t\t\t\t${this.getMainIcon()}\n\t\t\t\t\t\t\t<div class=\"license-widget-item-content\">\n\t\t\t\t\t\t\t\t${this.getTitle()}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"license-widget-item-icon__arrow-right ui-icon-set --arrow-right\"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetMainIcon(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('main-icon', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"license-widget-item-icon license-widget-item-icon--updates\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetTitle(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('title', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"license-widget-item-name\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t${this.getOptions().title}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n}\n","import { ajax, Cache } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { BaasContent } from './contents/baas-content';\nimport { LicenseContent } from './contents/license-content';\nimport { MarketContent } from './contents/market-content';\nimport { PartnerContent } from './contents/partner-content';\nimport { PurchaseHistoryContent } from './contents/purchase-history-content';\nimport { TelephonyContent } from './contents/telephony-content';\nimport { UpdatesContent } from './contents/updates-content';\nimport type { PopupOptions , ConfigOptions } from './types/options';\nimport { PopupComponentsMaker } from 'ui.popupcomponentsmaker';\n\nexport class Popup extends EventEmitter\n{\n\t#cache = new Cache.MemoryCache();\n\n\tconstructor(options: PopupOptions)\n\t{\n\t\tsuper();\n\t\tthis.setOptions(options);\n\t\tthis.setEventNamespace('BX.Intranet.LicenseWidget.Popup');\n\t\tthis.setEventHandlers();\n\t}\n\n\tsetOptions(options: PopupOptions): void\n\t{\n\t\tthis.#cache.set('options', options);\n\t}\n\n\tgetOptions(): PopupOptions\n\t{\n\t\treturn this.#cache.get('options', {});\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.getBasePopup().show();\n\t\tthis.emit('show');\n\t}\n\n\tclose(): void\n\t{\n\t\tthis.getBasePopup().close();\n\t}\n\n\tgetBasePopup(): PopupComponentsMaker\n\t{\n\t\treturn this.#cache.remember('popup', () => {\n\t\t\tthis.emit('init');\n\n\t\t\treturn new PopupComponentsMaker({\n\t\t\t\ttarget: this.getOptions().target,\n\t\t\t\twidth: 374,\n\t\t\t\tcontent: this.#getContent(),\n\t\t\t\tpopupLoader: this.getOptions().loader,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getContent(): Array<ConfigOptions>\n\t{\n\t\treturn this.#cache.remember('content', () => {\n\t\t\tconst content = [];\n\n\t\t\tif (this.getOptions().content.license.isAvailable)\n\t\t\t{\n\t\t\t\tcontent.push(this.#getLicenseContent().getConfig());\n\t\t\t}\n\n\t\t\tif (this.getOptions().content.baas.isAvailable && this.getOptions().content.market.isAvailable)\n\t\t\t{\n\t\t\t\tcontent.push({\n\t\t\t\t\thtml: [\n\t\t\t\t\t\tthis.#getMarketContent(true).getConfig(),\n\t\t\t\t\t\tthis.#getBaasContent(true).getConfig(),\n\t\t\t\t\t],\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (this.getOptions().content.market.isAvailable)\n\t\t\t{\n\t\t\t\tcontent.push(this.#getMarketContent(false).getConfig());\n\t\t\t}\n\t\t\telse if (this.getOptions().content.baas.isAvailable)\n\t\t\t{\n\t\t\t\tcontent.push(this.#getBaasContent(false).getConfig());\n\t\t\t}\n\n\t\t\tcontent.push(this.#getPurchaseHistoryContent().getConfig());\n\n\t\t\tif (this.getOptions().content.telephony.isAvailable)\n\t\t\t{\n\t\t\t\tcontent.push({\n\t\t\t\t\thtml: [\n\t\t\t\t\t\tthis.#getTelephonyContent().getConfig(),\n\t\t\t\t\t\tthis.#getUpdatesContent().getConfig(),\n\t\t\t\t\t],\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcontent.push(this.#getUpdatesContent().getConfig());\n\t\t\t}\n\n\t\t\tif (this.getOptions().content.partner.isAvailable)\n\t\t\t{\n\t\t\t\tcontent.push(this.#getPartnerContent().getConfig());\n\t\t\t}\n\n\t\t\treturn content;\n\t\t});\n\t}\n\n\t#getLicenseContent(): LicenseContent\n\t{\n\t\treturn this.#cache.remember('license-content', () => {\n\t\t\treturn new LicenseContent({\n\t\t\t\t...this.getOptions().content.license,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getMarketContent(small: boolean): MarketContent\n\t{\n\t\treturn this.#cache.remember('market-content', () => {\n\t\t\treturn new MarketContent({\n\t\t\t\t...this.getOptions().content.market,\n\t\t\t\tisSmall: small,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getBaasContent(small: boolean): BaasContent\n\t{\n\t\treturn this.#cache.remember('baas-content', () => {\n\t\t\treturn new BaasContent({\n\t\t\t\tlicensePopupTarget: this.getOptions().target,\n\t\t\t\tlicensePopup: this,\n\t\t\t\tisAdmin: this.getOptions().isAdmin,\n\t\t\t\tisSmall: small,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getPurchaseHistoryContent(): PurchaseHistoryContent\n\t{\n\t\treturn this.#cache.remember('purchase-history-content', () => {\n\t\t\treturn new PurchaseHistoryContent({\n\t\t\t\t...this.getOptions().content['purchase-history'],\n\t\t\t});\n\t\t});\n\t}\n\n\t#getTelephonyContent(): TelephonyContent\n\t{\n\t\treturn this.#cache.remember('telephony-content', () => {\n\t\t\treturn new TelephonyContent({\n\t\t\t\t...this.getOptions().content.telephony,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getUpdatesContent(): UpdatesContent\n\t{\n\t\treturn this.#cache.remember('updates-content', () => {\n\t\t\treturn new UpdatesContent({\n\t\t\t\t...this.getOptions().content.updates,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getPartnerContent(): PartnerContent\n\t{\n\t\treturn this.#cache.remember('partner-content', () => {\n\t\t\treturn new PartnerContent({\n\t\t\t\t...this.getOptions().content.partner,\n\t\t\t});\n\t\t});\n\t}\n\n\tsetEventHandlers(): void\n\t{\n\t\tconst close = () => {\n\t\t\tthis.close();\n\t\t};\n\n\t\tthis.subscribe('init', () => {\n\t\t\tEventEmitter.subscribe(EventEmitter.GLOBAL_TARGET, 'SidePanel.Slider:onOpenStart', close);\n\t\t\tEventEmitter.subscribe(EventEmitter.GLOBAL_TARGET, 'BX.Intranet.LicenseWidget.Popup:openChild', close);\n\t\t});\n\t}\n}","import { Cache } from 'main.core';\nimport { Popup } from './popup';\nimport type { GeneralOptions } from './types/options';\nimport './style.css';\n\nexport class LicenseWidget\n{\n\t#cache = new Cache.MemoryCache();\n\tstatic #instance: LicenseWidget;\n\n\tstatic getInstance(): LicenseWidget\n\t{\n\t\tif (!this.#instance)\n\t\t{\n\t\t\tthis.#instance = new this();\n\t\t}\n\n\t\treturn this.#instance;\n\t}\n\n\tshow(): void\n\t{\n\t\tif (this.#getPopup().getBasePopup().isShown())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#getPopup().show();\n\t}\n\n\tsetOptions(options: GeneralOptions): LicenseWidget\n\t{\n\t\tthis.#cache.set('options', options);\n\n\t\treturn this;\n\t}\n\n\tgetOptions(): GeneralOptions\n\t{\n\t\treturn this.#cache.get('options', {});\n\t}\n\n\t#getPopup(): Popup\n\t{\n\t\treturn this.#cache.remember('popup', () => {\n\t\t\treturn new Popup({\n\t\t\t\ttarget: this.getOptions().buttonWrapper,\n\t\t\t\tloader: this.getOptions().loader,\n\t\t\t\tcontent: {\n\t\t\t\t\t...this.getOptions().data,\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n}\n"],"names":["Content","EventEmitter","constructor","options","super","this","cache","Cache","MemoryCache","setOptions","setEventNamespace","set","getOptions","get","getLayout","Error","getConfig","html","minHeight","MarketContent","isSmall","remember","Tag","render","getLayoutId","getMainClass","getIcon","getTitle","getDescription","getButton","title","isPaid","isDemo","getReminderMessage","getDescriptionLink","isExpired","isAlmostExpired","messages","remainder","FeaturePromotersRegistry","getPromoter","code","description","landingCode","show","text","emit","GLOBAL_TARGET","button","link","baasWidgetMarker","Symbol","BaasContent","[object Object]","Object","value","isActive","node","babelHelpers","bind","BX","PULL","Extension","getSettings","pull","extendWatch","channelName","subscribe","event","command","params","getData","purchaseCount","querySelector","innerText","Runtime","loadExtension","then","exports","widget","Widget","getInstance","licensePopup","licensePopupTarget","Analytics","CONTEXT_LICENSE_WIDGET","LicenseContent","getMainIcon","name","getExpiredMessage","getRemainderMessage","isAlmostBlocked","getBlockMessage","getLink","isAvailable","icon","Dom","addClass","type","onclick","document","submit","hashKey","expired","block","more","PartnerContent","window","open","PurchaseHistoryContent","TelephonyContent","sizeLoader","location","href","UpdatesContent","Popup","writable","setEventHandlers","getBasePopup","close","PopupComponentsMaker","target","width","content","popupLoader","loader","license","push","baas","market","telephony","partner","small","isAdmin","updates","LicenseWidget","isShown","buttonWrapper","data"],"mappings":"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"}