{"version":3,"file":"script.js","sources":["src/department-control.js","src/phone.js","src/input-row-factory.js","src/message-bar.js","src/submit-button.js","src/page/page.js","src/navigation.js","src/analytics.js","src/transport.js","src/page/local-email-page/email-invitation-input.js","src/page/local-email-page/invite-email-popup.js","src/page/local-email-page/invite-email-handler.js","src/page/local-email-page.js","src/selector.js","src/page/email-page.js","src/page/extranet-page.js","src/page/group-page.js","src/page/integrator-page.js","src/self-register.js","src/page/link-page.js","src/mass-invitation-field.js","src/page/mass-page.js","src/page/register-page.js","src/page/success-page.js","src/page-factory.js","src/page-provider.js","src/active-directory.js","src/form.js"],"sourcesContent":["import { Dom, Loc, Tag, Type } from 'main.core';\nimport { TagSelector, type TagSelectorOptions } from 'ui.entity-selector';\n\nexport default class DepartmentControl\n{\n\t#tagSelector: TagSelector;\n\t#rootDepartment: Object;\n\n\tconstructor(options)\n\t{\n\t\tthis.#rootDepartment = Type.isNil(options?.rootDepartment) ? null : options?.rootDepartment\n\n\t\tlet items: TagSelectorOptions['items'] = [];\n\t\tif (!Type.isNil(options?.rootDepartment))\n\t\t{\n\t\t\titems = options.departmentList.map((department) => {\n\t\t\t\tconst isRootDepartment = parseInt(department.id, 10) === parseInt(this.#rootDepartment.id, 10);\n\t\t\t\t// styles has reference in \\Bitrix\\HumanResources\\Integration\\UI\\DepartmentProvider\n\t\t\t\tconst avatar = isRootDepartment\n\t\t\t\t\t? '/bitrix/js/humanresources/entity-selector/src/images/company.svg'\n\t\t\t\t\t: '/bitrix/js/humanresources/entity-selector/src/images/department.svg';\n\n\t\t\t\treturn {\n\t\t\t\t\tid: parseInt(department.id, 10),\n\t\t\t\t\tentityId: 'structure-node',\n\t\t\t\t\ttitle: department.name,\n\t\t\t\t\tcustomData: {\n\t\t\t\t\t\taccessCode: department.accessCode,\n\t\t\t\t\t},\n\t\t\t\t\tavatar,\n\t\t\t\t\ttagOptions: {\n\t\t\t\t\t\tavatar,\n\t\t\t\t\t\tbgColor: isRootDepartment ? '#f1fbd0' : '#ade7e4',\n\t\t\t\t\t\ttextColor: isRootDepartment ? '#7fa800' : '#207976',\n\t\t\t\t\t\tfontWeight: '700',\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\n\t\tthis.#tagSelector = new TagSelector({\n\t\t\titems,\n\t\t\tevents: {\n\t\t\t\tonBeforeTagRemove: (event: BaseEvent) => {\n\t\t\t\t\tconst selector = event.getTarget();\n\t\t\t\t\tconst { tag } = event.getData();\n\t\t\t\t\tif (selector.getTags().length === 1 && this.#isRootItem(tag))\n\t\t\t\t\t{\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\tdialogOptions: {\n\t\t\t\tcontext: 'INVITATION_STRUCTURE',\n\t\t\t\twidth: 350,\n\t\t\t\tenableSearch: true,\n\t\t\t\tmultiple: true,\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'structure-node',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tselectMode: 'departmentsOnly',\n\t\t\t\t\t\t\trestricted: 'inviteUser',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onBeforeDeselect': (event: BaseEvent) => {\n\t\t\t\t\t\tconst dialog: Dialog = event.getTarget();\n\t\t\t\t\t\tconst selectedItems: Item[] = dialog.getSelectedItems();\n\t\t\t\t\t\tif (selectedItems.length === 1 && this.#isRootItem(selectedItems[0]))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t'Item:onDeselect': (event: BaseEvent) => {\n\t\t\t\t\t\tconst dialog: Dialog = event.getTarget();\n\t\t\t\t\t\tconst selectedItems: Item[] = dialog.getSelectedItems();\n\t\t\t\t\t\tif (selectedItems.length <= 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst item = dialog.getItem(['structure-node', options?.rootDepartment.id]);\n\t\t\t\t\t\t\titem?.select();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n\n\t#isRootItem(item: Object): boolean\n\t{\n\t\tconst itemId = Type.isNil(item?.id) ? null : parseInt(item?.id, 10);\n\t\tconst rootId = Type.isNil(this.#rootDepartment?.id) ? null : parseInt(this.#rootDepartment?.id, 10);\n\n\t\treturn !Type.isNil(itemId) && !Type.isNil(rootId) && itemId === rootId;\n\t}\n\n\trenderTo(container: HTMLElement): void\n\t{\n\t\tDom.append(this.render(), container);\n\t}\n\n\tgetValues(): Array\n\t{\n\t\tconst tagSelectorItems = this.#tagSelector.getDialog().getSelectedItems();\n\t\tconst collection = [];\n\t\ttagSelectorItems.forEach((item) => {\n\t\t\tconst departmentId = parseInt(item.id, 10);\n\t\t\tif (departmentId > 0)\n\t\t\t{\n\t\t\t\tcollection.push(departmentId);\n\t\t\t}\n\t\t});\n\n\t\treturn collection;\n\t}\n\n\trender(): HTMLElament\n\t{\n\t\tconst title = Tag.render`<label class=\"intranet-invitation__dialog-title\">${Loc.getMessage('INTRANET_INVITE_DIALOG_DEPARTMENT_CONTROL_LABEL')}</label>`;\n\t\tconst description = Tag.render`<div class=\"intranet-invitation__dialog-description\">${Loc.getMessage('INTRANET_INVITE_DIALOG_DEPARTMENT_CONTROL_DESCRIPTION')}</div>`;\n\t\tconst fieldContainer = Tag.render`<div></div>`;\n\t\tthis.#tagSelector.renderTo(fieldContainer);\n\n\t\treturn Tag.render`<div>${title}${description}${fieldContainer}</div>`;\n\t}\n}\n","import { Dom, Type, Tag, Event } from 'main.core';\n\nexport class Phone\n{\n\tconstructor()\n\t{\n\t\tthis.count = 0;\n\t\tthis.index = 0;\n\t\tthis.maxCount = 5;\n\t\tthis.inputStack = [];\n\t}\n\n\trenderPhoneRow(inputNode)\n\t{\n\t\tif (this.count >= this.maxCount)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Type.isDomNode(inputNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst num = inputNode.getAttribute('data-num');\n\n\t\tif (inputNode.parentNode.querySelector(`#phone_number_${num}`))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst element = Tag.render`\n\t\t\t<span style=\"z-index: 3;\" class=\"ui-ctl-before\" data-role=\"phone-block\">\n\t\t\t\t<input type=\"hidden\" name=\"PHONE_COUNTRY[]\" id=\"phone_country_${num}\" value=\"\">\n\t\t\t\t<input type=\"hidden\" name=\"PHONE[]\" id=\"phone_number_${num}\" value=\"\">\n\t\t\t\t<div class=\"invite-dialog-phone-flag-block\" data-role=\"flag\">\n\t\t\t\t\t<span data-role=\"phone_flag_${num}\" style=\"pointer-events: none;\"></span>\n\t\t\t\t</div>\n\t\t\t\t<input class=\"invite-dialog-phone-input\" type=\"hidden\" id=\"phone_input_${num}\" value=\"\">&nbsp;\n\t\t\t</span>\n\t\t`;\n\n\t\tinputNode.style.paddingLeft = '57px';\n\t\tDom.append(element, inputNode.parentNode);\n\n\t\tconst flagNode = inputNode.parentNode.querySelector(\"[data-role='flag']\");\n\t\tif (Type.isDomNode(flagNode))\n\t\t{\n\t\t\tEvent.bind(inputNode.parentNode.querySelector(\"[data-role='flag']\"), 'click', () => {\n\t\t\t\tthis.showCountrySelector(num);\n\t\t\t});\n\t\t}\n\n\t\tconst changeCallback = function(i, inputNode)\n\t\t{\n\t\t\treturn function(e)\n\t\t\t{\n\t\t\t\tif (Type.isDomNode(inputNode.parentNode))\n\t\t\t\t{\n\t\t\t\t\tinputNode.parentNode.querySelector(`#phone_number_${i}`).value = e.value;\n\t\t\t\t\tinputNode.parentNode.querySelector(`#phone_country_${i}`).value = e.country;\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\n\t\tthis.inputStack[num] = new BX.PhoneNumber.Input({\n\t\t\tnode: inputNode,\n\t\t\tflagNode: inputNode.parentNode.querySelector(`[data-role='phone_flag_${num}']`),\n\t\t\tflagSize: 16,\n\t\t\tonChange: changeCallback(num, inputNode),\n\t\t});\n\n\t\t// for ctrl+v paste\n\t\tconst id = setInterval(() => {\n\t\t\tif (\n\t\t\t\t!inputNode.parentNode?.querySelector(`#phone_number_${num}`).value\n\t\t\t\t|| !inputNode.parentNode?.querySelector(`#phone_country_${num}`).value\n\t\t\t)\n\t\t\t{\n\t\t\t\tchangeCallback(num, inputNode)({\n\t\t\t\t\tvalue: this.inputStack[num].getValue(),\n\t\t\t\t\tcountry: this.inputStack[num].formatter ? this.inputStack[num].getCountry() : null,\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tclearInterval(id);\n\t\t\t}\n\t\t}, 1000);\n\t}\n\n\tshowCountrySelector(i)\n\t{\n\t\tthis.inputStack[i]._onFlagClick();\n\t}\n}\n","import { Event, Validation, Type, Dom, Tag, Loc } from 'main.core';\nimport { Phone } from './phone';\n\nexport const InputRowType = Object.freeze({\n\tPHONE: 'phone',\n\tEMAIL: 'email',\n\tALL: 'all',\n});\n\nexport type InputRowFactoryType = {\n\tinputRowType?: InputRowType,\n}\n\nexport class InputRowFactory\n{\n\t#inputRowType: InputRowType;\n\t#isPhoneEnabled: boolean;\n\t#isEmailEnabled: boolean;\n\n\tconstructor(params)\n\t{\n\t\tthis.inputNum = 0;\n\t\tthis.#inputRowType = params.inputRowType ?? InputRowType.ALL;\n\n\t\tthis.#isPhoneEnabled = [InputRowType.ALL, InputRowType.PHONE].includes(this.#inputRowType);\n\t\tthis.#isEmailEnabled = [InputRowType.ALL, InputRowType.EMAIL].includes(this.#inputRowType);\n\n\t\tif (this.#isPhoneEnabled)\n\t\t{\n\t\t\tthis.phoneObj = new Phone();\n\t\t}\n\t}\n\n\t#checkPhoneInput(element)\n\t{\n\t\tconst phoneExp = /^[\\d+][\\d ()-]{2,14}\\d$/;\n\n\t\tif (element.value && phoneExp.test(String(element.value).toLowerCase()))\n\t\t{\n\t\t\tthis.phoneObj.renderPhoneRow(element);\n\t\t}\n\t\telse if (element.value.length === 0)\n\t\t{\n\t\t\tthis.#renderDefaultRow(element)?.focus();\n\t\t}\n\t}\n\n\t#bindPhoneChecker(element)\n\t{\n\t\tif (this.#isPhoneEnabled && Type.isDomNode(element))\n\t\t{\n\t\t\tconst inputNodes = Array.prototype.slice.call(element.querySelectorAll('.js-email-phone-input'));\n\t\t\tif (inputNodes)\n\t\t\t{\n\t\t\t\tinputNodes.forEach((element) => {\n\t\t\t\t\tEvent.bind(element, 'input', () => {\n\t\t\t\t\t\tthis.#checkPhoneInput(element);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\t#renderDefaultRow(node)\n\t{\n\t\tconst phoneFlagBlock = node.parentNode.querySelector('[data-role=\"phone-block\"]');\n\n\t\tif (Type.isDomNode(phoneFlagBlock))\n\t\t{\n\t\t\tDom.remove(phoneFlagBlock);\n\t\t}\n\n\t\tconst phoneBlock = node.parentNode.querySelector('input.ui-ctl-element');\n\n\t\tif (Type.isDomNode(phoneBlock))\n\t\t{\n\t\t\tconst newInput = Tag.render`\n\t\t\t\t<input\n\t\t\t\t\tname=\"${phoneBlock.name}\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tmaxlength=\"50\"\n\t\t\t\t\tdata-num=\"${node.getAttribute('data-num')}\"\n\t\t\t\t\tclass=\"ui-ctl-element js-email-phone-input\"\n\t\t\t\t\tplaceholder=\"${phoneBlock.placeholder}\"\n\t\t\t\t/>\n\t\t\t`;\n\n\t\t\tDom.replace(phoneBlock, newInput);\n\t\t\tthis.bindCloseIcons(newInput.parentNode);\n\t\t\tthis.#bindPhoneChecker(newInput.parentNode);\n\t\t\tDom.remove(phoneBlock);\n\n\t\t\treturn newInput;\n\t\t}\n\n\t\treturn phoneBlock;\n\t}\n\n\tbindCloseIcons(container)\n\t{\n\t\tconst inputNodes = Array.prototype.slice.call(container.querySelectorAll('input'));\n\n\t\t(inputNodes || []).forEach((node) => {\n\t\t\tconst closeIcon = node.nextElementSibling;\n\n\t\t\tEvent.bind(node, 'input', () => {\n\t\t\t\tDom.style(closeIcon, 'display', node.value === '' ? 'none' : 'block');\n\t\t\t});\n\n\t\t\tEvent.bind(closeIcon, 'click', (event) => {\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tif (Type.isDomNode(node.parentNode))\n\t\t\t\t{\n\t\t\t\t\tthis.#renderDefaultRow(node);\n\t\t\t\t}\n\n\t\t\t\tDom.style(closeIcon, 'display', 'none');\n\t\t\t});\n\t\t});\n\t}\n\n\trenderInputRowTo(target: HTMLElement, showTitles = false)\n\t{\n\t\tconst element = this.renderEmailInputsRow(showTitles);\n\n\t\tDom.append(element, target);\n\t}\n\n\trenderInputRowsTo(target: HTMLElement, count = 3)\n\t{\n\t\tfor (let i = 0; i < count; i++)\n\t\t{\n\t\t\tthis.renderInputRowTo(target, i === 0);\n\t\t}\n\t}\n\n\trenderEmailInputsRow(showTitles: boolean): HTMLElement\n\t{\n\t\tlet fieldTitle = '';\n\t\tlet nameTitle = '';\n\t\tlet lastNameTitle = '';\n\n\t\tif (showTitles)\n\t\t{\n\t\t\tfieldTitle = `\n\t\t\t\t<div class=\"invite-content__field-lable\">\n\t\t\t\t\t${this.#getDialogInputMessage()}\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tnameTitle = `\n\t\t\t\t<div class=\"invite-content__field-lable\">\n\t\t\t\t\t${Loc.getMessage('BX24_INVITE_DIALOG_ADD_NAME_TITLE')}\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tlastNameTitle = `\n\t\t\t\t<div class=\"invite-content__field-lable\">\n\t\t\t\t\t${Loc.getMessage('BX24_INVITE_DIALOG_ADD_LAST_NAME_TITLE')}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\tconst element = Tag.render`\n\t\t\t<div class=\"invite-form-row js-form-row\">\n\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t${showTitles ? fieldTitle : ''}\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t<input \n\t\t\t\t\t\t\tname=\"EMAIL[]\" \n\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\tmaxlength=\"50\"\n\t\t\t\t\t\t\tdata-num=\"${this.inputNum++}\" \n\t\t\t\t\t\t\tclass=\"ui-ctl-element js-email-phone-input\" \n\t\t\t\t\t\t\tplaceholder=\"${this.#getDialogInputMessage()}\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<button type=\"button\" class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t${showTitles ? nameTitle : ''}\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t<input name=\"NAME[]\" type=\"text\" class=\"ui-ctl-element js-email-name-input\" placeholder=\"${Loc.getMessage('BX24_INVITE_DIALOG_ADD_NAME_TITLE')}\">\n\t\t\t\t\t\t<button type=\"button\" class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t${showTitles ? lastNameTitle : ''}\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t<input name=\"LAST_NAME[]\" type=\"text\" class=\"ui-ctl-element js-email-last-name-input\" placeholder=\"${Loc.getMessage('BX24_INVITE_DIALOG_ADD_LAST_NAME_TITLE')}\">\n\t\t\t\t\t\t<button type=\"button\" class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\tthis.bindCloseIcons(element);\n\t\tthis.#bindPhoneChecker(element);\n\n\t\treturn element;\n\t}\n\n\t#getDialogInputMessage(): string\n\t{\n\t\tif (this.#isPhoneEnabled && this.#isEmailEnabled)\n\t\t{\n\t\t\treturn Loc.getMessage('INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_INPUT');\n\t\t}\n\t\telse if (this.#isPhoneEnabled)\n\t\t{\n\t\t\treturn Loc.getMessage('INTRANET_INVITE_DIALOG_PHONE_INPUT');\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn Loc.getMessage('INTRANET_INVITE_DIALOG_EMAIL_INPUT');\n\t\t}\n\t}\n\n\tparseEmailAndPhone(form: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(form))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst errorInputData = [];\n\t\tconst items = [];\n\t\tconst phoneExp = /^[\\d+][\\d ()-]{4,22}\\d$/;\n\t\tconst rows = Array.prototype.slice.call(form.querySelectorAll('.js-form-row'));\n\n\t\t(rows || []).forEach((row) => {\n\t\t\tconst emailInput = row.querySelector(\"input[name='EMAIL[]']\");\n\t\t\tconst phoneInput = row.querySelector(\"input[name='PHONE[]']\");\n\t\t\tconst nameInput = row.querySelector(\"input[name='NAME[]']\");\n\t\t\tconst lastNameInput = row.querySelector(\"input[name='LAST_NAME[]']\");\n\t\t\tconst emailValue = emailInput.value.trim();\n\n\t\t\tif (this.#isPhoneEnabled && Type.isDomNode(phoneInput))\n\t\t\t{\n\t\t\t\tconst phoneValue = phoneInput.value.trim();\n\t\t\t\tif (phoneValue)\n\t\t\t\t{\n\t\t\t\t\tif (phoneExp.test(String(phoneValue).toLowerCase()))\n\t\t\t\t\t{\n\t\t\t\t\t\tconst phoneCountryInput = row.querySelector(\"input[name='PHONE_COUNTRY[]']\");\n\t\t\t\t\t\titems.push({\n\t\t\t\t\t\t\tPHONE: phoneValue,\n\t\t\t\t\t\t\tPHONE_COUNTRY: phoneCountryInput.value.trim(),\n\t\t\t\t\t\t\tNAME: nameInput.value,\n\t\t\t\t\t\t\tLAST_NAME: lastNameInput.value,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\terrorInputData.push(phoneValue);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (this.#isEmailEnabled && emailValue)\n\t\t\t{\n\t\t\t\tif (Validation.isEmail(emailValue))\n\t\t\t\t{\n\t\t\t\t\titems.push({\n\t\t\t\t\t\tEMAIL: emailValue,\n\t\t\t\t\t\tNAME: nameInput.value,\n\t\t\t\t\t\tLAST_NAME: lastNameInput.value,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\terrorInputData.push(emailValue);\n\t\t\t\t}\n\t\t\t} else if (this.#isPhoneEnabled && !this.#isEmailEnabled && emailValue)\n\t\t\t{\n\t\t\t\terrorInputData.push(emailValue);\n\t\t\t}\n\t\t});\n\n\t\treturn [items, errorInputData];\n\t}\n}\n","import { Type, Dom, Tag } from 'main.core';\n\nexport class MessageBar\n{\n\t#errorContainer: HTMLElement;\n\t#successContainer: HTMLElement;\n\n\tconstructor(options)\n\t{\n\t\tthis.#errorContainer = Type.isDomNode(options.errorContainer) ? options.errorContainer : null;\n\t\tthis.#successContainer = Type.isDomNode(options.successContainer) ? options.successContainer : null;\n\n\t\tthis.hideAll();\n\t}\n\n\tshowError(message: string)\n\t{\n\t\tif (!this.#errorContainer || !Type.isStringFilled(message))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.clean(this.#errorContainer);\n\t\tDom.style(this.#errorContainer, 'display', 'block');\n\t\tDom.append(this.#wrapMessage(message), this.#errorContainer);\n\t}\n\n\t#wrapMessage(text: string): HTMLElement\n\t{\n\t\treturn Tag.render`<span class=\"ui-alert-message\">${BX.util.htmlspecialchars(text)}</span>`;\n\t}\n\n\tshowSuccess(message: string)\n\t{\n\t\tif (!this.#successContainer || !Type.isStringFilled(message))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.clean(this.#successContainer);\n\t\tDom.style(this.#successContainer, 'display', 'block');\n\t\tDom.append(this.#wrapMessage(message), this.#successContainer);\n\t}\n\n\thideAll()\n\t{\n\t\tif (this.#errorContainer)\n\t\t{\n\t\t\tDom.style(this.#errorContainer, 'display', 'none');\n\t\t\tDom.clean(this.#errorContainer);\n\t\t}\n\n\t\tif (this.#successContainer)\n\t\t{\n\t\t\tDom.style(this.#successContainer, 'display', 'none');\n\t\t\tDom.clean(this.#successContainer);\n\t\t}\n\t}\n}","import { Type, Dom, Event } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\nexport class SubmitButton extends EventEmitter\n{\n\tstatic ENABLED_STATE = 'enabled';\n\tstatic DISABLED_STATE = 'disabled';\n\n\t#container: HTMLElement;\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\n\t\tthis.#container = options.node;\n\t\tthis.setEventNamespace('BX.Intranet.Invitation.Submit');\n\t\tEvent.unbindAll(this.#container);\n\t\tif (Type.isFunction(options.events?.click))\n\t\t{\n\t\t\tEvent.bind(this.#container, 'click', options.events.click);\n\t\t}\n\t}\n\n\t#disableSubmitButton(isDisable)\n\t{\n\t\tif (!Type.isDomNode(this.#container) || !Type.isBoolean(isDisable))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (isDisable)\n\t\t{\n\t\t\tDom.addClass(this.#container, ['ui-btn-wait', 'invite-cursor-auto']);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.#container, ['ui-btn-wait', 'invite-cursor-auto']);\n\t\t}\n\t}\n\n\twait(): void\n\t{\n\t\tthis.#disableSubmitButton(true);\n\t}\n\n\tisWaiting(): boolean\n\t{\n\t\treturn Dom.hasClass(this.#container, 'ui-btn-wait');\n\t}\n\n\tready(): void\n\t{\n\t\tthis.#disableSubmitButton(false);\n\t}\n\n\tdisable(): void\n\t{\n\t\tDom.addClass(this.#container, 'ui-btn-disabled');\n\t}\n\n\tenable(): void\n\t{\n\t\tDom.removeClass(this.#container, 'ui-btn-disabled');\n\t}\n\n\tisEnabled(): boolean\n\t{\n\t\treturn !Dom.hasClass(this.#container, 'ui-btn-disabled');\n\t}\n\n\tsetLabel(lable: string): void\n\t{\n\t\tthis.#container.innerText = lable;\n\t}\n\n\tsendSuccessEvent(users)\n\t{\n\t\tBX.SidePanel.Instance.postMessageAll(window, 'BX.Intranet.Invitation:onAdd', { users });\n\t}\n}\n","import { EventEmitter, BaseEvent } from 'main.core.events';\nimport { SubmitButton } from '../submit-button';\n\nexport class Page\n{\n\tconstructor()\n\t{\n\t\tEventEmitter.subscribe(this, 'BX.Intranet.Invitation:submit', this.onSubmit.bind(this));\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\treturn new HTMLElement();\n\t}\n\n\tonSubmit(event: BaseEvent)\n\t{}\n\n\tgetSubmitButtonText(): ?string\n\t{\n\t\treturn null;\n\t}\n\n\tgetButtonState(): ?string\n\t{\n\t\treturn SubmitButton.ENABLED_STATE;\n\t}\n}\n","import { Type, Dom } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Page } from './page/page';\n\nexport class Navigation extends EventEmitter\n{\n\t#pages: Map;\n\t#container: ?HTMLElement;\n\t#first: ?string;\n\t#current: ?string;\n\t#history: [string] = [];\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Intranet.Navigation');\n\t\tthis.#container = Type.isDomNode(options.container) ? options.container : null;\n\t\tif (Type.isMap(options.pages))\n\t\t{\n\t\t\tthis.#pages = new Map(\n\t\t\t\t[...options.pages].filter(([k, page]) => page instanceof Page),\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#pages = new Map();\n\t\t}\n\n\t\tthis.#first = Type.isStringFilled(options.first) && this.has(options.first)\n\t\t\t? options.first\n\t\t\t: this.#pages.next().value\n\t\t;\n\t}\n\n\tshow(code: string): void\n\t{\n\t\tif (!this.#container || !this.has(code))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst page = this.get(code);\n\t\tthis.emit('onBeforeChangePage', {\n\t\t\tcurrent: this.current(),\n\t\t\tnew: page,\n\t\t});\n\t\tDom.clean(this.#container);\n\t\tDom.append(page.render(), this.#container);\n\t\tif (this.#current)\n\t\t{\n\t\t\tthis.#history.push(this.#current);\n\t\t}\n\t\tthis.#current = code;\n\t\tthis.emit('onAfterChangePage', {\n\t\t\tcurrent: this.current(),\n\t\t\tprevious: this.prev(),\n\t\t});\n\t}\n\n\tshowFirst(): void\n\t{\n\t\tthis.show(this.#first);\n\t}\n\n\tget(code: string): ?Page\n\t{\n\t\treturn this.#pages.get(code);\n\t}\n\n\thas(code: string): boolean\n\t{\n\t\treturn this.#pages.has(code);\n\t}\n\n\tcurrent(): ?Page\n\t{\n\t\treturn this.get(this.#current);\n\t}\n\n\tgetCurrentCode(): ?string\n\t{\n\t\treturn this.#current;\n\t}\n\n\tprev(): ?Page\n\t{\n\t\tif (this.#history.length > 0)\n\t\t{\n\t\t\tconst code = this.#history[this.#history.length - 1];\n\n\t\t\treturn this.get(code);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tadd(code: string, page: Page): void\n\t{\n\t\tif (page instanceof Page)\n\t\t{\n\t\t\tthis.#pages.set(code, page);\n\t\t}\n\t}\n\n\tdelete(code: string): void\n\t{\n\t\tthis.#pages.delete(code);\n\t}\n}\n","import { Event, Type } from 'main.core';\nimport { sendData } from 'ui.analytics';\n\nexport class Analytics\n{\n\tstatic TOOLS = 'Invitation';\n\tstatic TOOLS_HEADER = 'headerPopup';\n\tstatic EVENT_OPEN_SLIDER_INVITATION = 'drawer_open';\n\tstatic CATEGORY_INVITATION = 'invitation';\n\tstatic EVENT_COPY = 'copy_invitation_link';\n\tstatic ADMIN_ALLOW_MODE_Y = 'askAdminToAllow_Y';\n\tstatic ADMIN_ALLOW_MODE_N = 'askAdminToAllow_N';\n\tstatic IS_ADMIN_Y = 'isAdmin_Y';\n\tstatic IS_ADMIN_N = 'isAdmin_N';\n\n\tstatic EVENT_TAB_VIEW = 'tab_view';\n\tstatic EVENT_LOCAL_MAIL = 'invitation_local_mail';\n\tstatic TAB_EMAIL = 'tab_by_email';\n\tstatic TAB_MASS = 'tab_mass';\n\tstatic TAB_DEPARTMENT = 'tab_department';\n\tstatic TAB_INTEGRATOR = 'tab_integrator';\n\tstatic TAB_LINK = 'by_link';\n\tstatic TAB_REGISTRATION = 'registration';\n\tstatic TAB_EXTRANET = 'extranet';\n\tstatic TAB_AD = 'AD';\n\tstatic TAB_LOCAL_EMAIL = 'tab_by_local_email';\n\tstatic TAB_PHONE = 'tab_by_phone';\n\n\t#cSection: Object;\n\t#isAdmin: boolean;\n\n\tconstructor(cSection: Object, isAdmin: boolean)\n\t{\n\t\tthis.#cSection = cSection;\n\t\tthis.#isAdmin = isAdmin;\n\t}\n\n\t#getAdminAllowMode(): string\n\t{\n\t\treturn document.querySelector('#allow_register_confirm').checked\n\t\t\t? Analytics.ADMIN_ALLOW_MODE_Y\n\t\t\t: Analytics.ADMIN_ALLOW_MODE_N;\n\t}\n\n\t#getIsAdmin(): string\n\t{\n\t\treturn this.#isAdmin ? Analytics.IS_ADMIN_Y : Analytics.IS_ADMIN_N;\n\t}\n\n\t#getCSection(): string\n\t{\n\t\treturn this.#cSection.source;\n\t}\n\n\tsend(): void\n\t{\n\t\tsendData({\n\t\t\ttool: Analytics.TOOLS,\n\t\t\tcategory: Analytics.CATEGORY_INVITATION,\n\t\t\tevent: Analytics.EVENT_COPY,\n\t\t\tc_section: this.#getCSection(),\n\t\t\tp1: this.#getIsAdmin(),\n\t\t\tp2: this.#getAdminAllowMode(),\n\t\t});\n\t}\n\n\tsendTabData(section, subSection): void\n\t{\n\t\tif (!section)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tsendData({\n\t\t\ttool: Analytics.TOOLS,\n\t\t\tcategory: Analytics.CATEGORY_INVITATION,\n\t\t\tevent: Analytics.EVENT_TAB_VIEW,\n\t\t\tc_section: section,\n\t\t\tc_sub_section: subSection,\n\t\t});\n\t}\n\n\tsendOpenSliderData(section): void\n\t{\n\t\tsendData({\n\t\t\ttool: Analytics.TOOLS,\n\t\t\tcategory: Analytics.CATEGORY_INVITATION,\n\t\t\tevent: Analytics.EVENT_OPEN_SLIDER_INVITATION,\n\t\t\tc_section: section,\n\t\t});\n\t}\n\n\tsendOpenLocalEmailPopup(): void\n\t{\n\t\tsendData({\n\t\t\ttool: Analytics.TOOLS,\n\t\t\tcategory: Analytics.CATEGORY_INVITATION,\n\t\t\tevent: Analytics.EVENT_TAB_VIEW,\n\t\t\tc_sub_section: Analytics.TAB_EMAIL,\n\t\t});\n\t}\n\n\tsendLocalEmailProgram(): void\n\t{\n\t\tsendData({\n\t\t\ttool: Analytics.TOOLS,\n\t\t\tcategory: Analytics.CATEGORY_INVITATION,\n\t\t\tevent: Analytics.EVENT_LOCAL_MAIL,\n\t\t});\n\t}\n}\n","import { Type } from 'main.core';\n\nexport class Transport\n{\n\t#componentName: string;\n\t#signedParameters: string;\n\n\tconstructor(options)\n\t{\n\t\tthis.#componentName = options.componentName;\n\t\tthis.#signedParameters = options.signedParameters;\n\t}\n\n\tsend(request): Promise\n\t{\n\t\treturn BX.ajax.runComponentAction(this.#componentName, request.action, {\n\t\t\tsignedParameters: this.#signedParameters,\n\t\t\tmode: Type.isStringFilled(request.mode) ? request.mode : 'ajax',\n\t\t\tmethod: Type.isStringFilled(request.method) ? request.method : 'post',\n\t\t\tdata: request.data,\n\t\t\tanalyticsLabel: request.analyticsLabel,\n\t\t});\n\t}\n}","import { Loc, Tag } from 'main.core';\nimport { InvitationInput, InvitationInputType } from 'intranet.invitation-input';\nimport { EventEmitter } from 'main.core.events';\n\nexport class EmailInvitationInput\n{\n\t#input: InvitationInput = null;\n\n\tconstructor()\n\t{\n\t\tthis.#input = new InvitationInput({ inputType: InvitationInputType.EMAIL });\n\t\tthis.#input.getTagSelector().setPlaceholder(Loc.getMessage('INTRANET_INVITE_DIALOG_LOCAL_POPUP_EMAIL_PLACEHOLDER'));\n\n\t\tEvent.bind(this.#input.getTagSelector().getContainer(), 'click', () => {\n\t\t\tthis.#input.getTagSelector().focusTextBox();\n\t\t});\n\n\t\tEventEmitter.subscribe('BX.Intranet.Invitation:InviteSuccess', () => {\n\t\t\tthis.clearTags();\n\t\t});\n\t}\n\n\tonReadySaveInputHandler(callback: function): void\n\t{\n\t\tthis.#input.unsubscribe('onReadySave', callback);\n\t\tthis.#input.subscribe('onReadySave', callback);\n\t}\n\n\tonUnreadySaveInputHandler(callback: function): void\n\t{\n\t\tthis.#input.unsubscribe('onUnreadySave', callback);\n\t\tthis.#input.subscribe('onUnreadySave', callback);\n\t}\n\n\tgetContent(actionBlock: HTMLElement = null): HTMLElement\n\t{\n\t\tthis.clearTags();\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"email-popup-container\">\n\t\t\t\t<div class=\"email-popup-container__title\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_INVITE_DIALOG_LOCAL_POPUP_EMAIL_TITLE')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"email-popup-container__description\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_INVITE_DIALOG_LOCAL_POPUP_EMAIL_DESCRIPTION')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"email-popup-container__input\">\n\t\t\t\t\t${this.#input.render()}\n\t\t\t\t</div>\n\t\t\t\t${actionBlock ?? ''}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tclearTags(): void\n\t{\n\t\tthis.#input.getTagSelector().removeTags();\n\t}\n\n\tgetValues(): Object\n\t{\n\t\tconst selector = this.#input.getTagSelector();\n\t\tconst tags = selector.getTags();\n\t\tconst emails = [];\n\t\tconst errorElements = [];\n\n\t\ttags.forEach((tag) => {\n\t\t\tif (tag.getEntityType() === 'email')\n\t\t\t{\n\t\t\t\temails.push({\n\t\t\t\t\tEMAIL: tag.getTitle(),\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\terrorElements.push(tag.getTitle());\n\t\t\t}\n\t\t});\n\n\t\treturn { emails, errorElements };\n\t}\n}\n","import { Dom, Loc, Tag } from 'main.core';\nimport { Popup, PopupManager } from 'main.popup';\nimport { Button, CancelButton, ButtonState } from 'ui.buttons';\nimport { EventEmitter } from 'main.core.events';\nimport { EmailInvitationInput } from 'email-invitation-input';\n\nexport class InviteEmailPopup\n{\n\t#sendButton: Button;\n\t#popup: Popup = null;\n\t#input: EmailInvitationInput = null;\n\t#actionContent: HTMLElement = null;\n\n\tconstructor(input: EmailInvitationInput)\n\t{\n\t\tthis.#input = input;\n\n\t\tthis.#input.onReadySaveInputHandler(this.onReadySaveInputHandler.bind(this));\n\t\tthis.#input.onUnreadySaveInputHandler(this.onUnreadySaveInputHandler.bind(this));\n\n\t\tEventEmitter.subscribe('BX.Intranet.Invitation:InviteSuccess', () => {\n\t\t\tthis.#popup?.close();\n\t\t\tthis.onReadySaveInputHandler();\n\t\t\tEventEmitter.emit('BX.Intranet.Invitation:onSubmitReady');\n\t\t\tEventEmitter.emit('BX.Intranet.Invitation:onChangeForm');\n\t\t});\n\n\t\tEventEmitter.subscribe('BX.Intranet.Invitation:InviteFailed', () => {\n\t\t\tthis.onReadySaveInputHandler();\n\t\t});\n\t}\n\n\tshow(): void\n\t{\n\t\tif (!this.#popup)\n\t\t{\n\t\t\tthis.#popup = PopupManager.create({\n\t\t\t\tid: 'email-invitation-email',\n\t\t\t\tclassName: 'email-invitation-container',\n\t\t\t\tcloseIcon: true,\n\t\t\t\tautoHide: false,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\twidth: 515,\n\t\t\t\theight: 310,\n\t\t\t});\n\t\t}\n\n\t\tthis.#popup.setContent(this.#input.getContent(this.#getActionContent()));\n\t\tthis.#input.clearTags();\n\t\tthis.#popup.show();\n\t}\n\n\t#getActionContent(): HTMLElement\n\t{\n\t\tif (!this.#actionContent)\n\t\t{\n\t\t\tthis.#actionContent = Tag.render`\n\t\t\t\t<div class=\"email-popup-container__action\">\n\t\t\t\t\t${this.#getSendButton()}\n\t\t\t\t\t${this.#getCancelButton()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.#actionContent;\n\t}\n\n\t#getSendButton(): HTMLElement\n\t{\n\t\tthis.#sendButton = new Button({\n\t\t\tclassName: 'email-popup-container__action-send',\n\t\t\ttext: Loc.getMessage('INTRANET_INVITE_DIALOG_LOCAL_POPUP_EMAIL_ACTION_SEND'),\n\t\t\tstate: ButtonState.DISABLED,\n\t\t\tsize: Button.Size.SMALL,\n\t\t\tcolor: Button.Color.PRIMARY,\n\t\t\tnoCaps: true,\n\t\t\tonclick: () => {\n\t\t\t\tif (this.#sendButton.isDisabled())\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.submitData();\n\t\t\t},\n\t\t});\n\n\t\treturn this.#sendButton.render();\n\t}\n\n\t#getCancelButton(): HTMLElement\n\t{\n\t\treturn new CancelButton({\n\t\t\ttext: Loc.getMessage('INTRANET_INVITE_DIALOG_LOCAL_POPUP_EMAIL_ACTION_CANCEL'),\n\t\t\tsize: Button.Size.SMALL,\n\t\t\tonclick: () => this.#popup.close(),\n\t\t\tnoCaps: true,\n\t\t}).render();\n\t}\n\n\tonReadySaveInputHandler(): void\n\t{\n\t\tthis.#sendButton?.setState(null);\n\t}\n\n\tonUnreadySaveInputHandler(): void\n\t{\n\t\tthis.#sendButton?.setState(ButtonState.DISABLED);\n\t}\n\n\tsubmitData(): void\n\t{\n\t\tthis.onUnreadySaveInputHandler();\n\t\tEventEmitter.emit('BX.Intranet.Invitation.EmailPopup:onSubmit');\n\t}\n}\n","import { Loc, Tag, Event, Type } from 'main.core';\nimport { Analytics } from '../../analytics';\nimport DepartmentControl from '../../department-control';\nimport { Transport } from '../../transport';\nimport { LocalEmailPageType } from '../local-email-page';\nimport { EmailInvitationInput } from 'email-invitation-input';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\n\nexport class InviteEmailHandler\n{\n\t#departmentControl: DepartmentControl;\n\t#linkRegisterEnabled: boolean;\n\t#transport: Transport = null;\n\t#input: EmailInvitationInput = null;\n\t#invitationUrlByDepartments: Array = [];\n\t#analytics: Analytics = null;\n\n\tconstructor(options: LocalEmailPageType, input: EmailInvitationInput)\n\t{\n\t\tthis.#transport = options.transport;\n\t\tthis.#linkRegisterEnabled = options.linkRegisterEnabled;\n\t\tthis.#departmentControl = options.departmentControl instanceof DepartmentControl ? options.departmentControl : null;\n\t\tthis.#input = input;\n\t\tthis.#analytics = options.analytics;\n\n\t\tEventEmitter.subscribe('BX.Intranet.Invitation:selfChange', (event: BaseEvent) => {\n\t\t\tthis.#linkRegisterEnabled = event.getData().selfEnabled;\n\t\t});\n\n\t\tEventEmitter.subscribe('BX.Intranet.Invitation:InviteSuccess', () => {\n\t\t\tthis.#showNotification(true);\n\t\t});\n\n\t\tEventEmitter.subscribe('BX.Intranet.Invitation:InviteFailed', () => {\n\t\t\tthis.#showNotification(false);\n\t\t});\n\n\t\tEventEmitter.subscribe('BX.Intranet.Invitation.EmailPopup:onSubmit', this.#onSubmitWithMailService.bind(this));\n\t}\n\n\tonSubmit(): void\n\t{\n\t\tif (this.#linkRegisterEnabled)\n\t\t{\n\t\t\tthis.#onSubmitWithLocalEmailProgram();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#onSubmitWithMailService();\n\t\t}\n\t}\n\n\t#onSubmitWithLocalEmailProgram(): void\n\t{\n\t\tconst departmentsId = this.#departmentControl.getValues();\n\t\tif (this.#invitationUrlByDepartments[departmentsId.toString()])\n\t\t{\n\t\t\tthis.#openLocalMailProgram(this.#invitationUrlByDepartments[departmentsId.toString()]);\n\t\t\tEventEmitter.emit('BX.Intranet.Invitation:onSubmitReady');\n\t\t\tEventEmitter.emit('BX.Intranet.Invitation:onChangeForm');\n\n\t\t\treturn;\n\t\t}\n\n\t\t// eslint-disable-next-line promise/catch-or-return\n\t\tthis.#transport.send({\n\t\t\taction: 'getInviteLink',\n\t\t\tdata: {\n\t\t\t\tdepartmentsId,\n\t\t\t},\n\t\t}).then((response) => {\n\t\t\tEventEmitter.emit('BX.Intranet.Invitation:onSubmitReady');\n\t\t\tEventEmitter.emit('BX.Intranet.Invitation:onChangeForm');\n\n\t\t\tconst invitationUrl = response.data?.invitationLink;\n\t\t\tif (Type.isStringFilled(invitationUrl))\n\t\t\t{\n\t\t\t\tthis.#invitationUrlByDepartments[departmentsId.toString()] = invitationUrl;\n\t\t\t\tthis.#openLocalMailProgram(invitationUrl);\n\t\t\t}\n\t\t}, (response) => {\n\t\t\tEventEmitter.emit('BX.Intranet.Invitation:onSubmitReady');\n\t\t\tEventEmitter.emit('BX.Intranet.Invitation:onChangeForm');\n\t\t});\n\t}\n\n\t#openLocalMailProgram(invitationUrl: string): void\n\t{\n\t\tthis.#analytics.sendLocalEmailProgram();\n\t\tconst subject = `subject=${encodeURIComponent(Loc.getMessage('INTRANET_INVITE_DIALOG_LOCAL_POPUP_EMAIL_SUBJECT'))}`;\n\t\tconst body = `body=${encodeURIComponent(Loc.getMessage('INTRANET_INVITE_DIALOG_LOCAL_POPUP_EMAIL_BODY'))} ${invitationUrl}`;\n\t\twindow.location = `mailto:?${subject}&${body}`;\n\t}\n\n\t#onSubmitWithMailService(): void\n\t{\n\t\tconst { emails, errorElements } = this.#input.getValues();\n\t\tconst errors = [];\n\n\t\tif (emails.length <= 0)\n\t\t{\n\t\t\terrors.push(Loc.getMessage('INTRANET_INVITE_DIALOG_EMPTY_ERROR_EMAIL'));\n\t\t}\n\n\t\tif (errorElements.length > 0)\n\t\t{\n\t\t\terrors.push(Loc.getMessage('INTRANET_INVITE_DIALOG_VALIDATE_ERROR_EMAIL'));\n\t\t}\n\n\t\tif (errors.length > 0)\n\t\t{\n\t\t\tEventEmitter.emit(window.invitationForm, 'BX.Intranet.Invitation:onSendData', {\n\t\t\t\terrors,\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst data = {\n\t\t\tinvitations: emails,\n\t\t\tdepartmentIds: this.#departmentControl.getValues(),\n\t\t\ttab: 'email',\n\t\t};\n\n\t\tconst analyticsLabel = {\n\t\t\tINVITATION_TYPE: 'invite',\n\t\t\tINVITATION_COUNT: emails.length,\n\t\t};\n\n\t\tEventEmitter.emit(window.invitationForm, 'BX.Intranet.Invitation:onSendData', {\n\t\t\taction: 'invite',\n\t\t\ttype: 'invite-email',\n\t\t\tdata,\n\t\t\tanalyticsLabel,\n\t\t});\n\t}\n\n\t#showNotification(isSuccess: boolean): void\n\t{\n\t\tconst notificationOptions = {\n\t\t\tid: 'invite-notification-result',\n\t\t\tcloseButton: true,\n\t\t\tautoHideDelay: 4000,\n\t\t\tautoHide: true,\n\t\t\tcontent: this.#getNotificationContent(isSuccess),\n\t\t};\n\n\t\tconst notify = BX.UI.Notification.Center.notify(notificationOptions);\n\t\tnotify.show();\n\t\tnotify.activateAutoHide();\n\t}\n\n\t#getNotificationContent(isSuccess: boolean): HTMLElement\n\t{\n\t\tconst title = isSuccess\n\t\t\t? Loc.getMessage('INTRANET_INVITE_DIALOG_LOCAL_POPUP_SUCCESS_TITLE')\n\t\t\t: Loc.getMessage('INTRANET_INVITE_DIALOG_LOCAL_POPUP_FAILED_TITLE');\n\n\t\tconst description =\tisSuccess\n\t\t\t? Loc.getMessage(\n\t\t\t\t'INTRANET_INVITE_DIALOG_LOCAL_POPUP_SUCCESS_DESCRIPTION',\n\t\t\t\t{\n\t\t\t\t\t'[LINK]': '<a class=\"intranet-invitation-dialog-link\" href=\"/company/\">',\n\t\t\t\t\t'[/LINK]': '</a>',\n\t\t\t\t},\n\t\t\t)\n\t\t\t: Loc.getMessage('INTRANET_INVITE_DIALOG_LOCAL_POPUP_FAILED_DESCRIPTION');\n\n\t\tconst content = Tag.render`\n\t\t\t<div class=\"invite-email-notification\">\n\t\t\t\t<div class=\"invite-email-notification__title\">\n\t\t\t\t\t${title}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-email-notification__description\">\n\t\t\t\t\t${description}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tconst link = content.querySelector('.intranet-invitetion-dialog-link');\n\t\tif (Type.isDomNode(link))\n\t\t{\n\t\t\tEvent.unbindAll(link);\n\t\t\tEvent.bind(link, 'click', this.#openInvitationPageWithFilter.bind(this));\n\t\t}\n\n\t\treturn content;\n\t}\n\n\t#openInvitationPageWithFilter(): void\n\t{\n\t\twindow.top.location = '/company/?apply_filter=Y&INVITED=Y';\n\t}\n}\n","import { Loc, Tag, Type, Event } from 'main.core';\nimport { Analytics } from '../analytics';\nimport DepartmentControl from '../department-control';\nimport { Transport } from '../transport';\nimport { EmailInvitationInput } from './local-email-page/email-invitation-input';\nimport { InviteEmailPopup } from './local-email-page/invite-email-popup';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\nimport { InviteEmailHandler } from './local-email-page/invite-email-handler';\nimport { Page } from './page';\nimport 'ui.fonts.inter';\n\nexport type LocalEmailPageType = {\n\tdepartmentControl: DepartmentControl,\n\ttransport: Transport,\n\tlinkRegisterEnabled: boolean,\n\tanalytics: Analytics,\n}\n\nexport class LocalEmailPage extends Page\n{\n\t#container: HTMLElement;\n\t#departmentControl: DepartmentControl;\n\t#inviteEmailPopup: InviteEmailPopup = null;\n\t#linkRegisterEnabled: boolean;\n\t#input: EmailInvitationInput = null;\n\t#process: InviteEmailHandler = null;\n\t#analytics: Analytics = null;\n\n\tconstructor(options: LocalEmailPageType)\n\t{\n\t\tsuper();\n\n\t\tthis.#linkRegisterEnabled = options.linkRegisterEnabled;\n\t\tthis.#departmentControl = options.departmentControl instanceof DepartmentControl ? options.departmentControl : null;\n\t\tthis.#analytics = options.analytics;\n\t\tthis.#input = new EmailInvitationInput();\n\t\tthis.#process = new InviteEmailHandler(options, this.#input);\n\n\t\tEventEmitter.subscribe('BX.Intranet.Invitation:selfChange', (event: BaseEvent) => {\n\t\t\tthis.#linkRegisterEnabled = event.getData().selfEnabled;\n\t\t});\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#container)\n\t\t{\n\t\t\treturn this.#container;\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"invite-wrap js-intranet-invitation-block\" data-role=\"invite-block\">\n\t\t\t\t${this.#titleRender()}\n\t\t\t\t${this.#renderForm()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#titleRender(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"invite-title-container\">\n\t\t\t\t<div class=\"invite-title-icon invite-title-icon-message\">\n\t\t\t\t\t<div class=\"ui-icon-set --person-letter\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-title-text\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_INVITE_DIALOG_TITLE_EMAIL_MSGVER_1')}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderForm(): HTMLElement\n\t{\n\t\tlet topBlock = null;\n\t\tif (this.#linkRegisterEnabled)\n\t\t{\n\t\t\ttopBlock = this.#getNotifyBlock();\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttopBlock = this.#input.getContent();\n\t\t\tthis.#input.onReadySaveInputHandler(this.onReadySaveInputHandler);\n\t\t\tthis.#input.onUnreadySaveInputHandler(this.onUnreadySaveInputHandler);\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"invite-content-container\">\n\t\t\t\t${topBlock}\n\t\t\t\t${this.#getDepartmentBlock()}\n\t\t\t\t${this.#linkRegisterEnabled && this.#getMailServiceBlock()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#getNotifyBlock(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"invite-content-notify\">\n\t\t\t\t<div class=\"invite-content-notify-wrapper\">\n\t\t\t\t\t<div class=\"invite-content-notify__image\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-content-notify-content\">\n\t\t\t\t\t<div class=\"invite-content-notify-content__description\"> \n\t\t\t\t\t\t${Loc.getMessage('INTRANET_INVITE_DIALOG_LOCAL_MAIL_CONTENT_DESCRIPTION')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"invite-content-notify-content__step\">\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_INVITE_DIALOG_LOCAL_MAIL_CONTENT_STEPS')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tonReadySaveInputHandler(): void\n\t{\n\t\tEventEmitter.emit('BX.Intranet.Invitation:onSubmitReady');\n\t\tEventEmitter.emit('BX.Intranet.Invitation:onChangeForm');\n\t}\n\n\tonUnreadySaveInputHandler(): void\n\t{\n\t\tEventEmitter.emit('BX.Intranet.Invitation:onSubmitDisabled');\n\t}\n\n\t#getDepartmentBlock(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"invite-content-department\">\n\t\t\t\t${this.#departmentControl.render()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#getMailServiceBlock(): HTMLElement\n\t{\n\t\tconst text = Loc.getMessage(\n\t\t\t'INTRANET_INVITE_DIALOG_LOCAL_MAIL_SERVICE',\n\t\t\t{\n\t\t\t\t'[LINK]': '<a class=\"invite-content-mail-service__link\">',\n\t\t\t\t'[/LINK]': '</a>',\n\t\t\t},\n\t\t);\n\n\t\tconst block = Tag.render`\n\t\t\t<div class=\"invite-content-mail-service\">\n\t\t\t\t${text}\n\t\t\t</div>\n\t\t`;\n\n\t\tconst link = block.querySelector('.invite-content-mail-service__link');\n\t\tif (Type.isDomNode(link))\n\t\t{\n\t\t\tEvent.unbindAll(link);\n\t\t\tEvent.bind(link, 'click', this.#openEmailInputPopup.bind(this));\n\t\t}\n\n\t\treturn block;\n\t}\n\n\t#openEmailInputPopup(): void\n\t{\n\t\tif (!this.#inviteEmailPopup)\n\t\t{\n\t\t\tthis.#inviteEmailPopup = new InviteEmailPopup(this.#input);\n\t\t}\n\t\tthis.#analytics.sendOpenLocalEmailPopup();\n\t\tthis.#inviteEmailPopup.show();\n\t}\n\n\tonSubmit(event: BaseEvent): void\n\t{\n\t\tthis.#process.onSubmit();\n\t}\n\n\tgetAnalyticTab(): string\n\t{\n\t\treturn Analytics.TAB_LOCAL_EMAIL;\n\t}\n\n\tgetSubmitButtonText(): ?string\n\t{\n\t\treturn Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\t}\n}\n","import {Type, Dom} from \"main.core\";\nimport {TagSelector} from 'ui.entity-selector';\n\nexport class Selector\n{\n\tconstructor(params)\n\t{\n\t\tthis.options = params.options;\n\t\tthis.entities = [];\n\n\t\tthis.#prepareOptions();\n\t}\n\n\t#prepareOptions(): void\n\t{\n\t\tfor (const type in this.options)\n\t\t{\n\t\t\tif (!this.options.hasOwnProperty(type))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (type === \"project\" && !!this.options[type])\n\t\t\t{\n\t\t\t\tconst options = {\n\t\t\t\t\tfillRecentTab: true,\n\t\t\t\t\t'!type': ['collab'],\n\t\t\t\t\tcreateProjectLink: this.options.showCreateButton ?? true,\n\t\t\t\t};\n\t\t\t\tif (\n\t\t\t\t\tObject.prototype.hasOwnProperty.call(this.options, 'projectLimitExceeded')\n\t\t\t\t\t&& Object.prototype.hasOwnProperty.call(this.options, 'projectLimitFeatureId')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\toptions.lockProjectLink = this.options.projectLimitExceeded;\n\t\t\t\t\toptions.lockProjectLinkFeatureId = this.options.projectLimitFeatureId;\n\t\t\t\t}\n\n\t\t\t\tconst optionValue = {\n\t\t\t\t\tid: 'project',\n\t\t\t\t\toptions,\n\t\t\t\t};\n\n\t\t\t\tif (this.options[type] === \"extranet\")\n\t\t\t\t{\n\t\t\t\t\toptionValue[\"options\"][\"extranet\"] = true;\n\t\t\t\t}\n\t\t\t\tthis.entities.push(optionValue);\n\t\t\t}\n\t\t}\n\t}\n\n\trenderTo(target: HTMLElement)\n\t{\n\t\tthis.tagSelector = this.renderTagSelector();\n\n\t\tif (Type.isDomNode(target))\n\t\t{\n\t\t\tthis.tagSelector.renderTo(target);\n\t\t}\n\t}\n\n\trenderTagSelector(): TagSelector\n\t{\n\t\tconst preselectedItems = [];\n\n\t\tif (this.options?.projectId > 0)\n\t\t{\n\t\t\tpreselectedItems.push(['project', this.options.projectId]);\n\t\t}\n\n\t\treturn new TagSelector({\n\t\t\tdialogOptions: {\n\t\t\t\tpreselectedItems,\n\t\t\t\tentities: this.entities,\n\t\t\t\tcontext: 'INTRANET_INVITATION',\n\t\t\t},\n\t\t});\n\t}\n\n\tgetItems()\n\t{\n\t\tlet departments = [];\n\t\tlet projects = [];\n\t\tconst tagSelectorItems = this.tagSelector.getDialog().getSelectedItems();\n\n\t\ttagSelectorItems.forEach(item => {\n\t\t\tconst id = parseInt(item.getId());\n\t\t\tconst type = item.getEntityId();\n\n\t\t\tif (type === \"department\")\n\t\t\t{\n\t\t\t\tdepartments.push(id);\n\t\t\t}\n\t\t\telse if (type === \"project\")\n\t\t\t{\n\t\t\t\tprojects.push(id);\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tdepartments: departments,\n\t\t\tprojects: projects\n\t\t};\n\t}\n}","import { Loc, Tag, Type, Event } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Analytics } from '../analytics';\nimport DepartmentControl from '../department-control';\nimport { InputRowFactory } from '../input-row-factory';\nimport { Page } from './page';\n\nexport class EmailPage extends Page\n{\n\t#container: HTMLElement;\n\t#inputsFactory: InputRowFactory;\n\t#smsAvailable: boolean;\n\t#useOnlyPhone: boolean;\n\t#onClickSwitchMode: function;\n\t#onClickAddInputRow: function;\n\t#departmentControl: DepartmentControl;\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.#inputsFactory = options.inputsFactory instanceof InputRowFactory ? options.inputsFactory : null;\n\t\tthis.#smsAvailable = options.smsAvailable === true;\n\t\tthis.#useOnlyPhone = options.useLocalEmailProgram === true;\n\t\tthis.#onClickSwitchMode = Type.isFunction(options.onClickSwitchMode) ? options.onClickSwitchMode : null;\n\t\tthis.#onClickAddInputRow = Type.isFunction(options.onClickAddInputRow) ? options.onClickAddInputRow : null;\n\t\tthis.#departmentControl = options.departmentControl instanceof DepartmentControl ? options.departmentControl : null;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#container)\n\t\t{\n\t\t\treturn this.#container;\n\t\t}\n\n\t\tconst title = this.#titleRender();\n\t\tconst form = this.#renderForm();\n\t\tthis.#inputsFactory.renderInputRowsTo(form.querySelector('div[data-role=\"rows-container\"]'), 5);\n\t\tthis.#departmentControl.renderTo(form.querySelector('form'));\n\n\t\tthis.#container = Tag.render`\n\t\t\t<div class=\"invite-wrap js-intranet-invitation-block\" data-role=\"invite-block\">\n\t\t\t\t${title}\n\t\t\t\t${form}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.#container;\n\t}\n\n\t#titleRender(): HTMLElement\n\t{\n\t\tconst suffix = this.#useOnlyPhone ? 'PHONE_MSGVER_1' : (this.#smsAvailable ? 'EMAIL_AND_PHONE' : 'EMAIL');\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"invite-title-container\">\n\t\t\t\t<div class=\"invite-title-icon invite-title-icon-message\">\n\t\t\t\t\t<div class=\"ui-icon-set --person-letter\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-title-text\">\n\t\t\t\t\t${Loc.getMessage(`INTRANET_INVITE_DIALOG_TITLE_${suffix}`)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderForm(): HTMLElement\n\t{\n\t\tconst form = Tag.render`\n\t\t\t<div class=\"invite-content-container\">\n\t\t\t\t<form method=\"POST\" name=\"INVITE_DIALOG_FORM\" class=\"invite-form-container\">\n\t\t\t\t\t<div data-role=\"rows-container\"></div>\n\t\t\t\t\t<div class=\"invite-form-buttons --border-bottom --pt-3\">\n\t\t\t\t\t\t\t<span class=\"ui-btn ui-btn-sm ui-btn-light-border ui-btn-icon-add ui-btn-round\"\n\t\t\t\t\t\t\t\t  data-role=\"invite-more\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_INVITE_DIALOG_ADD_MORE')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span style=\"padding: 0 10px;\">${Loc.getMessage('INTRANET_INVITE_DIALOG_OR')}</span>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\"invite-content__switch_button swith-email-invitation-persons-mode\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_INVITE_DIALOG_ADD_MASSIVE')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t`;\n\n\t\tconst moreButton = form.querySelector(\"[data-role='invite-more']\");\n\t\tif (Type.isDomNode(moreButton))\n\t\t{\n\t\t\tEvent.unbindAll(moreButton);\n\t\t\tEvent.bind(moreButton, 'click', () => {\n\t\t\t\tthis.#inputsFactory.renderInputRowTo(form.querySelector('div[data-role=\"rows-container\"]'));\n\t\t\t\tif (this.#onClickAddInputRow)\n\t\t\t\t{\n\t\t\t\t\tthis.#onClickAddInputRow();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tconst switchBtn = form.querySelector('.swith-email-invitation-persons-mode');\n\t\tif (Type.isDomNode(switchBtn))\n\t\t{\n\t\t\tEvent.unbindAll(switchBtn);\n\t\t\tEvent.bind(switchBtn, 'click', this.#onClickSwitchMode);\n\t\t}\n\n\t\treturn form;\n\t}\n\n\tgetAnalyticTab(): string\n\t{\n\t\treturn this.#useOnlyPhone ? Analytics.TAB_PHONE : Analytics.TAB_EMAIL;\n\t}\n\n\tonSubmit(event: BaseEvent)\n\t{\n\t\tconst formNode = this.render().querySelector('form');\n\t\tconst [items, errorInputData] = this.#inputsFactory.parseEmailAndPhone(formNode);\n\n\t\tconst errors = [];\n\t\tif (errorInputData.length > 0)\n\t\t{\n\t\t\terrors.push(`${this.#getValidateError()}: ${errorInputData.join(', ')}`);\n\t\t}\n\n\t\tif (items.length <= 0)\n\t\t{\n\t\t\terrors.push(this.#getEmptyError());\n\t\t}\n\t\tconst context = event.getData()?.context;\n\t\tif (errors.length > 0)\n\t\t{\n\t\t\tEventEmitter.emit(context, 'BX.Intranet.Invitation:onSendData', {\n\t\t\t\terrors,\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst data = {\n\t\t\tinvitations: items,\n\t\t\tdepartmentIds: this.#departmentControl.getValues(),\n\t\t\ttab: 'email',\n\t\t};\n\n\t\tconst analyticsLabel = {\n\t\t\tINVITATION_TYPE: 'invite',\n\t\t\tINVITATION_COUNT: items.length,\n\t\t};\n\n\t\tEventEmitter.emit(context, 'BX.Intranet.Invitation:onSendData', {\n\t\t\taction: 'invite',\n\t\t\tdata,\n\t\t\tanalyticsLabel,\n\t\t});\n\t}\n\n\t#getValidateError()\n\t{\n\t\tif (this.#useOnlyPhone)\n\t\t{\n\t\t\treturn Loc.getMessage('INTRANET_INVITE_DIALOG_PHONE_VALIDATE_ERROR');\n\t\t}\n\t\telse if (this.#smsAvailable)\n\t\t{\n\t\t\treturn Loc.getMessage('INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_VALIDATE_ERROR');\n\t\t}\n\n\t\treturn Loc.getMessage('INTRANET_INVITE_DIALOG_EMAIL_VALIDATE_ERROR');\n\t}\n\n\t#getEmptyError()\n\t{\n\t\tif (this.#useOnlyPhone)\n\t\t{\n\t\t\treturn Loc.getMessage('INTRANET_INVITE_DIALOG_PHONE_EMPTY_ERROR');\n\t\t}\n\t\telse if (this.#smsAvailable)\n\t\t{\n\t\t\treturn Loc.getMessage('INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_EMPTY_ERROR');\n\t\t}\n\n\t\treturn Loc.getMessage('INTRANET_INVITE_DIALOG_EMAIL_EMPTY_ERROR');\n\t}\n\n\tgetSubmitButtonText(): ?string\n\t{\n\t\treturn Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\t}\n}","import { Tag, Loc, Event, Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Analytics } from '../analytics';\nimport { InputRowFactory } from '../input-row-factory';\nimport { Page } from './page';\nimport { TagSelector } from 'ui.entity-selector';\n\nexport class ExtranetPage extends Page\n{\n\t#container: HTMLElement;\n\t#inputsFactory: InputRowFactory;\n\t#tagSelectorGroup: TagSelector;\n\t#onClickAddInputRow: function;\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.#inputsFactory = options.inputsFactory instanceof InputRowFactory ? options.inputsFactory : null;\n\t\tthis.#tagSelectorGroup = options.tagSelectorGroup instanceof TagSelector ? options.tagSelectorGroup : null;\n\t\tthis.#onClickAddInputRow = Type.isFunction(options.onClickAddInputRow) ? options.onClickAddInputRow : null;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#container)\n\t\t{\n\t\t\treturn this.#container;\n\t\t}\n\n\t\tthis.#container = Tag.render`\n\t\t\t<div class=\"invite-wrap js-intranet-invitation-block\" data-role=\"extranet-block\">\n\t\t\t\t<div class=\"invite-title-container\">\n\t\t\t\t\t<div class=\"invite-title-icon invite-title-icon-message\">\n\t\t\t\t\t\t<div class=\"ui-icon-set --earth\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"invite-title-text\">${Loc.getMessage('INTRANET_INVITE_DIALOG_EXTRANET_TITLE')}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-content-container\">\n\t\t\t\t\t<form method=\"POST\" name=\"EXTRANET_DIALOG_FORM\" class=\"invite-form-container\">\n\t\t\t\t\t\t<div class=\"invite-form-row\" style=\"margin-bottom: 15px;\">\n\t\t\t\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage('INTRANET_INVITE_DIALOG_EXTRANET_GROUP')}</div>\n\t\t\t\t\t\t\t\t<div data-role=\"entity-selector-container\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div data-role=\"rows-container\"></div>\n\t\t\t\t\t\t<div class=\"invite-form-buttons\">\n\t\t\t\t\t\t\t<span class=\"ui-btn ui-btn-sm ui-btn-light-border ui-btn-icon-add ui-btn-round\" data-role=\"invite-more\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_INVITE_DIALOG_ADD_MORE')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.#tagSelectorGroup?.renderTo(this.#container.querySelector('[data-role=\"entity-selector-container\"]'));\n\n\t\tthis.#inputsFactory.renderInputRowsTo(\n\t\t\tthis.#container.querySelector('div[data-role=\"rows-container\"]'),\n\t\t\t3,\n\t\t);\n\n\t\tconst moreButton = this.#container.querySelector(\"[data-role='invite-more']\");\n\t\tif (Type.isDomNode(moreButton))\n\t\t{\n\t\t\tEvent.unbindAll(moreButton);\n\t\t\tEvent.bind(moreButton, 'click', () => {\n\t\t\t\tthis.#inputsFactory.renderInputRowTo(this.#container.querySelector('div[data-role=\"rows-container\"]'));\n\t\t\t\tif (this.#onClickAddInputRow)\n\t\t\t\t{\n\t\t\t\t\tthis.#onClickAddInputRow();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn this.#container;\n\t}\n\n\tgetAnalyticTab(): string\n\t{\n\t\treturn Analytics.TAB_EXTRANET;\n\t}\n\n\tonSubmit(event: BaseEvent)\n\t{\n\t\tconst formNode = this.render().querySelector('form');\n\t\tconst [items, errorInputData] = this.#inputsFactory.parseEmailAndPhone(formNode);\n\n\t\tconst errors = [];\n\t\tif (errorInputData.length > 0)\n\t\t{\n\t\t\terrors.push(`${Loc.getMessage('INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_VALIDATE_ERROR')}: ${errorInputData.join(', ')}`);\n\t\t}\n\n\t\tif (items.length <= 0)\n\t\t{\n\t\t\terrors.push(Loc.getMessage('INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_EMPTY_ERROR'));\n\t\t}\n\t\tconst context = event.getData()?.context;\n\t\tif (errors.length > 0)\n\t\t{\n\t\t\tEventEmitter.emit(context, 'BX.Intranet.Invitation:onSendData', {\n\t\t\t\terrors,\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst tagSelectorItems = this.#tagSelectorGroup.getDialog().getSelectedItems();\n\t\tconst projectIds = [];\n\t\ttagSelectorItems.forEach((item) => {\n\t\t\tconst id = parseInt(item.getId(), 10);\n\t\t\tprojectIds.push(id);\n\t\t});\n\n\t\tconst data = {\n\t\t\tinvitations: items,\n\t\t\tworkgroupIds: projectIds,\n\t\t\ttab: 'email',\n\t\t};\n\n\t\tconst analyticsLabel = {\n\t\t\tINVITATION_TYPE: 'extranet',\n\t\t\tINVITATION_COUNT: items.length,\n\t\t};\n\n\t\tEventEmitter.emit(context, 'BX.Intranet.Invitation:onSendData', {\n\t\t\taction: 'extranet',\n\t\t\tdata,\n\t\t\tanalyticsLabel,\n\t\t});\n\t}\n\n\tgetSubmitButtonText(): ?string\n\t{\n\t\treturn Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\t}\n}","import { Tag, Loc, Type, Event } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { Analytics } from '../analytics';\nimport DepartmentControl from '../department-control';\nimport { InputRowFactory } from '../input-row-factory';\nimport { Page } from './page';\nimport { TagSelector } from 'ui.entity-selector';\n\nexport class GroupPage extends Page\n{\n\t#container: HTMLElement;\n\t#inputsFactory: InputRowFactory;\n\t#tagSelectorGroup: TagSelector;\n\t#onClickAddInputRow: function;\n\t#departmentControl: DepartmentControl;\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.#inputsFactory = options.inputsFactory instanceof InputRowFactory ? options.inputsFactory : null;\n\t\tthis.#tagSelectorGroup = options.tagSelectorGroup instanceof TagSelector ? options.tagSelectorGroup : null;\n\t\tthis.#onClickAddInputRow = Type.isFunction(options.onClickAddInputRow) ? options.onClickAddInputRow : null;\n\t\tthis.#departmentControl = options.departmentControl instanceof DepartmentControl ? options.departmentControl : null;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#container)\n\t\t{\n\t\t\treturn this.#container;\n\t\t}\n\n\t\tthis.#container = Tag.render`\n\t\t\t<div class=\"invite-wrap js-intranet-invitation-block\" data-role=\"invite-with-group-dp-block\">\n\t\t\t\t<div class=\"invite-title-container\">\n\t\t\t\t\t<div class=\"invite-title-icon invite-title-icon-message\">\n\t\t\t\t\t\t<div class=\"ui-icon-set --group\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"invite-title-text\">\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_INVITE_DIALOG_GROUP_TITLE')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-content-container\">\n\t\t\t\t\t<form method=\"POST\" name=\"INVITE_WITH_GROUP_DP_DIALOG_FORM\" class=\"invite-form-container\">\n\t\t\t\t\t\t<div data-role=\"rows-container\"></div>\n\t\t\t\t\t\t<div class=\"invite-form-buttons --border-bottom --pt-3 --mb-17\">\n\t\t\t\t\t\t\t<span class=\"ui-btn ui-btn-sm ui-btn-light-border ui-btn-icon-add ui-btn-round\" data-role=\"invite-more\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_INVITE_DIALOG_ADD_MORE')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t\t\t\t<div class=\"invite-content__field-lable\">${Loc.getMessage('INTRANET_INVITE_DIALOG_GROUP_INPUT')}</div>\n\t\t\t\t\t\t\t\t<div data-role=\"entity-selector-container\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"invite-form-row\" id=\"intranet-invitation__department-control-palce\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\tthis.#inputsFactory.renderInputRowsTo(\n\t\t\tthis.#container.querySelector('div[data-role=\"rows-container\"]'),\n\t\t\t3,\n\t\t);\n\n\t\tthis.#tagSelectorGroup.renderTo(this.#container.querySelector('[data-role=\"entity-selector-container\"]'));\n\t\tthis.#departmentControl.renderTo(this.#container.querySelector('#intranet-invitation__department-control-palce'));\n\n\t\tconst moreButton = this.#container.querySelector(\"[data-role='invite-more']\");\n\t\tif (Type.isDomNode(moreButton))\n\t\t{\n\t\t\tEvent.unbindAll(moreButton);\n\t\t\tEvent.bind(moreButton, 'click', () => {\n\t\t\t\tthis.#inputsFactory.renderInputRowTo(\n\t\t\t\t\tthis.#container.querySelector('div[data-role=\"rows-container\"]'),\n\t\t\t\t);\n\t\t\t\tif (this.#onClickAddInputRow)\n\t\t\t\t{\n\t\t\t\t\tthis.#onClickAddInputRow();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn this.#container;\n\t}\n\n\tgetAnalyticTab(): string\n\t{\n\t\treturn Analytics.TAB_DEPARTMENT;\n\t}\n\n\tonSubmit(event: BaseEvent)\n\t{\n\t\tconst formNode = this.render().querySelector('form');\n\t\tconst [items, errorInputData] = this.#inputsFactory.parseEmailAndPhone(formNode);\n\n\t\tconst errors = [];\n\t\tif (errorInputData.length > 0)\n\t\t{\n\t\t\terrors.push(`${Loc.getMessage('INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_VALIDATE_ERROR')}: ${errorInputData.join(', ')}`);\n\t\t}\n\n\t\tif (items.length <= 0)\n\t\t{\n\t\t\terrors.push(Loc.getMessage('INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_EMPTY_ERROR'));\n\t\t}\n\t\tconst context = event.getData()?.context;\n\t\tif (errors.length > 0)\n\t\t{\n\t\t\tEventEmitter.emit(context, 'BX.Intranet.Invitation:onSendData', {\n\t\t\t\terrors,\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst tagSelectorItems = this.#tagSelectorGroup.getDialog().getSelectedItems();\n\t\tconst projectIds = [];\n\t\ttagSelectorItems.forEach((item) => {\n\t\t\tconst id = parseInt(item.getId(), 10);\n\t\t\tprojectIds.push(id);\n\t\t});\n\n\t\tconst data = {\n\t\t\tinvitations: items,\n\t\t\tdepartmentIds: this.#departmentControl.getValues(),\n\t\t\tworkgroupIds: projectIds,\n\t\t\ttab: 'group',\n\t\t};\n\n\t\tconst analyticsLabel = {\n\t\t\tINVITATION_TYPE: 'withGroupOrDepartment',\n\t\t\tINVITATION_COUNT: items.length,\n\t\t};\n\n\t\tEventEmitter.emit(context, 'BX.Intranet.Invitation:onSendData', {\n\t\t\taction: 'inviteWithGroupDp',\n\t\t\tdata,\n\t\t\tanalyticsLabel,\n\t\t});\n\t}\n\n\tgetSubmitButtonText(): ?string\n\t{\n\t\treturn Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\t}\n}","import { Tag, Loc, Event, Dom } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { Analytics } from '../analytics';\nimport { Page } from './page';\nimport { CreateButton, CancelButton } from 'ui.buttons';\nimport { Popup } from 'main.popup';\n\nexport class IntegratorPage extends Page\n{\n\t#container: HTMLElement;\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#container)\n\t\t{\n\t\t\treturn this.#container;\n\t\t}\n\n\t\tthis.#container = Tag.render`\n\t\t\t<div class=\"invite-wrap js-intranet-invitation-block\" data-role=\"integrator-block\">\n\t\t\t\t<form method=\"POST\" name=\"INTEGRATOR_DIALOG_FORM\">\n\t\t\t\t\t<div class=\"invite-title-container\">\n\t\t\t\t\t\t<div class=\"invite-title-icon invite-title-icon-mass\">\n\t\t\t\t\t\t\t<div class=\"ui-icon-set --persons-3\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"invite-title-text\">${Loc.getMessage('BX24_INVITE_DIALOG_TAB_INTEGRATOR_TITLE')}</div>\n\t\t\t\t\t<div class=\"invite-title-helper\" onclick=\"top.BX.Helper.show('redirect=detail&code=7725333');\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"invite-content-container\">\n\t\t\t\t\t\t<div class=\"invite-form-container\">\n\t\t\t\t\t\t\t<div data-role=\"rows-container\">\n\t\t\t\t\t\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t\t\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"invite-content__field-lable\">${Loc.getMessage('INTRANET_INVITE_DIALOG_INTEGRATOR_EMAIL')}</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\" \n\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"\" \n\t\t\t\t\t\t\t\t\t\t\t\tmaxlength=\"50\"\n\t\t\t\t\t\t\t\t\t\t\t\tname=\"integrator_email\" \n\t\t\t\t\t\t\t\t\t\t\t\tid=\"integrator_email\" \n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"${Loc.getMessage('INTRANET_INVITE_DIALOG_INTEGRATOR_EMAIL')}\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t`;\n\n\t\tconst input = this.#container.querySelector('input');\n\n\t\tconst closeIcon = input.nextElementSibling;\n\t\tEvent.bind(input, 'input', () => {\n\t\t\tDom.style(closeIcon, 'display', input.value === '' ? 'none' : 'block');\n\t\t});\n\t\tEvent.bind(closeIcon, 'click', (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tDom.style(closeIcon, 'display', 'none');\n\t\t});\n\n\t\treturn this.#container;\n\t}\n\n\tgetAnalyticTab(): string\n\t{\n\t\treturn Analytics.TAB_INTEGRATOR;\n\t}\n\n\tonSubmit(event: BaseEvent)\n\t{\n\t\tconst formNode = this.render().querySelector('form');\n\n\t\tconst data = {\n\t\t\tintegrator_email: formNode.integrator_email.value,\n\t\t};\n\t\tconst analyticsLabel = {\n\t\t\tINVITATION_TYPE: 'integrator',\n\t\t};\n\n\t\tconst message = Tag.render`\n\t\t\t<div class=\"invite-integrator-confirm-message\">\n\t\t\t\t${Loc.getMessage('INTRANET_INVITE_DIALOG_CONFIRM_INTEGRATOR_DESCRIPTION')}\n\t\t\t</div>\n\t\t`;\n\t\tconst moreLink = message.querySelector('span');\n\t\tEvent.bind(moreLink, 'click', () => {\n\t\t\ttop.BX.Helper.show('redirect=detail&code=20682986');\n\t\t});\n\n\t\tconst request = {\n\t\t\taction: 'inviteIntegrator',\n\t\t\tdata,\n\t\t\tanalyticsLabel,\n\t\t};\n\n\t\tconst popup = new Popup({\n\t\t\tid: 'integrator-confirm-invitation-popup',\n\t\t\tmaxWidth: 500,\n\t\t\tcloseIcon: false,\n\t\t\toverlay: true,\n\t\t\tcontentPadding: 10,\n\t\t\ttitleBar: Loc.getMessage('INTRANET_INVITE_DIALOG_CONFIRM_INTEGRATOR_TITLE'),\n\t\t\tcontent: message,\n\t\t\toffsetLeft: 100,\n\t\t\tbuttons: [\n\t\t\t\tnew CreateButton({\n\t\t\t\t\ttext: Loc.getMessage('INTRANET_INVITE_DIALOG_CONFIRM_INTEGRATOR_BUTTON_YES'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tconst context = event.getData()?.context;\n\t\t\t\t\t\tEventEmitter.emit(context, 'BX.Intranet.Invitation:onSendData', request);\n\n\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tnew CancelButton({\n\t\t\t\t\ttext: Loc.getMessage('INTRANET_INVITE_DIALOG_CONFIRM_INTEGRATOR_BUTTON_NO'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\tonClose: () => {\n\t\t\t\t\tpopup.destroy();\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tpopup.show();\n\t}\n\n\tgetSubmitButtonText(): ?string\n\t{\n\t\treturn Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\t}\n}\n","import { Event, Type, Dom, Text, Loc } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Switcher, SwitcherSize } from 'ui.switcher';\nimport { Analytics } from './analytics';\nimport DepartmentControl from './department-control';\nimport type { LinkPage } from './page/link-page';\nimport { SubmitButton } from './submit-button';\nimport type { Transport } from './transport';\n\nexport class SelfRegister\n{\n\t#container: HTMLElement;\n\t#isEnabled: boolean;\n\t#analytics: Analytics;\n\t#transport: Transport;\n\t#departmentControl: DepartmentControl;\n\t#page: LinkPage;\n\n\tconstructor(options)\n\t{\n\t\tthis.#container = options.container;\n\t\tthis.#isEnabled = options.isSelfRegisterEnabled;\n\t\tthis.#analytics = options.analytics;\n\t\tthis.#transport = options.transport;\n\t\tthis.#departmentControl = options.departmentControl;\n\t\tthis.#page = options.page;\n\n\t\tif (Type.isDomNode(this.#container))\n\t\t{\n\t\t\tthis.bindActions();\n\n\t\t\tconst switcherNode = this.#container.querySelector('.invite-dialog-fast-reg-control-switcher');\n\t\t\tthis.switcher = new Switcher({\n\t\t\t\tinputName: 'allow_register',\n\t\t\t\tid: 'allow_register',\n\t\t\t\tchecked: this.#isEnabled,\n\t\t\t\tnode: switcherNode,\n\t\t\t\tsize: SwitcherSize.small,\n\t\t\t\thandlers: {\n\t\t\t\t\ttoggled: this.toggleSettings.bind(this),\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst generateLinkBtnNode = this.#container.querySelector(\"[data-role='selfRegenerateSecretButton']\");\n\t\tthis.generateLinkHint = null;\n\t\tEvent.bind(generateLinkBtnNode, 'mouseover', (event) => {\n\t\t\tthis.generateLinkHint = this.showHintPopup(\n\t\t\t\tLoc.getMessage('INTRANET_INVITE_DIALOG_LINK_UPDATE_WARNING'),\n\t\t\t\tgenerateLinkBtnNode,\n\t\t\t);\n\t\t});\n\n\t\tEvent.bind(generateLinkBtnNode, 'mouseout', () => {\n\t\t\tthis.generateLinkHint?.destroy();\n\t\t\tthis.generateLinkHint = null;\n\t\t});\n\n\t\tEventEmitter.subscribe('BX.Intranet.Invitation:confirmShutdown', (event: BaseEvent) => {\n\t\t\tconst data = event.getData();\n\t\t\tthis.showNotificationPopup(data);\n\t\t});\n\t}\n\n\tbindActions()\n\t{\n\t\tconst regenerateButton = this.#container.querySelector(\"[data-role='selfRegenerateSecretButton']\");\n\t\tif (Type.isDomNode(regenerateButton))\n\t\t{\n\t\t\tEvent.bind(regenerateButton, 'click', () => {\n\t\t\t\tthis.regenerateSecret();\n\t\t\t});\n\t\t}\n\n\t\tconst copyRegisterUrlButton = this.#container.querySelector(\"[data-role='copyRegisterUrlButton']\");\n\t\tif (Type.isDomNode(copyRegisterUrlButton))\n\t\t{\n\t\t\tEvent.bind(copyRegisterUrlButton, 'click', () => {\n\t\t\t\tthis.copyRegisterUrl();\n\t\t\t});\n\t\t}\n\n\t\tconst allowRegisterConfirm = this.#container.querySelector(\"[data-role='allowRegisterConfirm']\");\n\t\tif (Type.isDomNode(allowRegisterConfirm))\n\t\t{\n\t\t\tEvent.bind(allowRegisterConfirm, 'change', () => {\n\t\t\t\tEventEmitter.emit('BX.Intranet.Invitation:onChangeForm');\n\t\t\t\tthis.#page.setButtonState(SubmitButton.ENABLED_STATE);\n\t\t\t\tthis.toggleWhiteList(allowRegisterConfirm);\n\t\t\t});\n\t\t}\n\n\t\tconst selfWhiteList = this.#container.querySelector(\"[data-role='selfWhiteList']\");\n\t\tif (Type.isDomNode(selfWhiteList))\n\t\t{\n\t\t\tEvent.bind(selfWhiteList, 'input', () => {\n\t\t\t\tthis.#page.setButtonState(SubmitButton.ENABLED_STATE);\n\t\t\t\tEventEmitter.emit('BX.Intranet.Invitation:onChangeForm');\n\t\t\t});\n\t\t}\n\t}\n\n\tregenerateSecret()\n\t{\n\t\tthis.#transport.send({\n\t\t\taction: 'self',\n\t\t\tdata: { allow_register_secret: Text.getRandom(8) },\n\t\t}).then((response) => {\n\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\tcontent: Loc.getMessage('INTRANET_INVITE_DIALOG_LINK_UPDATE_SUCCESS'),\n\t\t\t\tautoHideDelay: 2500,\n\t\t\t});\n\t\t}, (response) => {\n\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\tcontent: Loc.getMessage('INTRANET_INVITE_DIALOG_LINK_UPDATE_ERROR'),\n\t\t\t\tautoHideDelay: 2500,\n\t\t\t});\n\t\t});\n\t}\n\n\tcopyRegisterUrl()\n\t{\n\t\tconst copyBtnNode = this.#container.querySelector(\"[data-role='copyRegisterUrlButton']\");\n\t\tif (Dom.hasClass(copyBtnNode, 'ui-btn-wait'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tDom.addClass(copyBtnNode, 'ui-btn-wait');\n\t\tthis.#transport.send({\n\t\t\taction: 'getInviteLink',\n\t\t\tdata: {\n\t\t\t\tdepartmentsId: this.#departmentControl.getValues(),\n\t\t\t},\n\t\t}).then((response) => {\n\t\t\tDom.removeClass(copyBtnNode, 'ui-btn-wait');\n\t\t\tconst invitationUrl = response.data?.invitationLink;\n\t\t\tif (Type.isStringFilled(invitationUrl))\n\t\t\t{\n\t\t\t\tthis.copyToClipboard(invitationUrl)\n\t\t\t\t\t.then(r => {\n\t\t\t\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: Loc.getMessage('BX24_INVITE_DIALOG_COPY_URL'),\n\t\t\t\t\t\t\tautoHideDelay: 2500,\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.catch((e) => {\n\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t});\n\n\t\t\t\tthis.#analytics.send();\n\t\t\t}\n\t\t}, (response) => {\n\t\t\tDom.removeClass(copyBtnNode, 'ui-btn-wait');\n\t\t});\n\t}\n\n\tasync copyToClipboard(textToCopy: string): Promise<void>\n\t{\n\t\tif (!Type.isString(textToCopy))\n\t\t{\n\t\t\treturn Promise.reject();\n\t\t}\n\n\t\t// navigator.clipboard defined only if window.isSecureContext === true\n\t\t// so or https should be activated, or localhost address\n\t\tif (window.isSecureContext && navigator.clipboard)\n\t\t{\n\t\t\t// safari not allowed clipboard manipulation as result of ajax request\n\t\t\t// so timeout is hack for this, to prevent \"not have permission\"\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tsetTimeout(() => (\n\t\t\t\t\tnavigator.clipboard\n\t\t\t\t\t\t.writeText(textToCopy)\n\t\t\t\t\t\t.then(() => resolve())\n\t\t\t\t\t\t.catch((e) => reject(e))\n\t\t\t\t), 0);\n\t\t\t});\n\t\t}\n\n\t\treturn BX.clipboard?.copy(textToCopy) ? Promise.resolve() : Promise.reject();\n\t}\n\n\tshowHintPopup(message, bindNode)\n\t{\n\t\tif (!Type.isDomNode(bindNode) || !message)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst popup = new BX.PopupWindow('inviteHint' + Text.getRandom(8), bindNode, {\n\t\t\tcontent: message,\n\t\t\tzIndex: 15000,\n\t\t\tangle: true,\n\t\t\toffsetTop: 0,\n\t\t\toffsetLeft: 50,\n\t\t\tcloseIcon: false,\n\t\t\tautoHide: true,\n\t\t\tdarkMode: true,\n\t\t\toverlay: false,\n\t\t\tmaxWidth: 400,\n\t\t\tevents: {\n\t\t\t\tonAfterPopupShow() {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t}, 4000);\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tpopup.show();\n\n\t\treturn popup;\n\t}\n\n\tshowNotificationPopup(data: Object)\n\t{\n\t\tconst popup = new BX.PopupWindow({\n\t\t\tclassName: 'confirm-self-register',\n\t\t\ttitleBar: Loc.getMessage('INTRANET_INVITE_DIALOG_SELF_CONFIRM_POPUP_TITLE'),\n\t\t\tcontent: Loc.getMessage('INTRANET_INVITE_DIALOG_SELF_CONFIRM_POPUP_TEXT'),\n\t\t\twidth: 364,\n\t\t\theight: 188,\n\t\t\tcloseIcon: true,\n\t\t\tbuttons: [\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext: Loc.getMessage('INTRANET_INVITE_DIALOG_SELF_CONFIRM_POPUP_OK'),\n\t\t\t\t\tcolor: BX.UI.Button.Color.PRIMARY,\n\t\t\t\t\tround: true,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick() {\n\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\tEventEmitter.emit(data.page, 'BX.Intranet.Invitation:submit', {\n\t\t\t\t\t\t\t\tcontext: data.context,\n\t\t\t\t\t\t\t\tisConfirm: true,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tnew BX.UI.ApplyButton({\n\t\t\t\t\ttext: Loc.getMessage('INTRANET_INVITE_DIALOG_SELF_CONFIRM_POPUP_CANCEL'),\n\t\t\t\t\tround: true,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick() {\n\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\tonClose: () => {\n\t\t\t\t\tEventEmitter.emit('BX.Intranet.Invitation:onSubmitReady');\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tpopup.show();\n\t}\n\n\ttoggleSettings()\n\t{\n\t\tEventEmitter.emit('BX.Intranet.Invitation:onChangeForm');\n\t\tthis.#page.setButtonState(SubmitButton.ENABLED_STATE);\n\t\tconst controlBlock = this.#container.querySelector(\".js-invite-dialog-fast-reg-control-container\");\n\t\tif (Type.isDomNode(controlBlock))\n\t\t{\n\t\t\tDom.toggleClass(controlBlock, 'disallow-registration');\n\t\t}\n\n\t\tconst settingsBlock = this.#container.querySelector(\"[data-role='selfSettingsBlock']\");\n\t\tif (Type.isDomNode(settingsBlock))\n\t\t{\n\t\t\tDom.style(settingsBlock, 'display', this.switcher.checked ? 'block' : 'none');\n\t\t}\n\t}\n\n\ttoggleWhiteList(inputElement)\n\t{\n\t\tconst selfWhiteList = this.#container.querySelector(\"[data-role='selfWhiteList']\");\n\t\tif (Type.isDomNode(selfWhiteList))\n\t\t{\n\t\t\tDom.style(selfWhiteList, 'display', inputElement.checked ? 'block' : 'none');\n\t\t}\n\t}\n}\n","import { Tag, Loc, Type, Dom } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Analytics } from '../analytics';\nimport DepartmentControl from '../department-control';\nimport { SelfRegister } from '../self-register';\nimport { Transport } from '../transport';\nimport { Page } from './page';\nimport { SubmitButton } from '../submit-button';\n\nexport class LinkPage extends Page\n{\n\t#container: HTMLElement;\n\t#isAdmin: boolean;\n\t#isCloud: boolean;\n\t#fastRegistrationAvailable: boolean;\n\t#needConfirmRegistration: boolean;\n\t#wishlist: string;\n\t#departmentControl: DepartmentControl;\n\n\t#linkRegisterEnabled: boolean;\n\t#analytics: Analytics;\n\t#transport: Transport;\n\t#btnState: string;\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.#isAdmin = options.isAdmin === true;\n\t\tthis.#isCloud = options.isCloud === true;\n\t\tthis.#fastRegistrationAvailable = options.fastRegistrationAvailable === true;\n\t\tthis.#needConfirmRegistration = options.needConfirmRegistration === true;\n\t\tthis.#wishlist = Type.isStringFilled(options.wishlist) ? options.wishlist : '';\n\t\tthis.#departmentControl = options.departmentControl instanceof DepartmentControl ? options.departmentControl : null;\n\t\tthis.#linkRegisterEnabled = options.linkRegisterEnabled;\n\t\tthis.#analytics = options.analytics;\n\t\tthis.#transport = options.transport;\n\t\tthis.#btnState = SubmitButton.DISABLED_STATE;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#container)\n\t\t{\n\t\t\treturn this.#container;\n\t\t}\n\n\t\tthis.#container = Tag.render`\n\t\t\t<div class=\"invite-wrap js-intranet-invitation-block\" data-role=\"self-block\">\n\t\t\t\t<div class=\"invite-title-container\">\n\t\t\t\t\t<div class=\"invite-title-icon invite-title-icon-link\">\n\t\t\t\t\t\t<div class=\"ui-icon-set --link-3\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"invite-title-text\">${Loc.getMessage('INTRANET_INVITE_DIALOG_FAST_REG_TITLE')}</div>\n\t\t\t\t\t<div class=\"invite-title-helper\" onclick=\"top.BX.Helper.show('redirect=detail&code=6546149');\"></div>\n\t\t\t\t</div>\n\t\t\t\t<form method=\"POST\" name=\"SELF_DIALOG_FORM\">\n\t\t\t\t\t${this.#isAdmin ? this.#renderFastRegistrationSwitcher() : ''}\n\t\t\t\t\t<div class=\"invite-content-container --department-bg\">\n\t\t\t\t\t\t<div class=\"invite-form-container\">\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tstyle=\"border-top: none; ${this.#fastRegistrationAvailable ? '' : 'display: none;'}\" \n\t\t\t\t\t\t\t\tdata-role=\"selfSettingsBlock\" \n\t\t\t\t\t\t\t\tid=\"intranet-dialog-tab-content-self-block\" \n\t\t\t\t\t\t\t\tclass=\"invite-dialog-inv-link-block\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div id=\"invitation-department-status\" class=\"invitation-department__status\"></div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t${this.#isAdmin ? '' : this.#renderCopyBtnDescription()}\n\t\t\t\t\t\t\t\t\t<div class=\"intranet-invitation__link-department-control\"></div>\n\t\t\t\t\t\t\t\t\t<div class=\"invite-form-container-reg-row\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"ui-btn ui-btn-primary ui-btn-themes ui-btn-icon-copy invite-form-btn-copy\" data-role=\"copyRegisterUrlButton\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('BX24_INVITE_DIALOG_COPY_LINK')}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t${this.#isAdmin ? this.#renderUpdateLinkBtn() : ''}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t${this.#isAdmin && this.#isCloud ? this.#renderConfirmRegistrationCheckbox() : ''}\n\t\t\t\t\t\t\t\t\t${this.#isCloud ? this.#renderWhiteListField() : ''}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t\t${!this.#isAdmin && !this.#fastRegistrationAvailable ? this.#renderWarningContainer() : ''}\n\t\t\t</div>\n\t\t`;\n\n\t\tDom.prepend(\n\t\t\tthis.#departmentControl.render(),\n\t\t\tthis.#container.querySelector('.intranet-invitation__link-department-control'),\n\t\t);\n\n\t\tnew SelfRegister({\n\t\t\tcontainer: this.#container,\n\t\t\tisSelfRegisterEnabled: this.#linkRegisterEnabled,\n\t\t\tanalytics: this.#analytics,\n\t\t\ttransport: this.#transport,\n\t\t\tdepartmentControl: this.#departmentControl,\n\t\t\tpage: this,\n\t\t});\n\n\t\treturn this.#container;\n\t}\n\n\t#renderCopyBtnDescription(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"invite-form__copy-button-description\">\n\t\t\t\t${Loc.getMessage('INTRANET_INVITE_COPY_BUTTON_DESCRIPTION')}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderUpdateLinkBtn(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<span data-role=\"selfRegenerateSecretButton\">\n\t\t\t\t<a\n\t\t\t\thref=\"javascript:void(0)\"\n\t\t\t\tclass=\"invite-dialog-update-link\"\n\t\t\t\t>\n\t\t\t\t\t${Loc.getMessage('BX24_INVITE_DIALOG_REGISTER_NEW_LINK')}\n\t\t\t\t</a>\n\t\t\t</span>\n\t\t`;\n\t}\n\n\t#renderFastRegistrationSwitcher(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<label class=\"invite-dialog-fast-reg-control-container js-invite-dialog-fast-reg-control-container ${this.#fastRegistrationAvailable ? '' : 'disallow-registration'}\" for=\"allow_register\">\n\t\t\t\t<div class=\"invite-dialog-fast-reg-control-switcher\" data-role=\"self-switcher\"></div>\n\t\t\t\t<span class=\"invite-dialog-fast-reg-control-label\">\n\t\t\t\t\t<div class=\"invite-dialog-fast-reg-control-label-title\">${Loc.getMessage('INTRANET_INVITE_ALLOW_INVITATION_LINK')}</div>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t`;\n\t}\n\n\t#renderConfirmRegistrationCheckbox(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div style=\"padding-top: 12px;\">\n\t\t\t\t<label class=\"ui-ctl ui-ctl-w100 ui-ctl-checkbox invite-form-check-box\">\n\t\t\t\t\t<input\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\tname=\"allow_register_confirm\"\n\t\t\t\t\tid=\"allow_register_confirm\"\n\t\t\t\t\tdata-role=\"allowRegisterConfirm\"\n\t\t\t\t\t${this.#needConfirmRegistration ? 'checked' : ''}\n\t\t\t\t\t${this.#isAdmin ? '' : 'disabled'}\n\t\t\t\t\t/>\n\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage('INTRANET_INVITE_DIALOG_FAST_REG_TYPE')}</div>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderWhiteListField(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t<div id=\"intranet-dialog-tab-content-self-whitelist\" data-role=\"selfWhiteList\" ${this.#needConfirmRegistration ? '' : 'style=\"display: none\"'}>\n\t\t\t<span class=\"invite-form-ctl-title\">\n\t\t\t\t${Loc.getMessage('INTRANET_INVITE_DIALOG_FAST_REG_DOMAINS')}\n\t\t\t</span>\n\t\t\t<label class=\"ui-ctl ui-ctl-w75 ui-ctl-textbox\">\n\t\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\t${this.#isAdmin ? '' : 'disabled'}\n\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\tname=\"allow_register_whitelist\"\n\t\t\t\tvalue=\"${this.#wishlist}\"\n\t\t\t\tplaceholder=\"${Loc.getMessage('BX24_INVITE_DIALOG_REGISTER_TYPE_DOMAINS_PLACEHOLDER')}\"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t</div>\n\t\t`;\n\t}\n\n\t#renderWarningContainer(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"intranet-invitation__error-box\">\n\t\t\t\t<div class=\"intranet-invitation__error-icon\"></div>\n\t\t\t\t<div class=\"intranet-invitation__error-title\">${Loc.getMessage('INTRANET_INVITE_ALERT_INVITATION_LINK_DISABLED')}</div>\n\t\t\t\t<div class=\"intranet-invitation__error-desc\">${Loc.getMessage('INTRANET_INVITE_ALERT_INVITATION_LINK_DISABLED_DESCRIPTION')}</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetAnalyticTab(): string\n\t{\n\t\treturn Analytics.TAB_LINK;\n\t}\n\n\tonSubmit(event: BaseEvent)\n\t{\n\t\tconst formNode = this.render().querySelector('form');\n\t\tconst data = {\n\t\t\tallow_register: formNode.allow_register.value,\n\t\t\tallow_register_confirm: formNode?.allow_register_confirm?.checked ? 'Y' : 'N',\n\t\t\tallow_register_whitelist: formNode?.allow_register_whitelist?.value ?? '',\n\t\t};\n\n\t\tconst context = event.getData()?.context;\n\t\tconst isConfirm = event.getData()?.isConfirm;\n\n\t\tif (formNode.allow_register.value === 'N' && !isConfirm)\n\t\t{\n\t\t\tEventEmitter.emit('BX.Intranet.Invitation:confirmShutdown', {\n\t\t\t\tpage: this,\n\t\t\t\tcontext,\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tEventEmitter.emit(context, 'BX.Intranet.Invitation:onSendData', {\n\t\t\taction: 'self',\n\t\t\tdata,\n\t\t});\n\t}\n\n\tgetSubmitButtonText(): ?string\n\t{\n\t\treturn Loc.getMessage('BX24_INVITE_DIALOG_ACTION_SAVE');\n\t}\n\n\tgetButtonState(): ?string\n\t{\n\t\treturn this.#btnState;\n\t}\n\n\tsetButtonState(state: string): ?string\n\t{\n\t\tthis.#btnState = state;\n\t}\n}\n","import { Loc, Type, Event } from 'main.core';\nimport { InvitationInput, InvitationInputType } from 'intranet.invitation-input';\n\nexport type MassInvitationFieldType = {\n\tplaceholder: string,\n\tuseOnlyPhone: boolean,\n\tsmsAvailable: boolean,\n}\n\nexport default class MassInvitationField\n{\n\t#input: InvitationInput;\n\t#invitationType: InvitationInputType;\n\t#isPhoneEnabled: boolean;\n\t#isEmailEnabled: boolean;\n\n\tconstructor(options: MassInvitationFieldType)\n\t{\n\t\tthis.#invitationType = options.useOnlyPhone\n\t\t\t? InvitationInputType.PHONE\n\t\t\t: (options.smsAvailable ? InvitationInputType.ALL : InvitationInputType.EMAIL);\n\t\tthis.#isPhoneEnabled = [InvitationInputType.ALL, InvitationInputType.PHONE].includes(this.#invitationType);\n\t\tthis.#isEmailEnabled = [InvitationInputType.ALL, InvitationInputType.EMAIL].includes(this.#invitationType);\n\n\t\tthis.#input = new InvitationInput({ inputType: this.#invitationType });\n\t\tthis.#input.getTagSelector().setPlaceholder(\n\t\t\tType.isStringFilled(options.placeholder)\n\t\t\t\t? options.placeholder\n\t\t\t\t: this.#getDialogInputMessage(),\n\t\t);\n\t\tBX.Dom.style(this.#input.getTagSelector().getContainer(), 'height', '103px');\n\t\tBX.Dom.style(this.#input.getTagSelector().getContainer(), 'cursor', 'text');\n\t\tEvent.bind(this.#input.getTagSelector().getContainer(), 'click', () => {\n\t\t\tthis.#input.getTagSelector().focusTextBox();\n\t\t});\n\t}\n\n\t#getDialogInputMessage(): string\n\t{\n\t\tif (this.#isPhoneEnabled && this.#isEmailEnabled)\n\t\t{\n\t\t\treturn Loc.getMessage('INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_INPUT');\n\t\t}\n\t\telse if (this.#isPhoneEnabled)\n\t\t{\n\t\t\treturn Loc.getMessage('INTRANET_INVITE_DIALOG_PHONE_INPUT');\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn Loc.getMessage('INTRANET_INVITE_DIALOG_EMAIL_INPUT');\n\t\t}\n\t}\n\n\trenderTo(node: HTMLElement)\n\t{\n\t\tthis.#input.renderTo(node);\n\t}\n\n\tgetValue(): Object\n\t{\n\t\tconst selector = this.#input.getTagSelector();\n\t\tconst tags = selector.getTags();\n\t\tconst values = [];\n\t\tconst errorElements = [];\n\n\t\ttags.forEach((tag) => {\n\t\t\tif (this.#isPhoneEnabled && tag.getEntityType() === 'phone')\n\t\t\t{\n\t\t\t\tvalues.push(tag.getTitle());\n\t\t\t}\n\t\t\telse if (this.#isEmailEnabled && tag.getEntityType() === 'email')\n\t\t\t{\n\t\t\t\tvalues.push(tag.getTitle());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\terrorElements.push(tag.getTitle());\n\t\t\t}\n\t\t});\n\n\t\treturn { values, errorElements };\n\t}\n}\n","import { Tag, Loc, Event, Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Analytics } from '../analytics';\nimport DepartmentControl from '../department-control';\nimport MassInvitationField from '../mass-invitation-field';\nimport { Page } from './page';\n\nexport class MassPage extends Page\n{\n\t#container: HTMLElement;\n\t#smsAvailable: boolean;\n\t#useOnlyPhone: boolean;\n\t#onClickSwitchMode: function;\n\t#massInvitationField: MassInvitationField;\n\t#departmentControl: DepartmentControl;\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.#smsAvailable = options.smsAvailable === true;\n\t\tthis.#useOnlyPhone = options.useOnlyPhone === true;\n\t\tthis.#onClickSwitchMode = Type.isFunction(options.onClickSwitchMode) ? options.onClickSwitchMode : null;\n\t\tthis.#massInvitationField = new MassInvitationField({\n\t\t\tplaceholder: '',\n\t\t\tuseOnlyPhone: this.#useOnlyPhone,\n\t\t\tsmsAvailable: this.#smsAvailable,\n\t\t});\n\t\tthis.#departmentControl = options.departmentControl instanceof DepartmentControl ? options.departmentControl : null;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#container)\n\t\t{\n\t\t\treturn this.#container;\n\t\t}\n\n\t\tconst helper = Tag.render`\n\t\t\t<div class=\"invite-title-helper\"\n\t\t\t\t data-hint=\"${Loc.getMessage('INTRANET_INVITE_DIALOG_MASS_INVITE_HINT')}\"\n\t\t\t\t data-hint-no-icon\n\t\t\t>\n\t\t\t</div>\n\t\t`;\n\n\t\tconst sufix = this.#useOnlyPhone ? 'PHONE' : (this.#smsAvailable ? 'EMAIL_AND_PHONE' : 'EMAIL');\n\t\tthis.#container = Tag.render`\n\t\t\t<div class=\"invite-wrap js-intranet-invitation-block\" data-role=\"mass-invite-block\">\n\t\t\t\t<div class=\"invite-title-container\">\n\t\t\t\t\t<div class=\"invite-title-icon invite-title-icon-mass\">\n\t\t\t\t\t\t<div class=\"ui-icon-set --person-letter\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"invite-title-text\">${Loc.getMessage('INTRANET_INVITE_DIALOG_MASS_TITLE')}</div>\n\t\t\t\t\t${this.#smsAvailable ? helper : ''}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-content-container\">\n\t\t\t\t\t<div class=\"invite-form-container\">\n\t\t\t\t\t\t<form method=\"POST\" name=\"MASS_INVITE_DIALOG_FORM\" class=\"invite-form-container\">\n\t\t\t\t\t\t\t<div class=\"invite-content__field-lable\">\n\t\t\t\t\t\t\t\t${Loc.getMessage(`INTRANET_INVITE_DIALOG_MASS_TITLE_${sufix}`)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div id=\"invite-content__mass-field\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"invite-form-ctl-description --border-bottom\">\n\t\t\t\t\t\t\t\t<span href=\"javascript:void(0)\"\n\t\t\t\t\t\t\t\t   class=\"invite-content__switch_button swith-email-invitation-mass-mode\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_INVITE_DIALOG_ADD_PERSONAL')}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"invite-form-row\" id=\"intranet-invitation__department-control-palce\"></div>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.#massInvitationField?.renderTo(this.#container.querySelector('#invite-content__mass-field'));\n\t\tthis.#departmentControl.renderTo(this.#container.querySelector('#intranet-invitation__department-control-palce'));\n\n\t\tEvent.bind(\n\t\t\tthis.#container.querySelector('.swith-email-invitation-mass-mode'),\n\t\t\t'click',\n\t\t\tthis.#onClickSwitchMode,\n\t\t);\n\n\t\treturn this.#container;\n\t}\n\n\tgetAnalyticTab(): string\n\t{\n\t\treturn Analytics.TAB_MASS;\n\t}\n\n\tonSubmit(event: BaseEvent): void\n\t{\n\t\tconst { values, errorElements } = this.#massInvitationField.getValue();\n\t\tconst errors = [];\n\n\t\tif (values.length <= 0)\n\t\t{\n\t\t\terrors.push(this.#getEmptyError());\n\t\t}\n\n\t\tif (errorElements.length > 0)\n\t\t{\n\t\t\terrors.push(this.#getValidateError());\n\t\t}\n\n\t\tif (errors.length > 0)\n\t\t{\n\t\t\tEventEmitter.emit(window.invitationForm, 'BX.Intranet.Invitation:onSendData', {\n\t\t\t\terrors,\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst data = {\n\t\t\tITEMS: values.join(' '),\n\t\t\tdepartmentIds: this.#departmentControl.getValues(),\n\t\t\ttab: 'mass',\n\t\t};\n\n\t\tconst analyticsLabel = {\n\t\t\tINVITATION_TYPE: 'mass',\n\t\t};\n\n\t\tconst context = event.getData()?.context;\n\t\tEventEmitter.emit(context, 'BX.Intranet.Invitation:onSendData', {\n\t\t\taction: 'massInvite',\n\t\t\tdata,\n\t\t\tanalyticsLabel,\n\t\t});\n\t}\n\n\t#getEmptyError(): string\n\t{\n\t\tif (this.#useOnlyPhone)\n\t\t{\n\t\t\treturn Loc.getMessage('INTRANET_INVITE_DIALOG_EMPTY_ERROR_PHONE');\n\t\t}\n\t\telse if (this.#smsAvailable)\n\t\t{\n\t\t\treturn Loc.getMessage('INTRANET_INVITE_DIALOG_EMPTY_ERROR_EMAIL_AND_PHONE');\n\t\t}\n\n\t\treturn Loc.getMessage('INTRANET_INVITE_DIALOG_EMPTY_ERROR_EMAIL');\n\t}\n\n\t#getValidateError(): string\n\t{\n\t\tif (this.#useOnlyPhone)\n\t\t{\n\t\t\treturn Loc.getMessage('INTRANET_INVITE_DIALOG_VALIDATE_ERROR_PHONE');\n\t\t}\n\t\telse if (this.#smsAvailable)\n\t\t{\n\t\t\treturn Loc.getMessage('INTRANET_INVITE_DIALOG_VALIDATE_ERROR_EMAIL_AND_PHONE');\n\t\t}\n\n\t\treturn Loc.getMessage('INTRANET_INVITE_DIALOG_VALIDATE_ERROR_EMAIL');\n\t}\n\n\tgetSubmitButtonText(): ?string\n\t{\n\t\treturn Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\t}\n}","import { Tag, Loc } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { TagSelector } from 'ui.entity-selector';\nimport { Analytics } from '../analytics';\nimport DepartmentControl from '../department-control';\nimport { InputRowFactory } from '../input-row-factory';\nimport { Page } from './page';\n\nexport class RegisterPage extends Page\n{\n\t#container: HTMLElement;\n\t#inputsFactory: InputRowFactory;\n\t#isCloud: boolean;\n\t#withoutConfirm: boolean;\n\t#tagSelectorGroup: TagSelector;\n\t#departmentControl: DepartmentControl;\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.#isCloud = options.isCloud === true;\n\t\tthis.#withoutConfirm = options.withoutConfirm === true;\n\t\tthis.#inputsFactory = options.inputsFactory instanceof InputRowFactory ? options.inputsFactory : null;\n\t\tthis.#tagSelectorGroup = options.tagSelectorGroup instanceof TagSelector ? options.tagSelectorGroup : null;\n\t\tthis.#departmentControl = options.departmentControl instanceof DepartmentControl ? options.departmentControl : null;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#container)\n\t\t{\n\t\t\treturn this.#container;\n\t\t}\n\n\t\tthis.#container = Tag.render`\n\t\t\t<div class=\"invite-wrap js-intranet-invitation-block\" data-role=\"add-block\">\n\t\t\t\t<form method=\"POST\" name=\"ADD_DIALOG_FORM\">\n\t\t\t\t\t<div class=\"invite-title-container\">\n\t\t\t\t\t\t<div class=\"invite-title-icon invite-title-icon-registration\">\n\t\t\t\t\t\t\t<div class=\"ui-icon-set --person-plus\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"invite-title-text\">${Loc.getMessage('INTRANET_INVITE_DIALOG_ADD_TITLE')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"invite-content-container\">\n\t\t\t\t\t\t<div class=\"invite-form-container\">\n\t\t\t\t\t\t\t<div data-role=\"rows-container\">\n\t\t\t\t\t\t\t\t${this.#renderFields()}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t\t\t\t\t<div class=\"invite-content__field-lable\">${Loc.getMessage('INTRANET_INVITE_DIALOG_GROUP_INPUT')}</div>\n\t\t\t\t\t\t\t\t\t<div data-role=\"entity-selector-container\"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"invite-form-row\" id=\"intranet-invitation__department-control-palce\"></div>\n\t\t\t\t\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t\t\t\t\t<div class=\"invite-dialog-inv-form-checkbox-wrap\">\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\tname=\"ADD_SEND_PASSWORD\"\n\t\t\t\t\t\t\t\t\t\tid=\"ADD_SEND_PASSWORD\"\n\t\t\t\t\t\t\t\t\t\tvalue=\"Y\"\n\t\t\t\t\t\t\t\t\t\tclass=\"invite-dialog-inv-form-checkbox\"\n\t\t\t\t\t\t\t\t\t\t${this.#withoutConfirm ? 'checked' : ''}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<label class=\"invite-dialog-inv-form-checkbox-label\" for=\"ADD_SEND_PASSWORD\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage(this.#isCloud ? 'BX24_INVITE_DIALOG_ADD_WO_CONFIRMATION_TITLE' : 'BX24_INVITE_DIALOG_ADD_SEND_PASSWORD_TITLE')}\n\t\t\t\t\t\t\t\t\t\t\t${this.#isCloud ? '' : '<span id=\"ADD_SEND_PASSWORD_EMAIL\"></span>'}\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t`;\n\t\tthis.#tagSelectorGroup.renderTo(this.#container.querySelector('[data-role=\"entity-selector-container\"]'));\n\t\tthis.#departmentControl.renderTo(this.#container.querySelector('#intranet-invitation__department-control-palce'));\n\n\t\treturn this.#container;\n\t}\n\n\t#renderFields(): HTMLElement\n\t{\n\t\tconst element = Tag.render`\n\t\t\t<div>\n\t\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t\t<div class=\"invite-content__field-lable\">${Loc.getMessage('BX24_INVITE_DIALOG_ADD_NAME_TITLE')}</div>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<input type=\"text\" name=\"ADD_NAME\" placeholder=\"${Loc.getMessage('INTRANET_INVITE_DIALOG_PLACEHOLDER_NAME')}\" id=\"ADD_NAME\" class=\"ui-ctl-element\">\n\t\t\t\t\t\t\t<button type=\"button\" class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t\t<div class=\"invite-content__field-lable\">${Loc.getMessage('BX24_INVITE_DIALOG_ADD_LAST_NAME_TITLE')}</div>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<input type=\"text\" name=\"ADD_LAST_NAME\" placeholder=\"${Loc.getMessage('INTRANET_INVITE_DIALOG_PLACEHOLDER_LAST_NAME')}\" id=\"ADD_LAST_NAME\" class=\"ui-ctl-element\">\n\t\t\t\t\t\t\t<button type=\"button\" class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t\t<div class=\"invite-content__field-lable\">${Loc.getMessage('BX24_INVITE_DIALOG_ADD_EMAIL_TITLE')}</div>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<input type=\"text\" name=\"ADD_EMAIL\" placeholder=\"${Loc.getMessage('INTRANET_INVITE_DIALOG_PLACEHOLDER_EMAIL')}\" id=\"ADD_EMAIL\" class=\"ui-ctl-element\" maxlength=\"50\">\n\t\t\t\t\t\t\t<button type=\"button\" class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t\t<div class=\"invite-content__field-lable\">${Loc.getMessage('BX24_INVITE_DIALOG_ADD_POSITION_TITLE')}</div>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<input type=\"text\" name=\"ADD_POSITION\" placeholder=\"${Loc.getMessage('INTRANET_INVITE_DIALOG_PLACEHOLDER_POSITION')}\" id=\"ADD_POSITION\" class=\"ui-ctl-element\">\n\t\t\t\t\t\t\t<button type=\"button\" class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t\t</div>\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.#inputsFactory.bindCloseIcons(element);\n\n\t\treturn element;\n\t}\n\n\tgetAnalyticTab(): string\n\t{\n\t\treturn Analytics.TAB_REGISTRATION;\n\t}\n\n\tonSubmit(event: BaseEvent)\n\t{\n\t\tconst addForm = this.render().querySelector('form');\n\n\t\tconst tagSelectorItems = this.#tagSelectorGroup.getDialog().getSelectedItems();\n\t\tconst projectIds = [];\n\t\ttagSelectorItems.forEach((item) => {\n\t\t\tconst id = parseInt(item.getId(), 10);\n\t\t\tprojectIds.push(id);\n\t\t});\n\n\t\tconst data = {\n\t\t\tADD_EMAIL: addForm.ADD_EMAIL.value,\n\t\t\tADD_NAME: addForm.ADD_NAME.value,\n\t\t\tADD_LAST_NAME: addForm.ADD_LAST_NAME.value,\n\t\t\tADD_POSITION: addForm.ADD_POSITION.value,\n\t\t\tADD_SEND_PASSWORD: (\n\t\t\t\taddForm.ADD_SEND_PASSWORD\n\t\t\t\t&& Boolean(addForm.ADD_SEND_PASSWORD.checked)\n\t\t\t\t\t? addForm.ADD_SEND_PASSWORD.value\n\t\t\t\t\t: 'N'\n\t\t\t),\n\t\t\tdepartmentIds: this.#departmentControl.getValues(),\n\t\t\tSONET_GROUPS_CODE: projectIds,\n\t\t};\n\n\t\tconst analyticsLabel = {\n\t\t\tINVITATION_TYPE: 'add',\n\t\t};\n\n\t\tconst context = event.getData()?.context;\n\t\tEventEmitter.emit(context, 'BX.Intranet.Invitation:onSendData', {\n\t\t\taction: 'add',\n\t\t\tdata,\n\t\t\tanalyticsLabel,\n\t\t});\n\t}\n\n\tgetSubmitButtonText(): ?string\n\t{\n\t\treturn Loc.getMessage('BX24_INVITE_DIALOG_ACTION_ADD');\n\t}\n}","import { Tag, Loc } from 'main.core';\nimport { Page } from './page';\n\nexport class SuccessPage extends Page\n{\n\t#container: HTMLElement;\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#container)\n\t\t{\n\t\t\treturn this.#container;\n\t\t}\n\n\t\tthis.#container = Tag.render`\n\t\t\t<div class=\"invite-wrap js-intranet-invitation-block\" data-role=\"success-block\" style=\"position: fixed; left: 0; right: 0; top: 0; bottom: 0; background: #fff; z-index: 90;\">\n\t\t\t\t<div style=\"height: 78vh;\" class=\"invite-send-success-wrap\">\n\t\t\t\t\t<div class=\"invite-send-success-text\">${Loc.getMessage('INTRANET_INVITE_DIALOG_SUCCESS_SEND')}</div>\n\t\t\t\t\t<div class=\"invite-send-success-decal-1\"></div>\n\t\t\t\t\t<div class=\"invite-send-success-decal-2\"></div>\n\t\t\t\t\t<div class=\"invite-send-success-decal-3\"></div>\n\t\t\t\t\t<div class=\"invite-send-success-decal-4\"></div>\n\t\t\t\t\t<div class=\"invite-send-success-decal-5\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.#container;\n\t}\n\n\tgetAnalyticTab(): ?string\n\t{\n\t\treturn null;\n\t}\n\n\tonSubmit(event: BaseEvent)\n\t{\n\t\tevent.getData()?.context?.submitButton.enable();\n\t\tevent.getData()?.context?.submitButton.ready();\n\t\tevent.getData()?.context?.changeContent(event.getData()?.context?.firstInvitationBlock);\n\t\tevent.getData()?.context?.activeMenuItem(event.getData()?.context?.firstInvitationBlock);\n\t}\n\n\tgetSubmitButtonText(): ?string\n\t{\n\t\treturn Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE_MORE');\n\t}\n}","import { LocalEmailPage } from './page/local-email-page';\nimport { Selector } from './selector';\nimport { EmailPage } from './page/email-page';\nimport { ExtranetPage } from './page/extranet-page';\nimport { GroupPage } from './page/group-page';\nimport { IntegratorPage } from './page/integrator-page';\nimport { LinkPage } from './page/link-page';\nimport { MassPage } from './page/mass-page';\nimport { RegisterPage } from './page/register-page';\nimport { SuccessPage } from './page/success-page';\n\nexport class PageFactory\n{\n\tcreateLocalEmailPage(): LocalEmailPage\n\t{\n\t\treturn new LocalEmailPage({\n\t\t\tdepartmentControl: this.createDepartmentControl(),\n\t\t\ttransport: this.transport,\n\t\t\tlinkRegisterEnabled: this.isSelfRegisterEnabled,\n\t\t\tanalytics: this.analytics,\n\t\t});\n\t}\n\n\tcreateEmailPage(): EmailPage\n\t{\n\t\treturn new EmailPage({\n\t\t\tdepartmentControl: this.createDepartmentControl(),\n\t\t\tinputsFactory: this.createInputRowFactory(this.useLocalEmailProgram),\n\t\t\tsmsAvailable: this.isInvitationBySmsAvailable,\n\t\t\tuseLocalEmailProgram: this.useLocalEmailProgram,\n\t\t\tonClickSwitchMode: () => {\n\t\t\t\tthis.changeContent('mass-invite');\n\t\t\t},\n\t\t\tonClickAddInputRow: () => {\n\t\t\t\tthis.getSetupArrow();\n\t\t\t\tthis.updateArrow();\n\t\t\t},\n\t\t});\n\t}\n\n\tcreateGroupPage(): GroupPage\n\t{\n\t\tconst projectId = this.userOptions?.groupId\n\t\t\t? parseInt(this.userOptions.groupId, 10)\n\t\t\t: 0;\n\n\t\tconst intranetSelector = new Selector({\n\t\t\toptions: {\n\t\t\t\tproject: true,\n\t\t\t\tprojectId,\n\t\t\t\tisAdmin: this.isAdmin,\n\t\t\t\tprojectLimitExceeded: this.projectLimitExceeded,\n\t\t\t\tprojectLimitFeatureId: this.projectLimitFeatureId,\n\t\t\t},\n\t\t});\n\n\t\treturn new GroupPage({\n\t\t\tdepartmentControl: this.createDepartmentControl(),\n\t\t\tinputsFactory: this.createInputRowFactory(),\n\t\t\ttagSelectorGroup: intranetSelector.renderTagSelector(),\n\t\t\tonClickAddInputRow: () => {\n\t\t\t\tthis.getSetupArrow();\n\t\t\t\tthis.updateArrow();\n\t\t\t},\n\t\t});\n\t}\n\n\tcreateExtranetPage(): ExtranetPage\n\t{\n\t\tconst projectId = this.userOptions?.groupId\n\t\t\t? parseInt(this.userOptions.groupId, 10)\n\t\t\t: 0;\n\n\t\tconst selectorParams = {\n\t\t\toptions: {\n\t\t\t\tproject: 'extranet',\n\t\t\t\tprojectId,\n\t\t\t\tisAdmin: this.isAdmin,\n\t\t\t\tprojectLimitExceeded: this.projectLimitExceeded,\n\t\t\t\tprojectLimitFeatureId: this.projectLimitFeatureId,\n\t\t\t\tshowCreateButton: !this.isCollabEnabled,\n\t\t\t},\n\t\t};\n\n\t\treturn new ExtranetPage({\n\t\t\tinputsFactory: this.createInputRowFactory(),\n\t\t\ttagSelectorGroup: (new Selector(selectorParams)).renderTagSelector(),\n\t\t\tonClickAddInputRow: () => {\n\t\t\t\tthis.getSetupArrow();\n\t\t\t\tthis.updateArrow();\n\t\t\t},\n\t\t});\n\t}\n\n\tcreateRegisterPage(): RegisterPage\n\t{\n\t\tconst projectId = this.userOptions?.groupId\n\t\t\t? parseInt(this.userOptions.groupId, 10)\n\t\t\t: 0;\n\n\t\tconst intranetSelector = new Selector({\n\t\t\toptions: {\n\t\t\t\tproject: true,\n\t\t\t\tprojectId,\n\t\t\t\tisAdmin: this.isAdmin,\n\t\t\t\tprojectLimitExceeded: this.projectLimitExceeded,\n\t\t\t\tprojectLimitFeatureId: this.projectLimitFeatureId,\n\t\t\t},\n\t\t});\n\n\t\treturn new RegisterPage({\n\t\t\tdepartmentControl: this.createDepartmentControl(),\n\t\t\tisCloud: this.isCloud,\n\t\t\tinputsFactory: this.createInputRowFactory(),\n\t\t\twithoutConfirm: !this.registerNeedeConfirm,\n\t\t\ttagSelectorGroup: intranetSelector.renderTagSelector(),\n\t\t});\n\t}\n\n\tcreateIntegratorPage(): IntegratorPage\n\t{\n\t\treturn new IntegratorPage();\n\t}\n\n\tcreateLinkPage(): LinkPage\n\t{\n\t\treturn new LinkPage({\n\t\t\tdepartmentControl: this.createDepartmentControl(),\n\t\t\tisAdmin: this.isAdmin,\n\t\t\tfastRegistrationAvailable: this.isSelfRegisterEnabled,\n\t\t\tneedConfirmRegistration: this.registerNeedeConfirm,\n\t\t\twishlist: this.wishlistValue,\n\t\t\tisCloud: this.isCloud,\n\t\t\tlinkRegisterEnabled: this.isSelfRegisterEnabled,\n\t\t\tanalytics: this.analytics,\n\t\t\ttransport: this.transport,\n\t\t});\n\t}\n\n\tcreateMassPage(): MassPage\n\t{\n\t\treturn new MassPage({\n\t\t\tdepartmentControl: this.createDepartmentControl(),\n\t\t\tsmsAvailable: this.isInvitationBySmsAvailable,\n\t\t\tuseOnlyPhone: this.useLocalEmailProgram,\n\t\t\tonClickSwitchMode: () => {\n\t\t\t\tthis.changeContent('invite');\n\t\t\t},\n\t\t});\n\t}\n\n\tcreateSeccessPage(): SuccessPage\n\t{\n\t\treturn new SuccessPage();\n\t}\n}\n","import { PageFactory } from './page-factory';\n\nexport class PageProvider\n{\n\tprovide(): Map\n\t{\n\t\tconst pageFactory = new PageFactory();\n\n\t\tconst pages = new Map();\n\t\tif (this.canCurrentUserInvite)\n\t\t{\n\t\t\tif (this.useLocalEmailProgram)\n\t\t\t{\n\t\t\t\tpages.set('invite-email', pageFactory.createLocalEmailPage.call(this));\n\t\t\t}\n\n\t\t\tpages.set('invite', pageFactory.createEmailPage.call(this));\n\t\t\tpages.set('mass-invite', pageFactory.createMassPage.call(this));\n\t\t\tpages.set('invite-with-group-dp', pageFactory.createGroupPage.call(this));\n\t\t\tpages.set('add', pageFactory.createRegisterPage.call(this));\n\t\t\tpages.set('self', pageFactory.createLinkPage.call(this));\n\t\t}\n\n\t\tif (this.isExtranetInstalled)\n\t\t{\n\t\t\tpages.set('extranet', pageFactory.createExtranetPage.call(this));\n\t\t}\n\n\t\tif (this.isCloud && this.canCurrentUserInvite)\n\t\t{\n\t\t\tpages.set('integrator', pageFactory.createIntegratorPage.call(this));\n\t\t}\n\n\t\tpages.set('success', pageFactory.createSeccessPage.call(this));\n\n\t\treturn pages;\n\t}\n}\n","export class ActiveDirectory\n{\n\tshowForm()\n\t{\n\t\tBX.UI.Feedback.Form.open(\n\t\t\t{\n\t\t\t\tid: 'intranet-active-directory',\n\t\t\t\tdefaultForm: { id: 309, sec: 'fbc0n3' },\n\t\t\t},\n\t\t);\n\t}\n}\n","import { Type, Dom, Event, Loc } from 'main.core';\nimport DepartmentControl from './department-control';\nimport { InputRowFactory, InputRowType } from './input-row-factory';\nimport { MessageBar } from './message-bar';\nimport { Navigation } from './navigation';\nimport { PageProvider } from './page-provider';\nimport { LinkPage } from './page/link-page';\nimport { SubmitButton } from './submit-button';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\nimport { ActiveDirectory } from './active-directory';\nimport { Analytics } from './analytics';\nimport { Transport } from './transport';\n\nexport default class Form extends EventEmitter\n{\n\tconstructor(formParams)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Intranet.Invitation');\n\t\tconst params = Type.isPlainObject(formParams) ? formParams : {};\n\t\tthis.menuContainer = params.menuContainerNode;\n\t\tthis.subMenuContainer = params.subMenuContainerNode;\n\t\tthis.contentContainer = params.contentContainerNode;\n\t\tthis.pageContainer = this.contentContainer.querySelector('.popup-window-tabs-content-invite');\n\t\tthis.userOptions = params.userOptions;\n\t\tthis.isExtranetInstalled = params.isExtranetInstalled === 'Y';\n\t\tthis.isCloud = params.isCloud === 'Y';\n\t\tthis.isAdmin = params.isAdmin === 'Y';\n\t\tthis.canCurrentUserInvite = params.canCurrentUserInvite === true;\n\t\tthis.isInvitationBySmsAvailable = params.isInvitationBySmsAvailable === 'Y';\n\t\tthis.isCreatorEmailConfirmed = params.isCreatorEmailConfirmed === 'Y';\n\t\tthis.firstInvitationBlock = params.firstInvitationBlock;\n\t\tthis.isSelfRegisterEnabled = params.isSelfRegisterEnabled;\n\t\tthis.analyticsLabel = params.analyticsLabel;\n\t\tthis.projectLimitExceeded = Type.isBoolean(params.projectLimitExceeded) ? params.projectLimitExceeded : true;\n\t\tthis.projectLimitFeatureId = Type.isString(params.projectLimitFeatureId) ? params.projectLimitFeatureId : '';\n\t\tthis.wishlistValue = Type.isStringFilled(params.wishlistValue) ? params.wishlistValue : '';\n\t\tthis.isCollabEnabled = params.isCollabEnabled === 'Y';\n\t\tthis.registerNeedeConfirm = params.registerConfirm === true;\n\t\tthis.useLocalEmailProgram = params.useLocalEmailProgram === true;\n\t\tthis.transport = new Transport({\n\t\t\tcomponentName: params.componentName,\n\t\t\tsignedParameters: params.signedParameters,\n\t\t});\n\n\t\tif (Type.isDomNode(this.contentContainer))\n\t\t{\n\t\t\tthis.messageBar = new MessageBar({\n\t\t\t\terrorContainer: this.contentContainer.querySelector(\"[data-role='error-message']\"),\n\t\t\t\tsuccessContainer: this.contentContainer.querySelector(\"[data-role='success-message']\"),\n\t\t\t});\n\n\t\t\tBX.UI.Hint.init(this.contentContainer);\n\t\t}\n\n\t\tif (Type.isDomNode(this.menuContainer))\n\t\t{\n\t\t\tthis.#initMenu();\n\t\t}\n\n\t\tthis.submitButton = new SubmitButton({\n\t\t\tnode: document.querySelector('#intranet-invitation-btn'),\n\t\t\tevents: {\n\t\t\t\tclick: (event) => {\n\t\t\t\t\tif (!this.isCreatorEmailConfirmed)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.messageBar.showError(Loc.getMessage('INTRANET_INVITE_DIALOG_CONFIRM_CREATOR_EMAIL_ERROR'));\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!this.submitButton.isWaiting() && this.submitButton.isEnabled())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.submitButton.wait();\n\t\t\t\t\t\tEventEmitter.emit(this.navigation.current(), 'BX.Intranet.Invitation:submit', {\n\t\t\t\t\t\t\tcontext: this,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (this.isCloud)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.userOptions.del('intranet.invitation', 'open_invitation_form_ts');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tthis.analytics = new Analytics(this.analyticsLabel, this.isAdmin);\n\t\tthis.analytics.sendOpenSliderData(this.analyticsLabel.source);\n\n\t\tthis.arrowBox = document.querySelector('.invite-wrap-decal-arrow');\n\t\tif (Type.isDomNode(this.arrowBox))\n\t\t{\n\t\t\tthis.arrowRect = this.arrowBox.getBoundingClientRect();\n\t\t\tthis.arrowHeight = this.arrowRect.height;\n\t\t\tthis.setSetupArrow();\n\t\t}\n\n\t\tEventEmitter.subscribe('BX.Intranet.Invitation:onChangeForm', () => {\n\t\t\tthis.submitButton.enable();\n\t\t});\n\n\t\tthis.navigation = this.createNavigation();\n\t\tthis.navigation?.subscribe('onBeforeChangePage', () => {\n\t\t\tthis.messageBar.hideAll();\n\t\t});\n\t\tthis.navigation?.subscribe('onAfterChangePage', this.onAfterChangePage.bind(this));\n\n\t\tthis.navigation.showFirst();\n\n\t\tthis.subscribe('BX.Intranet.Invitation:onSendData', this.onSendRequest.bind(this));\n\n\t\tEventEmitter.subscribe('BX.Intranet.Invitation:onSubmitReady', () => {\n\t\t\tthis.submitButton.ready();\n\t\t});\n\n\t\tEventEmitter.subscribe('BX.Intranet.Invitation:onSubmitDisabled', () => {\n\t\t\tthis.submitButton.disable();\n\t\t});\n\n\t\tEventEmitter.subscribe('BX.Intranet.Invitation:onSubmitWait', () => {\n\t\t\tthis.submitButton.wait();\n\t\t});\n\t}\n\n\tonAfterChangePage(event: BaseEvent)\n\t{\n\t\tconst section = this.getSubSection();\n\t\tconst page = event.getData().current;\n\t\tlet subSection = null;\n\t\tif (page)\n\t\t{\n\t\t\tsubSection = page.getAnalyticTab();\n\t\t\tif (page.getSubmitButtonText())\n\t\t\t{\n\t\t\t\tthis.submitButton.setLabel(page.getSubmitButtonText());\n\t\t\t}\n\n\t\t\tif (page.getButtonState() === SubmitButton.ENABLED_STATE)\n\t\t\t{\n\t\t\t\tthis.submitButton.enable();\n\t\t\t}\n\t\t\telse if (page.getButtonState() === SubmitButton.DISABLED_STATE)\n\t\t\t{\n\t\t\t\tthis.submitButton.disable();\n\t\t\t}\n\t\t}\n\n\t\tif (this.analytics && section && subSection)\n\t\t{\n\t\t\tthis.analytics.sendTabData(section, subSection);\n\t\t}\n\t}\n\n\tgetSubSection(): string\n\t{\n\t\tconst regex = /analyticsLabel\\[source]=(\\w*)&/gm;\n\t\tconst match = regex.exec(decodeURI(window.location));\n\t\tif (match?.length > 1)\n\t\t{\n\t\t\treturn match[1];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t#initMenu()\n\t{\n\t\tthis.menuItems = Array.prototype.slice.call(this.menuContainer.querySelectorAll('a'));\n\t\tif (Type.isDomNode(this.subMenuContainer))\n\t\t{\n\t\t\tconst subMenuItem = Array.prototype.slice.call(this.subMenuContainer.querySelectorAll('a'));\n\n\t\t\tthis.menuItems = [...this.menuItems, ...subMenuItem];\n\t\t}\n\n\t\t(this.menuItems || []).forEach((item) => {\n\t\t\tEvent.bind(item, 'click', () => {\n\t\t\t\tthis.changeContent(item.getAttribute('data-action'));\n\t\t\t\tthis.activeMenuItem(this.navigation.getCurrentCode());\n\t\t\t});\n\n\t\t\tif (item.getAttribute('data-action') === this.firstInvitationBlock)\n\t\t\t{\n\t\t\t\tDom.addClass(item.parentElement, 'ui-sidepanel-menu-active');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(item.parentElement, 'ui-sidepanel-menu-active');\n\t\t\t}\n\t\t});\n\t}\n\n\tactiveMenuItem(itemType: string)\n\t{\n\t\t(this.menuItems || []).forEach((item) => {\n\t\t\tDom.removeClass(item.parentElement, 'ui-sidepanel-menu-active');\n\t\t\tif (item.getAttribute('data-action') === itemType)\n\t\t\t{\n\t\t\t\tDom.addClass(item.parentElement, 'ui-sidepanel-menu-active');\n\t\t\t}\n\t\t});\n\t}\n\n\tchangeContent(action)\n\t{\n\t\tif (!Type.isStringFilled(action))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (action === 'active-directory')\n\t\t{\n\t\t\tif (!this.activeDirectory)\n\t\t\t{\n\t\t\t\tthis.activeDirectory = new ActiveDirectory(this);\n\t\t\t}\n\n\t\t\tthis.activeDirectory.showForm();\n\t\t\tthis.analytics.sendTabData(this.getSubSection(), Analytics.TAB_AD);\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.navigation.show(action);\n\t}\n\n\tcreateNavigation(): Navigation\n\t{\n\t\treturn new Navigation({\n\t\t\tcontainer: this.pageContainer,\n\t\t\tfirst: this.firstInvitationBlock,\n\t\t\tpages: (new PageProvider()).provide.call(this),\n\t\t});\n\t}\n\n\tonSendRequest(event: BaseEvent)\n\t{\n\t\tthis.submitButton.disable();\n\t\tconst request = event.getData();\n\t\tthis.messageBar.hideAll();\n\t\tif (Type.isArray(request.errors) && request.errors.length > 0)\n\t\t{\n\t\t\tthis.submitButton.enable();\n\t\t\tthis.submitButton.ready();\n\t\t\tthis.messageBar.showError(request.errors[0]);\n\n\t\t\treturn;\n\t\t}\n\n\t\trequest.userOptions = this.userOptions;\n\t\trequest.analyticsData = this.analyticsLabel;\n\t\t// eslint-disable-next-line promise/catch-or-return\n\t\tthis.transport.send(request).then((response) => {\n\t\t\tthis.submitButton.ready();\n\n\t\t\tif (response.data)\n\t\t\t{\n\t\t\t\tif (request?.action === 'self')\n\t\t\t\t{\n\t\t\t\t\tthis.messageBar.showSuccess(response.data);\n\t\t\t\t\tthis.isSelfRegisterEnabled = request.data.allow_register === 'Y';\n\t\t\t\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'BX.Intranet.Invitation:selfChange', {\n\t\t\t\t\t\tselfEnabled: this.isSelfRegisterEnabled,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse if (this.useLocalEmailProgram && request?.action === 'invite' && request?.type === 'invite-email')\n\t\t\t\t{\n\t\t\t\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'BX.Intranet.Invitation:InviteSuccess');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.changeContent('success');\n\t\t\t\t\tthis.submitButton.sendSuccessEvent(response.data);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\t'SidePanel.Slider:onClose',\n\t\t\t\t() => {\n\t\t\t\t\tBX.SidePanel.Instance.postMessageTop(window, 'BX.Bitrix24.EmailConfirmation:showPopup');\n\t\t\t\t},\n\t\t\t);\n\t\t}, (response) => {\n\t\t\tthis.submitButton.enable();\n\t\t\tthis.submitButton.ready();\n\n\t\t\tif (response.data === 'user_limit')\n\t\t\t{\n\t\t\t\t// eslint-disable-next-line no-undef\n\t\t\t\tB24.licenseInfoPopup.show(\n\t\t\t\t\t'featureID',\n\t\t\t\t\tLoc.getMessage('BX24_INVITE_DIALOG_USERS_LIMIT_TITLE'),\n\t\t\t\t\tLoc.getMessage('BX24_INVITE_DIALOG_USERS_LIMIT_TEXT'),\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.messageBar.showError(response.errors[0].message);\n\t\t\t}\n\n\t\t\tif (request?.action === 'invite' && this.useLocalEmailProgram && request?.type === 'invite-email')\n\t\t\t{\n\t\t\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'BX.Intranet.Invitation:InviteFailed');\n\t\t\t}\n\t\t});\n\t}\n\n\tcreateDepartmentControl(): DepartmentControl\n\t{\n\t\tconst departmentsId = Type.isArray(this.userOptions?.departmentList)\n\t\t\t? this.userOptions.departmentList\n\t\t\t: [];\n\t\tconst rootDepartment = this.userOptions?.rootDepartment;\n\n\t\treturn new DepartmentControl({\n\t\t\tdepartmentList: departmentsId,\n\t\t\trootDepartment: Type.isObject(rootDepartment) ? rootDepartment : null,\n\t\t});\n\t}\n\n\tcreateInputRowFactory(useOnlyPhone: boolean = false): InputRowFactory\n\t{\n\t\tconst inputRowType = useOnlyPhone\n\t\t\t? InputRowType.PHONE\n\t\t\t: (this.isInvitationBySmsAvailable ? InputRowType.ALL : InputRowType.EMAIL);\n\n\t\treturn new InputRowFactory({\n\t\t\tinputRowType,\n\t\t});\n\t}\n\n\tgetSetupArrow()\n\t{\n\t\tthis.body = document.querySelector('.invite-body');\n\t\tthis.panelConfirmBtn = document.getElementById('intranet-invitation-btn');\n\t\tthis.sliderContent = document.querySelector('.ui-page-slider-workarea');\n\t\tthis.sliderHeader = document.querySelector('.ui-side-panel-wrap-title-wrap');\n\t\tthis.buttonPanel = document.querySelector('.ui-button-panel');\n\n\t\tthis.sliderHeaderHeight = this.sliderHeader.getBoundingClientRect().height;\n\t\tthis.buttonPanelRect = this.buttonPanel.getBoundingClientRect();\n\t\tthis.panelRect = this.panelConfirmBtn.getBoundingClientRect();\n\t\tthis.btnWidth = Math.ceil(this.panelRect.width);\n\t\tthis.arrowWidth = Math.ceil(this.arrowRect.width);\n\t\tthis.sliderContentRect = this.sliderContent.getBoundingClientRect();\n\n\t\tthis.bodyHeight = this.body.getBoundingClientRect().height - this.buttonPanelRect.height + this.sliderHeaderHeight;\n\t\tthis.contentHeight = this.arrowHeight\n\t\t\t+ this.sliderContentRect.height\n\t\t\t+ this.buttonPanelRect.height\n\t\t\t+ this.sliderHeaderHeight\n\t\t\t- 65;\n\t}\n\n\tupdateArrow()\n\t{\n\t\tthis.bodyHeight = this.body.getBoundingClientRect().height - this.buttonPanelRect.height + this.sliderHeaderHeight;\n\t\tthis.contentHeight = this.arrowHeight\n\t\t\t+ this.sliderContentRect.height\n\t\t\t+ this.buttonPanelRect.height\n\t\t\t+ this.sliderHeaderHeight - 65;\n\t\t// eslint-disable-next-line no-unused-expressions\n\t\tthis.contentHeight > this.bodyHeight\n\t\t\t? Dom.addClass(this.body, 'js-intranet-invitation-arrow-hide')\n\t\t\t: Dom.removeClass(this.body, 'js-intranet-invitation-arrow-hide');\n\t}\n\n\tsetSetupArrow()\n\t{\n\t\tthis.getSetupArrow();\n\t\tconst btnPadding = 40;\n\t\tDom.style(\n\t\t\tthis.arrowBox,\n\t\t\t'left',\n\t\t\t`${this.panelRect.left + (this.btnWidth / 2) - (this.arrowWidth / 2) - btnPadding}px`,\n\t\t);\n\t\t// eslint-disable-next-line no-unused-expressions\n\t\tthis.contentHeight > this.bodyHeight\n\t\t\t? Dom.addClass(this.body, 'js-intranet-invitation-arrow-hide')\n\t\t\t: Dom.removeClass(this.body, 'js-intranet-invitation-arrow-hide');\n\n\t\tEvent.bind(window, 'resize', () => {\n\t\t\tif (window.innerWidth <= 1100)\n\t\t\t{\n\t\t\t\tDom.style(\n\t\t\t\t\tthis.arrowBox,\n\t\t\t\t\t'left',\n\t\t\t\t\t`${this.panelRect.left + (this.btnWidth / 2) - (this.arrowWidth / 2) - btnPadding}px`,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.getSetupArrow();\n\t\t\tthis.updateArrow();\n\t\t});\n\t}\n}\n"],"names":["DepartmentControl","constructor","options","Type","isNil","rootDepartment","items","departmentList","map","department","isRootDepartment","parseInt","id","avatar","entityId","title","name","customData","accessCode","tagOptions","bgColor","textColor","fontWeight","TagSelector","events","onBeforeTagRemove","event","selector","getTarget","tag","getData","getTags","length","preventDefault","dialogOptions","context","width","enableSearch","multiple","entities","selectMode","restricted","dialog","selectedItems","getSelectedItems","item","getItem","select","renderTo","container","Dom","append","render","getValues","tagSelectorItems","getDialog","collection","forEach","departmentId","push","Tag","Loc","getMessage","description","fieldContainer","itemId","rootId","Phone","count","index","maxCount","inputStack","renderPhoneRow","inputNode","isDomNode","num","getAttribute","parentNode","querySelector","element","style","paddingLeft","flagNode","Event","bind","showCountrySelector","changeCallback","i","e","value","country","BX","PhoneNumber","Input","node","flagSize","onChange","setInterval","getValue","formatter","getCountry","clearInterval","_onFlagClick","InputRowType","Object","freeze","PHONE","EMAIL","ALL","InputRowFactory","params","inputNum","inputRowType","includes","phoneObj","bindCloseIcons","inputNodes","Array","prototype","slice","call","querySelectorAll","closeIcon","nextElementSibling","renderInputRowTo","target","showTitles","renderEmailInputsRow","renderInputRowsTo","fieldTitle","nameTitle","lastNameTitle","parseEmailAndPhone","form","errorInputData","phoneExp","rows","row","emailInput","phoneInput","nameInput","lastNameInput","emailValue","trim","phoneValue","test","String","toLowerCase","phoneCountryInput","PHONE_COUNTRY","NAME","LAST_NAME","Validation","isEmail","focus","phoneFlagBlock","remove","phoneBlock","newInput","placeholder","replace","MessageBar","errorContainer","successContainer","hideAll","showError","message","isStringFilled","clean","showSuccess","text","util","htmlspecialchars","SubmitButton","EventEmitter","setEventNamespace","unbindAll","isFunction","click","wait","isWaiting","hasClass","ready","disable","addClass","enable","removeClass","isEnabled","setLabel","lable","innerText","sendSuccessEvent","users","SidePanel","Instance","postMessageAll","window","isDisable","isBoolean","ENABLED_STATE","DISABLED_STATE","Page","subscribe","onSubmit","HTMLElement","getSubmitButtonText","getButtonState","Navigation","isMap","pages","Map","filter","k","page","first","has","next","show","code","get","emit","current","new","previous","prev","showFirst","getCurrentCode","add","set","delete","Analytics","cSection","isAdmin","send","sendData","tool","TOOLS","category","CATEGORY_INVITATION","EVENT_COPY","c_section","p1","p2","sendTabData","section","subSection","EVENT_TAB_VIEW","c_sub_section","sendOpenSliderData","EVENT_OPEN_SLIDER_INVITATION","sendOpenLocalEmailPopup","TAB_EMAIL","sendLocalEmailProgram","EVENT_LOCAL_MAIL","document","checked","ADMIN_ALLOW_MODE_Y","ADMIN_ALLOW_MODE_N","IS_ADMIN_Y","IS_ADMIN_N","source","TOOLS_HEADER","TAB_MASS","TAB_DEPARTMENT","TAB_INTEGRATOR","TAB_LINK","TAB_REGISTRATION","TAB_EXTRANET","TAB_AD","TAB_LOCAL_EMAIL","TAB_PHONE","Transport","componentName","signedParameters","request","ajax","runComponentAction","action","mode","method","data","analyticsLabel","EmailInvitationInput","InvitationInput","inputType","InvitationInputType","getTagSelector","setPlaceholder","getContainer","focusTextBox","clearTags","onReadySaveInputHandler","callback","unsubscribe","onUnreadySaveInputHandler","getContent","actionBlock","removeTags","tags","emails","errorElements","getEntityType","getTitle","InviteEmailPopup","input","close","PopupManager","create","className","autoHide","closeByEsc","height","setContent","setState","ButtonState","DISABLED","submitData","Button","state","size","Size","SMALL","color","Color","PRIMARY","noCaps","onclick","isDisabled","CancelButton","InviteEmailHandler","transport","linkRegisterEnabled","departmentControl","analytics","selfEnabled","departmentsId","toString","then","response","invitationUrl","invitationLink","subject","encodeURIComponent","body","location","errors","invitationForm","invitations","departmentIds","tab","INVITATION_TYPE","INVITATION_COUNT","type","isSuccess","notificationOptions","closeButton","autoHideDelay","content","notify","UI","Notification","Center","activateAutoHide","link","top","LocalEmailPage","getAnalyticTab","topBlock","block","Selector","tagSelector","renderTagSelector","preselectedItems","projectId","getItems","departments","projects","getId","getEntityId","hasOwnProperty","fillRecentTab","createProjectLink","showCreateButton","lockProjectLink","projectLimitExceeded","lockProjectLinkFeatureId","projectLimitFeatureId","optionValue","EmailPage","inputsFactory","smsAvailable","useLocalEmailProgram","onClickSwitchMode","onClickAddInputRow","formNode","join","suffix","moreButton","switchBtn","ExtranetPage","tagSelectorGroup","projectIds","workgroupIds","GroupPage","IntegratorPage","integrator_email","moreLink","Helper","popup","Popup","maxWidth","overlay","contentPadding","titleBar","offsetLeft","buttons","CreateButton","onClose","destroy","SelfRegister","isSelfRegisterEnabled","bindActions","switcherNode","switcher","Switcher","inputName","SwitcherSize","small","handlers","toggled","toggleSettings","generateLinkBtnNode","generateLinkHint","showHintPopup","showNotificationPopup","regenerateButton","regenerateSecret","copyRegisterUrlButton","copyRegisterUrl","allowRegisterConfirm","setButtonState","toggleWhiteList","selfWhiteList","allow_register_secret","Text","getRandom","copyBtnNode","copyToClipboard","r","catch","console","log","textToCopy","isString","Promise","reject","isSecureContext","navigator","clipboard","resolve","setTimeout","writeText","copy","bindNode","PopupWindow","zIndex","angle","offsetTop","darkMode","onAfterPopupShow","round","isConfirm","ApplyButton","controlBlock","toggleClass","settingsBlock","inputElement","LinkPage","isCloud","fastRegistrationAvailable","needConfirmRegistration","wishlist","prepend","allow_register","allow_register_confirm","allow_register_whitelist","MassInvitationField","useOnlyPhone","values","MassPage","helper","sufix","ITEMS","RegisterPage","withoutConfirm","addForm","ADD_EMAIL","ADD_NAME","ADD_LAST_NAME","ADD_POSITION","ADD_SEND_PASSWORD","Boolean","SONET_GROUPS_CODE","SuccessPage","submitButton","changeContent","firstInvitationBlock","activeMenuItem","PageFactory","createLocalEmailPage","createDepartmentControl","createEmailPage","createInputRowFactory","isInvitationBySmsAvailable","getSetupArrow","updateArrow","createGroupPage","userOptions","groupId","intranetSelector","project","createExtranetPage","selectorParams","isCollabEnabled","createRegisterPage","registerNeedeConfirm","createIntegratorPage","createLinkPage","wishlistValue","createMassPage","createSeccessPage","PageProvider","provide","pageFactory","canCurrentUserInvite","isExtranetInstalled","ActiveDirectory","showForm","Feedback","Form","open","defaultForm","sec","formParams","isPlainObject","menuContainer","menuContainerNode","subMenuContainer","subMenuContainerNode","contentContainer","contentContainerNode","pageContainer","isCreatorEmailConfirmed","registerConfirm","messageBar","Hint","init","navigation","del","arrowBox","arrowRect","getBoundingClientRect","arrowHeight","setSetupArrow","createNavigation","onAfterChangePage","onSendRequest","getSubSection","regex","match","exec","decodeURI","itemType","menuItems","parentElement","activeDirectory","isArray","analyticsData","GLOBAL_TARGET","postMessageTop","B24","licenseInfoPopup","isObject","panelConfirmBtn","getElementById","sliderContent","sliderHeader","buttonPanel","sliderHeaderHeight","buttonPanelRect","panelRect","btnWidth","Math","ceil","arrowWidth","sliderContentRect","bodyHeight","contentHeight","btnPadding","left","innerWidth","subMenuItem"],"mappings":"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"}