{"version":3,"file":"script.js","sources":["src/index.js"],"sourcesContent":["import {Type, Loc, Dom, ajax} from 'main.core';\nimport {PopupManager} from 'main.popup';\n\nimport {CreateButton} from 'ui.buttons';\n\nclass AppsWidget\n{\n\tconstructor(params)\n\t{\n\t\tthis.popup = null;\n\t\tthis.personalMobile = (Type.isStringFilled(params.personalMobile) ? params.personalMobile : '');\n\n\t\tthis.initAppsInstall();\n\t}\n\n\tinitAppsInstall()\n\t{\n\t\tconst androidIcon = document.querySelector(\"[data-role='profile-android-app']\");\n\t\tif (Type.isDomNode(androidIcon))\n\t\t{\n\t\t\tandroidIcon.addEventListener('click', () => {\n\t\t\t\tthis.showSmsPopup(this.personalMobile);\n\t\t\t});\n\t\t}\n\n\t\tconst iosIcon = document.querySelector(\"[data-role='profile-ios-app']\");\n\t\tif (Type.isDomNode(iosIcon))\n\t\t{\n\t\t\tiosIcon.addEventListener('click', () => {\n\t\t\t\tthis.showSmsPopup(this.personalMobile);\n\t\t\t});\n\t\t}\n\t}\n\n\tshowSmsPopup(personalMobile)\n\t{\n\t\tthis.popup = PopupManager.create({\n\t\t\tid: 'intranet-apps-widget-sms-popup',\n\t\t\tclassName: 'intranet-apps-widget-popup',\n\t\t\ttitleBar: Loc.getMessage('INTRANET_APPS_WIDGET_INSTALL'),\n\t\t\tcacheable: false,\n\t\t\tmaxWidth: 450,\n\t\t\tcontentColor: 'white',\n\t\t\tcontent:\n\t\t\t\tDom.create('div', {\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\tDom.create('div', {\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\tclassName: 'intranet-apps-widget-popup-title',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\thtml: Loc.getMessage('INTRANET_APPS_WIDGET_PHONE'),\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tDom.create('div', {\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\tclassName: 'ui-ctl ui-ctl-textbox ui-ctl-wa',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\tDom.create('input', {\n\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\tvalue: personalMobile,\n\t\t\t\t\t\t\t\t\t\tclassName: 'ui-ctl-element',\n\t\t\t\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\t\tinput: (event) => {\n\t\t\t\t\t\t\t\t\t\t\tpersonalMobile = event.target.value;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tDom.create('div', {\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\tclassName: 'intranet-apps-widget-popup-text',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\thtml: Loc.getMessage('INTRANET_APPS_WIDGET_INSTALL_TEXT'),\n\t\t\t\t\t\t})\n\t\t\t\t\t]\n\t\t\t\t}),\n\t\t\t\tcloseIcon: true,\n\t\t\t\tcontentPadding: 10,\n\t\t\t\tbuttons: [\n\t\t\t\t\tnew CreateButton({\n\t\t\t\t\t\ttext: Loc.getMessage('INTRANET_APPS_WIDGET_SEND'),\n\t\t\t\t\t\tclassName: 'ui-btn-primary',\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tclick: (button) => {\n\t\t\t\t\t\t\t\tbutton.setWaiting();\n\t\t\t\t\t\t\t\tconst popup = button.context;\n\n\t\t\t\t\t\t\t\tajax.runAction('intranet.controller.sms.sendsmsforapp', {\n\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\tphone: personalMobile,\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t],\n\t\t\t}\n\t\t);\n\n\t\tthis.popup.show()\n\t}\n}\n\nexport {\n\tAppsWidget,\n}\n"],"names":["AppsWidget","constructor","params","popup","personalMobile","Type","isStringFilled","initAppsInstall","androidIcon","document","querySelector","isDomNode","addEventListener","showSmsPopup","iosIcon","PopupManager","create","id","className","titleBar","Loc","getMessage","cacheable","maxWidth","contentColor","content","Dom","children","props","html","value","type","events","input","event","target","closeIcon","contentPadding","buttons","CreateButton","text","click","button","setWaiting","context","ajax","runAction","data","phone","then","close","show"],"mappings":";;;;;CAKA,MAAMA,UAAU,CAChB;GACCC,WAAW,CAACC,MAAM,EAClB;KACC,IAAI,CAACC,KAAK,GAAG,IAAI;KACjB,IAAI,CAACC,cAAc,GAAIC,cAAI,CAACC,cAAc,CAACJ,MAAM,CAACE,cAAc,CAAC,GAAGF,MAAM,CAACE,cAAc,GAAG,EAAG;KAE/F,IAAI,CAACG,eAAe,EAAE;;GAGvBA,eAAe,GACf;KACC,MAAMC,WAAW,GAAGC,QAAQ,CAACC,aAAa,CAAC,mCAAmC,CAAC;KAC/E,IAAIL,cAAI,CAACM,SAAS,CAACH,WAAW,CAAC,EAC/B;OACCA,WAAW,CAACI,gBAAgB,CAAC,OAAO,EAAE,MAAM;SAC3C,IAAI,CAACC,YAAY,CAAC,IAAI,CAACT,cAAc,CAAC;QACtC,CAAC;;KAGH,MAAMU,OAAO,GAAGL,QAAQ,CAACC,aAAa,CAAC,+BAA+B,CAAC;KACvE,IAAIL,cAAI,CAACM,SAAS,CAACG,OAAO,CAAC,EAC3B;OACCA,OAAO,CAACF,gBAAgB,CAAC,OAAO,EAAE,MAAM;SACvC,IAAI,CAACC,YAAY,CAAC,IAAI,CAACT,cAAc,CAAC;QACtC,CAAC;;;GAIJS,YAAY,CAACT,cAAc,EAC3B;KACC,IAAI,CAACD,KAAK,GAAGY,uBAAY,CAACC,MAAM,CAAC;OAChCC,EAAE,EAAE,gCAAgC;OACpCC,SAAS,EAAE,4BAA4B;OACvCC,QAAQ,EAAEC,aAAG,CAACC,UAAU,CAAC,8BAA8B,CAAC;OACxDC,SAAS,EAAE,KAAK;OAChBC,QAAQ,EAAE,GAAG;OACbC,YAAY,EAAE,OAAO;OACrBC,OAAO,EACNC,aAAG,CAACV,MAAM,CAAC,KAAK,EAAE;SACjBW,QAAQ,EAAE,CACTD,aAAG,CAACV,MAAM,CAAC,KAAK,EAAE;WACjBY,KAAK,EAAE;aACNV,SAAS,EAAE;YACX;WACDW,IAAI,EAAET,aAAG,CAACC,UAAU,CAAC,4BAA4B;UACjD,CAAC,EACFK,aAAG,CAACV,MAAM,CAAC,KAAK,EAAE;WACjBY,KAAK,EAAE;aACNV,SAAS,EAAE;YACX;WACDS,QAAQ,EAAE,CACTD,aAAG,CAACV,MAAM,CAAC,OAAO,EAAE;aACnBY,KAAK,EAAE;eACNE,KAAK,EAAE1B,cAAc;eACrBc,SAAS,EAAE,gBAAgB;eAC3Ba,IAAI,EAAE;cACN;aACDC,MAAM,EAAE;eACPC,KAAK,EAAGC,KAAK,IAAK;iBACjB9B,cAAc,GAAG8B,KAAK,CAACC,MAAM,CAACL,KAAK;;;YAGrC,CAAC;UAEH,CAAC,EACFJ,aAAG,CAACV,MAAM,CAAC,KAAK,EAAE;WACjBY,KAAK,EAAE;aACNV,SAAS,EAAE;YACX;WACDW,IAAI,EAAET,aAAG,CAACC,UAAU,CAAC,mCAAmC;UACxD,CAAC;QAEH,CAAC;OACFe,SAAS,EAAE,IAAI;OACfC,cAAc,EAAE,EAAE;OAClBC,OAAO,EAAE,CACR,IAAIC,uBAAY,CAAC;SAChBC,IAAI,EAAEpB,aAAG,CAACC,UAAU,CAAC,2BAA2B,CAAC;SACjDH,SAAS,EAAE,gBAAgB;SAC3Bc,MAAM,EAAE;WACPS,KAAK,EAAGC,MAAM,IAAK;aAClBA,MAAM,CAACC,UAAU,EAAE;aACnB,MAAMxC,KAAK,GAAGuC,MAAM,CAACE,OAAO;aAE5BC,cAAI,CAACC,SAAS,CAAC,uCAAuC,EAAE;eACvDC,IAAI,EAAE;iBACLC,KAAK,EAAE5C;;cAER,CAAC,CAAC6C,IAAI,CAAC,MAAM;eACb9C,KAAK,CAAC+C,KAAK,EAAE;cACb,EAAE,MAAM;eACR/C,KAAK,CAAC+C,KAAK,EAAE;cACb,CAAC;;;QAGJ,CAAC;MAEH,CACD;KAED,IAAI,CAAC/C,KAAK,CAACgD,IAAI,EAAE;;CAEnB;;;;;;;;"}