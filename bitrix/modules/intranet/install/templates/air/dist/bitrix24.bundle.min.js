this.BX=this.BX||{};this.BX.Intranet=this.BX.Intranet||{};(function(e,s,t,a,i,l,r,o,n,d,c,b,v,p,u){"use strict";async function h(e){u.Loc.setMessage(e.messages);await _({...e,titleBar:u.Loc.getMessage("BX24_PARTNER_TITLE"),sendButtonText:u.Loc.getMessage("BX24_BUTTON_SEND")})}async function _(e){const s=e.titleBar;const t=e.sendButtonText;const a=e.partnerName;const i=e.partnerUrl;const[{Popup:l},{Button:r,ButtonColor:o}]=await Promise.all([u.Runtime.loadExtension("main.popup"),u.Runtime.loadExtension("ui.buttons")]);const n={className:"bitrix24-partner__popup",autoHide:false,cacheable:false,zIndex:0,offsetLeft:0,offsetTop:0,width:540,height:350,overlay:true,draggable:{restrict:true},closeByEsc:true,titleBar:s,closeIcon:true,content:`\n\t\t\t<div class="bitrix24-partner__popup-content">\n\t\t\t\t<div class="bitrix24-partner__popup-content_title">${u.Loc.getMessage("PARTNER_TITLE_FOR_NAME")}</div>\n\t\t\t\t<div class="bitrix24-partner__popup-content_main">\n\t\t\t\t\t<div class="bitrix24-partner__popup-content_name">${a}</div>\n\t\t\t\t\t<a class="bitrix24-partner__popup-content_link" href="${encodeURI(i)}" target="_blank">${u.Loc.getMessage("PARTNER_LINK_NAME_MORE")}</a>\n\t\t\t\t</div>\n\t\t\t\t<div class="bitrix24-partner__popup-content_desc">${u.Loc.getMessage("PARTNER_POPUP_DESCRIPTION_BOTTOM")}</div>\n\t\t\t</div>\n\t\t`,buttons:[new r({color:o.SUCCESS,text:t,onclick:async e=>{setTimeout((()=>{e.setClocking(true)}),200);await P();e.setClocking(false)}})]};const d=new l(n);d.show()}async function P(){const{Form:e}=await u.Runtime.loadExtension("ui.feedback.form");e.open({id:`intranet-license-partner-form-${parseInt(Math.random()*1e3,10)}`,portalUri:"https://bitrix24.team",forms:[{zones:["de"],id:883,lang:"de",sec:"a12ty8"},{zones:["com","in","eu","uk"],id:735,lang:"en",sec:"vlhmlv"},{zones:["es","co","mx"],id:900,lang:"es",sec:"w3qmwq"},{zones:["com.br"],id:901,lang:"pt",sec:"prnm4x"},{zones:["cn/tc"],id:902,lang:"cn-tc",sec:"z8isyg"},{zones:["cn"],id:903,lang:"cn-sc",sec:"hsxnam"},{zones:["pl"],id:904,lang:"pl",sec:"2ph9ph"},{zones:["it"],id:905,lang:"it",sec:"2r3owa"},{zones:["fr"],id:906,lang:"fr",sec:"jt2fii"},{zones:["com.tr"],id:907,lang:"tr",sec:"ovevp8"},{zones:["id"],id:908,lang:"id",sec:"7kq7v2"},{zones:["com/my"],id:909,lang:"ms",sec:"kmncmj"},{zones:["com/th"],id:910,lang:"th",sec:"sknbp9"},{zones:["vn"],id:911,lang:"vn",sec:"a573fy"},{zones:["jp"],id:912,lang:"jp",sec:"3purdq"},{zones:["ru"],id:2122,lang:"ru",sec:"8vralr"},{zones:["kz"],id:2128,lang:"ru",sec:"054phh"},{zones:["by"],id:2129,lang:"ru",sec:"srs85j"}],defaultForm:{id:735,lang:"en",sec:"vlhmlv"}})}async function m(e){if(u.Type.isObject(e)===false){return}const{Popup:s}=await u.Runtime.loadExtension("main.popup");const t={id:"B24PartnerOrderForm",autoHide:true,noAllPaddings:true,zIndex:0,offsetLeft:0,offsetTop:0,overlay:true,borderRadius:"10px",contentBorderRadius:"10px",disableScroll:true,height:Math.min(window.innerHeight-60,758),width:560,draggable:{restrict:true},closeByEsc:true,contentColor:"white",contentNoPaddings:true,cacheable:false,content:`\n\t\t\t<script data-b24-form="inline/${e.id}/${e.sec}" data-skip-moving="true">\n\t\t\t\t(function(w, d,u) {\n\t\t\t\t\tvar s = d.createElement("script");\n\t\t\t\t\ts.async=true;\n\t\t\t\t\ts.src=u + "?" + (Date.now()/180000|0);\n\t\t\t\t\tvar h = d.getElementsByTagName("script")[0];\n\t\t\t\t\th.parentNode.insertBefore(s,h);\n\t\t\t\t})(window,document,"https://bitrix24.team/upload/crm/form/loader_${e.id}_${e.sec}.js")\n\t\t\t<\/script>\n\t\t`,events:{onPopupFirstShow(){(function(e,s,t){var a=s.createElement("script");a.async=true;a.src=t+"?"+(Date.now()/18e4|0);var i=s.getElementsByTagName("script")[0];i.parentNode.insertBefore(a,i)})(window,document,`https://bitrix24.team/upload/crm/form/loader_${e.id}_${e.sec}.js`)}}};const a=new s(t);a.show()}const f=async()=>{await u.Runtime.loadExtension("helper");const e=u.Reflection.getClass("BX.Helper");e.show("redirect=detail&code=20267044")};class L{static async showConnectForm(e){return h(e)}static showIntegrationOrderForm(e){return m(e)}static async showHelper(){return f()}}var g=babelHelpers.classPrivateFieldLooseKey("handleChatMenuSelect");var F=babelHelpers.classPrivateFieldLooseKey("handleImLayoutChange");var B=babelHelpers.classPrivateFieldLooseKey("handleCounterUpdate");class H{constructor(){Object.defineProperty(this,B,{value:w});Object.defineProperty(this,F,{value:k});Object.defineProperty(this,g,{value:y});c.EventEmitter.subscribe("IM.Layout:onLayoutChange",babelHelpers.classPrivateFieldLooseBase(this,F)[F].bind(this));c.EventEmitter.subscribe("IM.Counters:onUpdate",babelHelpers.classPrivateFieldLooseBase(this,B)[B].bind(this));c.EventEmitter.subscribe("BX.Intranet.Bitrix24.ChatMenu:onSelect",babelHelpers.classPrivateFieldLooseBase(this,g)[g].bind(this))}getMenu(){const e=u.Reflection.getClass("BX.Main.interfaceButtonsManager");if(e){return e.getById("chat-menu")}return null}}function y(e){var s;const t=e.getData();const{id:a,entityId:i}=t;let l=(s=t.event)==null?void 0:s.target;if(l){l=l.closest(".main-buttons-item-link, .menu-popup-item")}const r=u.Reflection.getClass("BX.Messenger.Public");r==null?void 0:r.openNavigationItem({id:a,entityId:i,target:l})}function k(e){const s=e.getData();const t=this.getMenu();t==null?void 0:t.unsetActive(s.from.name.toLowerCase());t==null?void 0:t.setActive(s.to.name.toLowerCase());t==null?void 0:t.closeMoreMenu()}function w(e){const s=e.getData();const t=this.getMenu();for(const[e,a]of Object.entries(s)){t==null?void 0:t.updateCounter(e,a)}}function C(){const e=window.location.pathname;const s=E(["logout","login","back_url_pub","user_lang"]);return e+(s.length>0?`?${s}`:"")}function E(e){const s=window.location.search.slice(1);if(u.Type.isStringFilled(s)){return""}const t=s.split("&");const a=u.Type.isArray(e)?e:[];let i="";for(const e of t){const s=e.split("=");const t=e.indexOf("=");const l=s[0];const r=u.Type.isStringFilled(s[1])?s[1]:false;if(!a.includes(l)){if(i!==""){i+="&"}i+=l+(t===-1?"":"=")+(r===false?"":r)}}return i}let O=e=>e,j,I,x,S;var K=babelHelpers.classPrivateFieldLooseKey("refs");var T=babelHelpers.classPrivateFieldLooseKey("showLoader");var D=babelHelpers.classPrivateFieldLooseKey("getPageSkeleton");var R=babelHelpers.classPrivateFieldLooseKey("bindEvents");class A{constructor(){Object.defineProperty(this,R,{value:X});Object.defineProperty(this,D,{value:W});Object.defineProperty(this,T,{value:M});Object.defineProperty(this,K,{writable:true,value:new d.MemoryCache});if(this.isEnabled()){babelHelpers.classPrivateFieldLooseBase(this,R)[R]()}}isEnabled(){return!u.Type.isUndefined(window.frameRequestStart)}isReady(){var e,s;return((e=window.BX)==null?void 0:(s=e.frameCache)==null?void 0:s.frameDataInserted)===true||!u.Type.isUndefined(window.frameRequestFail)}showLoader(){const e=window.location.pathname;if(e==="/stream/"||e==="/stream/index.php"||e==="/index.php"){babelHelpers.classPrivateFieldLooseBase(this,T)[T]("stream")}else{setTimeout((()=>{babelHelpers.classPrivateFieldLooseBase(this,T)[T]()}),500)}}getStubContainer(){return document.querySelector("#page-area")}getLoaderContainer(){return babelHelpers.classPrivateFieldLooseBase(this,K)[K].remember("loader",(()=>u.Tag.render(j||(j=O`
				<div class="composite-skeleton-container">
					<div class="composite-loader-container">
						<svg class="composite-loader-circular" viewBox="25 25 50 50">
							<circle class="composite-loader-path" cx="50" cy="50" r="20" fill="none" stroke-miterlimit="10" />
						</svg>
					</div>
				</div>
			`))))}getLiveFeedSkeleton(){return babelHelpers.classPrivateFieldLooseBase(this,K)[K].remember("feed-skeleton",(()=>u.Tag.render(I||(I=O`
				<div class="page top-menu-mode start-page no-background no-all-paddings no-page-header">
					<div class="page__workarea">
						<div class="page__sidebar">${0}</div>
						<main class="page__workarea-content">${0}</main>
					</div>
				</div>
			`),this.getLiveFeedSidebar(),this.getLiveFeedWorkArea())))}getLiveFeedSidebar(){return babelHelpers.classPrivateFieldLooseBase(this,K)[K].remember("feed-sidebar",(()=>u.Tag.render(x||(x=O`
				<div class="skeleton__white-bg-element skeleton__sidebar skeleton__intranet-ustat">
					<div class="skeleton__graph-circle"></div>
					<div class="skeleton__graph-right">
						<div class="skeleton__graph-right_top">
							<div class="skeleton__graph-right_top-circle --first"></div>
							<div class="skeleton__graph-right_top-circle"></div>
							<div class="skeleton__graph-right_top-circle"></div>
							<div class="skeleton__graph-right_top-circle"></div>
							<div class="skeleton__graph-right_top-circle"></div>
							<div class="skeleton__graph-right_top-circle"></div>
							<div class="skeleton__graph-right_top-circle"></div>
						</div>
						<div class="skeleton__graph-right_bottom">
							<div class="skeleton__graph-right_bottom-line"></div>
							<div class="skeleton__graph-right_bottom-line"></div>
						</div>
					</div>
				</div>
				
				<div class="skeleton__white-bg-element skeleton__sidebar">
					<div class="skeleton__sidebar-header">
						<div class="skeleton__sidebar-header_line"></div>
						<div class="skeleton__sidebar-header_circle"></div>
					</div>
					<div class="skeleton__tasks-row">
						<div class="skeleton__tasks-row_line"></div>
						<div class="skeleton__tasks-row_short-line"></div>
						<div class="skeleton__tasks-row_circle"></div>
					</div>
					<div class="skeleton__tasks-row">
						<div class="skeleton__tasks-row_line"></div>
						<div class="skeleton__tasks-row_short-line"></div>
						<div class="skeleton__tasks-row_circle"></div>
					</div>
					<div class="skeleton__tasks-row">
						<div class="skeleton__tasks-row_line"></div>
						<div class="skeleton__tasks-row_short-line"></div>
						<div class="skeleton__tasks-row_circle"></div>
					</div>
					<div class="skeleton__tasks-row">
						<div class="skeleton__tasks-row_line"></div>
						<div class="skeleton__tasks-row_short-line"></div>
						<div class="skeleton__tasks-row_circle"></div>
					</div>
				</div>
				<div class="skeleton__white-bg-element skeleton__sidebar">
					<div class="skeleton__sidebar-header">
						<div class="skeleton__sidebar-header_line"></div>
					</div>
					<div class="skeleton__birthdays-row">
						<div class="skeleton__birthdays-circle"></div>
						<div class="skeleton__birthdays-info">
							<div class="skeleton__birthdays-name"></div>
							<div class="skeleton__birthdays-date"></div>
						</div>
					</div>
					<div class="skeleton__birthdays-row">
						<div class="skeleton__birthdays-circle"></div>
						<div class="skeleton__birthdays-info">
							<div class="skeleton__birthdays-name"></div>
							<div class="skeleton__birthdays-date"></div>
						</div>
					</div>
					<div class="skeleton__birthdays-row">
						<div class="skeleton__birthdays-circle"></div>
						<div class="skeleton__birthdays-info">
							<div class="skeleton__birthdays-name"></div>
							<div class="skeleton__birthdays-date"></div>
						</div>
					</div>
					<div class="skeleton__birthdays-row">
						<div class="skeleton__birthdays-circle"></div>
						<div class="skeleton__birthdays-info">
							<div class="skeleton__birthdays-name"></div>
							<div class="skeleton__birthdays-date"></div>
						</div>
					</div>
				</div>
				<div class="skeleton__white-bg-element skeleton__sidebar">
					<div class="skeleton__sidebar-header">
						<div class="skeleton__sidebar-header_line"></div>
					</div>
					<div class="skeleton__birthdays-row">
						<div class="skeleton__birthdays-circle"></div>
						<div class="skeleton__birthdays-info">
							<div class="skeleton__birthdays-name"></div>
							<div class="skeleton__birthdays-date"></div>
						</div>
					</div>
					<div class="skeleton__birthdays-row">
						<div class="skeleton__birthdays-circle"></div>
						<div class="skeleton__birthdays-info">
							<div class="skeleton__birthdays-name"></div>
							<div class="skeleton__birthdays-date"></div>
						</div>
					</div>
					<div class="skeleton__birthdays-row">
						<div class="skeleton__birthdays-circle"></div>
						<div class="skeleton__birthdays-info">
							<div class="skeleton__birthdays-name"></div>
							<div class="skeleton__birthdays-date"></div>
						</div>
					</div>
					<div class="skeleton__birthdays-row">
						<div class="skeleton__birthdays-circle"></div>
						<div class="skeleton__birthdays-info">
							<div class="skeleton__birthdays-name"></div>
							<div class="skeleton__birthdays-date"></div>
						</div>
					</div>
				</div>
			`))))}getLiveFeedWorkArea(){return babelHelpers.classPrivateFieldLooseBase(this,K)[K].remember("feed-work-area",(()=>u.Tag.render(S||(S=O`
				<div class="skeleton__white-bg-element skeleton__feed-wrap">
					<div class="skeleton__feed-wrap_header">
						<div class="skeleton__feed-wrap_header-link --long"></div>
						<div class="skeleton__feed-wrap_header-link --one"></div>
						<div class="skeleton__feed-wrap_header-link --two"></div>
						<div class="skeleton__feed-wrap_header-link --one"></div>
						<div class="skeleton__feed-wrap_header-link --two"></div>
					</div>
					<div class="skeleton__feed-wrap_header-content">
						<div class="skeleton__feed-wrap_header-text"></div>
					</div>
				</div>
				<div class="skeleton__title-block">
					<div class="skeleton__title-block_text"></div>
				</div>
				<div class="skeleton__white-bg-element skeleton__feed-item">
					<div class="skeleton__feed-item_user-icon"></div>
					<div class="skeleton__feed-item_content">
						<div class="skeleton__feed-item_main">
							<div class="skeleton__feed-item_text --name"></div>
							<div class="skeleton__feed-item_date"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text --short"></div>
						</div>
						<div class="skeleton__feed-item_nav">
							<div class="skeleton__feed-item_nav-line --one"></div>
							<div class="skeleton__feed-item_nav-line --two"></div>
							<div class="skeleton__feed-item_nav-line --three"></div>
							<div class="skeleton__feed-item_nav-line --four"></div>
						</div>
						<div class="skeleton__feed-item_like">
							<div class="skeleton__feed-item_like-icon"></div>
							<div class="skeleton__feed-item_like-name"></div>
						</div>
						<div class="skeleton__feed-item_comment">
							<div class="skeleton__feed-item_comment-icon"></div>
							<div class="skeleton__feed-item_comment-block">
								<div class="skeleton__feed-item_comment-text"></div>
							</div>
						</div>
					</div>
				</div>
				<div class="skeleton__white-bg-element skeleton__feed-item">
					<div class="skeleton__feed-item_user-icon"></div>
					<div class="skeleton__feed-item_content">
						<div class="skeleton__feed-item_main">
							<div class="skeleton__feed-item_text --name"></div>
							<div class="skeleton__feed-item_date"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text --short"></div>
						</div>
						<div class="skeleton__feed-item_nav">
							<div class="skeleton__feed-item_nav-line --one"></div>
							<div class="skeleton__feed-item_nav-line --two"></div>
							<div class="skeleton__feed-item_nav-line --three"></div>
							<div class="skeleton__feed-item_nav-line --four"></div>
						</div>
						<div class="skeleton__feed-item_like">
							<div class="skeleton__feed-item_like-icon"></div>
							<div class="skeleton__feed-item_like-name"></div>
						</div>
						<div class="skeleton__feed-item_comment">
							<div class="skeleton__feed-item_comment-icon"></div>
							<div class="skeleton__feed-item_comment-block">
								<div class="skeleton__feed-item_comment-text"></div>
							</div>
						</div>
					</div>
				</div>
				<div class="skeleton__white-bg-element skeleton__feed-item">
					<div class="skeleton__feed-item_user-icon"></div>
					<div class="skeleton__feed-item_content">
						<div class="skeleton__feed-item_main">
							<div class="skeleton__feed-item_text --name"></div>
							<div class="skeleton__feed-item_date"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text --short"></div>
						</div>
						<div class="skeleton__feed-item_nav">
							<div class="skeleton__feed-item_nav-line --one"></div>
							<div class="skeleton__feed-item_nav-line --two"></div>
							<div class="skeleton__feed-item_nav-line --three"></div>
							<div class="skeleton__feed-item_nav-line --four"></div>
						</div>
						<div class="skeleton__feed-item_like">
							<div class="skeleton__feed-item_like-icon"></div>
							<div class="skeleton__feed-item_like-name"></div>
						</div>
						<div class="skeleton__feed-item_comment">
							<div class="skeleton__feed-item_comment-icon"></div>
							<div class="skeleton__feed-item_comment-block">
								<div class="skeleton__feed-item_comment-text"></div>
							</div>
						</div>
					</div>
				</div>
			`))))}}function M(e=null){if(this.isReady()){return}const s=babelHelpers.classPrivateFieldLooseBase(this,D)[D](e);const t=this.getStubContainer();const a=s!=null?s:this.getLoaderContainer();if(!t||a.parentNode){return}u.Dom.append(a,t)}function W(e){const s={stream:()=>this.getLiveFeedSkeleton()};if(s[e]){return s[e]()}return null}function X(){c.EventEmitter.subscribe("onFrameDataRequestFail",(()=>{console.error("Composite ajax request failed");top.location=`/auth/?backurl=${encodeURIComponent(C())}`}));c.EventEmitter.subscribe("onAjaxFailure",(e=>{const[s,t]=e.getCompatData();const a=`/auth/?backurl=${C()}`;if(this.isEnabled()&&(s==="auth"||s==="status"&&t===401)){console.error("Auth ajax request failed",s,t);top.location=a}}));if(n.PULL){n.PULL.subscribe({moduleId:"main",command:"composite-cache-up",callback:()=>{setTimeout((()=>{const e=BX.localStorage.get("ajax-composite-cache-up-lock");if(!e){BX.localStorage.set("ajax-composite-cache-up-lock","EXECUTE",2);u.ajax({url:"/blank.php",method:"GET",processData:false,skipBxHeader:true,emulateOnload:false})}}),Math.floor(Math.random()*500))}})}}var N=babelHelpers.classPrivateFieldLooseKey("isTransparentMode");var U=babelHelpers.classPrivateFieldLooseKey("isScrollMode");var $=babelHelpers.classPrivateFieldLooseKey("scrollModeThreshold");var z=babelHelpers.classPrivateFieldLooseKey("goTopButton");class q{constructor(e){Object.defineProperty(this,N,{writable:true,value:false});Object.defineProperty(this,U,{writable:true,value:false});Object.defineProperty(this,$,{writable:true,value:window.innerHeight});Object.defineProperty(this,z,{writable:true,value:void 0});const s=this.redraw.bind(this);u.Event.bind(window,"scroll",s,{passive:true});u.Event.bind(window,"resize",s);babelHelpers.classPrivateFieldLooseBase(this,$)[$]=window.innerHeight;babelHelpers.classPrivateFieldLooseBase(this,z)[z]=e.goTopButton;babelHelpers.classPrivateFieldLooseBase(this,z)[z].subscribe("show",(()=>{u.Dom.addClass(this.getContainer(),"--show-scroll-btn")}));babelHelpers.classPrivateFieldLooseBase(this,z)[z].subscribe("hide",(()=>{u.Dom.removeClass(this.getContainer(),"--show-scroll-btn")}));u.Event.ready((()=>{this.redraw()}))}redraw(){const e=this.getContainer();babelHelpers.classPrivateFieldLooseBase(this,$)[$]=window.innerHeight;if(window.pageYOffset>babelHelpers.classPrivateFieldLooseBase(this,$)[$]){if(!babelHelpers.classPrivateFieldLooseBase(this,U)[U]){u.Dom.addClass(e,"--scroll-mode");babelHelpers.classPrivateFieldLooseBase(this,U)[U]=true}}else if(babelHelpers.classPrivateFieldLooseBase(this,U)[U]){u.Dom.removeClass(e,"--scroll-mode");babelHelpers.classPrivateFieldLooseBase(this,U)[U]=false}if(!e||e.dataset.lockRedraw==="true"){return}const s=document.documentElement.scrollWidth-document.documentElement.clientWidth;if(s>0){if(!babelHelpers.classPrivateFieldLooseBase(this,N)[N]){u.Dom.addClass(e,"--transparent");babelHelpers.classPrivateFieldLooseBase(this,N)[N]=true}}else if(babelHelpers.classPrivateFieldLooseBase(this,N)[N]){u.Dom.removeClass(e,"--transparent");babelHelpers.classPrivateFieldLooseBase(this,N)[N]=false}}getContainer(){return document.getElementById("right-bar")}}class G{getContainer(){return document.getElementById("header")}}class Y{constructor(){c.EventEmitter.subscribe("Kanban.Grid:onFixedModeStart",(()=>{this.hide()}))}show(){u.Dom.removeClass(this.getContainer(),"hidden")}hide(){u.Dom.addClass(this.getContainer(),"hidden")}getContainer(){return document.getElementById("air-footer")}}var J=babelHelpers.classPrivateFieldLooseKey("lastScrollOffset");var V=babelHelpers.classPrivateFieldLooseKey("isReversed");var Q=babelHelpers.classPrivateFieldLooseKey("button");var Z=babelHelpers.classPrivateFieldLooseKey("show");var ee=babelHelpers.classPrivateFieldLooseKey("hide");var se=babelHelpers.classPrivateFieldLooseKey("getButtonWrapper");var te=babelHelpers.classPrivateFieldLooseKey("bindEvents");var ae=babelHelpers.classPrivateFieldLooseKey("handleScroll");var ie=babelHelpers.classPrivateFieldLooseKey("handleButtonClick");var le=babelHelpers.classPrivateFieldLooseKey("setReversed");var re=babelHelpers.classPrivateFieldLooseKey("getButton");class oe extends c.EventEmitter{constructor(){super();Object.defineProperty(this,re,{value:he});Object.defineProperty(this,le,{value:ue});Object.defineProperty(this,ie,{value:pe});Object.defineProperty(this,ae,{value:ve});Object.defineProperty(this,te,{value:be});Object.defineProperty(this,se,{value:ce});Object.defineProperty(this,ee,{value:de});Object.defineProperty(this,Z,{value:ne});Object.defineProperty(this,J,{writable:true,value:0});Object.defineProperty(this,V,{writable:true,value:false});Object.defineProperty(this,Q,{writable:true,value:void 0});this.setEventNamespace("GoTopButton");babelHelpers.classPrivateFieldLooseBase(this,te)[te]()}isShown(){return u.Dom.hasClass(babelHelpers.classPrivateFieldLooseBase(this,se)[se](),"--show")}}function ne(){this.emit("show");u.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,se)[se](),"--show")}function de(){this.emit("hide");u.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,se)[se](),"--show")}function ce(){return document.getElementById("goTopButtonWrapper")}function be(){u.Event.ready((()=>{babelHelpers.classPrivateFieldLooseBase(this,ae)[ae]();u.Event.bind(window,"scroll",(()=>{babelHelpers.classPrivateFieldLooseBase(this,ae)[ae]()}));u.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,se)[se](),"click",(()=>{babelHelpers.classPrivateFieldLooseBase(this,ie)[ie]()}))}))}function ve(){if(window.pageYOffset>document.documentElement.clientHeight){babelHelpers.classPrivateFieldLooseBase(this,Z)[Z]();if(babelHelpers.classPrivateFieldLooseBase(this,V)[V]){babelHelpers.classPrivateFieldLooseBase(this,le)[le](false);babelHelpers.classPrivateFieldLooseBase(this,J)[J]=0}}else if(babelHelpers.classPrivateFieldLooseBase(this,V)[V]===false){babelHelpers.classPrivateFieldLooseBase(this,ee)[ee]()}}function pe(){if(babelHelpers.classPrivateFieldLooseBase(this,V)[V]){babelHelpers.classPrivateFieldLooseBase(this,le)[le](false);window.scrollTo({top:babelHelpers.classPrivateFieldLooseBase(this,J)[J],behavior:"instant"});babelHelpers.classPrivateFieldLooseBase(this,J)[J]=0}else{babelHelpers.classPrivateFieldLooseBase(this,le)[le](true);babelHelpers.classPrivateFieldLooseBase(this,J)[J]=window.pageYOffset;window.scrollTo({top:0,behavior:"instant"})}}function ue(e=true){babelHelpers.classPrivateFieldLooseBase(this,V)[V]=e;if(babelHelpers.classPrivateFieldLooseBase(this,V)[V]){babelHelpers.classPrivateFieldLooseBase(this,re)[re]().setIcon(t.ButtonIcon.ANGLE_DOWN)}else{babelHelpers.classPrivateFieldLooseBase(this,re)[re]().setIcon(t.ButtonIcon.ANGLE_UP)}}function he(){return babelHelpers.classPrivateFieldLooseBase(this,Q)[Q]||t.ButtonManager.createFromNode(document.getElementById("goTopButton"))}var _e=babelHelpers.classPrivateFieldLooseKey("handleCounterUpdate");var Pe=babelHelpers.classPrivateFieldLooseKey("handleLiveFeedCounterDecrement");class me{constructor(){Object.defineProperty(this,Pe,{value:Le});Object.defineProperty(this,_e,{value:fe});c.EventEmitter.subscribe("onImUpdateCounterMessage",babelHelpers.classPrivateFieldLooseBase(this,_e)[_e].bind(this));c.EventEmitter.subscribe("onCounterDecrement",babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe].bind(this))}getMenu(){const e=u.Reflection.getClass("BX.Main.interfaceButtonsManager");if(e){return e.getById("top_menu_id_collaboration")}return null}}function fe(e){const s=this.getMenu();const[t]=e.getCompatData();s==null?void 0:s.updateCounter("im-message",t)}function Le(e){const[s]=e.getCompatData();const t=this.getMenu();if(t){const e=t.getItemById("menu_live_feed");if(e){const a=t.getItemData(e);const{COUNTER:i,COUNTER_ID:l}=a;t==null?void 0:t.updateCounter(l,Math.max(0,i-s))}}}const ge="blur(6px)";const Fe="blur(10px)";var Be=babelHelpers.classPrivateFieldLooseKey("rightBar");var He=babelHelpers.classPrivateFieldLooseKey("header");var ye=babelHelpers.classPrivateFieldLooseKey("footer");var ke=babelHelpers.classPrivateFieldLooseKey("composite");var we=babelHelpers.classPrivateFieldLooseKey("chatMenu");var Ce=babelHelpers.classPrivateFieldLooseKey("goTopButton");var Ee=babelHelpers.classPrivateFieldLooseKey("collaborationMenu");var Oe=babelHelpers.classPrivateFieldLooseKey("patchPopupMenu");var je=babelHelpers.classPrivateFieldLooseKey("patchJSClock");var Ie=babelHelpers.classPrivateFieldLooseKey("fixSliderBorderRadius");var xe=babelHelpers.classPrivateFieldLooseKey("makeSliderBlurry");var Se=babelHelpers.classPrivateFieldLooseKey("preventFromIframe");var Ke=babelHelpers.classPrivateFieldLooseKey("applyUserAgentRules");var Te=babelHelpers.classPrivateFieldLooseKey("patchRestAPI");class De{constructor(){Object.defineProperty(this,Te,{value:Ue});Object.defineProperty(this,Ke,{value:Ne});Object.defineProperty(this,Se,{value:Xe});Object.defineProperty(this,xe,{value:We});Object.defineProperty(this,Ie,{value:Me});Object.defineProperty(this,je,{value:Ae});Object.defineProperty(this,Oe,{value:Re});Object.defineProperty(this,Be,{writable:true,value:null});Object.defineProperty(this,He,{writable:true,value:null});Object.defineProperty(this,ye,{writable:true,value:null});Object.defineProperty(this,ke,{writable:true,value:null});Object.defineProperty(this,we,{writable:true,value:null});Object.defineProperty(this,Ce,{writable:true,value:null});Object.defineProperty(this,Ee,{writable:true,value:null});babelHelpers.classPrivateFieldLooseBase(this,Se)[Se]();babelHelpers.classPrivateFieldLooseBase(this,xe)[xe]();babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe]();babelHelpers.classPrivateFieldLooseBase(this,Te)[Te]();babelHelpers.classPrivateFieldLooseBase(this,je)[je]();babelHelpers.classPrivateFieldLooseBase(this,Ce)[Ce]=new oe;babelHelpers.classPrivateFieldLooseBase(this,Be)[Be]=new q({goTopButton:babelHelpers.classPrivateFieldLooseBase(this,Ce)[Ce]});babelHelpers.classPrivateFieldLooseBase(this,He)[He]=new G;babelHelpers.classPrivateFieldLooseBase(this,ye)[ye]=new Y;babelHelpers.classPrivateFieldLooseBase(this,ke)[ke]=new A;babelHelpers.classPrivateFieldLooseBase(this,we)[we]=new H;babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee]=new me;babelHelpers.classPrivateFieldLooseBase(this,Ke)[Ke]()}getRightBar(){return babelHelpers.classPrivateFieldLooseBase(this,Be)[Be]}getHeader(){return babelHelpers.classPrivateFieldLooseBase(this,He)[He]}getFooter(){return babelHelpers.classPrivateFieldLooseBase(this,ye)[ye]}getComposite(){return babelHelpers.classPrivateFieldLooseBase(this,ke)[ke]}getChatMenu(){return babelHelpers.classPrivateFieldLooseBase(this,we)[we]}getCollaborationMenu(){return babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee]}}function Re(){c.EventEmitter.subscribe("BX.Main.Menu:onInit",(e=>{const{params:s}=e.getData();if(s&&u.Type.isNumber(s.maxWidth)){s.maxWidth+=10}}))}function Ae(){c.EventEmitter.subscribe("onJCClockInit",(e=>{window.JCClock.setOptions({centerXInline:83,centerX:83,centerYInline:67,centerY:79,minuteLength:31,hourLength:26,popupHeight:229,inaccuracy:15,cancelCheckClick:true})}))}function Me(e,s=null){if(e.isSelfContained()){u.Dom.style(e.getContainer(),"background-color","#eef2f4")}else{var t;const a=e==null?void 0:(t=e.getFrameWindow())==null?void 0:t.document;if(a&&a.body){const t=u.Dom.style(a.body,"background-color");const i=u.Dom.style(a.body,"background-image");const l=t==="rgba(0, 0, 0, 0)"&&i==="none"?"#eef2f4":"rgba(0, 0, 0, 0)";u.Dom.style(e.getContainer(),"background-color",s===null?l:s)}else{u.Dom.style(e.getContainer(),"background-color",s===null?"#eef2f4":s)}}}function We(){c.EventEmitter.subscribe("SidePanel.Slider:onOpenComplete",(e=>{const[t]=e.getData();const a=t.getSlider();if(!a.isLoaded()){babelHelpers.classPrivateFieldLooseBase(this,Ie)[Ie](a,"rgba(0, 0, 0, 0)")}const i=s.SidePanel.Instance.getPreviousSlider();if(i){u.Dom.style(i.getOverlay(),"backdrop-filter",null)}const l=a.getUrl().startsWith("im:slider");u.Dom.style(a.getOverlay(),"backdrop-filter",l?Fe:ge)}));c.EventEmitter.subscribe("SidePanel.Slider:onClosing",(e=>{const[t]=e.getData();const a=t.getSlider();const i=s.SidePanel.Instance.getPreviousSlider();if(i){const e=i.getUrl().startsWith("im:slider");u.Dom.style(i.getOverlay(),"backdrop-filter",e?Fe:ge)}u.Dom.style(a.getOverlay(),"backdrop-filter",null)}));c.EventEmitter.subscribe("SidePanel.Slider:onOpening",(()=>{if(s.SidePanel.Instance.getOpenSlidersCount()===1){u.Dom.addClass(document.body,"--ui-reset-bg-blur")}}));c.EventEmitter.subscribe("SidePanel.Slider:onClosing",(()=>{if(s.SidePanel.Instance.getOpenSlidersCount()===1){u.Dom.removeClass(document.body,"--ui-reset-bg-blur")}}));c.EventEmitter.subscribe("SidePanel.Slider:onLoad",(e=>{const[s]=e.getData();const t=s.getSlider();babelHelpers.classPrivateFieldLooseBase(this,Ie)[Ie](t);requestAnimationFrame((()=>{babelHelpers.classPrivateFieldLooseBase(this,Ie)[Ie](t)}))}))}function Xe(){const e=window!==window.top;if(e){window.top.location=window.location.href}}function Ne(){if(u.Browser.isMobile()){u.Runtime.loadExtension("intranet.mobile-popup").then((e=>{(new e.MobilePopup).show()})).catch((()=>{}))}else if(document.referrer!==""&&document.referrer.startsWith(location.origin)===false){u.Runtime.loadExtension("intranet.recognize-links")}}function Ue(){const e=u.Reflection.getClass("BX.rest.AppLayout");if(!e){return}const s=e.initializePlacement("DEFAULT");s.prototype.showHelper=async function(e,s){let t="";if(u.Type.isNumber(e)){t=`redirect=detail&code=${e}`}else if(u.Type.isStringFilled(e)){t=e}else if(u.Type.isPlainObject(e)){for(const s of Object.keys(e)){if(t.length>0){t+="&"}t+=`${s}=${e[s]}`}}if(t.length>0){await u.Runtime.loadExtension("helper");const e=u.Reflection.getClass("BX.Helper");e.show(t)}}}var $e=babelHelpers.classPrivateFieldLooseKey("searchOptions");var ze=babelHelpers.classPrivateFieldLooseKey("extensionLoaded");var qe=babelHelpers.classPrivateFieldLooseKey("container");var Ge=babelHelpers.classPrivateFieldLooseKey("button");var Ye=babelHelpers.classPrivateFieldLooseKey("input");var Je=babelHelpers.classPrivateFieldLooseKey("searchTitleInstance");var Ve=babelHelpers.classPrivateFieldLooseKey("handleButtonClick");var Qe=babelHelpers.classPrivateFieldLooseKey("handleInputFocusOut");class Ze{constructor(e){Object.defineProperty(this,Qe,{value:ss});Object.defineProperty(this,Ve,{value:es});Object.defineProperty(this,$e,{writable:true,value:{}});Object.defineProperty(this,ze,{writable:true,value:false});Object.defineProperty(this,qe,{writable:true,value:null});Object.defineProperty(this,Ge,{writable:true,value:null});Object.defineProperty(this,Ye,{writable:true,value:null});Object.defineProperty(this,Je,{writable:true,value:null});babelHelpers.classPrivateFieldLooseBase(this,qe)[qe]=document.getElementById(e.containerId);babelHelpers.classPrivateFieldLooseBase(this,Ge)[Ge]=document.getElementById(e.buttonId);babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye]=document.getElementById(e.inputId);babelHelpers.classPrivateFieldLooseBase(this,$e)[$e]=e.searchOptions;u.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,Ge)[Ge],"click",babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve].bind(this));u.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye],"focusout",babelHelpers.classPrivateFieldLooseBase(this,Qe)[Qe].bind(this))}open(){u.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,qe)[qe],"--active");babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye].disabled=false;setTimeout((()=>{babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye].focus()}),200)}close(){u.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,qe)[qe],"--active");babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye].disabled=true;if(babelHelpers.classPrivateFieldLooseBase(this,Je)[Je]!==null){babelHelpers.classPrivateFieldLooseBase(this,Je)[Je].clearSearch();babelHelpers.classPrivateFieldLooseBase(this,Je)[Je].closeResult()}}}function es(){if(u.Dom.hasClass(babelHelpers.classPrivateFieldLooseBase(this,qe)[qe],"--active")){this.close()}else{this.open()}if(babelHelpers.classPrivateFieldLooseBase(this,ze)[ze]){return}babelHelpers.classPrivateFieldLooseBase(this,ze)[ze]=true;u.Runtime.loadExtension("intranet.search_title").then((()=>{const e=u.Reflection.getClass("BX.Intranet.SearchTitle");babelHelpers.classPrivateFieldLooseBase(this,Je)[Je]=new e(babelHelpers.classPrivateFieldLooseBase(this,$e)[$e])})).catch((e=>{console.error(e)}))}function ss(e){if(!u.Type.isStringFilled(babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye].value)&&e.relatedTarget!==babelHelpers.classPrivateFieldLooseBase(this,Ge)[Ge]){this.close()}}var ts=babelHelpers.classPrivateFieldLooseKey("avatarWrapper");var as=babelHelpers.classPrivateFieldLooseKey("cache");var is=babelHelpers.classPrivateFieldLooseKey("options");var ls=babelHelpers.classPrivateFieldLooseKey("showWidget");var rs=babelHelpers.classPrivateFieldLooseKey("getWidgetLoader");var os=babelHelpers.classPrivateFieldLooseKey("getContent");var ns=babelHelpers.classPrivateFieldLooseKey("showCounter");var ds=babelHelpers.classPrivateFieldLooseKey("showWorkTimeState");var cs=babelHelpers.classPrivateFieldLooseKey("getCounterWrapper");var bs=babelHelpers.classPrivateFieldLooseKey("getWorkTimeStateWrapper");var vs=babelHelpers.classPrivateFieldLooseKey("getCounter");var ps=babelHelpers.classPrivateFieldLooseKey("getWorkTimeState");var us=babelHelpers.classPrivateFieldLooseKey("setEventHandlerForUpdateCounter");var hs=babelHelpers.classPrivateFieldLooseKey("setEventHandlerForChangeAvatar");class _s{static init(e){babelHelpers.classPrivateFieldLooseBase(this,is)[is]=e;babelHelpers.classPrivateFieldLooseBase(this,ts)[ts]=document.querySelector('[data-id="bx-avatar-widget"]');babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]();if(babelHelpers.classPrivateFieldLooseBase(this,is)[is].signDocumentsCounter>0){babelHelpers.classPrivateFieldLooseBase(this,ns)[ns]();babelHelpers.classPrivateFieldLooseBase(this,us)[us]()}if(babelHelpers.classPrivateFieldLooseBase(this,is)[is].workTimeAvailable){babelHelpers.classPrivateFieldLooseBase(this,ds)[ds]()}u.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,ts)[ts],"click",(()=>{u.Event.unbindAll(babelHelpers.classPrivateFieldLooseBase(this,ts)[ts]);babelHelpers.classPrivateFieldLooseBase(this,rs)[rs]().createSkeletonFromConfig(e.skeleton).show();u.Runtime.loadExtension(["intranet.avatar-widget"]).then((()=>{babelHelpers.classPrivateFieldLooseBase(this,ls)[ls]()})).catch((()=>{}))}))}}function Ps(){babelHelpers.classPrivateFieldLooseBase(this,os)[os]().then((e=>{babelHelpers.classPrivateFieldLooseBase(this,rs)[rs]().clearBeforeInsertContent();a.AvatarWidget.getInstance().setOptions({buttonWrapper:babelHelpers.classPrivateFieldLooseBase(this,ts)[ts],loader:babelHelpers.classPrivateFieldLooseBase(this,rs)[rs]().getPopup(),data:e.data}).show();u.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,ts)[ts],"click",(()=>{a.AvatarWidget.getInstance().show()}))})).catch((()=>{}))}function ms(){return babelHelpers.classPrivateFieldLooseBase(this,as)[as].remember("widgetLoader",(()=>new b.WidgetLoader({id:"bx-avatar-header-popup",bindElement:babelHelpers.classPrivateFieldLooseBase(this,ts)[ts],width:450,useAngle:false,fixed:true,offsetTop:-50,offsetLeft:50})))}function fs(){return babelHelpers.classPrivateFieldLooseBase(this,as)[as].remember("content",(()=>new Promise(((e,s)=>{u.ajax.runAction("intranet.user.widget.getContent").then((s=>e(s))).catch((e=>s(e)))}))))}function Ls(){babelHelpers.classPrivateFieldLooseBase(this,vs)[vs]().renderTo(babelHelpers.classPrivateFieldLooseBase(this,cs)[cs]())}function gs(){babelHelpers.classPrivateFieldLooseBase(this,ps)[ps]().renderTo(babelHelpers.classPrivateFieldLooseBase(this,bs)[bs]())}function Fs(){return babelHelpers.classPrivateFieldLooseBase(this,as)[as].remember("counterWrapper",(()=>babelHelpers.classPrivateFieldLooseBase(this,ts)[ts].querySelector(".air-user-profile-avatar__counter")))}function Bs(){return babelHelpers.classPrivateFieldLooseBase(this,as)[as].remember("workTimeStateWrapper",(()=>babelHelpers.classPrivateFieldLooseBase(this,ts)[ts].querySelector(".air-user-profile-avatar__work-time-state")))}function Hs(){return babelHelpers.classPrivateFieldLooseBase(this,as)[as].remember("counter",(()=>new p.Counter({color:p.Counter.Color.DANGER,size:p.Counter.Size.MEDIUM,value:babelHelpers.classPrivateFieldLooseBase(this,is)[is].signDocumentsCounter,useAirDesign:true,style:p.CounterStyle.FILLED_ALERT})))}function ys(){return babelHelpers.classPrivateFieldLooseBase(this,as)[as].remember("workTimeState",(()=>new i.WorkTimeStateIcon({state:babelHelpers.classPrivateFieldLooseBase(this,is)[is].workTimeState,action:babelHelpers.classPrivateFieldLooseBase(this,is)[is].workTimeAction})))}function ks(){n.PULL.subscribe({moduleId:"sign",command:babelHelpers.classPrivateFieldLooseBase(this,is)[is].signDocumentsPullEventName,callback:e=>{if(!u.Type.isNumber(e==null?void 0:e.needActionCount)){return}if((e==null?void 0:e.needActionCount)>0){babelHelpers.classPrivateFieldLooseBase(this,vs)[vs]().update(e.needActionCount)}else{babelHelpers.classPrivateFieldLooseBase(this,vs)[vs]().destroy()}}})}function ws(){const e=babelHelpers.classPrivateFieldLooseBase(this,ts)[ts].querySelector("i");c.EventEmitter.subscribe("BX.Intranet.UserProfile:Avatar:changed",(s=>{const t=s.getData()[0];const a=t&&t.url?t.url:"";const i=t&&t.userId?t.userId:0;if(babelHelpers.classPrivateFieldLooseBase(this,is)[is].userId===i&&e){e.style=u.Type.isStringFilled(a)?`background-size: cover; background-image: url('${encodeURI(a)}')`:""}}))}Object.defineProperty(_s,hs,{value:ws});Object.defineProperty(_s,us,{value:ks});Object.defineProperty(_s,ps,{value:ys});Object.defineProperty(_s,vs,{value:Hs});Object.defineProperty(_s,bs,{value:Bs});Object.defineProperty(_s,cs,{value:Fs});Object.defineProperty(_s,ds,{value:gs});Object.defineProperty(_s,ns,{value:Ls});Object.defineProperty(_s,os,{value:fs});Object.defineProperty(_s,rs,{value:ms});Object.defineProperty(_s,ls,{value:Ps});Object.defineProperty(_s,ts,{writable:true,value:void 0});Object.defineProperty(_s,as,{writable:true,value:new d.MemoryCache});Object.defineProperty(_s,is,{writable:true,value:void 0});var Cs=babelHelpers.classPrivateFieldLooseKey("options");var Es=babelHelpers.classPrivateFieldLooseKey("buttonWrapper");var Os=babelHelpers.classPrivateFieldLooseKey("cache");var js=babelHelpers.classPrivateFieldLooseKey("getExtensionWidgetName");var Is=babelHelpers.classPrivateFieldLooseKey("showWidget");var xs=babelHelpers.classPrivateFieldLooseKey("getWidget");var Ss=babelHelpers.classPrivateFieldLooseKey("getWidgetLoader");var Ks=babelHelpers.classPrivateFieldLooseKey("getContent");var Ts=babelHelpers.classPrivateFieldLooseKey("getCounter");var Ds=babelHelpers.classPrivateFieldLooseKey("getCounterWrapper");var Rs=babelHelpers.classPrivateFieldLooseKey("setCounterValue");var As=babelHelpers.classPrivateFieldLooseKey("setEventHandlers");var Ms=babelHelpers.classPrivateFieldLooseKey("showInfrastructureSlider");class Ws{static init(e){babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs]=e;babelHelpers.classPrivateFieldLooseBase(this,Es)[Es]=document.querySelector('[data-id="licenseWidgetWrapper"]');babelHelpers.classPrivateFieldLooseBase(this,As)[As]();if(babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs].isCloud&&babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs].ordersAwaitingPayment>0){babelHelpers.classPrivateFieldLooseBase(this,Rs)[Rs](babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs].ordersAwaitingPayment)}u.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,Es)[Es],"click",(()=>{u.Event.unbindAll(babelHelpers.classPrivateFieldLooseBase(this,Es)[Es]);babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss]().createSkeletonFromConfig(e.skeleton).show();u.Runtime.loadExtension([babelHelpers.classPrivateFieldLooseBase(this,js)[js]()]).then((()=>{babelHelpers.classPrivateFieldLooseBase(this,Is)[Is]()})).catch((()=>{}))}))}}function Xs(){if(babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs].isCloud){return"bitrix24.license-widget"}return"intranet.license-widget"}function Ns(){babelHelpers.classPrivateFieldLooseBase(this,Ks)[Ks]().then((e=>{babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss]().clearBeforeInsertContent();let s=null;if(babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs].isCloud){s=e.data;s.loader=babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss]().getPopup();s.wrapper=babelHelpers.classPrivateFieldLooseBase(this,Es)[Es]}else{s={loader:babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss]().getPopup(),buttonWrapper:babelHelpers.classPrivateFieldLooseBase(this,Es)[Es],data:e.data}}babelHelpers.classPrivateFieldLooseBase(this,xs)[xs]().setOptions(s).show();u.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,Es)[Es],"click",(()=>{babelHelpers.classPrivateFieldLooseBase(this,xs)[xs]().show()}))})).catch((()=>{}))}function Us(){return babelHelpers.classPrivateFieldLooseBase(this,Os)[Os].remember("widget",(()=>{if(babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs].isCloud){return l.LicenseWidget.getInstance()}return r.LicenseWidget.getInstance()}))}function $s(){return babelHelpers.classPrivateFieldLooseBase(this,Os)[Os].remember("widgetLoader",(()=>new b.WidgetLoader({bindElement:babelHelpers.classPrivateFieldLooseBase(this,Es)[Es],width:374,id:"bx-license-header-popup"})))}function zs(){return babelHelpers.classPrivateFieldLooseBase(this,Os)[Os].remember("content",(()=>new Promise(((e,s)=>{if(babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs].isCloud){u.ajax.runComponentAction("bitrix:bitrix24.license.widget","getData",{mode:"class"}).then((s=>e(s))).catch((e=>s(e)))}else{u.ajax.runAction("intranet.license.widget.getContent").then((s=>e(s))).catch((e=>s(e)))}}))))}function qs(){return babelHelpers.classPrivateFieldLooseBase(this,Os)[Os].remember("counter",(()=>new p.Counter({color:p.CounterColor.DANGER,useAirDesign:true,style:p.CounterStyle.FILLED_ALERT})))}function Gs(){return babelHelpers.classPrivateFieldLooseBase(this,Os)[Os].remember("counter-wrapper",(()=>babelHelpers.classPrivateFieldLooseBase(this,Es)[Es].querySelector(".air-header-button__counter")))}function Ys(e){if(e<1){babelHelpers.classPrivateFieldLooseBase(this,Ts)[Ts]().destroy();babelHelpers.classPrivateFieldLooseBase(this,Os)[Os].delete("counter")}if(e>0&&babelHelpers.classPrivateFieldLooseBase(this,Ds)[Ds]()){babelHelpers.classPrivateFieldLooseBase(this,Ts)[Ts]().update(e);babelHelpers.classPrivateFieldLooseBase(this,Ts)[Ts]().renderTo(babelHelpers.classPrivateFieldLooseBase(this,Ds)[Ds]())}}function Js(){if(babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs].isCloud&&babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs].isSidePanelDemoLicense){BX.SidePanel.Instance.bindAnchors({rules:[{condition:[/\/settings\/license_demo.php/],handler(e){o.FeaturePromotersRegistry.getPromoter({code:"limit_demo"}).show();e.stopPropagation();e.preventDefault()}}]})}if(babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs].isCloud&&babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs].isAdmin){n.PULL.subscribe({moduleId:"bitrix24",command:"updateCountOrdersAwaitingPayment",callback:e=>{c.EventEmitter.emit("BX.Bitrix24.Orders:updateOrdersAwaitingPayment",new c.BaseEvent({data:{counter:Number(e.count)}}));if(e.count>0){babelHelpers.classPrivateFieldLooseBase(this,Rs)[Rs](Number(e.count))}}});c.EventEmitter.subscribe(c.EventEmitter.GLOBAL_TARGET,"Bitrix24InfrastructureSlider:show",babelHelpers.classPrivateFieldLooseBase(this,Ms)[Ms].bind(this))}}function Vs(){const e=babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs].infrastructureForm;BX.SidePanel.Instance.open("bx-infrastructure-slider",{contentCallback:()=>`<script data-b24-form="inline/${e.id}/${e.secCode}" data-skip-moving="true"><\/script>`,width:664,loader:"default-loader",cacheable:false,closeByEsc:false,data:{rightBoundary:0},events:{onOpen:()=>{(function(e,s,t){const a=s.createElement("script");a.async=true;a.src=`${t}?${Date.now()/18e4|0}`;const i=s.getElementsByTagName("script")[0];i.parentNode.insertBefore(a,i)})(window,document,`https://bitrix24.team/upload/crm/form/loader_${e.id}_${e.secCode}.js`)},onOpenComplete:()=>{top.addEventListener("b24:form:send:success",(s=>{if(s.detail.object.identification.id===e.id){u.ajax.runComponentAction("bitrix:bitrix24.license.widget","setOptionWaitingInfrastructure",{mode:"class",data:{}})}}))}}})}Object.defineProperty(Ws,Ms,{value:Vs});Object.defineProperty(Ws,As,{value:Js});Object.defineProperty(Ws,Rs,{value:Ys});Object.defineProperty(Ws,Ds,{value:Gs});Object.defineProperty(Ws,Ts,{value:qs});Object.defineProperty(Ws,Ks,{value:zs});Object.defineProperty(Ws,Ss,{value:$s});Object.defineProperty(Ws,xs,{value:Us});Object.defineProperty(Ws,Is,{value:Ns});Object.defineProperty(Ws,js,{value:Xs});Object.defineProperty(Ws,Cs,{writable:true,value:void 0});Object.defineProperty(Ws,Es,{writable:true,value:void 0});Object.defineProperty(Ws,Os,{writable:true,value:new d.MemoryCache});var Qs=babelHelpers.classPrivateFieldLooseKey("buttonWrapper");var Zs=babelHelpers.classPrivateFieldLooseKey("cache");var et=babelHelpers.classPrivateFieldLooseKey("options");var st=babelHelpers.classPrivateFieldLooseKey("showWidget");var tt=babelHelpers.classPrivateFieldLooseKey("getWidgetLoader");var at=babelHelpers.classPrivateFieldLooseKey("getContent");var it=babelHelpers.classPrivateFieldLooseKey("setEventHandlers");var lt=babelHelpers.classPrivateFieldLooseKey("onReceiveCounterValue");var rt=babelHelpers.classPrivateFieldLooseKey("getCounterWrapper");var ot=babelHelpers.classPrivateFieldLooseKey("getCounter");var nt=babelHelpers.classPrivateFieldLooseKey("getCounterValue");var dt=babelHelpers.classPrivateFieldLooseKey("onFirstWatchNewStructure");class ct{static init(e){babelHelpers.classPrivateFieldLooseBase(this,et)[et]=e;babelHelpers.classPrivateFieldLooseBase(this,Qs)[Qs]=document.querySelector('[data-id="invitationButton"]');u.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,Qs)[Qs],"click",(()=>{u.Event.unbindAll(babelHelpers.classPrivateFieldLooseBase(this,Qs)[Qs]);babelHelpers.classPrivateFieldLooseBase(this,tt)[tt]().createSkeletonFromConfig(e.skeleton).show();u.Runtime.loadExtension(["intranet.invitation-widget"]).then((()=>{babelHelpers.classPrivateFieldLooseBase(this,st)[st]()})).catch((()=>{}))}));if(babelHelpers.classPrivateFieldLooseBase(this,et)[et].invitationCounter>0){babelHelpers.classPrivateFieldLooseBase(this,ot)[ot]().renderTo(babelHelpers.classPrivateFieldLooseBase(this,rt)[rt]())}babelHelpers.classPrivateFieldLooseBase(this,it)[it]()}}function bt(){babelHelpers.classPrivateFieldLooseBase(this,at)[at]().then((e=>{babelHelpers.classPrivateFieldLooseBase(this,tt)[tt]().clearBeforeInsertContent();v.InvitationWidget.getInstance().setOptions({buttonWrapper:babelHelpers.classPrivateFieldLooseBase(this,Qs)[Qs],loader:babelHelpers.classPrivateFieldLooseBase(this,tt)[tt]().getPopup(),...e.data}).show();u.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,Qs)[Qs],"click",(()=>{v.InvitationWidget.getInstance().show()}))})).catch((()=>{}))}function vt(){return babelHelpers.classPrivateFieldLooseBase(this,Zs)[Zs].remember("widgetLoader",(()=>new b.WidgetLoader({bindElement:babelHelpers.classPrivateFieldLooseBase(this,Qs)[Qs],width:350,id:"bx-invitation-header-popup"})))}function pt(){return babelHelpers.classPrivateFieldLooseBase(this,Zs)[Zs].remember("content",(()=>new Promise(((e,s)=>{u.ajax.runAction("intranet.invitationwidget.getData",{data:{},analyticsLabel:{headerPopup:"Y"}}).then((s=>e(s))).catch((e=>s(e)))}))))}function ut(){c.EventEmitter.subscribeOnce("HR.company-structure:first-popup-showed",babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].bind(this));c.EventEmitter.subscribe("onPullEvent-main",(e=>{const[s,t]=e.getCompatData();if(s==="user_counter"&&t[u.Loc.getMessage("SITE_ID")]){const e=t[u.Loc.getMessage("SITE_ID")][babelHelpers.classPrivateFieldLooseBase(this,et)[et].counterId];if(e>0){babelHelpers.classPrivateFieldLooseBase(this,lt)[lt](e)}}}))}function ht(e){if(babelHelpers.classPrivateFieldLooseBase(this,et)[et].shouldShowStructureCounter){e++}babelHelpers.classPrivateFieldLooseBase(this,ot)[ot]().update(e);babelHelpers.classPrivateFieldLooseBase(this,et)[et].invitationCounter=e;if(e>0){babelHelpers.classPrivateFieldLooseBase(this,ot)[ot]().renderTo(babelHelpers.classPrivateFieldLooseBase(this,rt)[rt]())}else{babelHelpers.classPrivateFieldLooseBase(this,ot)[ot]().destroy();babelHelpers.classPrivateFieldLooseBase(this,Zs)[Zs].delete("counter")}}function _t(){return babelHelpers.classPrivateFieldLooseBase(this,Zs)[Zs].remember("counter-wrapper",(()=>babelHelpers.classPrivateFieldLooseBase(this,Qs)[Qs].querySelector(".invitation-widget-counter")))}function Pt(){return babelHelpers.classPrivateFieldLooseBase(this,Zs)[Zs].remember("counter",(()=>new p.Counter({value:babelHelpers.classPrivateFieldLooseBase(this,nt)[nt](),color:p.Counter.Color.DANGER,useAirDesign:true,style:p.CounterStyle.FILLED_ALERT})))}function mt(){var e;let s=Number(babelHelpers.classPrivateFieldLooseBase(this,et)[et].invitationCounter);if((e=babelHelpers.classPrivateFieldLooseBase(this,et)[et].shouldShowStructureCounter)!=null?e:false){s++}return s}function ft(){let e=babelHelpers.classPrivateFieldLooseBase(this,ot)[ot]().value;if(!u.Type.isNumber(e)){return}if(!babelHelpers.classPrivateFieldLooseBase(this,et)[et].shouldShowStructureCounter){return}e--;babelHelpers.classPrivateFieldLooseBase(this,et)[et].shouldShowStructureCounter=false;babelHelpers.classPrivateFieldLooseBase(this,ot)[ot]().update(e);babelHelpers.classPrivateFieldLooseBase(this,et)[et].invitationCounter=e;if(e>0){babelHelpers.classPrivateFieldLooseBase(this,ot)[ot]().renderTo(babelHelpers.classPrivateFieldLooseBase(this,rt)[rt]())}else{babelHelpers.classPrivateFieldLooseBase(this,ot)[ot]().destroy();babelHelpers.classPrivateFieldLooseBase(this,Zs)[Zs].delete("counter")}}Object.defineProperty(ct,dt,{value:ft});Object.defineProperty(ct,nt,{value:mt});Object.defineProperty(ct,ot,{value:Pt});Object.defineProperty(ct,rt,{value:_t});Object.defineProperty(ct,lt,{value:ht});Object.defineProperty(ct,it,{value:ut});Object.defineProperty(ct,at,{value:pt});Object.defineProperty(ct,tt,{value:vt});Object.defineProperty(ct,st,{value:bt});Object.defineProperty(ct,Qs,{writable:true,value:void 0});Object.defineProperty(ct,Zs,{writable:true,value:new d.MemoryCache});Object.defineProperty(ct,et,{writable:true,value:void 0});let Lt=e=>e,gt,Ft;var Bt=babelHelpers.classPrivateFieldLooseKey("popup");var Ht=babelHelpers.classPrivateFieldLooseKey("initPopup");var yt=babelHelpers.classPrivateFieldLooseKey("renderPopupContent");class kt{constructor(){Object.defineProperty(this,yt,{value:Ct});Object.defineProperty(this,Ht,{value:wt});Object.defineProperty(this,Bt,{writable:true,value:void 0})}async showLanguageListPopup(e,s){if(!babelHelpers.classPrivateFieldLooseBase(this,Bt)[Bt]){await babelHelpers.classPrivateFieldLooseBase(this,Ht)[Ht](e,s)}if(babelHelpers.classPrivateFieldLooseBase(this,Bt)[Bt].isShown()){return}babelHelpers.classPrivateFieldLooseBase(this,Bt)[Bt].show()}hideLanguageListPopup(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,Bt)[Bt])==null?void 0:e.close()}switchPortalLanguage(e){window.location.href=`/auth/?user_lang=${e}&backurl=${C()}`}}async function wt(e,s){const t=()=>{this.hideLanguageListPopup()};const{Popup:a}=await u.Runtime.loadExtension("main.popup");const i={bindElement:e,autoHide:true,closeByEcs:true,cachable:false,content:babelHelpers.classPrivateFieldLooseBase(this,yt)[yt](s),events:{onPopupClose:()=>{u.Event.unbind(window,"scroll",t);babelHelpers.classPrivateFieldLooseBase(this,Bt)[Bt].destroy();babelHelpers.classPrivateFieldLooseBase(this,Bt)[Bt]=null}}};babelHelpers.classPrivateFieldLooseBase(this,Bt)[Bt]=new a(i);u.Event.bind(window,"scroll",t)}function Ct(e){const s=u.Tag.render(gt||(gt=Lt`<div class="intranet__language-popup_list"></div>`));Object.entries(e).forEach((([e,t])=>{const a=u.Tag.render(Ft||(Ft=Lt`
				<div class="intranet__language-popup_language-item">
					<span class="intranet__language-popup_language-item-name">${0}</span>
					<span class="intranet__language-popup_language-beta">${0}</span>
				</div>
			`),t.NAME,t.IS_BETA?", beta":"");u.Event.bind(a,"click",(()=>{this.switchPortalLanguage(e)}));u.Dom.append(a,s)}));return s}const Et=new kt;const Ot=new De;window.showPartnerForm=h;window.B24={licenseInfoPopup:{show(e,s,t,a){const i=u.Reflection.getClass("BX.Bitrix24.LicenseInfoPopup");if(i){i.show(e,s,t,a)}}},updateCounters(e,s){const t=u.Reflection.getClass("BX.Intranet.LeftMenu");if(t){t.updateCounters(e,s)}}};e.languageSwitcher=Et;e.PartnerForm=L;e.Template=Ot;e.SearchTitle=Ze;e.InvitationButton=ct;e.LicenseButton=Ws;e.AvatarButton=_s})(this.BX.Intranet.Bitrix24=this.BX.Intranet.Bitrix24||{},BX.SidePanel,BX.UI,BX.Intranet,BX.Timeman,BX.Bitrix24,BX.Intranet,BX.UI,BX,BX.Cache,BX.Event,BX.Intranet,BX.Intranet,BX.UI,BX);
//# sourceMappingURL=bitrix24.bundle.map.js