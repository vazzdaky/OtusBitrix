{"version":3,"file":"copilot-advice.bundle.js","sources":["../src/default-chat-options.js","../src/chat.js","../src/example-chat.js","../src/copilot-advice.js"],"sourcesContent":["import type { CopilotChatOptions } from 'ai.copilot-chat.ui';\nimport { Loc } from 'main.core';\n\nexport const getDefaultChatOptions = (): CopilotChatOptions => {\n\tconst popupWidth = 420;\n\tconst avatarSrc = '/bitrix/js/tasks/flow/copilot-advice/images/copilot-advice-avatar.png';\n\n\treturn {\n\t\tpopupOptions: {\n\t\t\tfixed: true,\n\t\t\twidth: popupWidth,\n\t\t\tbindElement: {\n\t\t\t\tleft: window.innerWidth - popupWidth - 85,\n\t\t\t\ttop: 50,\n\t\t\t},\n\t\t\tcacheable: false,\n\t\t\tclassName: 'tasks-flow__copilot-chat-popup',\n\t\t\tanimation: {\n\t\t\t\tshowClassName: 'tasks-flow__copilot-chat-popup-show',\n\t\t\t\tcloseClassName: 'tasks-flow__copilot-chat-popup-close',\n\t\t\t\tcloseAnimationType: 'animation',\n\t\t\t},\n\t\t},\n\t\tloaderText: Loc.getMessage('TASKS_FLOW_COPILOT_ADVICE_POPUP_LOADER_TEXT'),\n\t\theader: {\n\t\t\ttitle: Loc.getMessage('TASKS_FLOW_COPILOT_ADVICE_POPUP_TITLE'),\n\t\t\tavatar: avatarSrc,\n\t\t\tuseCloseIcon: true,\n\t\t},\n\t\tbotOptions: {\n\t\t\tavatar: avatarSrc,\n\t\t\tmessageTitle: Loc.getMessage('TASKS_FLOW_COPILOT_ADVICE_POPUP_BOT_TITLE'),\n\t\t\tmessageMenuItems: [],\n\t\t},\n\t\tuseInput: false,\n\t\tuseChatStatus: false,\n\t\tscrollToTheEndAfterFirstShow: false,\n\t\tshowCopilotWarningMessage: true,\n\t};\n};\n","import { CopilotChat, CopilotChatMessageType } from 'ai.copilot-chat.ui';\nimport type { CopilotChatMessage, CopilotChatOptions } from 'ai.copilot-chat.ui';\nimport { Loc, ajax, Tag, Runtime } from 'main.core';\nimport { EditForm } from 'tasks.flow.edit-form';\nimport { getDefaultChatOptions } from './default-chat-options';\nimport { Main as IconSetMain } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.main';\nimport type { FlowData } from './copilot-advice';\n\nimport './style.css';\n\nexport class Chat\n{\n\t#flowData: FlowData;\n\t#copilotChat: CopilotChat;\n\t#ifFirstShow: boolean;\n\n\tconstructor(flowData: FlowData)\n\t{\n\t\tthis.#flowData = flowData;\n\t\tthis.#copilotChat = new CopilotChat(this.#getChatOptions());\n\t\tthis.#ifFirstShow = true;\n\t}\n\n\tshow()\n\t{\n\t\tif (this.#ifFirstShow)\n\t\t{\n\t\t\tthis.#copilotChat.showLoader();\n\t\t\tvoid this.#fetchAdvices();\n\t\t\tthis.#ifFirstShow = false;\n\t\t}\n\n\t\tthis.#copilotChat.show();\n\t\tvoid this.#sendAnalytics();\n\t}\n\n\tasync #sendAnalytics(): Promise<void>\n\t{\n\t\tconst { sendData } = await Runtime.loadExtension('ui.analytics');\n\n\t\tsendData({\n\t\t\ttool: 'tasks',\n\t\t\tcategory: 'flows',\n\t\t\tevent: 'copilot_advice_view',\n\t\t\tc_section: 'tasks',\n\t\t\tc_sub_section: 'flows_grid',\n\t\t});\n\t}\n\n\t#getChatOptions(): CopilotChatOptions\n\t{\n\t\tconst chatOptions = getDefaultChatOptions();\n\n\t\tchatOptions.botOptions.messageMenuItems = [\n\t\t\t{\n\t\t\t\tid: 'create-task',\n\t\t\t\ttext: Loc.getMessage('TASKS_FLOW_COPILOT_ADVICE_POPUP_CREATE_TASK'),\n\t\t\t\thtml: this.#getContextMenuItemHtml(Loc.getMessage('TASKS_FLOW_COPILOT_ADVICE_POPUP_CREATE_TASK'), IconSetMain.TASKS),\n\t\t\t\tonclick: (event, menuItem, data) => {\n\t\t\t\t\tBX.SidePanel.Instance.open(this.#flowData.createTaskUrl, {\n\t\t\t\t\t\trequestMethod: 'post',\n\t\t\t\t\t\trequestParams: { DESCRIPTION: `[QUOTE]${data.message.content}[/QUOTE]` },\n\t\t\t\t\t\tcacheable: false,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'create-meeting',\n\t\t\t\thtml: this.#getContextMenuItemHtml(Loc.getMessage('TASKS_FLOW_COPILOT_ADVICE_POPUP_CREATE_MEETING'), IconSetMain.CALENDAR_1),\n\t\t\t\tonclick: (event, menuItem, data) => {\n\t\t\t\t\tconst quotedMessage = `[QUOTE]${data.message.content}[/QUOTE]`;\n\t\t\t\t\tconst sliderLoader = new BX.Calendar.SliderLoader('NEW', { entryDescription: quotedMessage });\n\t\t\t\t\tsliderLoader.show();\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\tif (this.#flowData.canEditFlow)\n\t\t{\n\t\t\tchatOptions.header.menu = {\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'edit-flow',\n\t\t\t\t\t\ttext: Loc.getMessage('TASKS_FLOW_COPILOT_ADVICE_POPUP_EDIT_FLOW'),\n\t\t\t\t\t\tonclick: (event, menuItem) => {\n\t\t\t\t\t\t\tmenuItem?.menuWindow.close?.();\n\t\t\t\t\t\t\tEditForm.createInstance({\n\t\t\t\t\t\t\t\tisFeatureTrialable: this.#flowData.isFeatureTrialable,\n\t\t\t\t\t\t\t\tflowId: this.#flowData.flowId,\n\t\t\t\t\t\t\t\tcontext: 'copilot_advice',\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t};\n\t\t}\n\n\t\treturn chatOptions;\n\t}\n\n\t#getContextMenuItemHtml(text: string, icon: string): string\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-flow__copilot-chat-context-menu-item\">\n\t\t\t\t<span>${text}</span>\n\t\t\t\t<span class=\"ui-icon-set --${icon}\"></span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tasync #fetchAdvices(): void\n\t{\n\t\tconst result = await ajax.runAction('tasks.flow.Copilot.Advice.get', { data: { flowId: this.#flowData.flowId } });\n\n\t\tif (result.status !== 'success')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst advices: Array = result.data?.advices ?? [];\n\t\tconst createDate: Date = new Date(result.data?.createDateTime ?? new Date());\n\n\t\tthis.#copilotChat.addBotMessage(this.#getFirstMessageByEfficiency(this.#flowData.flowEfficiency, createDate));\n\n\t\tadvices.forEach((advice: string) => {\n\t\t\tthis.#copilotChat.addBotMessage({\n\t\t\t\tcontent: advice,\n\t\t\t\tstatus: 'delivered',\n\t\t\t\tdateCreated: createDate.toString(),\n\t\t\t\tviewed: true,\n\t\t\t});\n\t\t});\n\n\t\tthis.#copilotChat.hideLoader();\n\t}\n\n\t#getFirstMessageByEfficiency(efficiency: number, dateCreated: Date): CopilotChatMessage\n\t{\n\t\tconst subtitle = efficiency > 80\n\t\t\t? Loc.getMessage('TASKS_FLOW_COPILOT_ADVICE_POPUP_SYSTEM_MESSAGE_SUBTITLE_HIGH', { '#EFFICIENCY#': efficiency })\n\t\t\t: Loc.getMessage('TASKS_FLOW_COPILOT_ADVICE_POPUP_SYSTEM_MESSAGE_SUBTITLE_LOW', { '#EFFICIENCY#': efficiency })\n\t\t;\n\n\t\tconst content = efficiency > 80\n\t\t\t? Loc.getMessage('TASKS_FLOW_COPILOT_ADVICE_POPUP_SYSTEM_MESSAGE_HIGH')\n\t\t\t: Loc.getMessage('TASKS_FLOW_COPILOT_ADVICE_POPUP_SYSTEM_MESSAGE_LOW')\n\t\t;\n\n\t\treturn {\n\t\t\tcontent: '',\n\t\t\tstatus: 'delivered',\n\t\t\ttype: CopilotChatMessageType.WELCOME_FLOWS,\n\t\t\tdateCreated: dateCreated.toString(),\n\t\t\tviewed: true,\n\t\t\tparams: {\n\t\t\t\ttitle: Loc.getMessage('TASKS_FLOW_COPILOT_ADVICE_POPUP_SYSTEM_MESSAGE_TITLE'),\n\t\t\t\tsubtitle,\n\t\t\t\tcontent,\n\t\t\t},\n\t\t};\n\t}\n\n\thide(): void\n\t{\n\t\tthis.#copilotChat.hide();\n\t}\n}\n","import { CopilotChat, CopilotChatMessageType } from 'ai.copilot-chat.ui';\nimport { Loc, Runtime } from 'main.core';\nimport { getDefaultChatOptions } from './default-chat-options';\n\nexport class ExampleChat\n{\n\t#copilotChat: CopilotChat;\n\n\tconstructor()\n\t{\n\t\tthis.#copilotChat = this.#createCopilotChat();\n\t}\n\n\t#createCopilotChat(): CopilotChat\n\t{\n\t\tconst chat = new CopilotChat(getDefaultChatOptions());\n\n\t\tchat.addBotMessage({\n\t\t\tcontent: '',\n\t\t\tstatus: 'delivered',\n\t\t\ttype: CopilotChatMessageType.WELCOME_FLOWS,\n\t\t\tdateCreated: (new Date()).toString(),\n\t\t\tviewed: true,\n\t\t\tparams: {\n\t\t\t\ttitle: Loc.getMessage('TASKS_FLOW_COPILOT_ADVICE_POPUP_SYSTEM_MESSAGE_TITLE'),\n\t\t\t\tsubtitle: Loc.getMessage('TASKS_FLOW_COPILOT_ADVICE_POPUP_SYSTEM_MESSAGE_SUBTITLE_EXAMPLE'),\n\t\t\t\tcontent: Loc.getMessage('TASKS_FLOW_COPILOT_ADVICE_POPUP_SYSTEM_MESSAGE_EXAMPLE'),\n\t\t\t},\n\t\t});\n\n\t\tchat.addBotMessage({\n\t\t\tcontent: Loc.getMessage('TASKS_FLOW_COPILOT_ADVICE_POPUP_MESSAGE_EXAMPLE_1'),\n\t\t\tstatus: 'delivered',\n\t\t\tdateCreated: (new Date()).toString(),\n\t\t\tviewed: true,\n\t\t});\n\n\t\tchat.addBotMessage({\n\t\t\tcontent: Loc.getMessage('TASKS_FLOW_COPILOT_ADVICE_POPUP_MESSAGE_EXAMPLE_2'),\n\t\t\tstatus: 'delivered',\n\t\t\tdateCreated: (new Date()).toString(),\n\t\t\tviewed: true,\n\t\t});\n\n\t\tchat.addBotMessage({\n\t\t\tcontent: Loc.getMessage('TASKS_FLOW_COPILOT_ADVICE_POPUP_MESSAGE_EXAMPLE_3'),\n\t\t\tstatus: 'delivered',\n\t\t\tdateCreated: (new Date()).toString(),\n\t\t\tviewed: true,\n\t\t});\n\n\t\treturn chat;\n\t}\n\n\tshow()\n\t{\n\t\tthis.#copilotChat.show();\n\t\tvoid this.#sendAnalytics();\n\t}\n\n\tasync #sendAnalytics(): Promise<void>\n\t{\n\t\tconst { sendData } = await Runtime.loadExtension('ui.analytics');\n\n\t\tsendData({\n\t\t\ttool: 'tasks',\n\t\t\tcategory: 'flows',\n\t\t\tevent: 'copilot_example_view',\n\t\t\tc_section: 'tasks',\n\t\t\tc_sub_section: 'flows_grid',\n\t\t});\n\t}\n\n\thide()\n\t{\n\t\tthis.#copilotChat.hide();\n\t}\n}\n","import { Chat } from './chat';\nimport { ExampleChat } from './example-chat';\n\nexport type FlowData = {\n\tflowId: number,\n\tflowEfficiency: number,\n\tcanEditFlow: boolean,\n\tcreateTaskUrl: string,\n\tisFeatureTrialable: boolean,\n};\n\nexport class CopilotAdvice\n{\n\tstatic currentChat: Chat | ExampleChat | null = null;\n\n\tstatic showExample(): void\n\t{\n\t\tif (CopilotAdvice.currentChat)\n\t\t{\n\t\t\tCopilotAdvice.currentChat.hide();\n\t\t}\n\n\t\tCopilotAdvice.currentChat = new ExampleChat();\n\t\tCopilotAdvice.currentChat.show();\n\t}\n\n\tstatic show(flowData: FlowData)\n\t{\n\t\tif (CopilotAdvice.currentChat)\n\t\t{\n\t\t\tCopilotAdvice.currentChat.hide();\n\t\t}\n\n\t\tCopilotAdvice.currentChat = new Chat(flowData);\n\t\tCopilotAdvice.currentChat.show();\n\t}\n}\n"],"names":["getDefaultChatOptions","popupWidth","avatarSrc","popupOptions","fixed","width","bindElement","left","window","innerWidth","top","cacheable","className","animation","showClassName","closeClassName","closeAnimationType","loaderText","Loc","getMessage","header","title","avatar","useCloseIcon","botOptions","messageTitle","messageMenuItems","useInput","useChatStatus","scrollToTheEndAfterFirstShow","showCopilotWarningMessage","Chat","constructor","flowData","CopilotChat","show","showLoader","hide","sendData","Runtime","loadExtension","tool","category","event","c_section","c_sub_section","chatOptions","id","text","html","IconSetMain","TASKS","onclick","menuItem","data","BX","SidePanel","Instance","open","createTaskUrl","requestMethod","requestParams","DESCRIPTION","message","content","CALENDAR_1","quotedMessage","sliderLoader","Calendar","SliderLoader","entryDescription","canEditFlow","menu","items","menuWindow","close","EditForm","createInstance","isFeatureTrialable","flowId","context","icon","Tag","render","result","ajax","runAction","status","advices","createDate","Date","createDateTime","addBotMessage","flowEfficiency","forEach","advice","dateCreated","toString","viewed","hideLoader","efficiency","subtitle","type","CopilotChatMessageType","WELCOME_FLOWS","params","ExampleChat","chat","CopilotAdvice","showExample","currentChat"],"mappings":"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"}