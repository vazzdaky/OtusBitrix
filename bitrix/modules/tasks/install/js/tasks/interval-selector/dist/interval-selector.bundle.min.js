this.BX=this.BX||{};(function(e,s,t,a){"use strict";let l=e=>e,i;const r="days";const o=["hours","days","months"];var n=babelHelpers.classPrivateFieldLooseKey("params");var v=babelHelpers.classPrivateFieldLooseKey("layout");var b=babelHelpers.classPrivateFieldLooseKey("intervals");var c=babelHelpers.classPrivateFieldLooseKey("currentInterval");var d=babelHelpers.classPrivateFieldLooseKey("showDropdownIcon");var p=babelHelpers.classPrivateFieldLooseKey("showIntervalMenu");var u=babelHelpers.classPrivateFieldLooseKey("getIntervalPhrase");var h=babelHelpers.classPrivateFieldLooseKey("getIntervalDuration");class P extends a.EventEmitter{constructor(e={}){super(e);Object.defineProperty(this,h,{value:H});Object.defineProperty(this,u,{value:B});Object.defineProperty(this,p,{value:L});Object.defineProperty(this,n,{writable:true,value:void 0});Object.defineProperty(this,v,{writable:true,value:void 0});Object.defineProperty(this,b,{writable:true,value:void 0});Object.defineProperty(this,c,{writable:true,value:void 0});Object.defineProperty(this,d,{writable:true,value:false});this.setEventNamespace("BX.Tasks.IntervalSelector");babelHelpers.classPrivateFieldLooseBase(this,n)[n]=e;babelHelpers.classPrivateFieldLooseBase(this,v)[v]={};babelHelpers.classPrivateFieldLooseBase(this,b)[b]=e.intervals||o;babelHelpers.classPrivateFieldLooseBase(this,c)[c]=e.defaultInterval||r;if(babelHelpers.classPrivateFieldLooseBase(this,n)[n].value){this.setSuitableInterval(babelHelpers.classPrivateFieldLooseBase(this,n)[n].value)}if(e.showDropdownIcon){babelHelpers.classPrivateFieldLooseBase(this,d)[d]=true}}render(){babelHelpers.classPrivateFieldLooseBase(this,v)[v].intervalSelector=s.Tag.render(i||(i=l`
			<div class="tasks-interval-selector${0}">
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,d)[d]?" tasks-interval-selector-dropdown":"",babelHelpers.classPrivateFieldLooseBase(this,u)[u](babelHelpers.classPrivateFieldLooseBase(this,c)[c]));s.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,v)[v].intervalSelector,"click",babelHelpers.classPrivateFieldLooseBase(this,p)[p].bind(this));return babelHelpers.classPrivateFieldLooseBase(this,v)[v].intervalSelector}getInterval(){return babelHelpers.classPrivateFieldLooseBase(this,c)[c]}getDuration(){return babelHelpers.classPrivateFieldLooseBase(this,h)[h](babelHelpers.classPrivateFieldLooseBase(this,c)[c])}setSuitableInterval(e){const s=babelHelpers.classPrivateFieldLooseBase(this,b)[b].map((s=>({interval:s,value:e/babelHelpers.classPrivateFieldLooseBase(this,h)[h](s)})));const t=s.reduce(((e,s)=>{if(s.value%1===0&&s.value<=e.value){return{interval:s.interval,value:s.value}}return e}),{value:Math.max(...s.map((e=>e.value)))});this.setInterval(t.interval)}setInterval(e){babelHelpers.classPrivateFieldLooseBase(this,c)[c]=e;if(babelHelpers.classPrivateFieldLooseBase(this,v)[v].intervalSelector){babelHelpers.classPrivateFieldLooseBase(this,v)[v].intervalSelector.innerText=babelHelpers.classPrivateFieldLooseBase(this,u)[u](e)}}}function L(){let e;const a=()=>{const s=e.getPopupWindow();s.adjustPosition();const t=s.bindElement.getBoundingClientRect();if(t.top>window.innerHeight||t.bottom<0){e.close()}};e=t.MenuManager.create({id:"tasks-flow-create-planned-completion-time-interval-menu"+Date.now(),bindElement:babelHelpers.classPrivateFieldLooseBase(this,v)[v].intervalSelector,items:babelHelpers.classPrivateFieldLooseBase(this,b)[b].map((s=>({id:s,text:babelHelpers.classPrivateFieldLooseBase(this,u)[u](s),onclick:(s,t)=>{this.setInterval(t.id);this.emit("intervalChanged",{interval:t.id});e.close()}}))),events:{onShow:()=>{const t=e.getPopupWindow();const l=t.getPopupContainer().offsetWidth;const i=t.bindElement.offsetWidth;t.setOffset({offsetLeft:i/2-l/2+4,offsetTop:5});t.adjustPosition();s.Event.bind(window,"scroll",a,true)},onClose:()=>{e.destroy();s.Event.unbind(window,"scroll",a,true)}}});e.show()}function B(e){return s.Loc.getMessage(`TASKS_INTERVAL_SELECTOR_${e.toUpperCase()}`)}function H(e){const s={minutes:60,hours:60*60,days:60*60*24,months:60*60*24*30};return s[e]}e.IntervalSelector=P})(this.BX.Tasks=this.BX.Tasks||{},BX,BX.Main,BX.Event);
//# sourceMappingURL=interval-selector.bundle.map.js