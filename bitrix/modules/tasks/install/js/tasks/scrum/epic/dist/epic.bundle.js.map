{"version":3,"file":"epic.bundle.js","sources":["../src/filter.js","../src/request.sender.js","../src/epic.js"],"sourcesContent":["import { EventEmitter } from 'main.core.events';\n\ntype Props = {\n\tfilterId: string,\n};\n\nexport class Filter\n{\n\t#props: Props;\n\t#filter: BX.Main.Filter;\n\t#popupManager: BX.Main.PopupManager;\n\t#fields: any;\n\n\tconstructor(props: Props)\n\t{\n\t\tthis.#props = props;\n\t\tthis.#init();\n\t}\n\n\t#init()\n\t{\n\t\tthis.#filter = BX.Main.filterManager.getById(this.#props.filterId);\n\t\tthis.#popupManager = BX.Main.PopupManager;\n\t\tthis.#updateFields();\n\t\tthis.#subscribeToEvents();\n\t}\n\n\t#updateFields()\n\t{\n\t\tthis.#fields = this.#filter.getFilterFieldsValues();\n\t}\n\n\t#unSubscribeToEvents()\n\t{\n\t\tEventEmitter.unsubscribe('BX.Main.Filter:apply', this.#applyFilterHandler.bind(this));\n\t\tEventEmitter.unsubscribe('BX.Main.Filter:onGetStopBlur', this.#onGetStopBlur.bind(this));\n\t}\n\n\t#subscribeToEvents()\n\t{\n\t\tEventEmitter.subscribe('BX.Main.Filter:apply', this.#applyFilterHandler.bind(this));\n\t\tEventEmitter.subscribe('BX.Main.Filter:onGetStopBlur', this.#onGetStopBlur.bind(this));\n\t}\n\n\t#applyFilterHandler()\n\t{\n\t\tthis.#updateFields();\n\t}\n\n\t#onGetStopBlur(event)\n\t{\n\t\tconst { target, path } = event.getCompatData()[0];\n\t\tconst popupWindow = path.find(el => {\n\t\t\treturn el.classList?.contains('popup-window') || el.classList?.contains('main-ui-square')\n\t\t});\n\t\tconst popups = [\n\t\t\tthis.#filter.popup.popupContainer,\n\t\t\tthis.#filter.getFieldsPopup().popupContainer\n\t\t];\n\n\t\tif (\n\t\t\tthis.#filter.popup.isShown()\n\t\t\t&& !popups.some(el => el.contains(target))\n\t\t\t&& !popupWindow\n\t\t)\n\t\t{\n\t\t\tthis.#filter.closePopup();\n\t\t}\n\t}\n\n\t#resetFilter()\n\t{\n\t\tthis.#filter.resetFilter();\n\t}\n\n\tdestroyPopups()\n\t{\n\t\tthis.#filter.popup.destroy();\n\t\tthis.#popupManager.getPopupById(this.#props.filterId + '_fields_popup')?.destroy();\n\t\tthis.#popupManager.getPopupById(this.#props.filterId + '-grid-settings-window')?.destroy();\n\t}\n\n\trelease()\n\t{\n\t\tthis.#resetFilter();\n\t\tthis.#unSubscribeToEvents();\n\t\tthis.destroyPopups();\n\t}\n}","import {Loc, Type, ajax} from 'main.core';\nimport {MessageBox} from 'ui.dialogs.messagebox';\n\ntype ErrorResponse = {\n\tdata: string,\n\terrors: Array,\n\tstatus: string\n}\n\nexport class RequestSender\n{\n\tsendRequest(controller: string, action: string, data = {}): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction(\n\t\t\t\t'bitrix:tasks.scrum.' + controller + '.' + action,\n\t\t\t\t{\n\t\t\t\t\tdata: data\n\t\t\t\t}\n\t\t\t).then(resolve, reject);\n\t\t});\n\t}\n\n\tshowErrorAlert(response: ErrorResponse, alertTitle?: string)\n\t{\n\t\tif (Type.isUndefined(response.errors))\n\t\t{\n\t\t\tconsole.error(response);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (response.errors.length)\n\t\t{\n\t\t\tconst firstError = response.errors.shift();\n\t\t\tif (firstError)\n\t\t\t{\n\t\t\t\tconst errorCode = (firstError.code ? firstError.code : '');\n\n\t\t\t\tconst message = firstError.message + ' ' + errorCode;\n\t\t\t\tconst title = (alertTitle ? alertTitle : Loc.getMessage('TSE_ERROR_POPUP_TITLE'));\n\n\t\t\t\tMessageBox.alert(message, title);\n\t\t\t}\n\t\t}\n\t}\n}","import {ajax, Dom, Event, Loc, Runtime, Tag, Text, Type} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\n\nimport {Layout} from 'ui.sidepanel.layout';\nimport {Label} from 'ui.label';\nimport {UI} from 'ui.notification';\n\nimport {RequestSender} from './request.sender';\nimport { Filter } from './filter';\n\nimport 'ui.design-tokens';\nimport 'ui.fonts.opensans';\nimport '../css/base.css';\n\ntype Params = {\n\tview: 'list' | 'add' | 'view' | 'edit',\n\tgroupId: number,\n\tepicId?: number,\n\tgridId?: string\n}\n\ntype ResponseAfter = {\n\tdata: EpicType\n}\n\ntype EpicType = {\n\tid: number,\n\tgroupId: number,\n\tname: string,\n\tdescription: string,\n\tcreatedBy: number,\n\tmodifiedBy: number,\n\tcolor: string\n}\n\nexport class Epic extends EventEmitter\n{\n\tconstructor(params: Params = {})\n\t{\n\t\tsuper(params);\n\n\t\tthis.setEventNamespace('BX.Tasks.Scrum.Epic');\n\n\t\tthis.view = Type.isString(params.view) ? params.view : '';\n\n\t\tthis.groupId = parseInt(params.groupId, 10);\n\t\tthis.epicId = Type.isUndefined(params.epicId) ? 0 : parseInt(params.epicId, 10);\n\t\tthis.gridId = Type.isUndefined(params.gridId) ? '' : params.gridId;\n\n\t\tthis.pathToTask = Type.isString(params.pathToTask) ? params.pathToTask : '';\n\n\t\tthis.requestSender = new RequestSender();\n\n\t\t/* eslint-disable */\n\t\tthis.sidePanelManager = BX.SidePanel.Instance;\n\t\t/* eslint-enable */\n\t\tthis.sidePanel = null;\n\n\t\tthis.id = null;\n\n\t\tthis.form = null;\n\t\tthis.formData = null;\n\n\t\tthis.listData = null;\n\t\tthis.filterData = null;\n\t\tthis.filter = null;\n\n\t\tthis.editorHandler = null;\n\n\t\tthis.colorPickers = new Map();\n\t\tthis.defaultColor = '#69dafc';\n\t\tthis.selectedColor = '';\n\t}\n\n\tshow()\n\t{\n\t\tswitch(this.view)\n\t\t{\n\t\t\tcase 'add':\n\t\t\t\tthis.showAddForm();\n\t\t\t\tbreak;\n\t\t\tcase 'list':\n\t\t\t\tthis.showList();\n\t\t\t\tbreak;\n\t\t\tcase 'view':\n\t\t\t\tthis.showViewForm();\n\t\t\t\tbreak;\n\t\t\tcase 'edit':\n\t\t\t\tthis.showEditForm();\n\t\t\t\tbreak;\n\t\t\tcase 'tasks':\n\t\t\t\tthis.showTasksList();\n\t\t\t\tbreak;\n\t\t\tcase 'completedTasks':\n\t\t\t\tthis.showTasksList(true);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tstatic showView(groupId: number, epicId: number)\n\t{\n\t\tconst epic = new Epic({\n\t\t\tview: 'view',\n\t\t\tgroupId: groupId,\n\t\t\tepicId: epicId\n\t\t});\n\n\t\tepic.show();\n\t}\n\n\tstatic showEdit(groupId: number, epicId: number)\n\t{\n\t\tconst epic = new Epic({\n\t\t\tview: 'edit',\n\t\t\tgroupId: groupId,\n\t\t\tepicId: epicId\n\t\t});\n\n\t\tepic.show();\n\t}\n\n\tstatic removeEpic(groupId: number, epicId: number, gridId?: string)\n\t{\n\t\tconst epic = new Epic({\n\t\t\tview: 'edit',\n\t\t\tgroupId: groupId,\n\t\t\tgridId: gridId,\n\t\t\tepicId: epicId\n\t\t});\n\n\t\tepic.removeEpic()\n\t\t\t.then(() => {\n\t\t\t\tepic.reloadGrid();\n\t\t\t})\n\t\t;\n\t}\n\n\tstatic showTasks(groupId: number, epicId: number)\n\t{\n\t\tconst epic = new Epic({\n\t\t\tview: 'tasks',\n\t\t\tgroupId: groupId,\n\t\t\tepicId: epicId\n\t\t});\n\n\t\tepic.show();\n\t}\n\n\tstatic showCompletedTasks(groupId: number, epicId: number)\n\t{\n\t\tconst epic = new Epic({\n\t\t\tview: 'completedTasks',\n\t\t\tgroupId: groupId,\n\t\t\tepicId: epicId\n\t\t});\n\n\t\tepic.show();\n\t}\n\n\tstatic showTask(taskId: number)\n\t{\n\t\tconst sidePanelManager = BX.SidePanel.Instance;\n\n\t\tsidePanelManager.getOpenSliders()\n\t\t\t.forEach((openSlider) => {\n\t\t\t\tconst frameWindow = openSlider.getWindow();\n\t\t\t\tif (\n\t\t\t\t\t!Type.isNil(frameWindow)\n\t\t\t\t\t&& !Type.isNil(frameWindow.BX.Tasks.Scrum.EpicInstance)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tframeWindow.BX.Tasks.Scrum.EpicInstance.showTask(taskId);\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\t}\n\n\tshowAddForm()\n\t{\n\t\tthis.id = Text.getRandom();\n\n\t\tthis.sidePanelManager.open(\n\t\t\t'tasks-scrum-epic-add-form-side-panel',\n\t\t\t{\n\t\t\t\tcacheable: false,\n\t\t\t\twidth: 800,\n\t\t\t\tcontentCallback: () => {\n\t\t\t\t\treturn Layout.createContent({\n\t\t\t\t\t\textensions: ['tasks.scrum.epic'],\n\t\t\t\t\t\ttitle: Loc.getMessage('TASKS_SCRUM_ADD_EPIC_FORM_TITLE'),\n\t\t\t\t\t\tcontent: this.createAddContent.bind(this),\n\t\t\t\t\t\tdesign: {\n\t\t\t\t\t\t\tsection: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbuttons: ({cancelButton, SaveButton}) => {\n\t\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\t\tnew SaveButton({\n\t\t\t\t\t\t\t\t\tonclick: this.onSaveAddForm.bind(this)\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tcancelButton\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\tonLoad: this.onLoadAddForm.bind(this)\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tshowList()\n\t{\n\t\tthis.id = Text.getRandom();\n\n\t\tthis.gridId = 'EntityEpicsGrid_' + this.groupId;\n\n\t\tthis.filterId = this.gridId;\n\n\t\tconst sidePanelId = 'tasks-scrum-epic-list-side-panel';\n\n\t\tthis.subscribeListToEvents(sidePanelId);\n\n\t\tthis.sidePanelManager.open(\n\t\t\tsidePanelId,\n\t\t\t{\n\t\t\t\tcacheable: false,\n\t\t\t\tcontentCallback: () => {\n\t\t\t\t\treturn Layout.createContent({\n\t\t\t\t\t\textensions: ['tasks.scrum.epic'],\n\t\t\t\t\t\ttitle: Loc.getMessage('TASKS_SCRUM_SPRINT_ADD_EPIC_LIST_TITLE'),\n\t\t\t\t\t\tcontent: this.createContainerContent.bind(this),\n\t\t\t\t\t\tdesign: {\n\t\t\t\t\t\t\tsection: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbuttons: []\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\tonLoad: (event) => {\n\t\t\t\t\t\tthis.onLoadFilter(event);\n\t\t\t\t\t\tthis.onLoadList(event);\n\t\t\t\t\t},\n\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\tthis.filter?.release();\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tshowTasksList(completed: boolean = false)\n\t{\n\t\tthis.id = Text.getRandom();\n\n\t\tthis.gridId = 'EpicTasksGrid_' + this.groupId;\n\n\t\tthis.sidePanelManager.open(\n\t\t\t'tasks-scrum-epic-tasks-list-side-panel',\n\t\t\t{\n\t\t\t\tcacheable: false,\n\t\t\t\tcontentCallback: () => {\n\t\t\t\t\treturn Layout.createContent({\n\t\t\t\t\t\textensions: ['tasks.scrum.epic'],\n\t\t\t\t\t\ttitle: completed ?\n\t\t\t\t\t\t\tLoc.getMessage('TASKS_SCRUM_SPRINT_ADD_EPIC_COMPLETED_TASKS_LIST_TITLE')\n\t\t\t\t\t\t\t: Loc.getMessage('TASKS_SCRUM_SPRINT_ADD_EPIC_TASKS_LIST_TITLE')\n\t\t\t\t\t\t,\n\t\t\t\t\t\tcontent: this.createTasksListContent.bind(this, completed),\n\t\t\t\t\t\tdesign: {\n\t\t\t\t\t\t\tsection: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbuttons: []\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\tonLoad: this.onLoadTasksList.bind(this)\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tshowViewForm()\n\t{\n\t\tthis.id = Text.getRandom();\n\n\t\tthis.subscribeViewToEvents();\n\n\t\tthis.sidePanelManager.open(\n\t\t\t'tasks-scrum-epic-view-form-side-panel',\n\t\t\t{\n\t\t\t\tcacheable: false,\n\t\t\t\twidth: 800,\n\t\t\t\tcontentCallback: () => {\n\t\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\t\tthis.getEpic().then((response) => {\n\t\t\t\t\t\t\tconst epic: EpicType = response.data;\n\t\t\t\t\t\t\tresolve(Layout.createContent({\n\t\t\t\t\t\t\t\textensions: ['tasks.scrum.epic'],\n\t\t\t\t\t\t\t\ttitle: Loc.getMessage('TASKS_SCRUM_VIEW_EPIC_FORM_TITLE'),\n\t\t\t\t\t\t\t\tcontent: this.createViewContent.bind(this, epic),\n\t\t\t\t\t\t\t\tdesign: {\n\t\t\t\t\t\t\t\t\tsection: false\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tbuttons: ({cancelButton, SaveButton}) => {\n\t\t\t\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\t\t\t\tnew SaveButton({\n\t\t\t\t\t\t\t\t\t\t\ttext: Loc.getMessage('TASKS_SCRUM_EPIC_EDIT_BUTTON'),\n\t\t\t\t\t\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\t\t\t\t\t\tthis.sidePanel.close(false, () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tEventEmitter.emit(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.getEventNamespace() + ':' + 'openEdit',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tepic.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\tcancelButton\n\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\tonLoad: this.onLoadViewForm.bind(this)\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tshowEditForm()\n\t{\n\t\tthis.id = Text.getRandom();\n\n\t\tthis.sidePanelManager.open(\n\t\t\t'tasks-scrum-epic-edit-form-side-panel',\n\t\t\t{\n\t\t\t\tcacheable: false,\n\t\t\t\twidth: 800,\n\t\t\t\tcontentCallback: () => {\n\t\t\t\t\treturn Layout.createContent({\n\t\t\t\t\t\textensions: ['tasks.scrum.epic'],\n\t\t\t\t\t\ttitle: Loc.getMessage('TASKS_SCRUM_EDIT_EPIC_FORM_TITLE'),\n\t\t\t\t\t\tcontent: this.createEditContent.bind(this),\n\t\t\t\t\t\tdesign: {\n\t\t\t\t\t\t\tsection: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbuttons: ({cancelButton, SaveButton}) => {\n\t\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\t\tnew SaveButton({\n\t\t\t\t\t\t\t\t\tonclick: this.onSaveEditForm.bind(this)\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tcancelButton\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\tonLoad: this.onLoadEditForm.bind(this)\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tremoveEpic(): Promise\n\t{\n\t\treturn ajax.runAction(\n\t\t\t'bitrix:tasks.scrum.epic.removeEpic',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tgroupId: this.groupId,\n\t\t\t\t\tepicId: this.epicId\n\t\t\t\t}\n\t\t\t}\n\t\t)\n\t\t\t.then((response) => {\n\t\t\t\tEventEmitter.emit(this.getEventNamespace() + ':' + 'afterRemove', response.data);\n\n\t\t\t\treturn true;\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t})\n\t\t;\n\t}\n\n\tshowTask(taskId: number)\n\t{\n\t\tif (this.pathToTask)\n\t\t{\n\t\t\tthis.sidePanelManager.open(\n\t\t\t\tthis.pathToTask\n\t\t\t\t\t.replace('#action#', 'view')\n\t\t\t\t\t.replace('#task_id#', parseInt(taskId, 10))\n\t\t\t);\n\t\t}\n\t}\n\n\tsubscribeListToEvents(sidePanelId: string)\n\t{\n\t\tEventEmitter.subscribe(\n\t\t\tthis.getEventNamespace() + ':' + 'afterAdd',\n\t\t\t() => this.reloadGrid())\n\t\t;\n\t\tEventEmitter.subscribe(\n\t\t\tthis.getEventNamespace() + ':' + 'afterEdit',\n\t\t\t() => this.reloadGrid())\n\t\t;\n\t}\n\n\tsubscribeViewToEvents()\n\t{\n\t\tEventEmitter.subscribe(\n\t\t\tthis.getEventNamespace() + ':' + 'openEdit',\n\t\t\t(baseEvent: BaseEvent) => {\n\t\t\t\tEpic.showEdit(this.groupId, baseEvent.getData());\n\t\t\t})\n\t\t;\n\t}\n\n\treloadSidePanel(sidePanelId?: string)\n\t{\n\t\tif (Type.isUndefined(sidePanelId))\n\t\t{\n\t\t\tthis.sidePanelManager.reload();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst openSliders = this.sidePanelManager.getOpenSliders();\n\t\t\tif (openSliders.length > 0)\n\t\t\t{\n\t\t\t\topenSliders.forEach((slider) => {\n\t\t\t\t\tif (slider.getUrl() === sidePanelId)\n\t\t\t\t\t{\n\t\t\t\t\t\tslider.reload();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tcreateAddContent(): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction(\n\t\t\t\t'bitrix:tasks.scrum.epic.getDescriptionEditor',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tgroupId: this.groupId,\n\t\t\t\t\t\teditorId: this.id\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tthis.formData = response.data;\n\t\t\t\t\tresolve(this.renderAddForm());\n\t\t\t\t})\n\t\t\t\t.catch((response) => {\n\t\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t\t})\n\t\t\t;\n\t\t});\n\t}\n\n\tcreateListContent(): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction(\n\t\t\t\t'bitrix:tasks.scrum.epic.list',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tgroupId: this.groupId,\n\t\t\t\t\t\tgridId: this.gridId\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tthis.listData = response.data;\n\t\t\t\t\tresolve(this.renderList());\n\t\t\t\t})\n\t\t\t\t.catch((response) => {\n\t\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t\t})\n\t\t\t;\n\t\t});\n\t}\n\n\tcreateFilterContent(): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction(\n\t\t\t\t'bitrix:tasks.scrum.epic.filter.get',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tgroupId: this.groupId,\n\t\t\t\t\t\tgridId: this.gridId,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tthis.filterData = response.data;\n\t\t\t\t\tresolve(this.renderFilter())\n\t\t\t\t})\n\t\t\t\t.catch((response) => {\n\t\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t\t});\n\t\t})\n\t}\n\n\tcreateTasksListContent(completed: boolean): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction(\n\t\t\t\t'bitrix:tasks.scrum.epic.getTasksList',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tgroupId: this.groupId,\n\t\t\t\t\t\tepicId: this.epicId,\n\t\t\t\t\t\tgridId: this.gridId,\n\t\t\t\t\t\tcompleted: completed ? 'Y' : 'N'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tthis.listData = response.data;\n\t\t\t\t\tresolve(this.renderTasksList());\n\t\t\t\t})\n\t\t\t\t.catch((response) => {\n\t\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t\t})\n\t\t\t;\n\t\t});\n\t}\n\n\tcreateViewContent(epic: EpicType): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction(\n\t\t\t\t'bitrix:tasks.scrum.epic.getEpicFiles',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tgroupId: this.groupId,\n\t\t\t\t\t\tepicId: epic.id\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tthis.epicFiles = Type.isUndefined(response.data.html) ? '' : response.data.html;\n\t\t\t\t\tresolve(this.renderViewForm(epic));\n\t\t\t\t})\n\t\t\t\t.catch((response) => {\n\t\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t\t})\n\t\t\t;\n\t\t});\n\t}\n\n\tcreateEditContent(): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.getEpic().then((response) => {\n\t\t\t\tconst epic: EpicType = response.data;\n\t\t\t\tajax.runAction(\n\t\t\t\t\t'bitrix:tasks.scrum.epic.getDescriptionEditor',\n\t\t\t\t\t{\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tgroupId: this.groupId,\n\t\t\t\t\t\t\teditorId: this.id,\n\t\t\t\t\t\t\tepicId: epic.id,\n\t\t\t\t\t\t\ttext: epic.description\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\tthis.currentEpic = epic;\n\t\t\t\t\t\tthis.formData = response.data;\n\t\t\t\t\t\tresolve(this.renderEditForm(epic));\n\t\t\t\t\t})\n\t\t\t\t\t.catch((response) => {\n\t\t\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t\t\t})\n\t\t\t\t;\n\t\t\t});\n\t\t});\n\t}\n\n\tcreateContainerContent(): Promise\n\t{\n\t\treturn Promise.all([\n\t\t\tthis.createFilterContent(),\n\t\t\tthis.createListContent(),\n\t\t])\n\t\t\t.then(([filterContent, listContent]) => {\n\t\t\t\treturn this.renderContainer(filterContent, listContent);\n\t\t\t})\n\t\t;\n\t}\n\n\tgetEpic(): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction(\n\t\t\t\t'bitrix:tasks.scrum.epic.getEpic',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tgroupId: this.groupId,\n\t\t\t\t\t\tepicId: this.epicId\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t).then(resolve, reject);\n\t\t});\n\t}\n\n\tonLoadAddForm(event)\n\t{\n\t\tthis.sidePanel = event.getSlider();\n\n\t\tthis.form = this.sidePanel.getContainer().querySelector('.tasks-scrum-epic-form');\n\n\t\tconst descriptionContainer = this.form.querySelector('.tasks-scrum-epic-form-description');\n\n\t\tif (Type.isUndefined(this.formData.html))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.renderEditor(descriptionContainer);\n\t}\n\n\tonSaveAddForm()\n\t{\n\t\tajax.runAction(\n\t\t\t'bitrix:tasks.scrum.epic.createEpic',\n\t\t\t{\n\t\t\t\tdata: this.getRequestData()\n\t\t\t}\n\t\t)\n\t\t\t.then((response: ResponseAfter) => {\n\t\t\t\tthis.sidePanel.close(false, () => {\n\t\t\t\t\tEventEmitter.emit(this.getEventNamespace() + ':' + 'afterAdd', response.data);\n\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\tcontent: Loc.getMessage('TASKS_SCRUM_ADD_EPIC_NOTIFY')\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t})\n\t\t;\n\t}\n\n\tonLoadFilter(event)\n\t{\n\t\tthis.sidePanel = event.getSlider();\n\n\t\tconst filterContainer = this.sidePanel.getContainer().querySelector('.tasks-scrum-epic-filter');\n\n\t\tif (this.filterData?.html)\n\t\t{\n\t\t\tRuntime.html(filterContainer, this.filterData.html)\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.filter = new Filter({\n\t\t\t\t\t\tfilterId: this.filterId,\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\t}\n\n\tonLoadList(event)\n\t{\n\t\tthis.sidePanel = event.getSlider();\n\n\t\tconst listContainer = this.sidePanel.getContainer().querySelector('.tasks-scrum-epic-list');\n\n\t\tif (Type.isUndefined(this.listData.html))\n\t\t{\n\t\t\tDom.append(this.renderListBlank(), listContainer);\n\n\t\t\tEvent.bind(\n\t\t\t\tlistContainer.querySelector('.tasks-scrum-epics-empty-button'),\n\t\t\t\t'click',\n\t\t\t\tthis.showAddForm.bind(this)\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tRuntime.html(listContainer, this.listData.html)\n\t\t\t\t.then(() => {\n\t\t\t\t\tEventEmitter.subscribe('Grid::beforeRequest', this.onBeforeGridRequest.bind(this));\n\t\t\t\t\tthis.prepareTagsList(listContainer);\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\t}\n\n\tonLoadTasksList(event)\n\t{\n\t\tthis.sidePanel = event.getSlider();\n\n\t\tconst listContainer = this.sidePanel.getContainer().querySelector('.tasks-scrum-epic-tasks-list');\n\n\t\tif (this.listData)\n\t\t{\n\t\t\tRuntime.html(listContainer, this.listData.html)\n\t\t\t\t.then(() => {\n\t\t\t\t\tEventEmitter.subscribe('Grid::beforeRequest', this.onBeforeGridRequest.bind(this));\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\t}\n\n\tonLoadViewForm(event)\n\t{\n\t\tthis.sidePanel = event.getSlider();\n\n\t\tif (this.epicFiles)\n\t\t{\n\t\t\tconst filesContainer = this.sidePanel.getContainer().querySelector('.tasks-scrum-epic-form-files');\n\n\t\t\tRuntime.html(filesContainer, this.epicFiles);\n\t\t}\n\t}\n\n\tonLoadEditForm(event)\n\t{\n\t\tthis.sidePanel = event.getSlider();\n\n\t\tthis.form = this.sidePanel.getContainer().querySelector('.tasks-scrum-epic-form');\n\n\t\tconst descriptionContainer = this.form.querySelector('.tasks-scrum-epic-form-description');\n\n\t\tif (Type.isUndefined(this.formData.html))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.renderEditor(descriptionContainer);\n\t}\n\n\tonSaveEditForm()\n\t{\n\t\tajax.runAction(\n\t\t\t'bitrix:tasks.scrum.epic.editEpic',\n\t\t\t{\n\t\t\t\tdata: this.getRequestData()\n\t\t\t}\n\t\t)\n\t\t\t.then((response: ResponseAfter) => {\n\t\t\t\tthis.sidePanel.close(false, () => {\n\t\t\t\t\tEventEmitter.emit(this.getEventNamespace() + ':' + 'afterEdit', response.data);\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.requestSender.showErrorAlert(response);\n\t\t\t})\n\t\t;\n\t}\n\n\tonBeforeGridRequest(event: BaseEvent)\n\t{\n\t\tconst [gridObject, eventArgs] = event.getCompatData();\n\n\t\t/* eslint-disable */\n\t\teventArgs.sessid = BX.bitrix_sessid();\n\t\t/* eslint-enable */\n\n\t\teventArgs.method = 'POST';\n\n\t\tif (!eventArgs.url)\n\t\t{\n\t\t\teventArgs.url = this.getListUrl();\n\t\t}\n\n\t\teventArgs.data = {\n\t\t\t...eventArgs.data,\n\t\t\tgroupId: this.groupId,\n\t\t\tgridId: this.gridId,\n\t\t\tepicId: this.epicId\n\t\t};\n\t}\n\n\tgetListUrl(): string\n\t{\n\t\treturn '/bitrix/services/main/ajax.php?action=bitrix:tasks.scrum.epic.list';\n\t}\n\n\trenderAddForm(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-scrum-epic-form\">\n\t\t\t\t<div class=\"tasks-scrum-epic-form-container\">\n\t\t\t\t\t${this.renderNameField(0, '', this.defaultColor)}\n\t\t\t\t\t${this.renderDescriptionField()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderContainer(filterContent, listContent): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-scrum-epic-container\">\n\t\t\t\t<div class=\"tasks-scrum-epic-toolbar\">\n\t\t\t\t\t<button class=\"ui-btn ui-btn-success\" onclick=\"${this.showAddForm.bind(this)}\">\n\t\t\t\t\t\t<span class=\"ui-btn-text\">${Loc.getMessage('TASKS_SCRUM_SPRINT_ADD_EPIC_LIST_TOOLBAR_BUTTON')}</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t${filterContent}\n\t\t\t\t</div>\n\t\t\t\t${listContent}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderFilter(): HTMLElement\n\t{\n\t\treturn Tag.render`<div class=\"tasks-scrum-epic-filter\"></div>`;\n\t}\n\n\trenderList(): HTMLElement\n\t{\n\t\treturn Tag.render`<div class=\"tasks-scrum-epic-list\"></div>`;\n\t}\n\n\trenderTasksList(): HTMLElement\n\t{\n\t\treturn Tag.render`<div class=\"tasks-scrum-epic-tasks-list\"></div>`;\n\t}\n\n\trenderViewForm(epic: EpicType): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-scrum-epic-form\">\n\t\t\t\t<div class=\"tasks-scrum-epic-form-container\">\n\t\t\t\t\t<div class=\"tasks-scrum-epic-form-header\">\n\t\t\t\t\t\t<div class=\"tasks-scrum-epic-form-header-title\">\n\t\t\t\t\t\t\t${Text.encode(epic.name)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"tasks-scrum-epic-form-header-separate\"></div>\n\t\t\t\t\t\t<div class=\"tasks-scrum-epic-header-color\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"tasks-scrum-epic-header-color-current\"\n\t\t\t\t\t\t\t\tstyle=\"background-color: ${Text.encode(epic.color)};\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"tasks-scrum-epic-form-body\">\n\t\t\t\t\t\t<div class=\"tasks-scrum-epic-form-description\">\n\t\t\t\t\t\t\t${epic.description}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"tasks-scrum-epic-form-files\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderEditForm(epic: EpicType): HTMLElement\n\t{\n\t\tthis.selectedColor = epic.color;\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-scrum-epic-form\">\n\t\t\t\t<div class=\"tasks-scrum-epic-form-container\">\n\t\t\t\t\t${this.renderNameField(epic.id, epic.name, this.selectedColor)}\n\t\t\t\t\t${this.renderDescriptionField()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderNameField(epicId: number, name: string, color: string): HTMLElement\n\t{\n\t\tconst nameField = Tag.render`\n\t\t\t<div class=\"tasks-scrum-epic-form-header\">\n\t\t\t\t<div class=\"tasks-scrum-epic-form-header-title\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\tvalue=\"${Text.encode(name)}\"\n\t\t\t\t\t\tclass=\"tasks-scrum-epic-form-header-title-control\"\n\t\t\t\t\t\tplaceholder=\"${Loc.getMessage('TASKS_SCRUM_SPRINT_ADD_EPIC_NAME_PLACEHOLDER')}\"\n\t\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum-epic-form-header-separate\"></div>\n\t\t\t\t<div class=\"tasks-scrum-epic-header-color\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tdata-epic-id=\"${parseInt(epicId, 10)}\"\n\t\t\t\t\t\tclass=\"tasks-scrum-epic-header-color-current\"\n\t\t\t\t\t\tstyle=\"background-color: ${Text.encode(color)};\"\n\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"tasks-scrum-epic-header-color-btn-angle\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tconst pickerContainer = nameField.querySelector('.tasks-scrum-epic-header-color');\n\n\t\tEvent.bind(pickerContainer, 'click', () => {\n\t\t\tconst colorNode = pickerContainer.querySelector('.tasks-scrum-epic-header-color-current');\n\t\t\tconst picker = this.getColorPicker(colorNode);\n\t\t\tpicker.open();\n\t\t});\n\n\t\treturn nameField;\n\t}\n\n\trenderDescriptionField(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-scrum-epic-form-body\">\n\t\t\t\t<div class=\"tasks-scrum-epic-form-description --editing\"></div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderEditor(container: HTMLElement)\n\t{\n\t\tsetTimeout(() => {\n\t\t\tRuntime.html(container, this.formData.html)\n\t\t\t\t.then(() => {\n\t\t\t\t\tif (window.LHEPostForm)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.editorHandler = window.LHEPostForm.getHandler(this.id);\n\n\t\t\t\t\t\tEventEmitter.emit(this.editorHandler.eventNode, 'OnShowLHE', [true]);\n\t\t\t\t\t}\n\t\t\t\t\tthis.focusToName();\n\t\t\t\t})\n\t\t\t;\n\t\t}, 300);\n\t}\n\n\trenderListBlank(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"tasks-scrum-epics-empty\">\n\t\t\t\t<div class=\"tasks-scrum-epics-empty-first-title\">\n\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_EPICS_EMPTY_FIRST_TITLE')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum-epics-empty-image\">\n\t\t\t\t\t<svg width=\"124px\" height=\"123px\" viewBox=\"0 0 124 123\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n\t\t\t\t\t\t<g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" opacity=\"0.28\">\n\t\t\t\t\t\t\t<path d=\"M83,105 L83,81.4375 L105,81.4375 L105,18 L17,18 L17,81.4375 L39,81.4375 L39,105 L83,105 Z M10.9411765,0 L113.058824,0 C119.101468,0 124,4.85902727 124,10.8529412 L124,112.147059 C124,118.140973 119.101468,123 113.058824,123 L10.9411765,123 C4.89853156,123 0,118.140973 0,112.147059 L0,10.8529412 C0,4.85902727 4.89853156,0 10.9411765,0 Z M44.0142862,47.0500004 L54.2142857,57.4416671 L79.7142857,32 L87,42.75 L54.2142857,75 L36,57.0833333 L44.0142862,47.0500004 Z\" fill=\"#A8ADB4\" />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum-epics-empty-second-title\">\n\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_EPICS_EMPTY_SECOND_TITLE')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"tasks-scrum-epics-empty-button\">\n\t\t\t\t\t<button class=\"ui-btn ui-btn-primary ui-btn-lg\">\n\t\t\t\t\t\t${Loc.getMessage('TASKS_SCRUM_SPRINT_ADD_EPIC_LIST_TOOLBAR_BUTTON')}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetGrid()\n\t{\n\t\t/* eslint-disable */\n\t\tif (BX && BX.Main && BX.Main.gridManager)\n\t\t{\n\t\t\treturn BX.Main.gridManager.getById(this.gridId);\n\t\t}\n\t\t/* eslint-enable */\n\n\t\treturn null;\n\t}\n\n\treloadGrid()\n\t{\n\t\tif (BX && BX.Main && BX.Main.gridManager)\n\t\t{\n\t\t\tBX.Main.gridManager.reload(this.gridId);\n\t\t}\n\t}\n\n\tprepareTagsList(container: HTMLElement)\n\t{\n\t\tconst tagsContainers = container.querySelectorAll('.tasks-scrum-epic-grid-tags');\n\n\t\ttagsContainers.forEach((tagsContainer) => {\n\t\t\tconst tags = this.getTagsFromNode(tagsContainer);\n\t\t\tDom.clean(tagsContainer);\n\t\t\ttags.forEach((tag) => {\n\t\t\t\tDom.append(this.getTagNode(tag), tagsContainer);\n\t\t\t});\n\t\t});\n\t}\n\n\tgetTagsFromNode(node: HTMLElement): Array\n\t{\n\t\tconst tags = [];\n\n\t\tnode.childNodes.forEach((childNode) => {\n\t\t\ttags.push(childNode.textContent.trim());\n\t\t});\n\n\t\treturn tags;\n\t}\n\n\tgetTagNode(tag: string): HTMLElement\n\t{\n\t\tconst tagLabel = new Label({\n\t\t\ttext: tag,\n\t\t\tcolor: Label.Color.TAG_LIGHT,\n\t\t\tfill: true,\n\t\t\tsize: Label.Size.SM,\n\t\t\tcustomClass: ''\n\t\t});\n\n\t\treturn tagLabel.getContainer();\n\t}\n\n\tgetColorPicker(colorNode): Object\n\t{\n\t\tconst epicId = Dom.attr(colorNode, 'data-epic-id');\n\n\t\tif (!this.colorPickers.has(epicId))\n\t\t{\n\t\t\t/* eslint-disable */\n\t\t\tconst picker =  new BX.ColorPicker({\n\t\t\t\tbindElement: colorNode,\n\t\t\t\tdefaultColor: this.defaultColor,\n\t\t\t\tselectedColor: this.selectedColor ? this.selectedColor : this.defaultColor,\n\t\t\t\tonColorSelected: (color, picker) => {\n\t\t\t\t\tthis.selectedColor = color;\n\t\t\t\t\tcolorNode.style.backgroundColor = color;\n\t\t\t\t},\n\t\t\t\tpopupOptions: {\n\t\t\t\t\tangle: {\n\t\t\t\t\t\tposition: 'top',\n\t\t\t\t\t\toffset: 33\n\t\t\t\t\t},\n\t\t\t\t\tclassName: 'tasks-scrum-epic-color-popup'\n\t\t\t\t},\n\t\t\t\tallowCustomColor: false,\n\t\t\t\tcolors: [\n\t\t\t\t\t['#aae9fc', '#bbecf1', '#98e1dc', '#e3f299', '#ffee95', '#ffdd93', '#dfd3b6', '#e3c6bb'],\n\t\t\t\t\t['#ffad97', '#ffbdbb', '#ffcbd8', '#ffc4e4', '#c4baed', '#dbdde0', '#bfc5cd', '#a2a8b0']\n\t\t\t\t]\n\t\t\t});\n\n\t\t\tthis.colorPickers.set(epicId, picker);\n\t\t\t/* eslint-enable */\n\t\t}\n\n\t\treturn this.colorPickers.get(epicId);\n\t}\n\n\tfocusToName()\n\t{\n\t\tsetTimeout(() => {\n\t\t\tthis.form.querySelector('.tasks-scrum-epic-form-header-title-control').focus();\n\t\t}, 50);\n\t}\n\n\tgetRequestData()\n\t{\n\t\tconst requestData = {};\n\n\t\tif (this.currentEpic)\n\t\t{\n\t\t\trequestData.epicId = this.currentEpic.id;\n\t\t}\n\n\t\trequestData.groupId = this.groupId;\n\t\trequestData.name = (this.form.querySelector('[name=name]').value).trim();\n\t\trequestData.description = this.editorHandler.getEditor().GetContent();\n\t\trequestData.color = this.selectedColor ? this.selectedColor : this.defaultColor;\n\t\trequestData.files = this.getAttachmentsFiles();\n\n\t\treturn requestData;\n\t}\n\n\tgetAttachmentsFiles(): Array\n\t{\n\t\tconst files = [];\n\n\t\tif (\n\t\t\t!this.editorHandler\n\t\t\t|| !Type.isPlainObject(this.editorHandler.arFiles)\n\t\t\t|| !Type.isPlainObject(this.editorHandler.controllers)\n\t\t)\n\t\t{\n\t\t\treturn files;\n\t\t}\n\n\t\tconst fileControllers = [];\n\t\tObject.values(this.editorHandler.arFiles)\n\t\t\t.forEach((controller) => {\n\t\t\t\tif(!fileControllers.includes(controller))\n\t\t\t\t{\n\t\t\t\t\tfileControllers.push(controller);\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\n\t\tfileControllers.forEach((fileController) => {\n\t\t\tif (\n\t\t\t\tthis.editorHandler.controllers[fileController]\n\t\t\t\t&& Type.isPlainObject(this.editorHandler.controllers[fileController].values)\n\t\t\t)\n\t\t\t{\n\t\t\t\tObject.keys(this.editorHandler.controllers[fileController].values)\n\t\t\t\t\t.forEach((fileId) => {\n\t\t\t\t\t\tif (!files.includes(fileId))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfiles.push(fileId);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t;\n\t\t\t}\n\t\t});\n\n\t\treturn files;\n\t}\n}"],"names":["Filter","props","popup","destroy","getPopupById","filterId","destroyPopups","BX","Main","filterManager","getById","PopupManager","getFilterFieldsValues","EventEmitter","unsubscribe","bind","subscribe","event","getCompatData","target","path","popupWindow","find","el","classList","contains","popups","popupContainer","getFieldsPopup","isShown","some","closePopup","resetFilter","RequestSender","controller","action","data","Promise","resolve","reject","ajax","runAction","then","response","alertTitle","Type","isUndefined","errors","console","error","length","firstError","shift","errorCode","code","message","title","Loc","getMessage","MessageBox","alert","Epic","params","setEventNamespace","view","isString","groupId","parseInt","epicId","gridId","pathToTask","requestSender","sidePanelManager","SidePanel","Instance","sidePanel","id","form","formData","listData","filterData","filter","editorHandler","colorPickers","Map","defaultColor","selectedColor","showAddForm","showList","showViewForm","showEditForm","showTasksList","Text","getRandom","open","cacheable","width","contentCallback","Layout","createContent","extensions","content","createAddContent","design","section","buttons","cancelButton","SaveButton","onclick","onSaveAddForm","events","onLoad","onLoadAddForm","sidePanelId","subscribeListToEvents","createContainerContent","onLoadFilter","onLoadList","onClose","release","completed","createTasksListContent","onLoadTasksList","subscribeViewToEvents","getEpic","epic","createViewContent","text","close","emit","getEventNamespace","onLoadViewForm","createEditContent","onSaveEditForm","onLoadEditForm","showErrorAlert","taskId","replace","reloadGrid","baseEvent","showEdit","getData","reload","openSliders","getOpenSliders","forEach","slider","getUrl","editorId","renderAddForm","renderList","renderFilter","renderTasksList","epicFiles","html","renderViewForm","description","currentEpic","renderEditForm","all","createFilterContent","createListContent","filterContent","listContent","renderContainer","getSlider","getContainer","querySelector","descriptionContainer","renderEditor","getRequestData","UI","Notification","Center","notify","filterContainer","Runtime","listContainer","Dom","append","renderListBlank","Event","onBeforeGridRequest","prepareTagsList","filesContainer","gridObject","eventArgs","sessid","bitrix_sessid","method","url","getListUrl","Tag","render","renderNameField","renderDescriptionField","encode","name","color","nameField","pickerContainer","colorNode","picker","getColorPicker","container","setTimeout","window","LHEPostForm","getHandler","eventNode","focusToName","gridManager","tagsContainers","querySelectorAll","tagsContainer","tags","getTagsFromNode","clean","tag","getTagNode","node","childNodes","childNode","push","textContent","trim","tagLabel","Label","Color","TAG_LIGHT","fill","size","Size","SM","customClass","attr","has","ColorPicker","bindElement","onColorSelected","style","backgroundColor","popupOptions","angle","position","offset","className","allowCustomColor","colors","set","get","focus","requestData","value","getEditor","GetContent","files","getAttachmentsFiles","isPlainObject","arFiles","controllers","fileControllers","Object","values","includes","fileController","keys","fileId","show","removeEpic","openSlider","frameWindow","getWindow","isNil","Tasks","Scrum","EpicInstance","showTask"],"mappings":"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"}