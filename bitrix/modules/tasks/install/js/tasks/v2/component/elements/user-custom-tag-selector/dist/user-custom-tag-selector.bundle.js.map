{"version":3,"file":"user-custom-tag-selector.bundle.js","sources":["../src/loader.js","../src/user-custom-tag-selector.js"],"sourcesContent":["import { Loader as UILoader } from 'ui.loader';\n\ntype LoaderOptions = {\n\ttarget: HTMLElement,\n\ttype: string,\n\tsize: string,\n}\n\n// @vue/component\nexport const Loader = {\n\tname: 'UiUserCustomTagSelectorLoader',\n\tprops: {\n\t\toptions: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\tmounted(): void\n\t{\n\t\tthis.loader = new UILoader(this.getOptions());\n\t\tthis.loader.render();\n\t\tthis.loader.show();\n\t},\n\tbeforeUnmount(): void\n\t{\n\t\tthis.loader?.hide?.();\n\t\tthis.loader = null;\n\t},\n\tmethods: {\n\t\tgetOptions(): LoaderOptions\n\t\t{\n\t\t\treturn { ...this.getDefaultOptions(), ...this.options };\n\t\t},\n\t\tgetDefaultOptions(): LoaderOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\ttarget: this.$refs.loader,\n\t\t\t\ttype: 'BULLET',\n\t\t\t\tsize: 'xs',\n\t\t\t};\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"b24-loader-container\" ref=\"loader\"></div>\n\t`,\n};\n","import { Text } from 'main.core';\nimport { Item } from 'ui.entity-selector';\nimport { BMenu, type MenuOptions, type MenuItemOptions } from 'ui.vue3.components.menu';\nimport { BIcon } from 'ui.icon-set.api.vue';\nimport { Outline } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.outline';\nimport 'ui.tooltip';\n\nimport { UserAvatar } from 'tasks.v2.component.elements.user-avatar';\nimport { EntitySelectorDialog, type ItemId } from 'tasks.v2.lib.entity-selector-dialog';\nimport { userService } from 'tasks.v2.provider.service.user-service';\nimport type { UserModel } from 'tasks.v2.model.users';\nexport type { ItemId };\n\nimport { Loader } from './loader';\nimport './user-custom-tag-selector.css';\n\n// @vue/component\nexport const UserCustomTagSelector = {\n\tname: 'UiUserCustomTagSelector',\n\tcomponents: {\n\t\tBIcon,\n\t\tUserAvatar,\n\t\tLoader,\n\t\tBMenu,\n\t},\n\tprops: {\n\t\t/** @type DialogOptions */\n\t\tdialogOptions: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\titems: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => ([]),\n\t\t},\n\t\t/** @type UserModel */\n\t\tuserInfo: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t\twithActionMenu: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tclickHandler: {\n\t\t\ttype: Function,\n\t\t\tdefault: null,\n\t\t},\n\t\treadonly: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: [\n\t\t'freeze',\n\t\t'unfreeze',\n\t\t'select',\n\t],\n\tsetup(): Object\n\t{\n\t\treturn {\n\t\t\tOutline,\n\t\t};\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tlocalContext: `${this.dialogOptions.context}-${this.$options.name}`,\n\t\t\tdialogId: `${this.dialogOptions.context}-${this.$options.name}-${Text.getRandom()}`,\n\t\t\t/** @type Item */\n\t\t\tuser: null,\n\t\t\tpreviousUser: null,\n\t\t\tloading: true,\n\t\t\tshowAction: false,\n\t\t\tisMenuShown: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tselected(): boolean\n\t\t{\n\t\t\treturn Boolean(this.user);\n\t\t},\n\t\tuserId(): number\n\t\t{\n\t\t\treturn parseInt(this.user?.getId() ?? 0, 10);\n\t\t},\n\t\tuserName(): string\n\t\t{\n\t\t\treturn this.user.getTitle();\n\t\t},\n\t\tuserAvatar(): string\n\t\t{\n\t\t\treturn this.user.getAvatar();\n\t\t},\n\t\tuserType(): string\n\t\t{\n\t\t\treturn this.user.getEntityType();\n\t\t},\n\t\tuserProfileLink(): string\n\t\t{\n\t\t\treturn userService.getUrl(this.userId);\n\t\t},\n\t\ttestId(): string\n\t\t{\n\t\t\treturn `${this.localContext}-${Text.getRandom()}`;\n\t\t},\n\t\tmenuOptions(): MenuOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tid: `${this.localContext}-${Text.getRandom()}-${this.userId}`,\n\t\t\t\tbindElement: this.$refs.user,\n\t\t\t\toffsetTop: 8,\n\t\t\t\titems: this.menuItems,\n\t\t\t\ttargetContainer: document.body,\n\t\t\t};\n\t\t},\n\t\tmenuItems(): MenuItemOptions[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\ttitle: this.loc('UCTS_MENU_PROFILE'),\n\t\t\t\t\ticon: Outline.PERSON,\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tid: `MenuProfile-${this.testId}`,\n\t\t\t\t\t},\n\t\t\t\t\tonClick: () => BX.SidePanel.Instance.open(this.userProfileLink),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: this.loc('UCTS_MENU_EDIT'),\n\t\t\t\t\ticon: Outline.EDIT_L,\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tid: `MenuEdit-${this.testId}`,\n\t\t\t\t\t},\n\t\t\t\t\tonClick: () => this.showDialog(),\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t},\n\twatch: {\n\t\tuserInfo(): void\n\t\t{\n\t\t\tif (this.userInfo)\n\t\t\t{\n\t\t\t\tthis.user = this.mapUserInfoToItem(this.userInfo);\n\t\t\t}\n\t\t},\n\t\titems(): void\n\t\t{\n\t\t\tif (this.dialog?.isLoaded())\n\t\t\t{\n\t\t\t\tthis.user = this.dialog.getItemsByIds(this.items)[0];\n\t\t\t}\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tif (this.userInfo)\n\t\t{\n\t\t\tthis.user = this.mapUserInfoToItem(this.userInfo);\n\n\t\t\tthis.$emit('select', this.mapItemToUserInfo(this.user));\n\n\t\t\tthis.loading = false;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.dialog ??= this.createDialog();\n\t\t}\n\t},\n\tunmounted(): void\n\t{\n\t\tthis.dialog?.destroy();\n\t},\n\tmethods: {\n\t\tfreeze(): void\n\t\t{\n\t\t\tthis.$emit('freeze');\n\t\t},\n\t\tunfreeze(): void\n\t\t{\n\t\t\tif (this.dialog?.isOpen())\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('unfreeze');\n\t\t},\n\t\tselect(): void\n\t\t{\n\t\t\tthis.previousUser = this.user;\n\n\t\t\tconst selectedUser = this.dialog?.getSelectedItems()[0];\n\t\t\tthis.user = selectedUser || this.previousUser;\n\n\t\t\tthis.$emit('select', this.mapItemToUserInfo(this.user));\n\n\t\t\tthis.loading = false;\n\t\t},\n\t\thandleClick(): void\n\t\t{\n\t\t\tif (this.readonly)\n\t\t\t{\n\t\t\t\tBX.SidePanel.Instance.open(this.userProfileLink);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.withActionMenu)\n\t\t\t{\n\t\t\t\tthis.showMenu();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvoid this.showDialog();\n\t\t\t}\n\t\t},\n\t\tasync showDialog(): Promise<void>\n\t\t{\n\t\t\tif (this.clickHandler && await this.clickHandler() === false)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.dialog ??= this.createDialog();\n\t\t\tthis.dialog.selectItemsByIds(this.items);\n\t\t\tthis.dialog.showTo(this.$refs.container);\n\t\t},\n\t\tcreateDialog(): EntitySelectorDialog\n\t\t{\n\t\t\treturn new EntitySelectorDialog({\n\t\t\t\tid: this.dialogId,\n\t\t\t\tpreselectedItems: this.items,\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': this.select,\n\t\t\t\t\t'Item:onDeselect': this.select,\n\t\t\t\t\tonLoad: this.select,\n\t\t\t\t\tonShow: this.freeze,\n\t\t\t\t\tonHide: this.unfreeze,\n\t\t\t\t},\n\t\t\t\t...this.dialogOptions,\n\t\t\t});\n\t\t},\n\t\tshowMenu(): void\n\t\t{\n\t\t\tthis.isMenuShown = true;\n\t\t},\n\t\tmapUserInfoToItem(userInfo: UserModel): Item\n\t\t{\n\t\t\treturn new Item({\n\t\t\t\tid: userInfo.id,\n\t\t\t\tentityId: 'user',\n\t\t\t\ttitle: userInfo.name,\n\t\t\t\tavatar: userInfo?.image ?? '',\n\t\t\t\tentityType: userInfo?.type ?? 'employee',\n\t\t\t});\n\t\t},\n\t\tmapItemToUserInfo(user: Item): UserModel\n\t\t{\n\t\t\treturn {\n\t\t\t\tid: user.getId(),\n\t\t\t\tname: user.getTitle(),\n\t\t\t\timage: user.getAvatar(),\n\t\t\t\ttype: user.getEntityType(),\n\t\t\t};\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"b24-user-selector\" ref=\"container\">\n\t\t\t<Loader v-if=\"loading\"/>\n\t\t\t<template v-else>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"selected\"\n\t\t\t\t\tclass=\"b24-user-selector-user\"\n\t\t\t\t\t:class=\"'--' + userType\"\n\t\t\t\t\t@mouseover=\"showAction = true\"\n\t\t\t\t\t@mouseleave=\"showAction = false\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tref=\"user\"\n\t\t\t\t\t\tclass=\"b24-user-selector-user-label\"\n\t\t\t\t\t\t:data-id=\"'Label-' + testId\"\n\t\t\t\t\t\t:bx-tooltip-user-id=\"userId\"\n\t\t\t\t\t\tbx-tooltip-context=\"b24\"\n\t\t\t\t\t\t@click=\"handleClick\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"b24-user-selector-user-image\">\n\t\t\t\t\t\t\t<UserAvatar :src=\"userAvatar\" :type=\"userType\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"b24-user-selector-user-name\">{{ userName }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-show=\"!withActionMenu\"\n\t\t\t\t\t\tclass=\"b24-user-selector-user-action\"\n\t\t\t\t\t\t:class=\"{'--show': showAction}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"b24-user-selector-user-action-edit\"\n\t\t\t\t\t\t\t:data-id=\"'Edit-' + testId\"\n\t\t\t\t\t\t\t@click=\"showDialog\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<BIcon class=\"b24-user-selector-user-edit-icon\" :name=\"Outline.EDIT_L\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-else\n\t\t\t\t\tclass=\"b24-user-selector-user-add\"\n\t\t\t\t\t:data-id=\"'Add-' + testId\"\n\t\t\t\t\t@click=\"showDialog\"\n\t\t\t\t>\n\t\t\t\t\t<UserAvatar/>\n\t\t\t\t\t{{ loc('UCTS_ADD_BTN') }}\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t\t<BMenu v-if=\"isMenuShown\" :options=\"menuOptions\" @close=\"isMenuShown = false\"/>\n\t`,\n};\n"],"names":["Loader","name","props","options","type","Object","default","mounted","loader","UILoader","getOptions","render","show","beforeUnmount","hide","methods","getDefaultOptions","target","$refs","size","template","UserCustomTagSelector","components","BIcon","UserAvatar","BMenu","dialogOptions","required","items","Array","userInfo","withActionMenu","Boolean","clickHandler","Function","readonly","emits","setup","Outline","data","localContext","context","$options","dialogId","Text","getRandom","user","previousUser","loading","showAction","isMenuShown","computed","selected","userId","parseInt","getId","userName","getTitle","userAvatar","getAvatar","userType","getEntityType","userProfileLink","userService","getUrl","testId","menuOptions","id","bindElement","offsetTop","menuItems","targetContainer","document","body","title","loc","icon","PERSON","dataset","onClick","BX","SidePanel","Instance","open","EDIT_L","showDialog","watch","mapUserInfoToItem","dialog","isLoaded","getItemsByIds","created","$emit","mapItemToUserInfo","createDialog","unmounted","destroy","freeze","unfreeze","isOpen","select","selectedUser","getSelectedItems","handleClick","showMenu","selectItemsByIds","showTo","container","EntitySelectorDialog","preselectedItems","events","onLoad","onShow","onHide","Item","entityId","avatar","image","entityType"],"mappings":"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"}