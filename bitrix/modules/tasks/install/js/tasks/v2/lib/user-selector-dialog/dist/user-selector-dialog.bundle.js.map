{"version":3,"file":"user-selector-dialog.bundle.js","sources":["../src/user-selector-dialog.js"],"sourcesContent":["import { EventEmitter } from 'main.core.events';\nimport { EntitySelectorDialog, ItemId } from 'tasks.v2.lib.entity-selector-dialog';\n\ntype Params = {\n\ttaskId: number | string,\n\tdialogOptions: Object,\n\tpreselected: [string, number][],\n\tevents: Object,\n};\n\nexport class UserSelectorDialog extends EventEmitter\n{\n\t#params: Params;\n\t#dialog: EntitySelectorDialog;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('Tasks:UserSelectorDialog');\n\n\t\tthis.#params = params;\n\t\tthis.#dialog = this.#createDialog();\n\t}\n\n\tgetDialog(): EntitySelectorDialog\n\t{\n\t\treturn this.#dialog;\n\t}\n\n\tshow(targetNode: HTMLElement): void\n\t{\n\t\tthis.#dialog.getPopup();\n\t\tthis.#dialog.setTargetNode(targetNode);\n\t\tthis.#dialog.show();\n\t}\n\n\tselectItemsByIds(items: ItemId[]): void\n\t{\n\t\tthis.#dialog.selectItemsByIds(items);\n\t}\n\n\tdestroy(): void\n\t{\n\t\tthis.#dialog.destroy();\n\t}\n\n\t#createDialog(): EntitySelectorDialog\n\t{\n\t\treturn new EntitySelectorDialog({\n\t\t\tid: `tasks-user-selector-dialog-${this.#params.taskId}`,\n\t\t\tpreselectedItems: this.#params.preselected,\n\t\t\t...this.#params.dialogOptions,\n\t\t\tevents: {\n\t\t\t\t'Item:onSelect': this.#select.bind(this),\n\t\t\t\t'Item:onDeselect': this.#select.bind(this),\n\t\t\t\tonHide: this.#hide.bind(this),\n\t\t\t\t...this.#params.events,\n\t\t\t},\n\t\t});\n\t}\n\n\t#select(): void\n\t{\n\t\tthis.emit('select', this.#dialog.getSelectedItems());\n\t}\n\n\t#hide(): void\n\t{\n\t\tthis.emit('hide', this.#dialog.getSelectedItems());\n\t}\n}\n"],"names":["UserSelectorDialog","EventEmitter","constructor","params","setEventNamespace","getDialog","show","targetNode","getPopup","setTargetNode","selectItemsByIds","items","destroy","EntitySelectorDialog","id","taskId","preselectedItems","preselected","dialogOptions","events","bind","onHide","emit","getSelectedItems"],"mappings":";;;;;;;CACmF;CAAA;CAAA;CAAA;CAAA;AASnF,CAAO,MAAMA,kBAAkB,SAASC,6BAAY,CACpD;GAICC,WAAW,CAACC,MAAc,EAC1B;KACC,KAAK,EAAE;KAAC;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAER,IAAI,CAACC,iBAAiB,CAAC,0BAA0B,CAAC;KAElD,4CAAI,sBAAWD,MAAM;KACrB,4CAAI,8DAAW,IAAI,iCAAgB;;GAGpCE,SAAS,GACT;KACC,+CAAO,IAAI;;GAGZC,IAAI,CAACC,UAAuB,EAC5B;KACC,4CAAI,oBAASC,QAAQ,EAAE;KACvB,4CAAI,oBAASC,aAAa,CAACF,UAAU,CAAC;KACtC,4CAAI,oBAASD,IAAI,EAAE;;GAGpBI,gBAAgB,CAACC,KAAe,EAChC;KACC,4CAAI,oBAASD,gBAAgB,CAACC,KAAK,CAAC;;GAGrCC,OAAO,GACP;KACC,4CAAI,oBAASA,OAAO,EAAE;;CA2BxB;CAAC,0BAvBA;GACC,OAAO,IAAIC,sDAAoB,CAAC;KAC/BC,EAAE,EAAG,8BAA6B,4CAAI,oBAASC,MAAO,EAAC;KACvDC,gBAAgB,EAAE,4CAAI,oBAASC,WAAW;KAC1C,GAAG,4CAAI,oBAASC,aAAa;KAC7BC,MAAM,EAAE;OACP,eAAe,EAAE,4CAAI,oBAASC,IAAI,CAAC,IAAI,CAAC;OACxC,iBAAiB,EAAE,4CAAI,oBAASA,IAAI,CAAC,IAAI,CAAC;OAC1CC,MAAM,EAAE,4CAAI,gBAAOD,IAAI,CAAC,IAAI,CAAC;OAC7B,GAAG,4CAAI,oBAASD;;IAEjB,CAAC;CACH;CAAC,oBAGD;GACC,IAAI,CAACG,IAAI,CAAC,QAAQ,EAAE,4CAAI,oBAASC,gBAAgB,EAAE,CAAC;CACrD;CAAC,kBAGD;GACC,IAAI,CAACD,IAAI,CAAC,MAAM,EAAE,4CAAI,oBAASC,gBAAgB,EAAE,CAAC;CACnD;;;;;;;;"}