this.BX=this.BX||{};(function(e,s,t,a){"use strict";let l=e=>e,i,o,r,n,d,c,b,v,p,u,B;var h=babelHelpers.classPrivateFieldLooseKey("params");var P=babelHelpers.classPrivateFieldLooseKey("layout");var L=babelHelpers.classPrivateFieldLooseKey("steps");var H=babelHelpers.classPrivateFieldLooseKey("getPreviousStep");var F=babelHelpers.classPrivateFieldLooseKey("updateStepsAvailability");var f=babelHelpers.classPrivateFieldLooseKey("renderStepHeader");var y=babelHelpers.classPrivateFieldLooseKey("renderStepTitle");var g=babelHelpers.classPrivateFieldLooseKey("renderStepContainer");var C=babelHelpers.classPrivateFieldLooseKey("renderButtonsContainer");var _=babelHelpers.classPrivateFieldLooseKey("renderArticle");var D=babelHelpers.classPrivateFieldLooseKey("openHelpDesk");var S=babelHelpers.classPrivateFieldLooseKey("renderStep");var m=babelHelpers.classPrivateFieldLooseKey("subscribeToPopupInit");var k=babelHelpers.classPrivateFieldLooseKey("updateFade");var w=babelHelpers.classPrivateFieldLooseKey("renderBackButton");var O=babelHelpers.classPrivateFieldLooseKey("renderCancelButton");var T=babelHelpers.classPrivateFieldLooseKey("renderContinueButton");var I=babelHelpers.classPrivateFieldLooseKey("onContinueButtonClickHandler");var K=babelHelpers.classPrivateFieldLooseKey("renderFinishButton");var z=babelHelpers.classPrivateFieldLooseKey("renderSaveChangesButton");var E=babelHelpers.classPrivateFieldLooseKey("openStep");class ${constructor(e){Object.defineProperty(this,E,{value:se});Object.defineProperty(this,z,{value:ee});Object.defineProperty(this,K,{value:Y});Object.defineProperty(this,I,{value:V});Object.defineProperty(this,T,{value:Q});Object.defineProperty(this,O,{value:J});Object.defineProperty(this,w,{value:q});Object.defineProperty(this,k,{value:Z});Object.defineProperty(this,m,{value:W});Object.defineProperty(this,S,{value:U});Object.defineProperty(this,D,{value:G});Object.defineProperty(this,_,{value:x});Object.defineProperty(this,C,{value:M});Object.defineProperty(this,g,{value:X});Object.defineProperty(this,y,{value:R});Object.defineProperty(this,f,{value:N});Object.defineProperty(this,F,{value:A});Object.defineProperty(this,H,{value:j});Object.defineProperty(this,h,{writable:true,value:void 0});Object.defineProperty(this,P,{writable:true,value:void 0});Object.defineProperty(this,L,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,h)[h]=e;babelHelpers.classPrivateFieldLooseBase(this,L)[L]=e.steps;babelHelpers.classPrivateFieldLooseBase(this,P)[P]={}}render(){const e=s.Tag.render(i||(i=l`
			<div class="tasks-wizard__container tasks-wizard__scope">
				${0}
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,f)[f](babelHelpers.classPrivateFieldLooseBase(this,L)[L]),babelHelpers.classPrivateFieldLooseBase(this,g)[g](babelHelpers.classPrivateFieldLooseBase(this,L)[L]));babelHelpers.classPrivateFieldLooseBase(this,E)[E](babelHelpers.classPrivateFieldLooseBase(this,L)[L][0]);return e}getCurrentStep(){return babelHelpers.classPrivateFieldLooseBase(this,L)[L][this.getCurrentStepIndex()]}update(){babelHelpers.classPrivateFieldLooseBase(this,F)[F]()}initHints(){babelHelpers.classPrivateFieldLooseBase(this,L)[L].forEach((e=>{e.hintManager=top.BX.UI.Hint.createInstance({id:`tasks-flow-edit-form-${e.id}-${s.Text.getRandom()}`,className:"skipInitByClassName",popupParameters:{targetContainer:e.node}});e.hintManager.init(e.node)}))}hideHints(){babelHelpers.classPrivateFieldLooseBase(this,L)[L].forEach((e=>{var s;(s=e.hintManager)==null?void 0:s.hide()}))}getCurrentStepIndex(){for(const[e,s]of babelHelpers.classPrivateFieldLooseBase(this,L)[L].entries()){if(s.selected){return e}}return 0}}function j(){return babelHelpers.classPrivateFieldLooseBase(this,L)[L][this.getCurrentStepIndex()-1]}function A(){let e=true;for(const t of babelHelpers.classPrivateFieldLooseBase(this,L)[L]){if(e){s.Dom.removeClass(t.titleNode,"--unavailable")}else{s.Dom.addClass(t.titleNode,"--unavailable")}const l=s.Type.isFunction(t.isFilled)&&!t.isFilled();e=e&&!l;if(t.selected){babelHelpers.classPrivateFieldLooseBase(this,P)[P].continueButton.setState(e?null:a.ButtonState.DISABLED)}}babelHelpers.classPrivateFieldLooseBase(this,P)[P].finishButton.setState(e?null:a.ButtonState.DISABLED);if(babelHelpers.classPrivateFieldLooseBase(this,P)[P].saveChangesButton){babelHelpers.classPrivateFieldLooseBase(this,P)[P].saveChangesButton.setState(e?null:a.ButtonState.DISABLED)}}function N(e){const t=e.slice(0,-1);const a=e.slice(-1)[0];return s.Tag.render(o||(o=l`
			<div class="tasks-wizard__step_header">
				${0}
				${0}
			</div>
		`),t.map((e=>babelHelpers.classPrivateFieldLooseBase(this,y)[y](e,false))),babelHelpers.classPrivateFieldLooseBase(this,y)[y](a,true))}function R(e,t){const a=t?null:s.Tag.render(r||(r=l`
			<div class="ui-icon-set --chevron-right" style="--ui-icon-set__icon-size: 15px;"></div>
		`));e.titleNode=s.Tag.render(n||(n=l`
			<span
				class="tasks-wizard__step_name ${0}"
				data-id="tasks-wizard-step-${0}"
			>${0}</span>
		`),e.selected?"--selected":"",e.id,e.title);s.Event.bind(e.titleNode,"click",(()=>babelHelpers.classPrivateFieldLooseBase(this,E)[E](e)));return s.Tag.render(d||(d=l`
			<span class="tasks-wizard__step_name-container">
				${0}
				${0}
			</span>
		`),e.titleNode,a)}function X(e){return s.Tag.render(c||(c=l`
			<div class="tasks-wizard__step_container">
				${0}
				${0}
			</div>
		`),e.map((e=>babelHelpers.classPrivateFieldLooseBase(this,S)[S](e))),babelHelpers.classPrivateFieldLooseBase(this,C)[C]())}function M(){return s.Tag.render(b||(b=l`
			<div class="tasks-wizard__step_buttons-container">
				${0}
				${0}
				${0}
				${0}
				${0}
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,w)[w](),babelHelpers.classPrivateFieldLooseBase(this,O)[O](),babelHelpers.classPrivateFieldLooseBase(this,T)[T](),babelHelpers.classPrivateFieldLooseBase(this,K)[K](),babelHelpers.classPrivateFieldLooseBase(this,z)[z](),babelHelpers.classPrivateFieldLooseBase(this,_)[_]())}function x(){if(!s.Type.isNumber(babelHelpers.classPrivateFieldLooseBase(this,h)[h].article)){return""}const e=s.Tag.render(v||(v=l`
			<div class="tasks-wizard__article">
				<span class="ui-icon-set --help"></span>
				${0}
			</div>
		`),s.Loc.getMessage("TASKS_WIZARD_HELP"));s.Event.bind(e,"click",babelHelpers.classPrivateFieldLooseBase(this,D)[D].bind(this));return e}function G(){top.BX.Helper.show(`redirect=detail&code=${babelHelpers.classPrivateFieldLooseBase(this,h)[h].article}`)}function U(e){const t=s.Tag.render(p||(p=l`
			<div class="tasks-wizard__step_fade --top"></div>
		`));const a=s.Tag.render(u||(u=l`
			<div class="tasks-wizard__step_fade"></div>
		`));e.node=s.Tag.render(B||(B=l`
			<div class="tasks-wizard__step ${0}">
				${0}
				${0}
				${0}
			</div>
		`),e.selected?"--selected":"",t,e.content,a);const i=new IntersectionObserver((()=>{if(e.node.offsetWidth>0){babelHelpers.classPrivateFieldLooseBase(this,k)[k](e.node,t,a);i.disconnect()}}));i.observe(e.node);s.Event.bind(e.node,"scroll",(()=>babelHelpers.classPrivateFieldLooseBase(this,k)[k](e.node,t,a)));babelHelpers.classPrivateFieldLooseBase(this,m)[m](e.node);return e.node}function W(e){t.EventEmitter.subscribe("BX.Main.Popup:onInit",(t=>{const a=t.getCompatData();const l=a[1];const i=a[2];if(s.Type.isDomNode(l)&&e.contains(l)){i.targetContainer=e}}))}function Z(e,t,a){const l=e.scrollTop;const i=e.scrollHeight-e.offsetHeight;const o=Math.abs(l-i)<1;if(l===0){s.Dom.removeClass(t,"--show")}else{s.Dom.addClass(t,"--show")}if(o){s.Dom.removeClass(a,"--show")}else{s.Dom.addClass(a,"--show")}}function q(){babelHelpers.classPrivateFieldLooseBase(this,P)[P].backButton=new a.Button({text:s.Loc.getMessage("TASKS_FLOW_EDIT_FORM_BACK"),color:a.Button.Color.LIGHT_BORDER,round:true,size:BX.UI.Button.Size.LARGE,onclick:()=>{babelHelpers.classPrivateFieldLooseBase(this,E)[E](babelHelpers.classPrivateFieldLooseBase(this,H)[H]())}});babelHelpers.classPrivateFieldLooseBase(this,P)[P].backButton.setDataSet({id:"tasks-wizard-flow-back"});return babelHelpers.classPrivateFieldLooseBase(this,P)[P].backButton.render()}function J(){babelHelpers.classPrivateFieldLooseBase(this,P)[P].cancelButton=new a.Button({text:s.Loc.getMessage("TASKS_FLOW_EDIT_FORM_CANCEL"),color:a.Button.Color.LIGHT_BORDER,round:true,size:BX.UI.Button.Size.LARGE,onclick:()=>babelHelpers.classPrivateFieldLooseBase(this,h)[h].onCancel()});babelHelpers.classPrivateFieldLooseBase(this,P)[P].cancelButton.setDataSet({id:"tasks-wizard-flow-cancel"});return babelHelpers.classPrivateFieldLooseBase(this,P)[P].cancelButton.render()}function Q(){babelHelpers.classPrivateFieldLooseBase(this,P)[P].continueButton=new a.Button({text:s.Loc.getMessage("TASKS_FLOW_EDIT_FORM_CONTINUE"),color:a.Button.Color.LIGHT_BORDER,round:true,size:BX.UI.Button.Size.LARGE,onclick:babelHelpers.classPrivateFieldLooseBase(this,I)[I].bind(this)});babelHelpers.classPrivateFieldLooseBase(this,P)[P].continueButton.setDataSet({id:"tasks-wizard-flow-continue"});return babelHelpers.classPrivateFieldLooseBase(this,P)[P].continueButton.render()}async function V(){if(babelHelpers.classPrivateFieldLooseBase(this,P)[P].continueButton.getState()===a.ButtonState.DISABLED){var e,t;(e=(t=babelHelpers.classPrivateFieldLooseBase(this,h)[h]).onDisabledContinueButtonClick)==null?void 0:e.call(t);return}if(s.Type.isFunction(babelHelpers.classPrivateFieldLooseBase(this,h)[h].onContinueHandler)&&babelHelpers.classPrivateFieldLooseBase(this,P)[P].continueButton.getState()===null){const e=await babelHelpers.classPrivateFieldLooseBase(this,h)[h].onContinueHandler();if(!e){return}}const l=this.getCurrentStepIndex();const i=l+1;babelHelpers.classPrivateFieldLooseBase(this,E)[E](babelHelpers.classPrivateFieldLooseBase(this,L)[L][i])}function Y(){var e;babelHelpers.classPrivateFieldLooseBase(this,P)[P].finishButton=babelHelpers.classPrivateFieldLooseBase(this,h)[h].finishButton;(e=babelHelpers.classPrivateFieldLooseBase(this,P)[P].finishButton)==null?void 0:e.setDataSet({id:"tasks-wizard-flow-finish"});return babelHelpers.classPrivateFieldLooseBase(this,P)[P].finishButton.render()}function ee(){var e,s;babelHelpers.classPrivateFieldLooseBase(this,P)[P].saveChangesButton=babelHelpers.classPrivateFieldLooseBase(this,h)[h].saveChangesButton;(e=babelHelpers.classPrivateFieldLooseBase(this,P)[P].saveChangesButton)==null?void 0:e.setDataSet({id:"tasks-wizard-flow-save"});return(s=babelHelpers.classPrivateFieldLooseBase(this,P)[P].saveChangesButton)==null?void 0:s.render()}function se(e){const t=babelHelpers.classPrivateFieldLooseBase(this,L)[L].findIndex((s=>s.id===e.id));babelHelpers.classPrivateFieldLooseBase(this,L)[L].forEach((e=>{e.selected=false;s.Dom.removeClass(e.titleNode,"--selected");s.Dom.removeClass(e.node,"--selected")}));e.selected=true;s.Dom.addClass(e.titleNode,"--selected");s.Dom.addClass(e.node,"--selected");s.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,P)[P].finishButton.getContainer(),"display","none");s.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,P)[P].continueButton.getContainer(),"display","");if(babelHelpers.classPrivateFieldLooseBase(this,P)[P].saveChangesButton){s.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,P)[P].saveChangesButton.getContainer(),"display","")}if(t===babelHelpers.classPrivateFieldLooseBase(this,L)[L].length-1){s.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,P)[P].finishButton.getContainer(),"display","");s.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,P)[P].continueButton.getContainer(),"display","none");if(babelHelpers.classPrivateFieldLooseBase(this,P)[P].saveChangesButton){s.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,P)[P].saveChangesButton.getContainer(),"display","none")}}if(t>0){s.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,P)[P].backButton.getContainer(),"display","");s.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,P)[P].cancelButton.getContainer(),"display","none")}else{s.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,P)[P].backButton.getContainer(),"display","none");s.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,P)[P].cancelButton.getContainer(),"display","")}babelHelpers.classPrivateFieldLooseBase(this,F)[F]()}e.Wizard=$})(this.BX.Tasks=this.BX.Tasks||{},BX,BX.Event,BX.UI);
//# sourceMappingURL=wizard.bundle.map.js