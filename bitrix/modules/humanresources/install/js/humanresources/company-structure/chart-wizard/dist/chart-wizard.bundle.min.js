this.BX=this.BX||{};this.BX.Humanresources=this.BX.Humanresources||{};(function(t,e,s,n,i,a,r,o,d,l,c,_,h,p,m,E,u,T){"use strict";const R={name:"headUsers",components:{UserListActionMenu:c.UserListActionMenu},props:{users:{type:Array,required:true},showPlaceholder:{type:Boolean,default:true},isTeamEntity:{type:Boolean,default:false},isExistingDepartment:{type:Boolean,default:true},userType:{type:String,default:"head"},teamColor:{type:[Object,null],default:null}},data(){return{headsVisible:false}},created(){this.userTypes={head:"head",deputy:"deputy"}},computed:{headItemsCount(){return this.isExistingDepartment?1:2},defaultAvatar(){return"/bitrix/js/humanresources/company-structure/org-chart/src/images/default-user.svg"},placeholderAvatar(){if(!this.isTeamEntity||!this.teamColor){return"/bitrix/js/humanresources/company-structure/chart-wizard/src/components/tree-preview/images/placeholder-avatar.svg"}return`/bitrix/js/humanresources/company-structure/chart-wizard/src/components/tree-preview/images/${this.teamColor.avatarImage}`},dropdownItems(){return this.users.map((t=>{const e=t.workPosition||this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_HEAD_POSITION");return{...t,workPosition:e}}))},titleBar(){return this.userType===this.userTypes.deputy?this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_EMPLOYEE_DEPUTY_TITLE"):this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_EMPLOYEE_HEAD_TITLE")},isDeputy(){return this.userType===this.userTypes.deputy}},methods:{loc(t,e={}){return this.$Bitrix.Loc.getMessage(t,e)}},template:`\n\t\t<div\n\t\t\tclass="chart-wizard-tree-preview__node_head"\n\t\t\t:class="{ '--deputy': isDeputy }"\n\t\t\tv-for="(user, index) in users.slice(0, headItemsCount)"\n\t\t>\n\t\t\t<img\n\t\t\t\t:src="user.avatar || defaultAvatar"\n\t\t\t\tclass="chart-wizard-tree-preview__node_head-avatar --placeholder"\n\t\t\t\t:class="{ '--deputy': isDeputy, '--old': isExistingDepartment }"\n\t\t\t/>\n\t\t\t<div class="chart-wizard-tree-preview__node_head-text" :class="{'--deputy': isDeputy }">\n\t\t\t\t<span\n\t\t\t\t\tclass="chart-wizard-tree-preview__node_head-name --crop"\n\t\t\t\t\t:class="{'--old': isExistingDepartment }"\n\t\t\t\t>\n\t\t\t\t\t{{ user.name }}\n\t\t\t\t</span>\n\t\t\t\t<span\n\t\t\t\t\tv-if="!isDeputy"\n\t\t\t\t\tclass="chart-wizard-tree-preview__node_head-position --crop"\n\t\t\t\t\t:class="{'--old': isExistingDepartment }"\n\t\t\t\t>\n\t\t\t\t\t{{ user.workPosition || loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_HEAD_POSITION') }}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<span\n\t\t\t\tv-if="index === headItemsCount - 1 && users.length > headItemsCount"\n\t\t\t\tclass="chart-wizard-tree-preview__node_head-rest"\n\t\t\t\t:class="{ '--active': headsVisible }"\n\t\t\t\tref="showMoreHeadUserWizardList"\n\t\t\t\t:data-test-id="'hr-company-structure_chart-wizard-tree__preview-' + userType + '-rest'"\n\t\t\t\t@click.stop="headsVisible = true"\n\t\t\t>\n\t\t\t\t\t{{ '+' + String(users.length - headItemsCount) }}\n\t\t\t</span>\n\t\t</div>\n\t\t<div\n\t\t\tv-if="users.length === 0 && showPlaceholder"\n\t\t\tclass="chart-wizard-tree-preview__node_head"\n\t\t\t:class="{ '--deputy': isDeputy }"\n\t\t>\n\t\t\t<img\n\t\t\t\t:src="placeholderAvatar"\n\t\t\t\tclass="chart-wizard-tree-preview__node_head-avatar --placeholder"\n\t\t\t\t:class="{'--deputy': isDeputy, '--old': isExistingDepartment  }"\n\t\t\t/>\n\t\t\t<div class="chart-wizard-tree-preview__node_head-text">\n\t\t\t\t<span\n\t\t\t\t\tclass="chart-wizard-tree-preview__placeholder_name"\n\t\t\t\t\t:class="{'--deputy': isDeputy, '--team': isTeamEntity }"\n\t\t\t\t\t:style="{ 'background-color': teamColor ? teamColor.namePlaceholder : false }"\n\t\t\t\t></span>\n\t\t\t\t<span\n\t\t\t\t\tv-if="!isDeputy"\n\t\t\t\t\tclass="chart-wizard-tree-preview__node_head-position --crop"\n\t\t\t\t>\n\t\t\t\t\t{{ loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_HEAD_POSITION') }}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<UserListActionMenu\n\t\t\tv-if="headsVisible"\n\t\t\t:id="isDeputy ? 'wizard-head-list-popup-deputy' : 'wizard-head-list-popup-head' "\n\t\t\t:items="dropdownItems"\n\t\t\t:width="228"\n\t\t\t:bindElement="$refs.showMoreHeadUserWizardList[0]"\n\t\t\t@close="headsVisible = false"\n\t\t\t:titleBar="titleBar"\n\t\t/>\n\t`};const C={name:"treeNode",components:{HeadUsers:R},props:{name:String,heads:Array,userCount:Number,nodeId:Number,entityType:{type:String,default:T.EntityTypes.department},teamColor:{type:[Object,null],default:null}},data(){return{isShowLoader:false}},created(){this.memberRoles=p.getMemberRoles(this.departmentData.entityType)},watch:{isShowLoader(t){if(!t){return}this.$nextTick((()=>{const{loaderContainer:t}=this.$refs;const e=new i.Loader({size:30});e.show(t)}))}},computed:{departmentData(){if(this.isExistingDepartment){if(!this.isHeadsLoaded){this.loadHeads([this.nodeId])}return this.departments.get(this.nodeId)}return{name:this.name,heads:this.heads,userCount:this.userCount,entityType:this.entityType}},isExistingDepartment(){return Boolean(this.nodeId)},employeesCount(){var t;return(this.userCount||0)-(((t=this.heads)==null?void 0:t.length)||0)},headUsers(){var t;return(t=this.departmentData.heads)==null?void 0:t.filter((t=>t.role===this.memberRoles.head))},deputyUsers(){var t;return(t=this.departmentData.heads)==null?void 0:t.filter((t=>t.role===this.memberRoles.deputyHead))},showInfo(){return this.nodeId?u.PermissionChecker.getInstance().hasPermission(u.PermissionActions.structureView,this.nodeId):true},isHeadsLoaded(t){const{heads:e}=this.departments.get(this.nodeId);return Boolean(e)},isTeamEntity(){return this.departmentData.entityType===T.EntityTypes.team},dataTestIdSuffix(){return this.isExistingDepartment?"":"_new"},...n.mapState(m.useChartStore,["departments"])},methods:{loc(t,e={}){return this.$Bitrix.Loc.getMessage(t,e)},locPlural(t,e){return _.Loc.getMessagePlural(t,e,{"#COUNT#":e})},async loadHeads(t){const e=m.useChartStore();try{this.isShowLoader=true;await e.loadHeads(t)}finally{this.isShowLoader=false}},formatDataTestId(t){return t+this.dataTestIdSuffix}},template:`\n\t\t<div\n\t\t\tclass="chart-wizard-tree-preview__node"\n\t\t\t:class="{ '--new': !isExistingDepartment, '--old': isExistingDepartment,'--team': isTeamEntity }"\n\t\t>\n\t\t\t<div \n\t\t\t\tclass="chart-wizard-tree-preview__node_summary" \n\t\t\t\t:class="{ '--old': isExistingDepartment, '--team': isTeamEntity }"\n\t\t\t\t:style="{ '--team-border-color': teamColor?.previewBorder }"\n\t\t\t>\n\t\t\t\t<div \n\t\t\t\t\tclass="chart-wizard-tree-preview__node_name --crop"\n\t\t\t\t\t:data-test-id="formatDataTestId('chart-wizard-tree-preview__node_name')"\n\t\t\t\t\t:style="{ 'background-color': teamColor ? teamColor.headBackground : false }"\n\t\t\t\t>\n\t\t\t\t\t<span\n\t\t\t\t\t\tv-if="!departmentData.name" \n\t\t\t\t\t\tclass="chart-wizard-tree-preview__placeholder_node_name"\n\t\t\t\t\t\t:class="{ '--team': isTeamEntity }"\n\t\t\t\t\t\t:style="{ 'background-color': teamColor ? teamColor.namePlaceholder : false }"\n\t\t\t\t\t></span>\n\t\t\t\t\t{{departmentData.name}}\n\t\t\t\t</div>\n\t\t\t\t<div \n\t\t\t\t\tclass="chart-wizard-tree-preview__node_content"\n\t\t\t\t\t:data-test-id="formatDataTestId('chart-wizard-tree-preview__head_list')"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="chart-wizard-tree-preview__head_list"\n\t\t\t\t\t\t:data-test-id="formatDataTestId('chart-wizard-tree-preview__head_list')"\n\t\t\t\t\t>\n\t\t\t\t\t\t<HeadUsers\n\t\t\t\t\t\t\tv-if="showInfo && headUsers"\n\t\t\t\t\t\t\t:users="headUsers"\n\t\t\t\t\t\t\t:showPlaceholder="!isExistingDepartment"\n\t\t\t\t\t\t\t:isTeamEntity="isTeamEntity"\n\t\t\t\t\t\t\t:isExistingDepartment="isExistingDepartment"\n\t\t\t\t\t\t\t:teamColor="teamColor"\n\t\t\t\t\t\t/> \n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if="isShowLoader" ref="loaderContainer"></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if="showInfo && !isExistingDepartment"\n\t\t\t\t\t\tclass="chart-wizard-tree-preview__node_employees"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass="chart-wizard-tree-preview__node_employees-list"\n\t\t\t\t\t\t\t:data-test-id="formatDataTestId('chart-wizard-tree-preview__node_employees-list')"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<p class="chart-wizard-tree-preview__node_employees-title">\n\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\tisTeamEntity \n\t\t\t\t\t\t\t\t\t? loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_TREE_PREVIEW_TEAM_EMPLOYEES_TITLE') \n\t\t\t\t\t\t\t\t\t: loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_TREE_PREVIEW_EMPLOYEES_TITLE')\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<span class="chart-wizard-tree-preview__node_employees_count">\n\t\t\t\t\t\t\t\t{{locPlural('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_TREE_PREVIEW_EMPLOYEES_COUNT', employeesCount)}}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tclass="chart-wizard-tree-preview__node_deputies"\n\t\t\t\t\t\t\t:data-test-id="formatDataTestId('chart-wizard-tree-preview__node_deputies-list')"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<p class="chart-wizard-tree-preview__node_employees-title">\n\t\t\t\t\t\t\t\t{{loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_TREE_PREVIEW_DEPUTIES_TITLE')}}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<HeadUsers\n\t\t\t\t\t\t\t\t:users="deputyUsers"\n\t\t\t\t\t\t\t\t:isTeamEntity="isTeamEntity"\n\t\t\t\t\t\t\t\t:isExistingDepartment="isExistingDepartment"\n\t\t\t\t\t\t\t\tuserType="deputy"\n\t\t\t\t\t\t\t\t:teamColor="teamColor"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<slot v-if="isExistingDepartment"></slot>\n\t\t</div>\n\t`};const S={name:"treePreview",components:{TreeNode:C},props:{parentId:{type:[Number,null],required:true},name:{type:String,required:true},heads:{type:Array,required:true},userCount:{type:Number,required:true},entityType:{type:String,default:T.EntityTypes.department},teamColor:{type:[Object,null],default:null}},computed:{rootId(){const t=this.departments.get(this.parentId);if(t){var e;return(e=t.parentId)!=null?e:0}return 0},companyName(){const{name:t}=[...this.departments.values()].find((t=>t.parentId===0));return t},isTeamEntity(){return this.entityType===T.EntityTypes.team},...n.mapState(m.useChartStore,["departments"])},methods:{loc(t,e={}){return this.$Bitrix.Loc.getMessage(t,e)}},template:`\n\t\t<div class="chart-wizard-tree-preview">\n\t\t\t<div class="chart-wizard-tree-preview__header">\n\t\t\t\t<span class="chart-wizard-tree-preview__header_text">\n\t\t\t\t\t{{\n\t\t\t\t\t\tisTeamEntity\n\t\t\t\t\t\t\t? loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_TREE_PREVIEW_TEAM_TITLE')\n\t\t\t\t\t\t\t: loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_TREE_PREVIEW_DEPARTMENT_TITLE')\n\t\t\t\t\t}}\n\t\t\t\t</span>\n\t\t\t\t<span class="chart-wizard-tree-preview__header_name">\n\t\t\t\t\t{{ companyName }}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<TreeNode\n\t\t\t\tv-if="rootId"\n\t\t\t\t:nodeId="rootId"\n\t\t\t>\n\t\t\t\t<TreeNode :nodeId="parentId">\n\t\t\t\t\t<TreeNode\n\t\t\t\t\t\t:name="name"\n\t\t\t\t\t\t:heads="heads"\n\t\t\t\t\t\t:userCount="userCount"\n\t\t\t\t\t\t:entityType="entityType"\n\t\t\t\t\t\t:teamColor="teamColor"\n\t\t\t\t\t></TreeNode>\n\t\t\t\t</TreeNode>\n\t\t\t</TreeNode>\n\t\t\t<TreeNode\n\t\t\t\tv-else-if="parentId"\n\t\t\t\t:nodeId="parentId"\n\t\t\t>\n\t\t\t\t<TreeNode\n\t\t\t\t\t:name="name"\n\t\t\t\t\t:heads="heads"\n\t\t\t\t\t:userCount="userCount"\n\t\t\t\t\t:entityType="entityType"\n\t\t\t\t\t:teamColor="teamColor"\n\t\t\t\t></TreeNode>\n\t\t\t</TreeNode>\n\t\t\t<TreeNode\n\t\t\t\tv-else\n\t\t\t\t:name="name"\n\t\t\t\t:heads="heads"\n\t\t\t\t:userCount="userCount"\n\t\t\t\t:entityType="entityType"\n\t\t\t\t:teamColor="teamColor"\n\t\t\t></TreeNode>\n\t\t</div>\n\t`};const A={name:"TeamColorPicker",components:{BasePopup:c.BasePopup},props:{modelValue:{type:Object,required:true},bindElement:{type:HTMLElement,required:true}},emits:["action","close","update:modelValue"],computed:{popupConfig(){const t=164;const e=41;const s=39;const n=33;return{width:t,height:116,bindElement:this.bindElement,borderRadius:12,contentNoPaddings:true,contentPadding:0,padding:0,offsetTop:4,offsetLeft:e/2-t/2+s,angleOffset:t/2-n/2}},nodeColorsSettingsDict(){return T.NodeColorsSettingsDict}},methods:{close(){this.$emit("close")}},template:`\n\t\t<BasePopup\n\t\t\t:config="popupConfig"\n\t\t\t:id="'chart_wizard__department__color-picker_popup'"\n\t\t\t@close="close"\n\t\t>\n\t\t\t<div\n\t\t\t\tclass="chart_wizard__department__color-picker_popup-container"\n\t\t\t\t:data-test-id="'wizard-department-color-picker-popup'"\n\t\t\t>\n\t\t\t\t<div v-for="item in nodeColorsSettingsDict" \n\t\t\t\t\t class="chart_wizard__department__color-picker_color-item"\n\t\t\t\t\t :class=" {'--active': item.name === modelValue.name }"\n\t\t\t\t\t @click="$emit('update:modelValue', item)"\n\t\t\t\t\t :data-test-id="'wizard-department-color-picker-item-'+item.name"\n\t\t\t\t>\n\t\t\t\t\t<div class="chart_wizard__department__color-picker_color-item_inner"\n\t\t\t\t\t\t :style="{ 'background-color': item.pickerColor }"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</BasePopup>\n\t`};const y={name:"department",components:{TeamColorPicker:A},props:{parentId:{type:[Number,null],required:true},name:{type:String,required:true},description:{type:String,required:true},shouldErrorHighlight:{type:Boolean,required:true},isEditMode:{type:Boolean},entityType:{type:String,required:true},teamColor:{type:[Object,null],default:null},refToFocus:{type:String,default:null}},emits:["applyData"],data(){return{deniedError:false,showColorPicker:false,teamColorValue:this.teamColor}},watch:{isTeamEntity(){this.recreateTagSelector()}},created(){this.selectedParentDepartment=this.parentId;this.departmentName=this.name;this.departmentDescription=this.description;this.departmentSelectorCashe=new a.MemoryCache;this.departmentsSelector=this.getOrCreateTagSelector()},mounted(){this.departmentsSelector.renderTo(this.$refs["tag-selector"])},activated(){this.teamColorValue=this.teamColor;this.$emit("applyData",{isDepartmentDataChanged:false,isValid:this.departmentName!==""&&this.selectedParentDepartment!==null&&!this.deniedError});if(this.refToFocus&&this.$refs[this.refToFocus]){this.$refs[this.refToFocus].focus()}else{this.$refs.title.focus()}},methods:{recreateTagSelector(){this.$refs["tag-selector"].innerHTML="";this.departmentsSelector=this.getOrCreateTagSelector();this.departmentsSelector.renderTo(this.$refs["tag-selector"])},createTagSelector(){const t=this.parentId===0&&this.isEditMode;let e=this.parentId?[["structure-node",this.parentId]]:[];if(!this.isEditMode){const t=u.PermissionChecker.getInstance();const s=this.isTeamEntity?u.PermissionActions.teamCreate:u.PermissionActions.departmentCreate;if(t&&!t.hasPermission(s,this.parentId)){e=[["structure-node",0]]}}const s=t=>t.getRootNode().getChildren().count()===0;const n=new h.TagSelector({events:{onTagAdd:t=>{const{tag:e}=t.data;this.selectedParentDepartment=e.id},onTagRemove:()=>{this.selectedParentDepartment=null;this.applyData()}},multiple:false,locked:t,dialogOptions:{width:425,height:350,dropdownMode:true,hideOnDeselect:true,entities:[{id:"structure-node",options:{selectMode:"departmentsOnly",restricted:this.isEditMode?"update":"create",includedNodeEntityTypes:this.includedNodeEntityTypesInDialog,useMultipleTabs:true}}],preselectedItems:e,events:{onLoad:t=>{var e,i,a;const r=n.getDialog();r.getTabs().filter((t=>s(t))).forEach((t=>t.setVisible(false)));if(this.isEditMode){return}const o=u.PermissionChecker.getInstance();if(!o){return}const d=t.target;const l=(e=d.selectedItems)==null?void 0:(i=e.values())==null?void 0:(a=i.next())==null?void 0:a.value;const c=d.items.get("structure-node");const _=this.isTeamEntity?u.PermissionActions.teamCreate:u.PermissionActions.departmentCreate;for(const[,t]of c){var h;if(o.hasPermission(_,t.id)&&!o.hasPermission(_,(h=l==null?void 0:l.id)!=null?h:0)){t.select();break}}},onLoadError:()=>{this.selectedParentDepartment=null;this.applyData()},"Item:onSelect":t=>{var e,s,n;this.deniedError=false;const i=t.target;const a=(e=i.selectedItems)==null?void 0:(s=e.values())==null?void 0:(n=s.next())==null?void 0:n.value;const r=u.PermissionChecker.getInstance();if(!r){return}const o=this.isTeamEntity?u.PermissionActions.teamCreate:u.PermissionActions.departmentCreate;const d=this.isTeamEntity?u.PermissionActions.teamEdit:u.PermissionActions.departmentEdit;const l=this.isEditMode?d:o;if(!r.hasPermission(l,a.id)){this.deniedError=true}this.applyData()}}}});return n},getOrCreateTagSelector(){const t=String(this.isTeamEntity);return this.departmentSelectorCashe.remember(t,(()=>this.createTagSelector()))},loc(t,e={}){return this.$Bitrix.Loc.getMessage(t,e)},applyData(){this.$emit("applyData",{name:this.departmentName,description:this.departmentDescription,parentId:this.selectedParentDepartment,teamColor:this.teamColorValue,isDepartmentDataChanged:true,isValid:this.departmentName!==""&&this.selectedParentDepartment!==null&&!this.deniedError})}},computed:{includedNodeEntityTypesInDialog(){return this.isTeamEntity?["department","team"]:["department"]},isTeamEntity(){return this.entityType===T.EntityTypes.team},namePlaceholder(){return this.isTeamEntity?this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_TEAM_NAME_PLACEHOLDER_MSGVER_1"):this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_DEPARTMENT_NAME_PLACEHOLDER")},descriptionPlaceholder(){return this.isTeamEntity?this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_TEAM_DESCR_PLACEHOLDER"):this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_DEPARTMENT_DESCR_PLACEHOLDER")},higherLevelDepartmentContainer(){return this.isTeamEntity?".chart-wizard__department_higher_bottom":".chart-wizard__department_higher_top"}},template:`\n\t\t<div class="chart-wizard__department">\n\t\t\t<div class="chart-wizard__form">\n\t\t\t\t<Teleport defer :to="higherLevelDepartmentContainer">\n\t\t\t\t\t<span class="chart-wizard__department_item-label">\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tisTeamEntity\n\t\t\t\t\t\t\t\t? loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_DEPARTMENT_HIGHER_WITH_TEAM_LABEL')\n\t\t\t\t\t\t\t\t: loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_DEPARTMENT_HIGHER_LABEL')\n\t\t\t\t\t\t}}\n\t\t\t\t\t</span>\n\t\t\t\t\t<div\n\t\t\t\t\t\t:class="{ 'ui-ctl-warning': deniedError || (selectedParentDepartment === null && shouldErrorHighlight) }"\n\t\t\t\t\t\tref="tag-selector"\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if="deniedError || (selectedParentDepartment === null && shouldErrorHighlight)"\n\t\t\t\t\t\tclass="chart-wizard__department_item-error"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class="ui-icon-set --warning"></div>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if="deniedError"\n\t\t\t\t\t\t\tclass="chart-wizard__department_item-error-message"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_ADD_TO_DEPARTMENT_DENIED_MSG_VER_1') }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-else\n\t\t\t\t\t\t\tclass="chart-wizard__department_item-error-message"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\tisTeamEntity\n\t\t\t\t\t\t\t\t\t? loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_TEAM_PARENT_ERROR')\n\t\t\t\t\t\t\t\t\t: loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_DEPARTMENT_PARENT_ERROR')\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</Teleport>\n\t\t\t\t<div\n\t\t\t\t\tv-show="!isTeamEntity"\n\t\t\t\t\tclass="chart-wizard__department_item chart-wizard__department_higher_top">\n\t\t\t\t</div>\n\t\t\t\t<div class="chart-wizard__department_item">\n\t\t\t\t\t<span class="chart-wizard__department_item-label">\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tisTeamEntity\n\t\t\t\t\t\t\t\t? loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_DEPARTMENT_TEAM_NAME_LABEL')\n\t\t\t\t\t\t\t\t: loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_DEPARTMENT_NAME_LABEL') \n\t\t\t\t\t\t}}\n\t\t\t\t\t</span>\n\t\t\t\t\t<div class="chart-wizard__department_control-wrapper">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass="ui-ctl ui-ctl-textbox"\n\t\t\t\t\t\t\t:class="{ 'ui-ctl-warning': shouldErrorHighlight && departmentName === '' }"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tv-model="departmentName"\n\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\tmaxlength="255"\n\t\t\t\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\t\t\t\tref="title"\n\t\t\t\t\t\t\t\t:placeholder="namePlaceholder"\n\t\t\t\t\t\t\t\t@input="applyData()"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-if="isTeamEntity" \n\t\t\t\t\t\t\t class="chart-wizard__department__color-picker" \n\t\t\t\t\t\t\t @click="showColorPicker = true"\n\t\t\t\t\t\t\t ref="TeamColorPicker"\n\t\t\t\t\t\t\t :data-test-id="'wizard-department-color-picker'"\n\t\t\t\t\t\t\t :class="{ '--active': showColorPicker }"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class="chart-wizard__department__color-picker_inner"\n\t\t\t\t\t\t\t\t :style="{ 'background-color': teamColorValue?.pickerColor }"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if="shouldErrorHighlight && departmentName === ''"\n\t\t\t\t\t\tclass="chart-wizard__department_item-error"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class="ui-icon-set --warning"></div>\n\t\t\t\t\t\t<span class="chart-wizard__department_item-error-message">\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\tisTeamEntity\n\t\t\t\t\t\t\t\t\t? loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_TEAM_NAME_ERROR')\n\t\t\t\t\t\t\t\t\t: loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_DEPARTMENT_NAME_ERROR')\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="chart-wizard__department_item">\n\t\t\t\t\t<span class="chart-wizard__department_item-label">\n\t\t\t\t\t\t{{ loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_DEPARTMENT_DESCR_LABEL') }}\n\t\t\t\t\t</span>\n\t\t\t\t\t<div class="ui-ctl ui-ctl-textarea ui-ctl-no-resize">\n\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\tv-model="departmentDescription"\n\t\t\t\t\t\t\tmaxlength="255"\n\t\t\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\t\t\tref="description"\n\t\t\t\t\t\t\t:placeholder="descriptionPlaceholder"\n\t\t\t\t\t\t\t@change="applyData()"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t</textarea>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-show="isTeamEntity"\n\t\t\t\t\tclass="chart-wizard__department_item chart-wizard__department_higher_bottom"\n\t\t\t\t></div>\n\t\t\t</div>\n\t\t\t<TeamColorPicker\n\t\t\t\tv-if="showColorPicker"\n\t\t\t\t:bindElement="$refs.TeamColorPicker"\n\t\t\t\tv-model="teamColorValue"\n\t\t\t\t@update:model-value="applyData()"\n\t\t\t\t@close="showColorPicker = false"\n\t\t\t/>\n\t\t</div>\n\t`};const U=Object.freeze({moveUsers:"moveUsers",addUsers:"addUsers"});const D={name:"changeSaveModeControl",emits:["saveModeChanged"],components:{RouteActionMenu:c.RouteActionMenu},created(){this.menuItems=this.getMenuItems()},data(){return{menuVisible:false,actionId:U.moveUsers}},methods:{loc(t,e={}){return this.$Bitrix.Loc.getMessage(t,e)},onActionMenuItemClick(t){this.actionId=t;this.$emit("saveModeChanged",t)},getMenuItems(){return[{id:U.moveUsers,title:this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_EMPLOYEE_SAVE_MODE_MOVE_USERS_TITLE"),description:this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_EMPLOYEE_SAVE_MODE_MOVE_USERS_DESCRIPTION"),bIcon:{name:r.Main.PERSON_ARROW_LEFT_1,size:20,color:T.getColorCode("paletteBlue50")}},{id:U.addUsers,title:this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_EMPLOYEE_SAVE_MODE_ADD_USERS_TITLE"),description:this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_EMPLOYEE_SAVE_MODE_ADD_USERS_DESCRIPTION"),bIcon:{name:r.CRM.PERSON_PLUS_2,size:20,color:T.getColorCode("paletteBlue50")}}]}},computed:{getControlButtonText(){const t=this.actionId===U.moveUsers?"HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_EMPLOYEE_SAVE_MODE_MOVE_USERS_TITLE":"HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_EMPLOYEE_SAVE_MODE_ADD_USERS_TITLE";return this.loc(t)}},template:`\n\t\t<div\n\t\t\tclass="chart-wizard__change-save-mode-control-container"\n\t\t>\n\t\t\t<span>{{ loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_EMPLOYEE_SAVE_MODE_CONTROL_TEXT') }}</span>\n\t\t\t<a\n\t\t\t\tclass="chart-wizard__change-save-mode-control-button"\n\t\t\t\t:class="{ '--focused': menuVisible }"\n\t\t\t\tref='changeSaveModeButton'\n\t\t\t\t@click="menuVisible = true"\n\t\t\t>\n\t\t\t\t{{ getControlButtonText }}\n\t\t\t</a>\n\t\t</div>\n\t\t<RouteActionMenu\n\t\t\tv-if="menuVisible"\n\t\t\t:id="'hr-wizard-save-mode-menu'"\n\t\t\t:items="menuItems"\n\t\t\t:width="302"\n\t\t\t:bindElement="$refs.changeSaveModeButton"\n\t\t\t@action="onActionMenuItemClick"\n\t\t\t@close="menuVisible = false"\n\t\t/>\n\t`};const I={name:"employees",components:{ChangeSaveModeControl:D},emits:["applyData","saveModeChanged"],props:{heads:{type:Array,required:true},employeesIds:{type:Array,required:true},isEditMode:{type:Boolean,required:true},entityType:{type:String,required:true}},created(){this.memberRoles=p.getMemberRoles(this.entityType);this.selectedUsers=new Set;this.departmentHeads=[];this.departmentEmployees=[];this.removedUsers=[];this.headSelector=this.getUserSelector(p.memberRolesKeys.head);this.deputySelector=this.getUserSelector(p.memberRolesKeys.deputyHead);this.employeesSelector=this.getUserSelector(p.memberRolesKeys.employee);this.userCount=0;this.initialUsers=this.heads.reduce(((t,e)=>t.add(e.id)),new Set)},mounted(){this.headSelector.renderTo(this.$refs["head-selector"]);this.deputySelector.renderTo(this.$refs["deputy-selector"]);this.employeesSelector.renderTo(this.$refs["employees-selector"])},watch:{entityType(t){const e=this.memberRoles;const s=Object.keys(e);this.memberRoles=p.getMemberRoles(t);this.departmentHeads=this.departmentHeads.map((t=>{const n=s.find((s=>e[s]===t.role));return{...t,role:this.memberRoles[n]}}));this.departmentEmployees=this.departmentEmployees.map((t=>({...t,role:this.memberRoles.employee})))},employeesIds:{handler(t){this.employeesIds.forEach((t=>this.initialUsers.add(t)));const e=t.map((t=>["user",t]));const{dialog:s}=this.employeesSelector;s.setPreselectedItems(e);s.load()}}},methods:{getPreselectedItems(t){if(this.memberRoles.employee===t){return this.employeesIds.map((t=>["user",t]))}return this.heads.filter((e=>e.role===t)).map((t=>["user",t.id]))},getUserSelector(t){const e=new h.TagSelector({events:{onTagAdd:e=>{const{tag:s}=e.getData();this.selectedUsers.add(s.id);this.onSelectorToggle(s,this.memberRoles[t]);if(this.initialUsers.has(s.id)){this.initialUsers.delete(s.id)}else{this.applyData()}},onTagRemove:e=>{const{tag:s}=e.getData();this.selectedUsers.delete(s.id);this.onSelectorToggle(s,this.memberRoles[t]);this.applyData()}},multiple:true,dialogOptions:{preselectedItems:this.getPreselectedItems(this.memberRoles[t]),popupOptions:{events:{onBeforeShow:()=>{s.setHeight(250);if(s.isLoaded()){this.toggleUsers(s)}}}},events:{onShow:()=>{const{dialog:t}=e;const s=t.getContainer();const{top:n}=s.getBoundingClientRect();const i=n+s.offsetHeight-document.body.offsetHeight;if(i>0){const e=5;t.setHeight(s.offsetHeight-i-e)}},onLoad:t=>{this.toggleUsers(s);const e=t.target.items.get("user");e.forEach((t=>{t.setLink("")}))},"SearchTab:onLoad":()=>{this.toggleUsers(s)}},height:250,width:380,entities:[{id:"user",options:{intranetUsersOnly:true,inviteEmployeeLink:true}}],dropdownMode:true,hideOnDeselect:false}});const s=e.getDialog();return e},loc(t,e={}){return this.$Bitrix.Loc.getMessage(t,e)},toggleUsers(t){const e=t.getItems();e.forEach((e=>{const s=this.selectedUsers.has(e.id)&&!t.selectedItems.has(e);e.setHidden(s)}))},onSelectorToggle(t,e){const s=t.selector.dialog.getItem(["user",t.id]);const n=T.getUserDataBySelectorItem(s,e);const i=e===this.memberRoles.employee;if(!t.rendered){this.removedUsers=this.removedUsers.filter((t=>t.id!==n.id));if(i){this.departmentEmployees=[...this.departmentEmployees,{...n}]}else{this.departmentHeads=[...this.departmentHeads,{...n}]}this.userCount+=1;return}const{preselectedItems:a=[]}=t.selector.dialog;const r=a.flat().filter((t=>t!=="user"));if(r.includes(n.id)){this.removedUsers=[...this.removedUsers,{...n,role:e}]}if(i){this.departmentEmployees=this.departmentEmployees.filter((e=>e.id!==t.id))}else{this.departmentHeads=this.departmentHeads.filter((e=>e.id!==t.id))}this.userCount-=1},applyData(){this.$emit("applyData",{heads:this.departmentHeads,employees:this.departmentEmployees,removedUsers:this.removedUsers,userCount:this.userCount,isDepartmentDataChanged:true})},handleSaveModeChangedChanged(t){this.$emit("saveModeChanged",t)}},computed:{isTeamEntity(){return this.entityType===T.EntityTypes.team},employeeTitle(){return this.isTeamEntity?this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_EMPLOYEE_TEAM_EMPLOYEES_TITLE"):this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_EMPLOYEE_EMPLOYEES_TITLE")}},template:`\n\t\t<div class="chart-wizard__employee">\n\t\t\t<div class="chart-wizard__form">\n\t\t\t\t<div class="chart-wizard__employee_item">\n\t\t\t\t\t<span class="chart-wizard__employee_item-label">\n\t\t\t\t\t\t{{ loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_EMPLOYEE_HEAD_TITLE') }}\n\t\t\t\t\t</span>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="chart-wizard__employee_selector"\n\t\t\t\t\t\tref="head-selector"\n\t\t\t\t\t\tdata-test-id="hr-company-structure_chart-wizard__employees-head-selector"\n\t\t\t\t\t/>\n\t\t\t\t\t<span class="chart-wizard__employee_item-description">\n\t\t\t\t\t\t{{ loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_EMPLOYEE_HEAD_DESCR') }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="chart-wizard__employee_item">\n\t\t\t\t\t<span class="chart-wizard__employee_item-label">\n\t\t\t\t\t\t{{ loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_EMPLOYEE_DEPUTY_TITLE') }}\n\t\t\t\t\t</span>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="chart-wizard__employee_selector"\n\t\t\t\t\t\tref="deputy-selector"\n\t\t\t\t\t\tdata-test-id="hr-company-structure_chart-wizard__employees-deputy-selector"\n\t\t\t\t\t/>\n\t\t\t\t\t<span class="chart-wizard__employee_item-description">\n\t\t\t\t\t\t{{ loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_EMPLOYEE_DEPUTY_DESCR') }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="chart-wizard__employee_item">\n\t\t\t\t\t<span class="chart-wizard__employee_item-label">\n\t\t\t\t\t\t{{ employeeTitle }}\n\t\t\t\t\t</span>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="chart-wizard__employee_selector"\n\t\t\t\t\t\tref="employees-selector"\n\t\t\t\t\t\tdata-test-id="hr-company-structure_chart-wizard__employees-employee-selector"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div v-if="!isTeamEntity" class="chart-wizard__employee_item --change-save-mode-control">\n\t\t\t\t\t<ChangeSaveModeControl\n\t\t\t\t\t\tv-if="!isEditMode"\n\t\t\t\t\t\t@saveModeChanged="handleSaveModeChangedChanged"\n\t\t\t\t\t></ChangeSaveModeControl>\n\t\t\t\t\t<div class="chart-wizard__change-save-mode-control-container" v-else>\n\t\t\t\t\t\t{{ loc('HUMANRESOURCES_COMPANY_STRUCTURE_EDIT_WIZARD_EMPLOYEE_SAVE_MODE_TEXT') }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`};const v={name:"ResponsiveHint",props:{content:{type:String,required:true},width:{type:Number,default:300},extraClasses:{type:Object},top:{type:Boolean,default:false},alignCenter:{type:Boolean,default:false}},created(){this.hint=null},mounted(){const t=this.$refs["hint-container"];const e={width:this.width};if(this.top){e.bindOptions={position:"top"}}if(this.alignCenter){e.offsetLeft=t.offsetWidth/2-this.width/2+39;e.angle={offset:this.width/2-33/2}}_.Event.bind(this.$refs["hint-container"],"mouseenter",(()=>{this.hint=_.Reflection.getClass("BX.UI.Hint").createInstance({popupParameters:{...e}});this.hint.show(this.$refs["hint-container"],this.content)}));_.Event.bind(this.$refs["hint-container"],"mouseleave",(()=>{var t;(t=this.hint)==null?void 0:t.hide()}))},unmounted(){var t;(t=this.hint)==null?void 0:t.hide()},template:`\n\t\t<span class="ui-hint" ref="hint-container" :class="extraClasses">\n\t\t\t<span class="ui-hint-icon"/>\n\t\t</span>\n\t`};const M={name:"DefaultHint",components:{ResponsiveHint:v},props:{content:{type:String,required:true},width:{type:Number,default:300}},template:`\n\t\t<ResponsiveHint :content=content :classes="{ 'ui-hint': true }">\n\t\t\t<span class="ui-hint-icon"/>\n\t\t</ResponsiveHint>\n\t`};const g={name:"bindChat",emits:["applyData"],components:{DefaultHint:M,BIcon:d.BIcon},props:{heads:{type:Array,required:false},name:{type:String,required:true},entityType:{type:String,required:true}},data(){return{createDefaultChat:true,createDefaultChannel:true}},created(){this.chatSelector=this.getChatSelector();this.channelSelector=this.getChannelSelector();this.chats=[];this.channels=[];if(!this.headsCreated){this.createDefaultChat=false;this.createDefaultChannel=false}},mounted(){this.chatSelector.renderTo(this.$refs["chat-selector"]);this.channelSelector.renderTo(this.$refs["channel-selector"])},methods:{loc(t,e={}){return this.$Bitrix.Loc.getMessage(t,e)},getChatSelector(){const t={multiple:true,events:{onTagAdd:t=>{const{tag:e}=t.getData();this.chats.push(Number(e.id.replace("chat","")));this.applyData()},onTagRemove:t=>{const{tag:e}=t.getData();const s=Number(e.id.replace("chat",""));this.chats=this.chats.filter((t=>t!==s));this.applyData()}},dialogOptions:{enableSearch:true,height:250,width:380,dropdownMode:true,recentTabOptions:c.getChatRecentTabOptions(this.entityType,c.ChatTypeDict.chat),entities:[c.getChatDialogEntity()]}};return new h.TagSelector(t)},getChannelSelector(){const t={multiple:true,events:{onTagAdd:t=>{const{tag:e}=t.getData();this.channels.push(Number(e.id.replace("chat","")));this.applyData()},onTagRemove:t=>{const{tag:e}=t.getData();const s=Number(e.id.replace("chat",""));this.channels=this.channels.filter((t=>t!==s));this.applyData()}},dialogOptions:{enableSearch:true,height:250,width:380,dropdownMode:true,recentTabOptions:c.getChatRecentTabOptions(this.entityType,c.ChatTypeDict.channel),entities:[c.getChannelDialogEntity()]}};return new h.TagSelector(t)},applyData(){this.$emit("applyData",{chats:this.chats,channels:this.channels,createDefaultChat:this.createDefaultChat,createDefaultChannel:this.createDefaultChannel,isDepartmentDataChanged:true})}},watch:{headsCreated(t){this.createDefaultChat=t;this.createDefaultChannel=t}},computed:{chatHintText(){return this.isTeamEntity?this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_BINDCHAT_TEAM_SELECT_CHATS_ADD_CHECKBOX_HINT"):this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_BINDCHAT_SELECT_CHATS_ADD_CHECKBOX_HINT_MSGVER_1")},channelHintText(){return this.isTeamEntity?this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_BINDCHAT_TEAM_SELECT_CHANNELS_ADD_CHECKBOX_HINT"):this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_BINDCHAT_SELECT_CHANNELS_ADD_CHECKBOX_HINT_MSGVER_1")},headsCreated(){const t=p.getMemberRoles(this.entityType);return this.heads.some((e=>e.role===t.head))},set(){return d.Set},isTeamEntity(){return this.entityType===T.EntityTypes.team},hints(){if(this.isTeamEntity){return[this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_BINDCHAT_TEAM_HINT_1"),this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_BINDCHAT_TEAM_HINT_2"),this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_BINDCHAT_TEAM_HINT_3")]}return[this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_BINDCHAT_HINT_1_MSGVER_1"),this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_BINDCHAT_HINT_2_MSGVER_1"),this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_BINDCHAT_HINT_3")]}},template:`\n\t\t<div class="chart-wizard__bind-chat">\n\t\t\t<div class="chart-wizard__bind-chat__item">\n\t\t\t\t<div class="chart-wizard__bind-chat__item-hint" :class="{ '--team': isTeamEntity }">\n\t\t\t\t\t<div class="chart-wizard__bind-chat__item-hint_logo" :class="{ '--team': isTeamEntity }"></div>\n\t\t\t\t\t<div class="chart-wizard__bind-chat__item-hint_text">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass="chart-wizard__bind-chat__item-hint_title"\n\t\t\t\t\t\t\tv-html="\n\t\t\t\t\t\t\t\tisTeamEntity \n\t\t\t\t\t\t\t\t? loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_BINDCHAT_TEAM_HINT_TITLE')\n\t\t\t\t\t\t\t\t: loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_BINDCHAT_HINT_TITLE')\n\t\t\t\t\t\t\t"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-for="hint in hints"\n\t\t\t\t\t\t\t class="chart-wizard__bind-chat__item-hint_text-item"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass="chart-wizard__bind-chat__item-hint_text-item_icon"\n\t\t\t\t\t\t\t\t:class="{ '--team': isTeamEntity }"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<span>{{ hint }}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="chart-wizard__bind-chat__item-options">\n\t\t\t\t\t<div class="chart-wizard__bind-chat__item-options__item-content_title">\n\t\t\t\t\t\t<div class="chart-wizard__bind-chat__item-options__item-content_title-text">\n\t\t\t\t\t\t\t{{ loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_BINDCHAT_SELECT_CHATS_TITLE') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<span class="chart-wizard__bind-chat__item-description">\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tisTeamEntity\n\t\t\t\t\t\t\t\t? loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_BINDCHAT_TEAM_SELECT_CHATS_DESCRIPTION')\n\t\t\t\t\t\t\t\t: loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_BINDCHAT_SELECT_CHATS_DESCRIPTION')\n\t\t\t\t\t\t}}\n\t\t\t\t\t</span>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="chart-wizard__chat_selector"\n\t\t\t\t\t\tref="chat-selector"\n\t\t\t\t\t\tdata-test-id="hr-company-structure_chart-wizard__chat-selector"\n\t\t\t\t\t/>\n\t\t\t\t\t<div class="chart-wizard__bind-chat__item-checkbox_container">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid="addChatCheckbox"\n\t\t\t\t\t\t\ttype="checkbox"\n\t\t\t\t\t\t\tclass="form-control"\n\t\t\t\t\t\t\t:disabled="!headsCreated"\n\t\t\t\t\t\t\tv-model="createDefaultChat"\n\t\t\t\t\t\t\t@change="applyData()"\n\t\t\t\t\t\t\tdata-test-id="hr-company-structure_chart-wizard__make-default-chat-checkbox"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<label for="addChatCheckbox">\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\tisTeamEntity\n\t\t\t\t\t\t\t\t\t? loc(\n\t\t\t\t\t\t\t\t\t\t'HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_BINDCHAT_TEAM_SELECT_CHATS_ADD_CHECKBOX_LABEL')\n\t\t\t\t\t\t\t\t\t: loc(\n\t\t\t\t\t\t\t\t\t\t'HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_BINDCHAT_SELECT_CHATS_ADD_CHECKBOX_LABEL_MSGVER_1')\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<DefaultHint :content="chatHintText"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if="!headsCreated" class="chart-wizard__bind-chat__item-checkbox_warning">\n\t\t\t\t\t\t<BIcon\n\t\t\t\t\t\t\t:name="set.WARNING"\n\t\t\t\t\t\t\tcolor="#FFA900"\n\t\t\t\t\t\t\t:size="16"\n\t\t\t\t\t\t></BIcon>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\tisTeamEntity\n\t\t\t\t\t\t\t\t\t? loc(\n\t\t\t\t\t\t\t\t\t\t'HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_BINDCHAT_TEAM_SELECT_CHATS_ADD_CHECKBOX_WARNING')\n\t\t\t\t\t\t\t\t\t: loc(\n\t\t\t\t\t\t\t\t\t\t'HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_BINDCHAT_SELECT_CHATS_ADD_CHECKBOX_WARNING')\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="chart-wizard__bind-chat__item-options">\n\t\t\t\t\t<div class="chart-wizard__bind-chat__item-options__item-content_title">\n\t\t\t\t\t\t<div class="chart-wizard__bind-chat__item-options__item-content_title-text">\n\t\t\t\t\t\t\t{{ loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_BINDCHAT_SELECT_CHANNELS_TITLE') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<span class="chart-wizard__bind-chat__item-description">\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tisTeamEntity\n\t\t\t\t\t\t\t\t? loc(\n\t\t\t\t\t\t\t\t\t'HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_BINDCHAT_TEAM_SELECT_CHANNELS_DESCRIPTION')\n\t\t\t\t\t\t\t\t: loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_BINDCHAT_SELECT_CHANNELS_DESCRIPTION')\n\t\t\t\t\t\t}}\n\t\t\t\t\t</span>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="chart-wizard__channel_selector"\n\t\t\t\t\t\tref="channel-selector"\n\t\t\t\t\t\tdata-test-id="hr-company-structure_chart-wizard__channel-selector"\n\t\t\t\t\t/>\n\t\t\t\t\t<div class="chart-wizard__bind-chat__item-checkbox_container">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid="addChannelCheckbox"\n\t\t\t\t\t\t\ttype="checkbox"\n\t\t\t\t\t\t\tclass="form-control"\n\t\t\t\t\t\t\t:disabled="!headsCreated"\n\t\t\t\t\t\t\tv-model="createDefaultChannel"\n\t\t\t\t\t\t\t@change="applyData()"\n\t\t\t\t\t\t\tdata-test-id="hr-company-structure_chart-wizard__make-default-channel-checkbox"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<label for="addChannelCheckbox">\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\tisTeamEntity\n\t\t\t\t\t\t\t\t\t? loc(\n\t\t\t\t\t\t\t\t\t\t'HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_BINDCHAT_TEAM_SELECT_CHANNELS_ADD_CHECKBOX_LABEL')\n\t\t\t\t\t\t\t\t\t: loc(\n\t\t\t\t\t\t\t\t\t\t'HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_BINDCHAT_SELECT_CHANNELS_ADD_CHECKBOX_LABEL_MSGVER_1')\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<DefaultHint :content="channelHintText"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if="!headsCreated" class="chart-wizard__bind-chat__item-checkbox_warning --bottom-space">\n\t\t\t\t\t\t<BIcon\n\t\t\t\t\t\t\t:name="set.WARNING"\n\t\t\t\t\t\t\tcolor="#FFA900"\n\t\t\t\t\t\t\t:size="16"\n\t\t\t\t\t\t></BIcon>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\tisTeamEntity\n\t\t\t\t\t\t\t\t\t? loc(\n\t\t\t\t\t\t\t\t\t\t'HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_BINDCHAT_TEAM_SELECT_CHANNELS_ADD_CHECKBOX_WARNING')\n\t\t\t\t\t\t\t\t\t: loc(\n\t\t\t\t\t\t\t\t\t\t'HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_BINDCHAT_SELECT_CHANNELS_ADD_CHECKBOX_WARNING')\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`};const N={props:{parentId:{type:[Number,null],required:true}},components:{ResponsiveHint:v},data(){return{selectedEntityType:T.EntityTypes.department}},emits:["applyData"],created(){this.hint=null;this.hintHideTimeout=null;const t=u.PermissionChecker.getInstance();const e=this.parentId===0?t.hasPermissionWithAnyNode(u.PermissionActions.teamCreate):t.hasPermission(u.PermissionActions.teamCreate,this.parentId);const s=this.parentId===0?t.hasPermissionWithAnyNode(u.PermissionActions.departmentCreate):t.hasPermission(u.PermissionActions.departmentCreate,this.parentId);this.entities=[{type:T.EntityTypes.department,title:this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_ENTITY_DEPARTMENT_TITLE"),description:this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_ENTITY_DEPARTMENT_DESCR"),isEnabled:s,hint:!s&&this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_ENTITY_DEPARTMENT_NO_ACCESS_HINT"),isSoon:false},{type:T.EntityTypes.team,title:this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_ENTITY_FUNCTIONAL_TEAM_TITLE_MSGVER_1"),description:this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_ENTITY_FUNCTIONAL_TEAM_DESCR"),isEnabled:u.PermissionChecker.isTeamsAvailable&&e,hint:u.PermissionChecker.isTeamsAvailable&&!e&&this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_ENTITY_FUNCTIONAL_TEAM_NO_ACCESS_HINT_MSGVER_1"),isSoon:!t.isTeamsAvailable},{type:T.EntityTypes.company,title:this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_ENTITY_COMPANY_TITLE"),description:this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_ENTITY_COMPANY_DESCR"),isEnabled:false,isSoon:true}];for(const t of this.entities){if(t.isEnabled){this.selectedEntityType=t.type;break}}this.applyData(this.selectedEntityType)},activated(){this.applyData(this.selectedEntityType)},deactivated(){var t;(t=this.hint)==null?void 0:t.hide();clearTimeout(this.hintHideTimeout);this.hintHideTimeout=null},methods:{loc(t,e={}){return this.$Bitrix.Loc.getMessage(t,e)},applyData(t){this.selectedEntityType=t;this.$emit("applyData",{isValid:true,isDepartmentDataChanged:false,entityType:this.selectedEntityType})},showHint(t,e){if(this.hintHideTimeout){return}const s=300;this.hint=_.Reflection.getClass("BX.UI.Hint").createInstance({popupParameters:{width:s,bindOptions:{position:"top"},offsetLeft:225,offsetTop:-23,angle:{offset:s/2-33/2}}});this.hint.show(e.target,t);this.hintHideTimeout=setTimeout((()=>{var t;(t=this.hint)==null?void 0:t.hide();this.hintHideTimeout=null}),2e3)}},template:`\n\t\t<div\n\t\t\tv-for="entity in entities"\n\t\t\tclass="chart-wizard__entity-wrapper"\n\t\t>\n\t\t\t<span v-if="entity.hint" @click="showHint(entity.hint, $event)" class="ui-hint chart-wizard__entity_hint-layout"></span>\n\t\t\t<div class="chart-wizard__entity"\n\t\t\t\t :class="{ \n\t\t\t\t\t['--' + entity.type.toLowerCase()]: true, \n\t\t\t\t\t'--selected': entity.type === selectedEntityType, \n\t\t\t\t\t'--enabled': entity.isEnabled \n\t\t\t\t}"\n\t\t\t\t@click="entity.isEnabled && applyData(entity.type)"\n\t\t\t>\n\t\t\t\t<div class="chart-wizard__entity_summary">\n\t\t\t\t\t<h2\n\t\t\t\t\t\tclass="chart-wizard__entity_title"\n\t\t\t\t\t\t:data-title="entity.isSoon ? loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_ENTITY_ACCESS_TITLE') : null"\n\t\t\t\t\t\t:class="{ '--disabled': !entity.isEnabled, '--soon': entity.isSoon }"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{entity.title}}\n\t\t\t\t\t</h2>\n\t\t\t\t\t<p class="chart-wizard__entity_description" :class="{ '--disabled': !entity.isEnabled}">\n\t\t\t\t\t\t{{entity.description}}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`};const O={departmentHead:"HEAD",departmentDeputy:"DEPUTY_HEAD",teamHead:"TEAM_HEAD",teamDeputy:"TEAM_DEPUTY"};const f={businessProcAuthority:"BUSINESS_PROC_AUTHORITY",reportsAuthority:"REPORTS_AUTHORITY"};const w={name:"teamRights",emits:["applyData"],props:{name:{type:String,required:true},settings:{type:Object,required:false}},created(){this.hints=[this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_TEAM_RIGHTS_HINT_1"),this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_TEAM_RIGHTS_HINT_2")];this.initBpValues=new Set;this.businessProcSelector=this.getTagSelector(f.businessProcAuthority,false);this.reportsSelector=this.getTagSelector(f.reportsAuthority,true)},mounted(){this.businessProcSelector.renderTo(this.$refs["business-proc-selector"]);this.reportsSelector.renderTo(this.$refs["reports-selector"])},watch:{settings:{handler(t){if(t[f.businessProcAuthority]){const e=this.getTagItems(false).filter((e=>t[f.businessProcAuthority].has(e.id)));e.forEach((t=>{const e=this.businessProcSelector.dialog.getItem(["head-type",t.id]);if(e){this.initBpValues.add(t.id);e.select()}}))}}}},methods:{loc(t,e={}){return this.$Bitrix.Loc.getMessage(t,e)},applyData(){this.$emit("applyData",{settings:this.settings,isDepartmentDataChanged:true})},getTagSelector(t,e){return new h.TagSelector({events:{onTagAdd:e=>{const{tag:s}=e.getData();this.settings[t].add(s.id);if(this.initBpValues.has(s.id)){this.initBpValues.delete(s.id)}else{this.applyData()}},onTagRemove:e=>{const{tag:s}=e.getData();this.settings[t].delete(s.id);this.applyData()}},multiple:true,id:"head-type-selector",locked:e,tagFontWeight:"700",showAddButton:!e,dialogOptions:{id:"head-type-selector",events:{"Item:onBeforeSelect":t=>{var e;const{item:s}=t.getData();if(!((e=s.getCustomData())!=null&&e.get("selectable"))){t.preventDefault()}}},width:400,height:200,dropdownMode:true,showAvatars:false,selectedItems:this.getTagItems(e).filter((e=>this.settings[t].has(e.id))),items:this.getTagItems(e),undeselectedItems:[["head-type",O.departmentHead]]}})},getTagItems(t){const e={bgColor:"#BDC1C6",textColor:"#525C69"};const s={bgColor:"#ADE7E4",textColor:"#207976"};const n={bgColor:"#CCE3FF",textColor:"#3592FF"};const i={customData:{selectable:false},textColor:"#C9CCD0",badges:[{title:this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_TEAM_RIGHTS_SOON_ITEM_BADGE"),textColor:"#FFFFFF",bgColor:"#2FC6F6"}],badgesOptions:{justifyContent:"right"}};return[{id:O.departmentHead,entityId:"head-type",tabs:"recents",title:this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_TEAM_RIGHTS_DEPARTMENT_HEAD_ITEM"),tagOptions:t?e:s,customData:{selectable:true}},{id:O.teamHead,entityId:"head-type",tabs:"recents",title:this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_TEAM_RIGHTS_TEAM_HEAD_ITEM"),tagOptions:t?e:n,customData:{selectable:true}},{id:O.departmentDeputy,entityId:"head-type",tabs:"recents",title:this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_TEAM_RIGHTS_DEPARTMENT_DEPUTY_ITEM"),tagOptions:t?e:s,...i},{id:O.teamDeputy,entityId:"head-type",tabs:"recents",title:this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_TEAM_RIGHTS_TEAM_DEPUTY_ITEM"),tagOptions:t?e:n,...i}]},goToBPHelp(t){if(top.BX.Helper){t.preventDefault();top.BX.Helper.show("redirect=detail&code=25455744")}}},computed:{businessDescription(){return this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_TEAM_RIGHTS_BUSINESS_PROC_DESCRIPTION",{"#DEPARTMENT_NAME#":_.Text.encode(this.name)})},reportsDescriptions(){return this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_TEAM_RIGHTS_REPORTS_DESCRIPTION",{"#DEPARTMENT_NAME#":_.Text.encode(this.name)})}},template:`\n\t\t<div class="chart-wizard__team-rights">\n\t\t\t<div class="chart-wizard__team-rights__item">\n\t\t\t\t<div class="chart-wizard__team-rights__item-hint --team">\n\t\t\t\t\t<div class="chart-wizard__team-rights__item-hint_logo --team"></div>\n\t\t\t\t\t<div class="chart-wizard__team-rights__item-hint_text">\n\t\t\t\t\t\t<div class="chart-wizard__team-rights__item-hint_title">\n\t\t\t\t\t\t\t{{ loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_TEAM_RIGHTS_HINT_TITLE') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-for="hint in hints"\n\t\t\t\t\t\t\tclass="chart-wizard__team-rights__item-hint_text-item"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass="chart-wizard__team-rights__item-hint_text-item_icon --team"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<span>{{ hint }}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="chart-wizard__team-rights__item-options">\n\t\t\t\t\t<div class="chart-wizard__team-rights__item-options__item-content_title"\n\t\t\t\t\t\t :data-title="loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_ENTITY_ACCESS_TITLE')"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class="chart-wizard__team-rights__item-options__item-content_title-text">\n\t\t\t\t\t\t\t{{ loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_TEAM_RIGHTS_BUSINESS_PROC_TITLE') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<span class="ui-hint" @click="goToBPHelp">\n\t\t\t\t\t\t\t<span class="ui-hint-icon"/>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="chart-wizard__team-rights__item-description-container">\n\t\t\t\t\t\t<span class="chart-wizard__team-rights__item-description-text" v-html="businessDescription">\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="chart-wizard__team-rights__business-proc-selector"\n\t\t\t\t\t\tref="business-proc-selector"\n\t\t\t\t\t\tdata-test-id="hr-company-structure__team-rights__business-proc-selector"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class="chart-wizard__team-rights__item-options">\n\t\t\t\t\t<div class="chart-wizard__team-rights__item-options__item-content_title --soon"\n\t\t\t\t\t\t :data-title="loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_ENTITY_ACCESS_TITLE')"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class="chart-wizard__team-rights__item-options__item-content_title-text">\n\t\t\t\t\t\t\t{{ loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_TEAM_RIGHTS_REPORTS_TITLE') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<span class="chart-wizard__team-rights_ui-hint-disabled">\n\t\t\t\t\t\t\t<span class="ui-hint-icon"/>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="chart-wizard__team-rights__item-description-container">\n\t\t\t\t\t\t<span class="chart-wizard__team-rights__item-description-text --soon" v-html="reportsDescriptions">\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="chart-wizard__team-rights__reports-selector"\n\t\t\t\t\t\tref="reports-selector"\n\t\t\t\t\t\tdata-test-id="hr-company-structure__team-rights__reports-selector"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`};const H={addDepartment:(t,e,s,n,i)=>p.postData("humanresources.api.Structure.Node.add",{name:t,parentId:e,description:s,entityType:n,colorName:i}),getEmployees:t=>p.postData("humanresources.api.Structure.Node.Member.Employee.getIds",{nodeId:t}),updateDepartment:(t,e,s,n,i)=>p.postData("humanresources.api.Structure.Node.update",{nodeId:t,name:s,parentId:e,description:n,colorName:i}),saveUsers:(t,e,s)=>p.postData("humanresources.api.Structure.Node.Member.saveUserList",{nodeId:t,userIds:e,parentId:s}),moveUsers:(t,e,s)=>p.postData("humanresources.api.Structure.Node.Member.moveUserListToDepartment",{nodeId:t,userIds:e,parentId:s}),saveChats:(t,e,s)=>p.postData("humanresources.api.Structure.Node.Member.Chat.saveChatList",{nodeId:t,ids:e,createDefault:s}),createSettings:(t,e,s)=>p.postData("humanresources.api.Structure.Node.NodeSettings.create",{settings:e,nodeId:t,parentId:s}),updateSettings:(t,e,s)=>p.postData("humanresources.api.Structure.Node.NodeSettings.update",{settings:e,nodeId:t,parentId:s}),getSettings:t=>p.postData("humanresources.api.Structure.Node.NodeSettings.get",{nodeId:t})};const P={createDepartment:t=>{var e;const{departments:s}=m.useChartStore();const{id:n,parentId:i}=t;const a=s.get(i);a.children=[...(e=a.children)!=null?e:[],n];s.set(n,{...t,id:n,chats:null,channels:null})},editDepartment:t=>{const{id:e,parentId:s}=t;const{departments:n}=m.useChartStore();const i=n.get(e);n.set(e,{...i,...t});const a=[...n.values()].find((t=>{var s;return(s=t.children)==null?void 0:s.includes(e)}));if(s!==0&&a.id!==s){var r;a.children=a.children.filter((t=>t!==e));const i=n.get(s);i.children=[...(r=i.children)!=null?r:[],e];n.set(e,{...t,prevParentId:a.id})}},moveUsersToRootDepartment:(t,e)=>{const{departments:s}=m.useChartStore();const n=t.filter((t=>e.includes(t.id)));const i=[...s.values()].find((t=>t.parentId===0));s.set(i.id,{...i,employees:[...i.employees||[],...n],userCount:i.userCount+n.length})},refreshDepartments:t=>{const e=m.useChartStore();e.refreshDepartments(t)},tryToAddCurrentDepartment(t,e){const s=m.useChartStore();const{heads:n,employees:i}=t;const a=[...n,...i].some((t=>t.id===s.userId));if(a){s.changeCurrentDepartment(0,e)}}};const b=Object.freeze({moveUsers:"moveUsers",addUsers:"addUsers"});const z={name:"chartWizard",emits:["modifyTree","close"],components:{Department:y,Employees:I,BindChat:g,TreePreview:S,Entities:N,TeamRights:w},props:{nodeId:{type:Number,required:true},isEditMode:{type:Boolean,required:true},showEntitySelector:{type:Boolean,required:false},entity:{type:String},entityType:{type:String,default:T.EntityTypes.department},source:{type:String},refToFocus:{type:String,default:null}},data(){return{stepIndex:0,waiting:false,isValidStep:false,isDepartmentDataChanged:false,departmentData:{id:0,parentId:0,name:"",description:"",heads:[],employees:[],chats:[],channels:[],userCount:0,createDefaultChat:true,createDefaultChannel:true,teamColor:T.NodeColorsSettingsDict.blue,entityType:T.EntityTypes.department,settings:{[f.businessProcAuthority]:new Set([O.departmentHead]),[f.reportsAuthority]:new Set([O.departmentHead])}},removedUsers:[],employeesIds:[],departmentSettings:{[f.businessProcAuthority]:new Set([O.departmentHead]),[f.reportsAuthority]:new Set([O.departmentHead])},shouldErrorHighlight:false,visibleSteps:[],saveMode:b.moveUsers}},created(){this.init()},beforeUnmount(){_.Event.unbind(window,"beforeunload",this.handleBeforeUnload)},computed:{stepTitle(){var t;if(this.isFirstStep&&!this.isEditMode){return this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_CREATE")}const e=this.visibleSteps[0]==="entities"?this.stepIndex:this.stepIndex+1;if(!this.isEditMode){return this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_STEP_PROGRESS",{"#CURRENT_STEP#":e,"#MAX_STEP#":this.steps.length-1})}return((t=this.departmentData)==null?void 0:t.entityType)===T.EntityTypes.team?this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_EDIT_TEAM_TITLE"):this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_EDIT_TITLE")},closeConfirmTitle(){var t;if(this.isEditMode){var e;return((e=this.departmentData)==null?void 0:e.entityType)===T.EntityTypes.team?this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_CONFIRM_CLOSE_EDIT_WIZARD_TEAM_TITLE"):this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_CONFIRM_CLOSE_EDIT_WIZARD_DEPARTMENT_TITLE")}return((t=this.departmentData)==null?void 0:t.entityType)===T.EntityTypes.team?this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_CONFIRM_CLOSE_CREATE_WIZARD_TEAM_TITLE"):this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_CONFIRM_CLOSE_CREATE_WIZARD_DEPARTMENT_TITLE")},currentStep(){const t=this.visibleSteps[this.stepIndex];return this.steps.find((e=>t===e.id))},componentInfo(){const{parentId:t,name:e,description:s,heads:n,entityType:i,teamColor:a}=this.departmentData;const r={department:{name:"Department",params:{parentId:t,name:e,description:s,entityType:i,teamColor:a,refToFocus:this.refToFocus,shouldErrorHighlight:this.shouldErrorHighlight,isEditMode:this.isEditMode}},employees:{name:"Employees",params:{heads:n,entityType:i,employeesIds:this.employeesIds,isEditMode:this.isEditMode}},bindChat:{name:"BindChat",params:{heads:n,name:e,entityType:i}},teamRights:{name:"TeamRights",params:{name:e,settings:this.departmentSettings}},entities:{name:"Entities",params:{parentId:t}}};const{id:o}=this.currentStep;return r[o]},isFirstStep(){return this.currentStep.id==="entities"},hasTreePreview(){return!["entities","bindChat","teamRights"].includes(this.currentStep.id)},isChatStep(){return this.currentStep.id==="bindChat"},filteredSteps(){return this.visibleSteps.filter((t=>t!=="entities"))},rootId(){const{id:t}=[...this.departments.values()].find((t=>t.parentId===0));return t},isTeamEntity(){var t;return((t=this.departmentData)==null?void 0:t.entityType)===T.EntityTypes.team},createButtonText(){return this.isTeamEntity?this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_CREATE_TEAM_BTN"):this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_CREATE_BTN")},...n.mapState(m.useChartStore,["departments","userId","currentDepartments"])},methods:{handleBeforeUnload(t){t.preventDefault()},loc(t,e={}){return this.$Bitrix.Loc.getMessage(t,e)},async init(){_.Event.bind(window,"beforeunload",this.handleBeforeUnload);if(this.isEditMode){const{id:t,name:e,description:s,parentId:n,heads:i,userCount:a,children:r,entityType:o,teamColor:d,employees:l=[]}=this.departments.get(this.nodeId);this.getMemberRoles(o);this.createSteps(o);this.createVisibleSteps();this.createDefaultSaveMode(o);this.departmentData={...this.departmentData,id:t,parentId:n,name:e,description:s,heads:i,userCount:a,children:r,employees:l,entityType:o,teamColor:d,createDefaultChat:false,createDefaultChannel:false};const c=await H.getSettings(this.nodeId);this.departmentSettings=c.reduce(((t,{settingsType:e,settingsValue:s})=>{if(!Object.hasOwn(t,e)){t[e]=new Set}t[e].add(s);return t}),{...this.departmentSettings});this.employeesIds=await H.getEmployees(this.nodeId);return}if(this.entityType){this.departmentData.entityType=this.entityType}this.getMemberRoles(this.entityType);this.createSteps(this.entityType);this.createVisibleSteps();this.createDefaultSaveMode(this.entityType);if(this.nodeId){this.departmentData.parentId=this.nodeId;return}this.departmentData.parentId=0;E.sendData({tool:"structure",category:"structure",event:"create_wizard",c_element:this.source})},getMemberRoles(t){this.memberRoles=p.getMemberRoles(t)},createVisibleSteps(){switch(this.entity){case"department":this.visibleSteps=["department"];break;case"employees":this.visibleSteps=["employees"];break;case"teamRights":this.visibleSteps=["teamRights"];break;default:this.visibleSteps=this.showEntitySelector?this.steps.map((t=>t.id)):this.steps.filter((t=>t.id!=="entities")).map((t=>t.id));break}},move(t="next"){if(t==="next"&&!this.isValidStep){this.shouldErrorHighlight=true;return}this.stepIndex=t==="back"?this.stepIndex-1:this.stepIndex+1;this.pickStepsAnalytics()},close(t=false){this.$emit("close");if(t){E.sendData({tool:"structure",category:"structure",event:"cancel_wizard",c_element:this.source})}},closeWithConfirm(){if(!this.isDepartmentDataChanged){this.close(true);return}const t=new s.MessageBox({title:this.closeConfirmTitle,message:this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_CONFIRM_CLOSE_WIZARD_MESSAGE"),yesCaption:this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_CONFIRM_CLOSE_WIZARD_OK_CAPTION"),noCaption:this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_CONFIRM_CLOSE_WIZARD_NO_CAPTION"),onYes:()=>{this.close(true);return true},minHeight:155,buttons:s.MessageBoxButtons.YES_NO,popupOptions:{closeIcon:true,className:"humanresources-chart-wizard__close-confirm-popup"}});t.getYesButton().setRound(true);t.getNoButton().setRound(true);t.show()},onApplyData(t){var e;const s=this.departmentData.entityType;const{isValid:n=true,isDepartmentDataChanged:i=true,removedUsers:a=[],...r}=t;this.isValidStep=n;this.isDepartmentDataChanged=this.isDepartmentDataChanged||i;if(r){this.departmentData={...this.departmentData,...r}}this.removedUsers=a;if(n){this.shouldErrorHighlight=false}if(s!==this.departmentData.entityType){this.getMemberRoles(this.departmentData.entityType);this.createSteps(this.departmentData.entityType);this.createVisibleSteps();this.createDefaultSaveMode(this.departmentData.entityType);const t=p.getMemberRoles(s);const e=Object.keys(t);this.departmentData.heads=this.departmentData.heads.map((s=>{const n=e.find((e=>t[e]===s.role));return{...s,role:this.memberRoles[n]}}));this.departmentData.employees=this.departmentData.employees.map((t=>({...t,role:this.memberRoles.employee})))}this.departmentData.teamColor=this.isTeamEntity?(e=this.departmentData.teamColor)!=null?e:T.NodeColorsSettingsDict.blue:null},createSteps(t="DEPARTMENT"){if(t===T.EntityTypes.team){this.steps=[{id:"entities",title:this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_SELECT_ENTITY_TITLE")},{id:"department",title:this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_TEAM_TITLE")},{id:"employees",title:this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_TEAM_EMPLOYEES_TITLE")},{id:"bindChat",title:this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_BINDCHAT_TEAM_TITLE")},{id:"teamRights",title:this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_TEAM_RIGHTS_TITLE")}]}else{this.steps=[{id:"entities",title:this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_SELECT_ENTITY_TITLE")},{id:"department",title:this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_DEPARTMENT_TITLE")},{id:"employees",title:this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_EMPLOYEES_TITLE")},{id:"bindChat",title:this.loc("HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_BINDCHAT_TITLE_MSGVER_1")}]}},getUsersPromise(t){const e=this.calculateEmployeeIds();const{headsIds:s,deputiesIds:n,employeesIds:i}=e;const a={[this.memberRoles.head]:s,[this.memberRoles.deputyHead]:n,[this.memberRoles.employee]:i};return this.getUserMemberPromise(t,a)},calculateEmployeeIds(){const{heads:t,employees:e=[]}=this.departmentData;return[...t,...e].reduce(((t,e)=>{const{headsIds:s,deputiesIds:n,employeesIds:i}=t;if(e.role===this.memberRoles.head){s.push(e.id)}else if(e.role===this.memberRoles.deputyHead){n.push(e.id)}else{i.push(e.id)}return t}),{headsIds:[],deputiesIds:[],employeesIds:[]})},getUserMemberPromise(t,e,s){var n;if(this.isEditMode){return H.saveUsers(t,e)}const i=Object.values(e).some((t=>t.length>0));if(!i){return Promise.resolve()}const a=(n=this.departmentData.parentId)!=null?n:null;if(this.saveMode===b.moveUsers){return H.moveUsers(t,e,a)}return H.saveUsers(t,e,a)},async create(){const{name:t,parentId:s,description:n,chats:i,channels:a,createDefaultChat:r,createDefaultChannel:o,entityType:d,teamColor:l,settings:c}=this.departmentData;let _=0;let h="";this.waiting=true;try{const[e]=await H.addDepartment(t,s,n,d,l==null?void 0:l.name);_=e.id;h=e.accessCode;const p=await this.getUsersPromise(_);if(p!=null&&p.updatedDepartmentIds){P.refreshDepartments(p.updatedDepartmentIds)}else{P.tryToAddCurrentDepartment(this.departmentData,_)}await H.saveChats(_,{chat:[...i],channel:[...a]},{chat:Number(r),channel:Number(o)});if(d===T.EntityTypes.team){await H.createSettings(_,{[f.businessProcAuthority]:{values:[...c[f.businessProcAuthority]],replace:true}},s)}}catch(t){if(!p.reportedErrorTypes.has(t.code)){e.UI.Notification.Center.notify({content:t.message,autoHideDelay:4e3})}return}finally{this.waiting=false}P.createDepartment({...this.departmentData,id:_,accessCode:h});this.$emit("modifyTree",{id:_,parentId:s,showConfetti:true});const{headsIds:m,deputiesIds:u,employeesIds:R}=this.calculateEmployeeIds();E.sendData({tool:"structure",category:"structure",event:"create_dept",c_element:this.source,p2:`headAmount_${m.length}`,p3:`secondHeadAmount_${u.length}`,p4:`employeeAmount_${R.length}`});this.close()},async save(){if(!this.isValidStep){this.shouldErrorHighlight=true;return}const{id:t,parentId:e,name:s,description:n,teamColor:i,settings:a}=this.departmentData;const r=this.departments.get(t);const o=(r==null?void 0:r.parentId)===e?null:e;this.waiting=true;const d=this.entity==="employees"?this.getUsersPromise(t):Promise.resolve();const l=this.entity==="department"?H.updateDepartment(t,o,s,n,i==null?void 0:i.name):Promise.resolve();const c=this.entity==="teamRights"?H.updateSettings(t,{[f.businessProcAuthority]:{values:[...a[f.businessProcAuthority]],replace:true}},e):Promise.resolve();this.pickEditAnalytics(t,e);try{const[e]=await Promise.all([d,l,c]);let s=[];if(this.removedUsers.length>0){var _;s=(_=e==null?void 0:e.userMovedToRootIds)!=null?_:[];if(s.length>0){P.moveUsersToRootDepartment(this.removedUsers,s)}}const n=m.useChartStore();if(s.includes(this.userId)){n.changeCurrentDepartment(t,this.rootId)}else if(this.removedUsers.some((t=>t.id===this.userId))){n.changeCurrentDepartment(t)}else{P.tryToAddCurrentDepartment(this.departmentData,t)}P.editDepartment(this.departmentData)}catch(t){console.error(t);return}finally{this.waiting=false}this.$emit("modifyTree",{id:t,parentId:e});this.close()},handleSaveModeChanged(t){this.saveMode=t},createDefaultSaveMode(t="DEPARTMENT"){if(t===T.EntityTypes.team){this.saveMode=b.addUsers}else{this.saveMode=b.moveUsers}},pickEditAnalytics(t,e){const s=this.departments.get(t);switch(this.entity){case"department":E.sendData({tool:"structure",category:"structure",event:"edit_dept_name",c_element:this.source,p1:(s==null?void 0:s.parentId)===e?"editHead_N":"editHeadDept_Y",p2:(s==null?void 0:s.name)===name?"editName_N":"editName_Y"});break;case"employees":{const{headsIds:t,deputiesIds:e,employeesIds:s}=this.calculateEmployeeIds();E.sendData({tool:"structure",category:"structure",event:"edit_dept_employee",c_element:this.source,p2:`headAmount_${t.length}`,p3:`secondHeadAmount_${e.length}`,p4:`employeeAmount_${s.length}`});break}default:break}},pickStepsAnalytics(){let t=null;switch(this.currentStep.id){case"department":t="create_dept_step1";break;case"employees":t="create_dept_step2";break;case"bindChat":t="create_dept_step3";break;case"teamRights":t="create_dept_step4";break;default:break}if(t){E.sendData({tool:"structure",category:"structure",event:t,c_element:this.source})}}},template:`\n\t\t<div class="chart-wizard">\n\t\t\t<div class="chart-wizard__dialog" :style="{ 'max-width': !isEditMode && isFirstStep ? '580px' : '843px' }">\n\t\t\t\t<div class="chart-wizard__head">\n\t\t\t\t\t<div class="chart-wizard__head_close" @click="closeWithConfirm(true)"></div>\n\t\t\t\t\t<p class="chart-wizard__head_title">{{ stepTitle }}</p>\n\t\t\t\t\t<p class="chart-wizard__head_descr" :class="{ '--first-step': isFirstStep, '--edit-mode': isEditMode }">\n\t\t\t\t\t\t{{ currentStep.title }}\n\t\t\t\t\t</p>\n\t\t\t\t\t<div class="chart-wizard__head_stages" v-if="!isFirstStep && !isEditMode">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-for="n in filteredSteps.length"\n\t\t\t\t\t\t\tclass="chart-wizard__head_stage"\n\t\t\t\t\t\t\t:class="{ '--completed': stepIndex >= (this.showEntitySelector ? n : n - 1), '--team': isTeamEntity }"\n\t\t\t\t\t\t></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="chart-wizard__content" :style="{ display: !isEditMode && isFirstStep ? 'block' : 'flex' }">\n\t\t\t\t\t<KeepAlive>\n\t\t\t\t\t\t<component\n\t\t\t\t\t\t\t:is="componentInfo.name"\n\t\t\t\t\t\t\tv-bind="componentInfo.params"\n\t\t\t\t\t\t\tv-on="{\n\t\t\t\t\t\t\t\tapplyData: onApplyData,\n\t\t\t\t\t\t\t\tsaveModeChanged: componentInfo.name === 'Employees' ? handleSaveModeChanged : undefined\n\t\t\t\t\t\t\t}"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t</component>\n\t\t\t\t\t</KeepAlive>\n\t\t\t\t\t<div v-if="hasTreePreview" class="chart-wizard__tree_container">\n\t\t\t\t\t\t<TreePreview\n\t\t\t\t\t\t\t:parentId="departmentData.parentId"\n\t\t\t\t\t\t\t:name="departmentData.name"\n\t\t\t\t\t\t\t:heads="departmentData.heads"\n\t\t\t\t\t\t\t:userCount="departmentData.userCount"\n\t\t\t\t\t\t\t:entityType="departmentData.entityType"\n\t\t\t\t\t\t\t:teamColor="departmentData.teamColor"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="chart-wizard__footer">\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-if="stepIndex > 0"\n\t\t\t\t\t\tclass="ui-btn ui-btn-light chart-wizard__button --back"\n\t\t\t\t\t\t@click="move('back')"\n\t\t\t\t\t\tdata-test-id="hr-company-structure_chart-wizard__back-button"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class="ui-icon-set --chevron-left"></div>\n\t\t\t\t\t\t<span class="chart-wizard__back-button-text">\n\t\t\t\t\t\t\t{{ loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_BACK_BTN') }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-show="stepIndex < visibleSteps.length - 1 && !isEditMode"\n\t\t\t\t\t\tclass="ui-btn ui-btn-primary ui-btn-round chart-wizard__button --next"\n\t\t\t\t\t\t:class="{ 'ui-btn-disabled': !isValidStep, 'ui-btn-light-border': isEditMode }"\n\t\t\t\t\t\t@click="move()"\n\t\t\t\t\t\tdata-test-id="hr-company-structure_chart-wizard__next-button"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_NEXT_BTN') }}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-show="isEditMode"\n\t\t\t\t\t\tclass="ui-btn ui-btn-primary ui-btn-round chart-wizard__button --next"\n\t\t\t\t\t\t:class="{ 'ui-btn-light-border': isEditMode }"\n\t\t\t\t\t\t@click="close(true)"\n\t\t\t\t\t\tdata-test-id="hr-company-structure_chart-wizard__discard-button"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_DISCARD_BTN') }}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-show="!isEditMode && stepIndex === visibleSteps.length - 1"\n\t\t\t\t\t\tclass="ui-btn ui-btn-primary ui-btn-round chart-wizard__button"\n\t\t\t\t\t\t:class="{ 'ui-btn-wait': waiting }"\n\t\t\t\t\t\t@click="create"\n\t\t\t\t\t\tdata-test-id="hr-company-structure_chart-wizard__create-button"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ createButtonText }}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-show="isEditMode"\n\t\t\t\t\t\tclass="ui-btn ui-btn-primary ui-btn-round chart-wizard__button --save"\n\t\t\t\t\t\t:class="{ 'ui-btn-wait': waiting, 'ui-btn-disabled': !isValidStep, }"\n\t\t\t\t\t\t@click="save"\n\t\t\t\t\t\tdata-test-id="hr-company-structure_chart-wizard__save-button"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ loc('HUMANRESOURCES_COMPANY_STRUCTURE_WIZARD_SAVE_BTN') }}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="chart-wizard__overlay"></div>\n\t\t</div>\n\t`};t.ChartWizard=z})(this.BX.Humanresources.CompanyStructure=this.BX.Humanresources.CompanyStructure||{},BX,BX.UI.Dialogs,BX.Vue3.Pinia,BX,BX.Cache,BX.UI.IconSet,BX,BX.UI.IconSet,BX,BX.Humanresources.CompanyStructure,BX,BX.UI.EntitySelector,BX.Humanresources.CompanyStructure,BX.Humanresources.CompanyStructure,BX.UI.Analytics,BX.Humanresources.CompanyStructure,BX.Humanresources.CompanyStructure);
//# sourceMappingURL=chart-wizard.bundle.map.js