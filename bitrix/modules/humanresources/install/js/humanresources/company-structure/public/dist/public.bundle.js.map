{"version":3,"file":"public.bundle.js","sources":["../src/public.js"],"sourcesContent":["import { Extension, Type, Uri } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport type { StructureOpenOptions } from './types';\n\nexport class Structure\n{\n\tstatic open(options: StructureOpenOptions = {}): void\n\t{\n\t\tconst settings = Extension.getSettings('humanresources.company-structure.public');\n\t\tconst baseUrl = settings.get('url');\n\t\tif (!baseUrl)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.#isCurrentPageStructureView(baseUrl))\n\t\t{\n\t\t\tconst url = (new Uri(baseUrl));\n\t\t\tthis.#appendParamsFromOptions(url, options);\n\n\t\t\tthis.#openSlider(url);\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#handleInPlaceStructureNavigation(options);\n\t}\n\n\tstatic #isCurrentPageStructureView(url: string): boolean\n\t{\n\t\treturn window.location.href.includes(url);\n\t}\n\n\tstatic #appendParamsFromOptions(url: Uri, options: StructureOpenOptions): Uri\n\t{\n\t\tif (Type.isInteger(options.focusNodeId))\n\t\t{\n\t\t\turl.setQueryParam('focusNodeId', options.focusNodeId);\n\t\t}\n\n\t\treturn url;\n\t}\n\n\tstatic #handleInPlaceStructureNavigation(options: StructureOpenOptions): void\n\t{\n\t\tif (options.focusNodeId)\n\t\t{\n\t\t\tEventEmitter.emit('HumanResources.CompanyStructure:focusNode', {\n\t\t\t\tnodeId: options.focusNodeId,\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic #openSlider(url: Uri): void\n\t{\n\t\ttop.BX.SidePanel.Instance.open(url.toString());\n\t}\n}\n"],"names":["Structure","open","options","settings","Extension","getSettings","baseUrl","get","url","Uri","window","location","href","includes","Type","isInteger","focusNodeId","setQueryParam","EventEmitter","emit","nodeId","top","BX","SidePanel","Instance","toString"],"mappings":";;;;;;CACgD;CAAA;CAAA;CAAA;AAGhD,CAAO,MAAMA,SAAS,CACtB;GACC,OAAOC,IAAI,CAACC,OAA6B,GAAG,EAAE,EAC9C;KACC,MAAMC,QAAQ,GAAGC,mBAAS,CAACC,WAAW,CAAC,yCAAyC,CAAC;KACjF,MAAMC,OAAO,GAAGH,QAAQ,CAACI,GAAG,CAAC,KAAK,CAAC;KACnC,IAAI,CAACD,OAAO,EACZ;OACC;;KAGD,IAAI,yCAAC,IAAI,4DAA6BA,OAAO,CAAC,EAC9C;OACC,MAAME,GAAG,GAAI,IAAIC,aAAG,CAACH,OAAO,CAAE;OAC9B,4CAAI,sDAA0BE,GAAG,EAAEN,OAAO;OAE1C,4CAAI,4BAAaM,GAAG;OAEpB;;KAGD,4CAAI,wEAAmCN,OAAO;;CAgChD;CAAC,sCA7BmCM,GAAW,EAC9C;GACC,OAAOE,MAAM,CAACC,QAAQ,CAACC,IAAI,CAACC,QAAQ,CAACL,GAAG,CAAC;CAC1C;CAAC,mCAE+BA,GAAQ,EAAEN,OAA6B,EACvE;GACC,IAAIY,cAAI,CAACC,SAAS,CAACb,OAAO,CAACc,WAAW,CAAC,EACvC;KACCR,GAAG,CAACS,aAAa,CAAC,aAAa,EAAEf,OAAO,CAACc,WAAW,CAAC;;GAGtD,OAAOR,GAAG;CACX;CAAC,4CAEwCN,OAA6B,EACtE;GACC,IAAIA,OAAO,CAACc,WAAW,EACvB;KACCE,6BAAY,CAACC,IAAI,CAAC,2CAA2C,EAAE;OAC9DC,MAAM,EAAElB,OAAO,CAACc;MAChB,CAAC;;CAEJ;CAAC,sBAEkBR,GAAQ,EAC3B;GACCa,GAAG,CAACC,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACvB,IAAI,CAACO,GAAG,CAACiB,QAAQ,EAAE,CAAC;CAC/C;CAAC,sBApDWzB,SAAS;GAAA;CAAA;CAAA,sBAATA,SAAS;GAAA;CAAA;CAAA,sBAATA,SAAS;GAAA;CAAA;CAAA,sBAATA,SAAS;GAAA;CAAA;;;;;;;;"}